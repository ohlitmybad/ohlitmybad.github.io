var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

if("undefined"==typeof SF)var SF={};"undefined"==typeof SF._st&&(SF._st={usr:{}});
SF._is={cookie:{},robot:/google|slurp|msnbot|facebook/i.test(navigator.userAgent),android:/android/i.test(navigator.userAgent),mobile:/mobile/i.test(navigator.userAgent),tablet:/ipad|tablet|android(?!.*mobile)|windows(?!.*phone)(.*touch)|kindle|playbook|silk|puffin(?!.*(IP|AP|WP))/i.test(navigator.userAgent),phone:/ipod|iphone|blackberry|nokia|phone|mobile safari|iemobile|symbian|android.*mobile/i.test(navigator.userAgent),IE:"Microsoft Internet Explorer"==navigator.appName&&/MSIE ([0-9]{1,}[\.0-9]{0,})/.test(navigator.userAgent)?
parseFloat(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)[1]):0,Edge:/Edge\//.test(navigator.userAgent)?parseFloat(/Edge\/([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)[1]):0,FF:/Firefox\//.test(navigator.userAgent)?parseFloat(/Firefox\/([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)[1]):0,Chrome:/Chrome\//.test(navigator.userAgent)?parseFloat(/Chrome\/([0-9]{1,})/.exec(navigator.userAgent)[1]):0,Safari:!/Chrome\//.test(navigator.userAgent)&&/Safari\//.test(navigator.userAgent)?/Version\//.test(navigator.userAgent)?
parseFloat(/Version\/([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)[1]):2:0,Opera:/Opera\//.test(navigator.userAgent)?parseFloat((/Opera\/9.80/.test(navigator.userAgent)?/Version\/([0-9]{1,}[\.0-9]{0,})/:/Opera\/([0-9]{1,}[\.0-9]{0,})/).exec(navigator.userAgent)[1]):0,WebKit:/WebKit\//.test(navigator.userAgent),file:!!window.FileReader,hashdelim:"undefined"!=typeof mfmwix?"_":"/",lim:100,cdn:"//cdn.membershipworks.com/",evt:"//d1tif55lvfk8gc.cloudfront.net/",itm:"//d3u3ttaqhh9owx.cloudfront.net/",
cmm:"//d2q63fl5oc33j2.cloudfront.net/",spc:{aed:"&#x62f;.&#x625;",afn:"&#x60b;",all:"Lek",amd:"&#1332;",ang:"&#x192;",aoa:"Kz",ars:"$",aud:"$",awg:"&#x192;",azn:"M&#x430;H",bam:"KM",bbd:"$",bdt:"Tk",bgn:"&#x43b;&#x432;",bmd:"$",bnd:"$",bob:"$b",brl:"R$",bsd:"$",bwp:"P",bzd:"BZ$",cad:"$",cdf:"FC",chf:"CHF",cny:"&#xa5;",cop:"$",crc:"&#x20a1;",cve:"Esc",czk:"K&#x10d;",dkk:"kr",dop:"RD$",dzd:"DA",eek:"kr",egp:"&#xa3;",etb:"Br",eur:"&euro;",fjd:"$",fkp:"&#xa3;",gbp:"&#xa3;",gel:"&#4314;",gip:"&#xa3;",
gmd:"D",gtq:"Q",gyd:"$",hkd:"$",hnl:"L",hrk:"kn",htg:"G",huf:"Ft",idr:"Rp",ils:"&#x20aa;",inr:"&#x20B9;",isk:"kr",jmd:"J$",jpy:"&#xa5;",kes:"KSh",kgs:"&#x43b;&#x432;",khr:"&#x17db;",kyd:"$",kzt:"&#x43b;&#x432;",lak:"&#x20ad;",lbp:"&#xa3;",lkr:"&#x20a8;",lrd:"$",lsl:"L",ltl:"Lt",lvl:"Ls",mad:"&#1583;.&#1605;.",mdl:"L",mkd:"&#x434;&#x435;&#x43d;",mnt:"&#x20ae;",mop:"MOP$",mro:"UM",mur:"&#x20a8;",mvr:"Rf",mwk:"MK",mxn:"$",myr:"RM",mzn:"MT",nad:"$",ngn:"&#x20a6;",nio:"C$",nok:"kr",npr:"&#x20a8;",nzd:"$",
omr:"&#xfdfc;",pab:"B/.",pen:"S/.",pgk:"K",php:"&#x20b1;",pkr:"&#x20a8;",pln:"z&#x142;",qar:"QR",ron:"lei",rsd:"&#x414;&#x438;&#x43d;.",rub:"&#x440;&#x443;&#x431;",sar:"&#xfdfc;",sbd:"$",scr:"&#x20a8;",sek:"kr",sgd:"$",shp:"&#xa3;",sll:"Le",sos:"S",srd:"$",std:"Db",svc:"$",szl:"L",thb:"&#xe3f;",tjs:"TJS",top:"T$","try":"TRY",ttd:"TT$",twd:"NT$",tzs:"TZS",uah:"&#x20b4;",ugx:"USh",usd:"$",uyu:"$U",uzs:"&#x43b;&#x432;",vef:"Bs",wst:"WS$",xcd:"$",yer:"&#xfdfc;",zar:"R",zmw:"ZK"},szc:"bif clp djf gnf jpy kmf krw mga pyg rwf ugx vnd vuv xaf xof xpf".split(" "),
cal:"repeating-linear-gradient(-45deg, #ccc 0 5px, #bbb 5px 10px);#60bb46;#d1512e;#e0c34f;#00adef;#5b5f9e;#bf5c95;#6d6e72;#66c1d6".split(";"),calAria:"hidden green red yellow blue purple violet gray aqua".split(" "),day:"Sun Mon Tue Wed Thu Fri Sat".split(" "),mon:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),atg:{xro:"Xero",qbo:"QuickBooks",iif:"QuickBooks"},sandbox:[10001,15230,17730,20271,23124]};SF._is.Edge&&(SF._is.Chrome=SF._is.WebKit=0);
SF._is.edit=(!SF._is.IE||8<SF._is.IE)&&"contentEditable"in document.documentElement;SF._is.touch="ontouchstart"in document;SF._is.drag=!SF._is.mobile&&(7<=SF._is.IE||"draggable"in document.createElement("a"));SF._is.drop=SF._is.drag&&SF._is.file&&!SF._is.IE&&!SF._is.Edge;
SF._is.upload=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var a=document.createElement("input");a.type="file";return!a.disabled};SF._is.iframe=function(){try{return window!==window.parent?!0:!1}catch(a){return!0}};SF.r=function(a){a.pageId&&(SF._is.page||(SF._is.page={}),SF._is.page[a.pageId]=a)};
"undefined"==typeof SF.d&&"undefined"!=typeof WeakMap&&(SF.d=new WeakMap);"undefined"==typeof SF.e&&"undefined"!=typeof WeakMap&&(SF.e=new WeakMap);SF.$=function(a){return null==a?null:a instanceof Node?a:a instanceof Event&&a.currentTarget?a.currentTarget:"object"==typeof a&&a.target&&a.target.targetElm?a.target.targetElm:"string"!=typeof a?null:a.match(/#|\.|\[/)?document.querySelector(a):document.getElementById(a)};
SF.get=function(a,b){b=void 0===b?!1:b;var c;if(!(a=SF.$(a)))return"";SF.lib.ma(a,"label.SFchk")&&(a=a.firstChild);if(b)return a.getAttribute(b);if("INPUT"==a.nodeName&&"file"==a.getAttribute("type"))return a.files&&a.files.length?a.hasAttribute("multiple")?a.files:a.files[0]:null;if("INPUT"!=a.nodeName||"checkbox"!=a.getAttribute("type")&&"radio"!=a.getAttribute("type")){if("INPUT"==a.nodeName&&"count"==a.getAttribute("data-type"))return(c=a.value.replace(/[^0-9\-]/g,""))?parseInt(c):"";if("INPUT"==
a.nodeName&&"price"==a.getAttribute("data-type")){c=a.value.replace(/[^0-9\-\.]/g,"");if(!c)return"";var d=(100*(c=parseFloat(c))).toPrecision(14).split(".");return(parseInt(d[0])+(1<d.length&&5<=parseInt(d[1].slice(0,1))?0<c?1:-1:0))/100}if("INPUT"==a.nodeName&&"number"==a.getAttribute("data-type"))return(c=a.value.replace(/[^0-9\-\.]/g,""))?parseFloat(c):"";if("INPUT"==a.nodeName&&"date"==a.getAttribute("data-type"))return(c=a.nextSibling&&SF.lib.s(a.nextSibling)&&"time"==a.nextSibling.getAttribute("data-type")&&
!a.nextSibling.getAttribute("name")&&a.nextSibling.value?a.value?new Date(a.value+" "+a.nextSibling.value.replace(/\B([ap]m)/," $1")):"":new Date(a.value))&&c.getTime()?parseInt(c.getTime()/1E3):"";if("INPUT"==a.nodeName&&"time"==a.getAttribute("data-type"))return a.value;if("INPUT"==a.nodeName||"SELECT"==a.nodeName)return SF.lib.fh(a.value);if("TEXTAREA"==a.nodeName)return a.id&&SF._is.edit&&"undefined"!=typeof tinymce&&(c=tinymce.get(a.id))&&"undefined"!=typeof c.getContent?SF.lib.fh(c.getContent()):
SF.lib.ma(a,".SFhtm")?SF.lib.fh(a.value.replace(/\n/g,"<br>")):SF.lib.ma(a,".SFraw")?SF.lib.fj(a.value):SF.lib.fr(a.value,{allowed:["br"]});if(SF.lib.ma(a,".SFrcp")){c="";a=a.querySelectorAll(".SFinr");for(b=0;b<a.length;b++)a[b].hasAttribute("name")?(b||(c={}),"true"==a[b].getAttribute("aria-checked")&&(d=SF.lib.ds(a[b]),c[a[b].getAttribute("name")]="undefined"==typeof d.value?"":d.value)):a[b].hasAttribute("value")&&(b||(c=[]),"true"==a[b].getAttribute("aria-checked")&&c.push("number"==a[b].getAttribute("value-type")?
parseFloat(a[b].getAttribute("value")):a[b].getAttribute("value")));return c}return SF.lib.ma(a,".SFinr")?"true"!=a.getAttribute("aria-checked")?"":a.hasAttribute("name")?(d=SF.lib.ds(a),"undefined"==typeof d.value?"":d.value):(d=a.getAttribute("value"))?"number"==a.getAttribute("value-type")?parseFloat(d):d:"":a.innerHTML}return a.hasAttribute("value")?"number"==a.getAttribute("value-type")?a.checked?parseFloat(a.getAttribute("value")):"":a.checked?a.getAttribute("value"):"":a.checked?1:0};
SF.set=function(a){var b=!1,c,d;var e=!1;SF._st.admin&&!SF.$("SFusrpne")&&(e=!0);if(a=SF.$(a)){SF.lib.ma(a,"label.SFchk")&&(a=a.firstChild);if(3==arguments.length){b=arguments[1];var f=arguments[2]}else f=2==arguments.length?arguments[1]:"";if(b)null===f?a.removeAttribute(b):a.setAttribute(b,f.toString());else if("INPUT"!=a.nodeName||"termscheckbox"!=a.getAttribute("data-type")&&"termssignature"!=a.getAttribute("data-type"))if("INPUT"==a.nodeName&&"file"==a.getAttribute("type"))f?"object"==typeof f&&
f.fnm&&f.url&&setTimeout(function(){a.previousSibling&&SF.d.get(a.previousSibling)||SF.lib.i(a.parentNode,[{nodeName:"button",className:"SFlnk",onclick:SF.lib.fl}],a);a.previousSibling.innerHTML=f.fnm;SF.d.set(a.previousSibling,f);SF.lib.s(a.previousSibling,!0);SF.lib.s(a,!1)},100):(a.value="",a.previousSibling&&SF.d.get(a.previousSibling)&&(SF.lib.dn(a.previousSibling),SF.lib.s(a,!0)));else if("INPUT"!=a.nodeName||"checkbox"!=a.getAttribute("type")&&"radio"!=a.getAttribute("type"))if("INPUT"==a.nodeName&&
"count"==a.getAttribute("data-type"))a.value="number"==typeof f?f.toFixed(0):f.replace(/[^0-9\-]/g,"");else if("INPUT"==a.nodeName&&"price"==a.getAttribute("data-type"))a.value=("number"==typeof f?SF.lib.fa(f):f).replace(/[^0-9\-\.]/g,"");else if("INPUT"==a.nodeName&&"number"==a.getAttribute("data-type"))a.value="number"==typeof f?f.toString():f.replace(/[^0-9\-\.]/g,"");else if("INPUT"==a.nodeName&&"date"==a.getAttribute("data-type"))f?(c=new Date("number"==typeof f?parseInt(1E3*f):f.replace(/\s?(Mon|Tue|Wed|Thu|Fri|Sat|Sun)[^\s]*\s?/i,
"")),c.getTime())?("string"==typeof f&&1930>c.getFullYear()&&f.match(/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{2}$/)&&c.setFullYear(c.getFullYear()+100),a.value=c.toDateString().replace(/\s?(Mon|Tue|Wed|Thu|Fri|Sat|Sun)[^\s]*\s?/i,"")):a.value="":(c=!1,a.value=""),a.nextSibling&&"time"==a.nextSibling.getAttribute("data-type")&&!a.nextSibling.getAttribute("name")&&(a.nextSibling.value=c&&c.getTime()&&"12:00am"!=SF.lib.fg(c)?SF.lib.fg(c):"",a.nextSibling.hasAttribute("aria-invalid")&&SF.v(a.nextSibling));else if("INPUT"==
a.nodeName&&"time"==a.getAttribute("data-type"))a.value="number"==typeof f?SF.lib.fg(f):f;else if("SELECT"==a.nodeName&&"month"==a.getAttribute("data-type"))a.value=f.toString(),a.oninput({currentTarget:a});else if("SELECT"==a.nodeName&&"monthday"==a.getAttribute("data-type"))a.value=f.toString();else if("INPUT"==a.nodeName)a.value="number"==typeof f?f.toString():f?SF.lib.fu(f):"";else if("SELECT"==a.nodeName)(a.value=f)&&a.value!=f&&(a.value=SF.lib.fu(f).trim());else if("TEXTAREA"==a.nodeName)"number"==
typeof f&&(f=f.toString()),a.id&&SF._is.edit&&"undefined"!=typeof tinymce&&(c=tinymce.get(a.id))&&"undefined"!=typeof c.setContent?c.setContent(f?f:""):SF.lib.ma(a,".SFhtm")?a.value=f?SF.lib.fu(f).replace(/<br>/g,"\n"):"":SF.lib.ma(a,".SFraw")?a.value=f?SF.lib.fj(f):"":a.value=f?SF.lib.ft(f,{allowed:["br"]}):"";else if(SF.lib.ma(a,".SFrcp"))if(e=a.querySelectorAll(".SFinr"),"object"!=typeof f)for(d=0;d<e.length;d++)(c=e[d].getAttribute("value"))&&SF.set(e[d],c==f?!0:!1);else if(null==f)for(d=0;d<
e.length;d++)SF.set(e[d],null);else if(Array.isArray(f))for(d=0;d<e.length;d++)(c=e[d].getAttribute("value"))&&SF.set(e[d],0<=f.indexOf(c)?!0:!1);else for(d=0;d<e.length;d++)(c=e[d].getAttribute("name"))&&SF.set(e[d],"undefined"==typeof f[c]?null:f[c]);else SF.lib.ma(a,".SFinr")?a.hasAttribute("value")?a.setAttribute("aria-checked",f?!0:!1):a.hasAttribute("name")&&(a.setAttribute("aria-checked",null==f?!1:!0),SF.lib.ds(a,null==f?{}:{value:f},{only:["value"]})):a.innerHTML="number"==typeof f?f.toString():
f?f:"";else a.hasAttribute("value")&&"boolean"!=typeof f&&""!==f?"number"==a.getAttribute("value-type")?a.checked=f==parseFloat(a.getAttribute("value"))?!0:!1:a.checked=f==a.getAttribute("value")?!0:!1:a.checked=f&&"0"!==f?!0:!1;else f&&(c=SF.lib.n({className:"SFemp",childNodes:[{nodeName:"span",innerHTML:"Acknowledged"},"object"==typeof f&&f._ts?{nodeName:"span",innerHTML:SF.lib.fd(f._ts)+" "+SF.lib.fg(f._ts)}:null,"object"==typeof f&&f.sig?{nodeName:"span",style:{textDecoration:"underline"},innerHTML:f.sig}:
null,"object"==typeof f&&e&&(f.nam||f.ipa)?{nodeName:"span",innerHTML:(f.nam?"by "+f.nam+" ":"")+(f.nam&&f.ipa?" ":"")+(f.ipa?"from IP address "+f.ipa:"")}:null,"string"!=typeof f||"1"==f?null:{nodeName:"span",style:{textDecoration:"underline"},innerHTML:f}]}),"termscheckbox"==a.getAttribute("data-type")?a.parentNode.parentNode.replaceChild(SF.lib.n({childNodes:[a.nextSibling.nextSibling,c]}),a.parentNode):a.parentNode.replaceChild(c,a));!b&&a.hasAttribute("aria-invalid")&&SF.v(a)}};
SF.v=function(a,b){b=void 0===b?{}:b;var c,d,e=!1;if(!(c=SF.$(a)))return!1;var f=c;if("INPUT"==c.nodeName&&"file"==c.getAttribute("type")){var h=0;var g=[];if(c.hasAttribute("required")&&!c.files.length)e="Required";else if(!c.hasAttribute("multiple")&&1<c.files.length)e="Multiple files not allowed";else if(20<c.files.length)e="Too many attachments (limit 20)";else{for(d=0;d<c.files.length;d++)g.push(c.files[d].name),h+=c.files[d].size;5242800<h&&(e=(1<c.files.length?"Attachments":"File")+" too large (5MB limit)")}c.previousSibling&&
SF.lib.ma(c.previousSibling,".SFfillst")&&(e&&b.alert||!g.length?c.previousSibling.innerHTML="Click"+(SF._is.drop?" or drop file":"")+" here to add "+(c.hasAttribute("multiple")?"attachments":"file"):(SF.lib.cn(c.previousSibling),SF.lib.i(c.previousSibling,[{nodeName:"i",className:"SFicoatc"},{nodeName:"span",innerHTML:g.join(", ")}])));if(e&&b.alert)return c.value=null,SF.lib.alr(e),!1}else if("INPUT"!=c.nodeName||"checkbox"!=c.getAttribute("type")&&"radio"!=c.getAttribute("type"))if("INPUT"==c.nodeName&&
"date"==c.getAttribute("data-type"))d=c.value,c.hasAttribute("required")&&!d?e="Required":d&&!(new Date(d)).getTime()?e="Not valid":c.nextSibling&&SF.lib.s(c.nextSibling)&&"time"==c.nextSibling.getAttribute("data-type")&&!c.nextSibling.getAttribute("name")&&c.nextSibling.value&&(d?SF.v(c.nextSibling):e="Not valid");else if("INPUT"==c.nodeName&&"time"==c.getAttribute("data-type"))d=c.value,c.hasAttribute("required")&&!d?e="Required":c.value&&!c.value.match(/^[012]?[0-9]:[0-5][0-9](am|AM|pm|PM)?$/)&&
(e="Not valid");else if("SELECT"==c.nodeName)d=c.value,c.hasAttribute("required")&&!d&&(e="Required");else if("INPUT"==c.nodeName||"TEXTAREA"==c.nodeName){if("TEXTAREA"==c.nodeName?c.id&&SF._is.edit&&"undefined"!=typeof tinymce&&(g=tinymce.get(c.id))&&"undefined"!=typeof g.getContent?(d=SF.lib.fh(g.getContent()),f=g.editorContainer):d=SF.lib.ma(c,".SFhtm")?SF.lib.fh(c.value.replace(/\n/g,"<br>")):SF.lib.ma(c,".SFraw")?SF.lib.fj(c.value):SF.lib.fr(c.value,{allowed:["br"]}):d=c.value,c.hasAttribute("required")&&
!d?e="Required":d&&(c.getAttribute("data-rxp")&&(g=new RegExp(c.getAttribute("data-rxp")))&&!g.test(d)?e="Not valid":c.getAttribute("num-min")&&(isNaN(g=parseFloat(SF.lib.ft(d).replace(/[^0-9\-\.]/g,"")))||g<parseFloat(c.getAttribute("num-min")))?e=isNaN(g)?"Not valid":"Minimum value "+c.getAttribute("num-min"):c.getAttribute("num-max")&&(isNaN(g=parseFloat(SF.lib.ft(d).replace(/[^0-9\-\.]/g,"")))||g>parseFloat(c.getAttribute("num-max")))&&(e=isNaN(g)?"Not valid":"Maximum value "+c.getAttribute("num-max"))),
d&&"count"==c.getAttribute("data-type")?c.value=d.replace(/[^0-9\-]/g,""):!d||"price"!=c.getAttribute("data-type")&&"number"!=c.getAttribute("data-type")||(c.value=d.replace(/[^0-9\-\.]/g,"")),a instanceof Event&&!c.hasAttribute("interacted")){if(c==c.parentNode.querySelector(":focus"))return!0;c.setAttribute("interacted","")}}else{h=0;a=!1;f=c.querySelectorAll("input[name],textarea[name],select[name]");for(d=0;d<f.length;d++)SF.lib.iv(f[d],c)&&("INPUT"==f[d].nodeName&&"file"==f[d].getAttribute("type")?
SF.v(f[d])?h+=(g=SF.get(f[d]))?g.size:0:(e=!0,a||(a=f[d])):("INPUT"!=f[d].nodeName||"checkbox"!=f[d].getAttribute("type")&&f[d].getAttribute("type"),SF.v(f[d])||(e=!0,a||(a=f[d]))));e?a&&("INPUT"!=a.nodeName||"checkbox"!=a.getAttribute("type")&&"radio"!=a.getAttribute("type")?("TEXTAREA"==a.nodeName&&a.id&&SF._is.edit&&"undefined"!=typeof tinymce&&(g=tinymce.get(a.id))&&(a=g.getContainer()),a.scrollIntoView({behavior:"instant",block:"center"}),SF.lib.fc(a)):(SF.lib.fc(a),SF.lib.alr("Must be checked",
{target:a,placement:"v"}))):25E6<h&&(SF.lib.alr("Max upload limit is 25MB, please reduce number of files or upload them at different times"),e=!0);return!e}else if(d=c.checked,c.hasAttribute("required")&&!d)return!1;a=f.nextSibling&&(SF.lib.ma(f.nextSibling,".SFind, .SFinm")?f.nextSibling.nextSibling:f.nextSibling);if(e)return c.getAttribute("data-err")&&(e=c.getAttribute("data-err")),c.setAttribute("aria-invalid","true"),c.setAttribute("aria-description",e),f!=c&&(f.setAttribute("aria-invalid","true"),
f.setAttribute("aria-description",e)),b.alert?SF.lib.alr(e):a&&"SFerr"==a.className?a.innerHTML=e:(c=f.getBoundingClientRect(),SF.lib.i(f.parentNode,[e=SF.lib.n({nodeName:"span",className:"SFerr",style:{display:"inline",padding:"0",margin:"0"},innerHTML:e})],a),g=e.getBoundingClientRect(),e.style.marginLeft=c.left-g.left+"px",e.style.marginTop=c.bottom-g.top+"px"),!1;c.hasAttribute("aria-invalid")&&(c.removeAttribute("aria-invalid"),c.removeAttribute("aria-description"),f!=c&&(f.removeAttribute("aria-invalid"),
f.removeAttribute("aria-description")),a&&"SFerr"==a.className&&SF.lib.dn(a));return!0};SF.lib={};SF.lib.div=function(a,b){b.nodeName=a;return SF.lib.n(b)};SF.lib.no=function(){};SF.lib.pl=function(a,b,c){c=void 0===c?" ":c;return a.length<b?Array(Math.ceil((b-a.length)/c.length)+1).join(c).slice(0,b-a.length)+a:a};
SF.lib.ma=function(a,b){var c=null,d=!1;if(!(a=SF.$(a)))return!1;if(a.matches)return a.matches(b);a.parentNode||(c=SF.lib.n({childNodes:[a]}));var e=(a.parentNode||c).querySelectorAll(b);for(b=e.length-1;0<=b;b--)if(e[b]==a){d=!0;break}c&&c.removeChild(a);return d};
SF.lib.re=function(a,b){b=void 0===b?!1:b;var c;if("string"==typeof a){var d="_self";var e="@referrer"==a?document.referrer:a}else if(a instanceof Element)d=a.target||"_self",e=a.href;else if(e instanceof Event&&e.currentTarget)a.stopPropagation(),a.preventDefault(),d=a.currentTarget.target||"_self",e=a.currentTarget.href;else return;if(e&&location.href.split("#")[0].replace(/^(http[s]?:)?\/\//,"")!=e.replace(/^(http[s]?:)?\/\//,"")){if(0<=e.indexOf(location.hostname))0>e.indexOf("//")&&(e="//"+e);
else if("http:"!=location.protocol){a=document.querySelectorAll("meta");for(c=a.length-1;0<=c&&("undefined"==typeof a[c].name||"referrer"!=a[c].name.toLowerCase());c--);0>c&&(c=document.createElement("meta"),c.name="referrer",c.content="origin",SF.lib.i(document.head,[c]))}SF.lib.tr("link",{url:e});0==e.indexOf("#")||0<e.indexOf("#")&&location.href.split("#")[0].replace(/^(http[s]?:)?\/\//,"")==e.split("#")[0].replace(/^(http[s]?:)?\/\//,"")?location.hash=e.split("#")[1]:SF._is.iframe()?window.open(e,
"_top"):b&&"_self"==d?location.replace(e):window.open(e,d)}};
SF.lib.sh=function(a,b){SF._st.hsh=a;(new Promise(function(c){var d;0<=window.location.href.indexOf("#")&&"complete"==document.readyState?c():d=setInterval(function(){"complete"==document.readyState&&(clearInterval(d),c())},1E3)})).then(function(){if(SF._st.hsh)if(b&&"undefined"!=typeof history&&"function"==typeof history.replaceState)try{history.replaceState(null,null,window.location.href.split("#")[0]+"#"+SF._st.hsh)}catch(c){}else if("undefined"!=typeof history&&"function"==typeof history.replaceState)try{history.pushState(null,
null,window.location.href.split("#")[0]+"#"+SF._st.hsh)}catch(c){}else window.location.hash="#"+SF._st.hsh})};
SF.lib.fc=function(a){var b;if((a=SF.$(a))&&a!=document.body){if(a.hasAttribute("aria-modal"))var c=a;else if(a.hasAttribute("tabindex")||0<=["INPUT","TEXTAREA","SELECT","BUTTON","A"].indexOf(a.nodeName.toUpperCase()))c=a;else if((b=a.querySelector("h1"))&&SF.lib.iv(b))c=b;else if(c=a,a=a.querySelectorAll('h2,h3,h4,input,textarea,select,button,a,[role="tablist"],[tabindex]'),a.length)for(b=0;b<a.length;b++)if(SF.lib.iv(a[b])){c=a[b];break}c&&(0>["INPUT","TEXTAREA","SELECT","BUTTON","A"].indexOf(c.nodeName.toUpperCase())&&
!c.hasAttribute("tabindex")&&c.setAttribute("tabindex","-1"),"TEXTAREA"==c.nodeName&&c.id&&SF._is.edit&&"undefined"!=typeof tinymce&&(b=tinymce.get(c.id))&&(c=b),document.activeElement&&document.activeElement==c||c.focus())}};
SF.lib.fn=function(a){var b;if(a=SF.$(a)||document.activeElement){var c=SF.$("SFctr").querySelectorAll('input,textarea,select,button,a,[tabindex="0"]');var d=!1;for(b=0;b<c.length;b++)if(c[b]==a)d=!0;else if(d&&SF.lib.iv(c[b])&&!c[b].hasAttribute("disabled")){SF.lib.fc(c[b]);break}}};SF.lib.gq=function(a){var b;if(window.location.search){var c=window.location.search.slice(1).split("&");for(b=0;b<c.length;b++)if(0<=c[b].indexOf("=")&&(c[b]=c[b].split("="))&&decodeURIComponent(c[b][0])==a)return decodeURIComponent(c[b][1])}return null};
SF.lib.gc=function(a){return RegExp("^"+a+"=[^;]*|\\s"+a+"=[^;]*").test(document.cookie)?decodeURIComponent(document.cookie.match(RegExp("^"+a+"=[^;]*|\\s"+a+"=[^;]*"))[0].split("=")[1].replace(/\s|\+/,"")):null};SF.lib.sc=function(a,b){if(null===b)try{document.cookie=a+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}catch(c){}else try{document.cookie=a+"="+encodeURIComponent(b)+";path=/;SameSite=Strict;"}catch(c){}};
SF.lib.gs=function(){var a=SF.lib.gc("SFSF");null==a&&"undefined"!=typeof SF._st._sf&&(a=SF._st._sf);null==a&&(a="");"undefined"==typeof SF._st._sf?SF._st._sf=a:SF._st._sf!=a&&window.location.reload(!0);return SF._st._sf};SF.lib.ss=function(a){!0===a?(a=SF.lib.gc("SFSF"),null!=a&&(SF._st._sf=a)):a?(SF._st._sf=a,SF.lib.sc("SFSF",a)):(SF._st._sf="",SF.lib.sc("SFSF",null))};
SF.lib.tr=function(a,b){if("undefined"!=typeof gtag)switch(a){case "link":if(b.url)try{gtag("event","click",{link_url:b.url})}catch(c){}break;case "pageview":if(b.url)try{gtag("event","page_view",{page_location:b.url})}catch(c){}break;case "search":if(b.tag)try{gtag("event","search",{search_term:b.tag})}catch(c){}}if("undefined"!=typeof _gaq)switch(a){case "link":if(b.url)try{_gaq.push(["_link",b.url])}catch(c){}break;case "pageview":if(b.url)try{_gaq.push(["_trackPageview",b.url])}catch(c){}}if("undefined"!=
typeof fbq)switch(a){case "pageview":if(b.url&&0<b.url.indexOf("#"))try{fbq("trackCustom","AjaxUrl",{url:b.url.slice(b.url.indexOf("#")+1)})}catch(c){}}};
SF.lib.s=function(a,b){var c;"string"==typeof a&&a.match(/#|\.|\[/)&&(a=document.querySelectorAll(a));if(a instanceof Array||a instanceof NodeList){for(c=0;c<a.length;c++)if(1==arguments.length){if(SF.lib.s(a[c]))return!0}else SF.lib.s(a[c],b);return 1==arguments.length?!1:b?!0:!1}if(!(a=SF.$(a)))return!1;a.id&&"TEXTAREA"==a.nodeName&&SF._is.edit&&"undefined"!=typeof tinymce&&(c=tinymce.get(a.id))&&"undefined"!=typeof c.editorContainer&&(a=c.editorContainer);1!=arguments.length&&(a.style.display=
null===b?"none"==a.style.display?"":"none":b?"":"none");return"none"==a.style.display?!1:!0};SF.lib.iv=function(a,b){(b=void 0===b?null:b)||(b=SF.$("SFctr"));for(a=SF.$(a);a&&a!=b;a=a.parentNode)if(!SF.lib.s(a))return!1;return a?!0:!1};SF.lib.tc=function(a){if(!(a=SF.$(a)))return null;SF.lib.ma(a,"label.SFchk")&&(a=a.firstChild);if(!a||"INPUT"!=a.nodeName||"checkbox"!=a.getAttribute("type")&&"radio"!=a.getAttribute("type"))return null;a.checked=a.checked?!1:!0;return SF.get(a)};
SF.lib.e=function(a,b){var c=!1,d,e,f,h=!1,g=!1;if(c=SF.$(a)){for(d=c;d&&(!(e=SF.d.get(d))||!e.editor);d=d.parentNode);if(d){var k="lst"==d.id.slice(-3)?d.id.slice(0,-3):d.id;for(a=d.firstChild;a;a=a.nextSibling)if("form"==a.getAttribute("role")||a.querySelector('[role="form"]')){if(b&&(a==c||a.contains(c)))return a.nextSibling;b||c!=d&&a!=c&&!a.contains(c)||(a=h=a.nextSibling,SF.lib.dn(a.previousSibling),SF.lib.s(a,!0))}else if(a==c||a.contains(c))g=a;if(g){if(SF.lib.s(k+"btx",!1),f=e.editor({currentTarget:g}))return f.style.opacity=
0,f.style.transition="opacity .3s",SF.lib.i(d,[f],g),SF.lib.s(g,!1),setTimeout(function(){f.style.opacity=1;SF.lib.fc(f)},20),f}else if(h)return SF.lib.s(k+"btx",!d.querySelector('[role="form"]')),SF.lib.fc(h),h}}};SF.lib.cb=function(a){a=SF.lib.n({nodeName:"textarea",innerHTML:a});SF.lib.i(document.body,[a]);a.select();document.execCommand("copy");SF.lib.dn(a)};
SF.lib.fe=function(a,b){var c;"string"==typeof a&&(a=document.querySelectorAll(a));if((a instanceof Array||a instanceof NodeList)&&"function"==typeof b)for(c=a.length-1;0<=c;c--)a[c]instanceof Element&&b(a[c])};SF.lib.fp=function(a,b){for(a=SF.$(a);a&&!SF.lib.ma(a,b);a=a.parentElement);return a};
SF.lib.c=function(a,b){b=void 0===b?{only:!1,exclude:!1}:b;var c;if(Array.isArray(a)||a instanceof NodeList){var d=[];for(c=0;c<a.length;c++)(!b.only||0<=b.only.indexOf(c))&&(!b.exclude||0>b.exclude.indexOf(c))&&d.push(SF.lib.c(a[c]))}else if(a instanceof Date)d=new Date(a.getTime());else if("object"!=typeof a||null==a||a instanceof Node||a instanceof Event)d=a;else for(c in d={},a)(!b.only||0<=b.only.indexOf(c))&&(!b.exclude||0>b.exclude.indexOf(c))&&(d[c]=SF.lib.c(a[c]));return d};
SF.lib.me=function(){var a,b;if(!arguments.length)return null;if(Array.isArray(arguments[0])){var c=[];for(a=0;a<arguments.length;a++)if(Array.isArray(arguments[a]))for(b=0;b<arguments[a].length;b++)0>c.indexOf(arguments[a][b])&&c.push(arguments[a][b]);else 0>c.indexOf(arguments[a])&&c.push(arguments[a])}else for(c={},a=0;a<arguments.length;a++)for(b in arguments[a])c[b]="object"==typeof c[b]&&"object"==typeof arguments[a][b]?SF.lib.me(c[b],arguments[a][b]):arguments[a][b];return c};
SF.lib.ml=function(a,b,c){c=void 0===c?{only:!1,exclude:!1}:c;var d;if(b)for(d in b)(!c.only||0<=c.only.indexOf(d))&&(!c.exclude||0>c.exclude.indexOf(d))&&(null==b[d]?delete a[d]:d in a?"object"!=typeof a[d]||"undefined"==typeof a[d].ad1&&"undefined"==typeof a[d].ad2&&"undefined"==typeof a[d].con?"object"!=typeof b[d]||"undefined"==typeof b[d].ad1&&"undefined"==typeof b[d].ad2&&"undefined"==typeof b[d].con?"object"!=typeof a[d]||null==a[d]||Array.isArray(a[d])||"object"!=typeof b[d]||null==b[d]||
Array.isArray(b[d])?a[d]=b[d]:SF.lib.ml(a[d],b[d]):a[d]=b[d]:a[d]=b[d]:a[d]=b[d])};
SF.lib.ds=function(a,b,c){c=void 0===c?{}:c;if(!(a=SF.$(a)))return null;if("undefined"==typeof b){c=a.attributes;var d,e={};for(d=0;d<c.length;d++)"data-"==c[d].name.slice(0,5)?e[c[d].name.slice(5)]=c[d].value:"num-"==c[d].name.slice(0,4)?e[c[d].name.slice(4)]=parseFloat(c[d].value.replace(/[^0-9\-\.]/g,"")):"bool-"==c[d].name.slice(0,5)?e[c[d].name.slice(5)]=c[d].value?!0:!1:"json-"==c[d].name.slice(0,5)&&(e[c[d].name.slice(5)]=JSON.parse(c[d].value));return e}e=[];if(c&&c.only)e=c.only;else if(b)for(d in b)d&&
(!c.excludes||0>c.excludes.indexOf(d))&&e.push(d);else if(null==b)for(c=a.attributes,d=c.length-1;0<=d;d--)c[d].name.match(/^(data|num|bool|json)\-/)&&e.push(c[d].name.replace(/^(data|num|bool|json)\-/,""));e.forEach(function(f){b&&"string"==typeof b[f]?a.setAttribute("data-"+f,b[f]):a.removeAttribute("data-"+f);b&&"number"==typeof b[f]?a.setAttribute("num-"+f,b[f].toString()):a.removeAttribute("num-"+f);b&&"boolean"==typeof b[f]?a.setAttribute("bool-"+f,b[f]?"1":""):a.removeAttribute("bool-"+f);
b&&"object"==typeof b[f]&&null!==b[f]?a.setAttribute("json-"+f,JSON.stringify(b[f])):a.removeAttribute("json-"+f)})};
SF.lib.i=function(a,b,c){c=void 0===c?null:c;var d,e,f,h=[],g;if(a=SF.$(a)){c=SF.$(c);for(d=0;d<b.length;d++)if(b[d]&&!(b[d]instanceof Node&&(c&&c==b[d]||!c&&a.lastChild&&a.lastChild==b[d]))){if(b[d]instanceof Node&&(f=b[d].querySelectorAll("textarea.SFhtm[id]"))&&"undefined"!=typeof tinymce)for(e=0;e<f.length;e++)if(g=tinymce.get(f[e].id)){var k=SF.lib.c(g.settings,{only:"theme resize skin relative_urls convert_urls content_css browser_spellcheck plugins menubar toolbar target_list paste_as_text".split(" ")});g.settings.setup&&
(k.setup=g.settings.setup);k.selector="#"+f[e].id;h.push(k);g.remove()}a.insertBefore(b[d]instanceof Node?b[d]:SF.lib.n(b[d]),c)}for(e=0;e<h.length;e++)tinymce.init(h[e])}};
SF.lib.cn=function(a){var b,c,d;if((a=SF.$(a))&&a instanceof Element){if(SF._is.edit&&"undefined"!=typeof tinymce){var e=a.querySelectorAll("textarea[id]");for(b=e.length-1;0<=b;b--)if(d=tinymce.get(e[b].id))try{d.remove()}catch(f){}}e=a.querySelectorAll("[mapdata]");for(b=e.length-1;0<=b;b--)if((d=SF.d.get(e[b]))&&d.map){if(d.SFb){try{d.SFb.close()}catch(f){}delete d.SFb}if(d.SFm)for(c in d.SFm){try{google.maps.event.clearInstanceListeners(d.SFm[c])}catch(f){}try{d.SFm[c].setMap(null)}catch(f){}}try{d.map.unbindAll()}catch(f){}SF.d.set(e[b],null);
SF.set(e[b],"mapdata",null)}if(a.hasAttribute("mapdata")&&(d=SF.d.get(a))&&d.map){if(d.SFb){try{d.SFb.close()}catch(f){}delete d.SFb}if(d.SFm)for(c in d.SFm){try{google.maps.event.clearInstanceListeners(d.SFm[c])}catch(f){}try{d.SFm[c].setMap(null)}catch(f){}}try{d.map.unbindAll()}catch(f){}SF.d.set(a,null);SF.set(a,"mapdata",null)}e=a.querySelectorAll("[fpydata]");for(b=e.length-1;0<=b;b--)if(d=SF.d.get(e[b])){if(d.stripe&&d.stripeElement){try{d.stripeElement.destroy()}catch(f){}delete d.stripeElement}6==
d.spy&&(c=d.pageElement.querySelector(".SFfpybtn"))&&c.hasAttribute("data-lbl")&&(c.innerHTML=c.getAttribute("data-lbl"),c.removeAttribute("data-lbl"));SF.set(e[b],"fpydata",null)}if(a.hasAttribute("fpydata")&&(d=SF.d.get(a))){if(d.stripe&&d.stripeElement){try{d.stripeElement.destroy()}catch(f){}delete d.stripeElement}6==d.spy&&(c=d.pageElement.querySelector(".SFfpybtn"))&&c.hasAttribute("data-lbl")&&(c.innerHTML=c.getAttribute("data-lbl"),c.removeAttribute("data-lbl"));SF.d.set(a,null);SF.set(a,
"fpydata",null)}d=SF.lib.ma(a,".SFlst")&&SF.d.get(a)&&SF.d.get(a).editor&&a.lastChild&&!SF.d.get(a.lastChild);for(b=a.childNodes.length-(d?2:1);0<=b;b--)try{a.removeChild(a.childNodes[b])}catch(f){}}};SF.lib.dn=function(a){var b;if(a=SF.$(a)){SF.lib.cn(a);if(SF._is.edit&&"undefined"!=typeof tinymce&&"TEXTAREA"==a.nodeName&&a.id&&(b=tinymce.get(a.id)))try{b.remove()}catch(c){}a.id&&SF.lib.ma(a,".SFdlg")&&(SF.lib.dn(a.id+"_ptr"),SF.lib.dn(a.id+"_gry"));try{a.parentNode.removeChild(a)}catch(c){}}};
SF.lib.n=function(a){a=void 0===a?{nodeName:"div"}:a;var b,c,d=!1,e=!1,f=!1,h=!1,g=!1,k=!1,m=!1,l=!1,n=!1,q=!1,t=!1,u=!1;if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&("checkbox"==a.type.toLowerCase()||"radio"==a.type.toLowerCase())){d=document.createElement("input");d.type=a.type.toLowerCase();d.checked=a.checked?!0:!1;a.required&&d.setAttribute("required","");a.name&&(d.name=a.name);"value"in a&&null!=a.value&&(d.value=a.value.toString(),"number"==typeof a.value&&d.setAttribute("value-type",
"number"));var v=SF.lib.n({nodeName:"label",className:"SFchk"+(a.className?" "+a.className:""),childNodes:[d,{nodeName:"i"},a.innerHTML?{innerHTML:a.innerHTML}:a.childNodes?{childNodes:a.childNodes}:null]});if("function"==typeof a.onclick)try{v.onclick=a.onclick,v.onkeydown=function(w){if(32==w.keyCode)return this.onclick(w)},d.onclick=function(){a.onclick.call(this.parentNode,{currentTarget:this.parentNode});return!1}}catch(w){}if("function"==typeof a.onchange)try{d.onchange=function(){return a.onchange.call(this.parentNode,
{currentTarget:this.parentNode})}}catch(w){}}else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&"termscheckbox"==a.type.toLowerCase())e=document.createElement("input"),e.type="checkbox",e.setAttribute("required",""),e.setAttribute("data-type","termscheckbox"),a.name&&(e.name=a.name),v=SF.lib.n({nodeName:"label",className:"SFchk"+(a.className?" "+a.className:""),childNodes:[e,{nodeName:"i"},a.terms?{nodeName:"button",className:"SFlnk",data:{dtl:a.terms},style:{display:"block"},onclick:function(){SF.lib.alr(SF.d.get(this).dtl,
{dismiss:!0});return!1},innerHTML:a.innerHTML||"Required"}:{innerHTML:a.innerHTML||""}]});else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&"termssignature"==a.type.toLowerCase())e=document.createElement("input"),e.type="text",e.setAttribute("required",""),e.setAttribute("autocomplete","off"),e.setAttribute("data-type","termssignature"),a.name&&(e.name=a.name),v=SF.lib.n({childNodes:[a.terms?{nodeName:"button",className:"SFlnk",data:{dtl:a.terms},style:{display:"block"},onclick:function(){SF.lib.alr(SF.d.get(this).dtl,
{dismiss:!0});return!1},innerHTML:a.innerHTML||"Required"}:{innerHTML:a.innerHTML||""},e]}),e.oninput=SF.v,e.onblur=SF.v;else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&"date"==a.type.toLowerCase())a.dataset||(a.dataset={}),a.dataset.type="date",h=v=SF.lib.n({nodeName:"input",type:"text",dataset:a.dataset,autocomplete:"off",onfocus:function(){if(!this.nextSibling||"SFind"!=this.nextSibling.className){var w=this,r,p;var y=[];var A,C;var B=SF._st&&SF._st._fd?SF._st._fd:0;if(this.nextSibling&&
"SFerr"==this.nextSibling.className){SF.lib.dn(this.nextSibling);var D=""}else D=this.value&&(p=new Date(this.value))?parseInt((new Date(p.getFullYear(),p.getMonth(),p.getDate())).getTime()/1E3):"";SF.lib.i(this.parentNode,[C=SF.lib.n({className:"SFind"})],this.nextSibling);var z=new Date;z=new Date(z.getFullYear(),z.getMonth(),z.getDate());var G=D?new Date(1E3*D):z;for(p=new Date(G.getFullYear(),G.getMonth(),G.getDate()-35);p.getDay()!=B;)p.setDate(p.getDate()-1);SF.lib.i(C,[y=SF.lib.n()]);for(r=
0;r<SF._is.day.length;r++)SF.lib.i(y,[{innerHTML:SF._is.day[(r+B)%7]}]);SF.lib.i(C,[A=SF.lib.n({style:{overflowAnchor:"none"}})]);var J=function(E){if(13==E.keyCode||32==E.keyCode)E.currentTarget.onclick(E);else 9==E.keyCode?E.shiftKey?SF.lib.fc(w):E.currentTarget.blur():39==E.keyCode?SF.lib.fc(E.currentTarget.nextSibling||E.currentTarget.parentNode.nextSibling.firstChild):37==E.keyCode?SF.lib.fc(E.currentTarget.previousSibling||E.currentTarget.parentNode.previousSibling.lastChild):40==E.keyCode?
SF.lib.fc(E.currentTarget.parentNode.nextSibling.childNodes[E.currentTarget.getAttribute("num-idx")]):38==E.keyCode&&SF.lib.fc(E.currentTarget.parentNode.previousSibling.childNodes[E.currentTarget.getAttribute("num-idx")]);return!1};var F=function(E){var I=SF.lib.ds(E.currentTarget)._dp;D&&I==D||(w.value=(new Date(1E3*I)).toDateString().replace(/\s?(Mon|Tue|Wed|Thu|Fri|Sat|Sun)[^\s]*\s?/i,""),w.hasAttribute("aria-invalid")&&SF.v(w));E.currentTarget.blur();D&&I==D||"function"!=typeof w.onchange||w.onchange.call(w,
{type:"change",target:w,currentTarget:w})};var L=function(E){!w.nextSibling||"SFind"!=w.nextSibling.className||E.relatedTarget&&(E.relatedTarget==w||C.contains(E.relatedTarget))||(SF.lib.dn(C),SF.v(w),SF.lib.fn(w))};A.onscroll=function(){if(!this.parentNode.getAttribute("data-scr")&&(100>this.scrollHeight-this.clientHeight-this.scrollTop||100>this.scrollTop)){this.parentNode.setAttribute("data-scr",1);var E,I,P,H=new Date(1E3*SF.lib.ds(102>this.scrollTop?this.firstChild.firstChild:this.lastChild.lastChild)._dp),
M=null;100>this.scrollTop?(M=this.firstChild,H.setDate(H.getDate()-14)):H.setDate(H.getDate()+1);for(E=0;2>E;E++)for(SF.lib.i(this,[P=SF.lib.n()],M),I=0;7>I;I++)SF.lib.i(P,[SF.lib.n({nodeName:"button",className:((12E4>Math.abs(H-G)?"SFindsel":"")+(H.getMonth()%2?" SFindevenmo":" SFindoddmo")+(H<z?" SFindold":"")+(12E4>Math.abs(H-z)?" SFindtod":"")).trim(),onblur:L,onclick:F,onkeydown:J,dataset:{idx:I,_dp:parseInt(H.getTime()/1E3)},innerHTML:SF._is.mon[H.getMonth()]+" "+H.getDate()+(H.getFullYear()!=
z.getFullYear()?"<br>"+H.getFullYear():"")})]),H.setDate(H.getDate()+1);M?(this.removeChild(this.lastChild),this.removeChild(this.lastChild),this.scrollTop+=2*(M.previousSibling.scrollHeight||50)):(this.removeChild(this.firstChild),this.removeChild(this.firstChild),this.scrollTop-=2*(this.lastChild.scrollHeight||50));this.parentNode.removeAttribute("data-scr")}};for(r=0;15>r;r++)for(SF.lib.i(A,[B=SF.lib.n()]),y=0;7>y;y++)SF.lib.i(B,[SF.lib.n({nodeName:"button",className:((12E4>Math.abs(p-G)?"SFindsel":
"")+(p.getMonth()%2?" SFindevenmo":" SFindoddmo")+(p<z?" SFindold":"")+(12E4>Math.abs(p-z)?" SFindtod":"")).trim(),onblur:L,onclick:F,onkeydown:J,dataset:{idx:y,_dp:parseInt(p.getTime()/1E3)},innerHTML:SF._is.mon[p.getMonth()]+" "+p.getDate()+(p.getFullYear()!=z.getFullYear()?"<br>"+p.getFullYear():"")})]),p.setDate(p.getDate()+1);this.nextSibling.childNodes[1].scrollTop=250}},onblur:function(w){var r=this.nextSibling&&"SFind"==this.nextSibling.className?this.nextSibling:!1;if(r){if(r.contains(w.relatedTarget))return;
SF.lib.dn(r)}SF.v(this)},onkeydown:function(w){var r=this.nextSibling&&"SFind"==this.nextSibling.className?this.nextSibling:!1;if(r&&9==w.keyCode&&!w.shiftKey)return w=SF.get(this),w||(w=new Date,w=new Date(w.getFullYear(),w.getMonth(),w.getDate())/1E3),SF.lib.dn(r),this.onfocus(),r=this.nextSibling,SF.lib.fc(r.querySelector('button[num-_dp="'+(new Date(1E3*w)).setHours(0,0,0,0)/1E3+'"]')),!1}}),"undefined"!=typeof a.value&&SF.set(h,a.value);else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&
a.type&&"time"==a.type.toLowerCase())a.dataset||(a.dataset={}),a.dataset.type="time",a.dataset.rxp="^[012]?[0-9]:[0-5][0-9](am|AM|pm|PM)?$",g=v=SF.lib.n({nodeName:"input",type:"text",dataset:a.dataset,onfocus:function(){if(!this.nextSibling||"SFinm"!=this.nextSibling.className){var w=this,r=w.value,p=SF.lib.ds(w),y,A,C=[],B=!1;w.nextSibling&&"SFerr"==w.nextSibling.className&&SF.lib.dn(w.nextSibling);var D=function(F){if(13==F.keyCode||32==F.keyCode)F.currentTarget.onclick(F);else 9==F.keyCode?F.shiftKey?
SF.lib.fc(w):F.currentTarget.blur():40==F.keyCode?SF.lib.fc(F.currentTarget.nextSibling):38==F.keyCode&&SF.lib.fc(F.currentTarget.previousSibling);return!1};var z=function(F){var L=F.currentTarget.innerHTML;L!=r&&SF.set(w,L);F.currentTarget.blur();if(L!=r&&"function"==typeof w.onchange)w.onchange({type:"change",target:w,currentTarget:w})};var G=function(F){!w.nextSibling||"SFinm"!=w.nextSibling.className||F.relatedTarget&&(F.relatedTarget==w||A.contains(F.relatedTarget))||(SF.lib.dn(A),SF.v(w),SF.lib.fn(w))};
var J=p.step&&"h"==p.step?["00"]:["00","15","30","45"];for(p=0;24>p;p++)for(y=0;y<J.length;y++)C.push({nodeName:"button",innerHTML:(12<p?p-12:p?p:"12")+":"+J[y]+(11<p?"pm":"am"),onclick:z,onkeydown:D,onblur:G});SF.lib.i(w.parentNode,[A=SF.lib.n({className:"SFinm",childNodes:C,onblur:G})],w.nextSibling);if(r)for(y=A.firstChild;y;y=y.nextSibling)if(y.innerHTML==r){B=y;break}A.scrollTop=B?B.offsetTop:parseInt(A.scrollHeight/2)}},onblur:function(w){var r=this.nextSibling&&"SFinm"==this.nextSibling.className?
this.nextSibling:!1;if(r){if(r.contains(w.relatedTarget))return;SF.lib.dn(r)}SF.v(this)},onkeydown:function(w){var r=this.nextSibling&&"SFinm"==this.nextSibling.className?this.nextSibling:!1;if(r&&9==w.keyCode&&!w.shiftKey){for(w=r.firstChild;w&&w.innerHTML!=this.value;w=w.nextSibling);SF.lib.fc(w?w:r.childNodes[r.childNodes.length/2]);return!1}}}),"undefined"!=typeof a.value&&SF.set(g,a.value);else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&"month"==a.type.toLowerCase()){a.dataset||
(a.dataset={});a.dataset.type="month";k=v=SF.lib.n({nodeName:"select",dataset:a.dataset,"aria-label":"Month",style:{width:"auto"},oninput:function(w){var r;if(this.nextSibling&&"monthday"==this.nextSibling.getAttribute("data-type")){var p=parseInt(this.value);w=4==p||6==p||9==p||11==p?30:2==p?28:31;if(parseInt(this.nextSibling.lastChild.value)!=w){p=this.nextSibling.value;SF.lib.cn(this.nextSibling);for(r=1;r<=w;r++)SF.lib.i(this.nextSibling,[{nodeName:"option",value:r,innerHTML:r}]);this.nextSibling.value=
p}}}});for(b=1;12>=b;b++)SF.lib.i(v,[{nodeName:"option",value:b,innerHTML:SF._is.mon[b-1]}]);"undefined"!=typeof a.value&&setTimeout(function(){SF.set(k,a.value)},10)}else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&"monthday"==a.type.toLowerCase()){a.dataset||(a.dataset={});a.dataset.type="monthday";m=v=SF.lib.n({nodeName:"select",dataset:a.dataset,"aria-label":"Day Of Month",style:{width:"auto"}});for(b=1;31>=b;b++)SF.lib.i(v,[{nodeName:"option",value:b,innerHTML:b}]);"undefined"!=
typeof a.value&&setTimeout(function(){SF.set(m,a.value)},10)}else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&0<=["count","price","number","email","multiemail"].indexOf(a.type.toLowerCase())){a.dataset||(a.dataset={});a.dataset.type=a.type.toLowerCase();switch(a.type.toLowerCase()){case "count":a.dataset.rxp="^(\\+|\\-)?[0-9]*$";break;case "price":a.dataset.rxp="^(\\+|\\-)?(\\$)?[0-9,]*(\\.[0-9]{0,2})?$";break;case "number":a.dataset.rxp="^(\\+|\\-)?[0-9]*(\\.[0-9]*)?$";break;case "email":a.dataset.rxp=
"^\\s*[a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*$";a.dataset.err="Invalid email address";break;case "multiemail":a.dataset.rxp="^\\s*([a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*,\\s*)*[a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*$",a.dataset.err="Invalid email address"}"undefined"!=typeof a.min&&null!=a.min&&(a.dataset.min=a.min);delete a.min;"undefined"!=typeof a.max&&null!=
a.max&&(a.dataset.max=a.max);delete a.max;a.type="text";v=document.createElement("input");a.oninput||(v.oninput=SF.v);a.onblur||(v.onblur=SF.v)}else if(a.nodeName&&"input"==a.nodeName.toLowerCase()&&a.type&&"file"==a.type)f=v=document.createElement("input"),"aria-label"in a&&(a.onfocus||(a.onfocus=function(){this.parentNode.scrollTop=this.parentNode.scrollLeft=0}),a.onblur||(a.onblur=function(){this.parentNode.scrollTop=this.parentNode.scrollLeft=0})),v.onchange=function(){SF.v(this);if(a.onchange)return a.onchange.call(this,
{currentTarget:this})};else if(a.nodeName&&"multiselectbuttongroup"==a.nodeName.toLowerCase())l=v=SF.lib.n({className:"SFrcp"+(a.className?" "+a.className:"")}),a.name&&v.setAttribute("name",a.name);else if(a.nodeName&&"multiselectbutton"==a.nodeName.toLowerCase())n=v=SF.lib.n({role:"checkbox",tabindex:"0",className:"SFinr"+(a.className?" "+a.className:"")}),"undefined"!=typeof a.name?(v.setAttribute("name",a.name),"undefined"!=typeof a.value&&null!==a.value?(SF.lib.ds(v,{value:a.value}),a.checked=
!0):a.checked=!1):"undefined"!=typeof a.value&&(v.setAttribute("value",a.value.toString()),"number"==typeof a.value&&v.setAttribute("value-type","number")),v.setAttribute("aria-checked",a.checked?!0:!1),v.onclick=a.onclick?function(w){a.onclick.call(this,w);return!1}:function(w){this.setAttribute("aria-checked","true"==this.getAttribute("aria-checked")?!1:!0);return!1},v.onkeydown=function(w){if(13==w.keyCode||32==w.keyCode)this.onclick(w);if(9!=w.keyCode)return!1};else if(a.nodeName&&"formrow"==
a.nodeName.toLowerCase()){q=v=SF.lib.n({nodeName:"tr",role:a.role?a.role:"row"});var x={nodeName:"td"};a.label&&(x.innerHTML=a.label);a.noWrap&&(x.style={whiteSpace:"nowrap"});SF.lib.i(v,[x]);x={nodeName:"td"};a.innerHTML?x.innerHTML=a.innerHTML:a.childNodes&&(x.childNodes=a.childNodes);SF.lib.i(v,[x=SF.lib.n(x)]);a.role&&0<=["radiogroup","listbox","select"].indexOf(a.role)?(x.setAttribute("role",a.role),a.label&&x.setAttribute("aria-label",a.label),delete a.role):!x.childNodes.length||!a.label||
x.firstChild.hasAttribute("aria-label")||!x.firstChild.nodeName||0>["input","select","textarea"].indexOf(x.firstChild.nodeName.toLowerCase())||(2==x.childNodes.length&&x.childNodes[0].hasAttribute("name")&&"[ad1]"==x.childNodes[0].getAttribute("name").slice(-5)&&x.childNodes[1].hasAttribute("name")&&"[ad2]"==x.childNodes[1].getAttribute("name").slice(-5)?(x.childNodes[0].setAttribute("aria-label",a.label+" (street)"),x.childNodes[1].setAttribute("aria-label",a.label+" (city, state/province, postal code)")):
x.childNodes[0].setAttribute("aria-label",a.label))}else if(a.nodeName&&"formrowgroup"==a.nodeName.toLowerCase()){if(t=v=SF.lib.n({nodeName:"tbody",role:a.role?a.role:"rowgroup"}),a.formRows)for(b=0;b<a.formRows.length;b++)a.formRows[b]&&(a.formRows[b].nodeName="formRow",SF.lib.i(t,[a.formRows[b]]))}else if(a.nodeName&&"formtable"==a.nodeName.toLowerCase()||a.formRows||a.formRowGroups)if(u=v=SF.lib.n({nodeName:"table",className:"SFfrm"+(a.className?" "+a.className:"")}),a.formRowGroups)for(b=0;b<
a.formRowGroups.length;b++)a.formRowGroups[b]&&(a.formRowGroups[b].nodeName="formRowGroup",SF.lib.i(u,[a.formRowGroups[b]]));else{if(a.formRows)for(SF.lib.i(v,[x=SF.lib.n({nodeName:"formRowGroup"})]),b=0;b<a.formRows.length;b++)a.formRows[b]&&(a.formRows[b].nodeName="formRow",SF.lib.i(x,[a.formRows[b]]))}else a.nodeName&&(a.required||a.dataset&&a.dataset.rxp)?(v=document.createElement(a.nodeName),a.oninput||(v.oninput=SF.v),a.onblur||(v.onblur=SF.v)):a.nodeName&&"a"==a.nodeName&&a.href&&"#"==a.href.slice(0,
1)?(v=document.createElement(a.nodeName),a.href=window.location.href.split("#")[0]+a.href,a.onclick||(v.onclick=SF.open)):v=document.createElement(a.nodeName?a.nodeName:"div");x=document.createElement("div");x.appendChild(v);if("object"==typeof a)for(b in a)if(!(null==a[b]||"nodeName"==b||d&&("type"==b||"className"==b||"childNodes"==b||"innerHTML"==b||"name"==b||"value"==b||"checked"==b||"required"==b||"onclick"==b||"onchange"==b)||e&&("type"==b||"className"==b||"childNodes"==b||"innerHTML"==b||"terms"==
b||"name"==b||"required"==b||"onclick"==b||"onchange"==b||"oninput"==b||"onblur"==b)||f&&"onchange"==b||(h||g)&&("type"==b||"value"==b||"onfocus"==b||"onblur"==b||"dataset"==b)||(k||m)&&("type"==b||"value"==b||"dataset"==b||"oninput"==b)||l&&("className"==b||"name"==b)||n&&("className"==b||"tabindex"==b||"checked"==b||"aria-checked"==b||"name"==b||"value"==b||"onclick"==b||"onkeydown"==b)||q&&("role"==b||"label"==b||"noWrap"==b||"innerHTML"==b||"childNodes"==b)||t&&("role"==b||"formrows"==b.toLowerCase()||
"childNodes"==b||"innerHTML"==b)||u&&("className"==b||"formrowgroups"==b.toLowerCase()||"formrows"==b.toLowerCase()||"childNodes"==b||"innerHTML"==b)))if("childNodes"==b&&"undefined"==typeof a.innerHTML)for(c=0;c<a[b].length;c++)a[b][c]&&"object"==typeof a[b][c]&&SF.lib.i(v,[a[b][c]instanceof Element?a[b][c]:SF.lib.n(a[b][c])]);else if("data"==b)SF.d.set(v,a[b]);else if("dataset"==b)SF.lib.ds(v,a[b]);else if("INPUT"==v.nodeName&&"value"==b)SF.set(v,a[b]);else if(e&&"value"==b)SF.set(e,a[b]);else if("object"==
typeof a[b])for(c in a[b])try{v[b][c]=a[b][c]}catch(w){}else if("disabled"==b)v[b]=null===a[b]||!1===a[b]?!1:!0;else if("undefined"!=typeof v[b]||"function"==typeof a[b]){if(null!=a[b])try{v[b]=a[b]}catch(w){}}else(c=b.match(/[a-z]+([A-Z])[a-z]+/))?null!=a[b]&&v.setAttribute(b.replace(c[1],"-"+c[1].toLowerCase()),a[b]):null!=a[b]&&v.setAttribute(b,a[b]);SF.lib.ma(v,".SFlnk,.SFclk,a:not([href])")&&a.onclick&&(v.hasAttribute("role")||v.setAttribute("role","button"),v.hasAttribute("tabindex")||v.setAttribute("tabindex",
"0"),v.onkeydown||(v.onkeydown=function(w){if(13==w.keyCode||32==w.keyCode)this.onclick(w)}));"BUTTON"!=v.nodeName&&"button"!=v.getAttribute("role")||v.hasAttribute("tabindex")||v.setAttribute("tabindex","0");"I"!=v.nodeName||v.hasAttribute("role")||v.setAttribute("role","presentation");return x.firstChild};
SF.lib.fl=function(a){var b=a.currentTarget,c,d;a.stopPropagation();a.preventDefault();if(d=(c=SF.d.get(b))&&c.url||b.href||!1)a=c&&c.typ||d.split(".").pop().toLowerCase(),a=0<="image/jpeg image/gif image/png jpg jpeg gif png".split(" ").indexOf(a),SF.lib.dg("SFfildlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFfildlg",!1)},innerHTML:"Cancel"},{},a?{nodeName:"button",onclick:function(){SF.lib.dg("SFfildlg",!1);SF.lib.vl(d+(0==d.indexOf("https://api.membershipworks.com/")&&
0>d.indexOf("?")?"?org="+SF._st.org+(SF.lib.gs()?"&SF="+SF.lib.gs():""):""),b)},innerHTML:"View image"}:null,{nodeName:"a",target:"_blank",onclick:function(){setTimeout(function(){SF.lib.dg("SFfildlg",!1)},1E3)},href:d+(0==d.indexOf("https://api.membershipworks.com/")&&0>d.indexOf("?")?"?org="+SF._st.org+(SF.lib.gs()?"&SF="+SF.lib.gs():""):""),innerHTML:"Open / download"},b.nextSibling&&"INPUT"==b.nextSibling.nodeName&&"file"==b.nextSibling.getAttribute("type")?{nodeName:"button",onclick:function(){SF.lib.s(b.nextSibling,
!0);SF.lib.dn(b);SF.lib.dg("SFfildlg",!1)},innerHTML:"Replace"}:null,c&&0==d.indexOf("https://api.membershipworks.com/")?{nodeName:"button",onclick:function(){SF.lib.xhr("DELETE",d).then(function(){SF.lib.s(b.nextSibling,!0);SF.lib.dn(b);SF.lib.dg("SFfildlg",!1)}).catch(SF.lib.alr)},innerHTML:"Delete"}:null]},{target:b,placement:"v"})};
SF.lib.f=function(a,b,c){c=void 0===c?!1:c;var d,e,f={};if(!(a=SF.$(a)))return"undefined"==typeof b?{}:null;var h=a.querySelectorAll("input[name],textarea[name],select[name],.SFrcp[name]");if("undefined"==typeof b){for(d=0;d<h.length;d++)if(SF.lib.iv(h[d],a)&&(b=SF.get(h[d]),null!=b)){var g=f;var k=h[d].getAttribute("name").replace(/\]/g,"").split("[");for(e=0;e<k.length;e++){var m=e&&/^[0-9]{1,}$/.test(k[e])?parseInt(k[e]):k[e];if(e==k.length-1)if(k[e].length){if("number"==typeof m)for(;g.length<
m;)g.push(null);if("undefined"==typeof g[m]||null==g[m]||b)g[m]=b}else""!==b&&g.push(b);else{if(k[e].length)"object"!=typeof g[m]&&(e==k.length-2&&!k[e+1].length||/^[0-9]{1,}$/.test(k[e+1])?g[m]=[]:g[m]={});else break;g=g[m]}}}return f}for(d=0;d<h.length;d++)for(g=b,k=h[d].getAttribute("name").replace(/\]/g,"").split("["),e=0;e<k.length;e++){if(null==g||"object"!=typeof g){SF.set(h[d],"");break}else SF.lib.gg(g,{updateCacheOnly:!0});m=e&&/^[0-9]{1,}$/.test(k[e])?parseInt(k[e]):k[e];if(e==k.length-
1)k[e].length?"ad2"==k[e]&&(g.ad1||g.ad2||g.con)?SF.set(h[d],SF.lib.f2(g)):"undefined"==typeof g[m]?c&&SF.set(h[d],""):SF.set(h[d],null==g[m]?"":g[m]):Array.isArray(g)&&h[d].getAttribute("value")?SF.set(h[d],"number"!=h[d].getAttribute("value-type")&&0<=g.indexOf(h[d].getAttribute("value"))||"number"==h[d].getAttribute("value-type")&&0<=g.indexOf(parseFloat(h[d].getAttribute("value")))?!0:!1):c&&SF.set(h[d],"");else{if(!k[e].length)break;if("undefined"==typeof g[m]&&!c)break;g=g[m]||null}}};
SF.lib.tq=function(a,b){b=void 0===b?"":b;var c=[],d,e;if("number"==typeof a||"string"==typeof a)b&&c.push(b+"="+encodeURIComponent(a.toString()));else if(null==a)b&&c.push(b+"=");else{if(a instanceof FileList||a instanceof File)return"";if(Array.isArray(a)){if(b)if(a.length)for(d=0;d<a.length;d++)(e=SF.lib.tq(a[d],b+"["+d+"]"))&&c.push(e);else c.push(b+"=")}else if("object"==typeof a)for(d in a)(e=SF.lib.tq(a[d],b?b+"["+d+"]":d))&&c.push(e)}return c.join("&")};
SF.lib.td=function(a,b,c){b=void 0===b?null:b;c=void 0===c?"":c;var d;b||(b=new FormData);if("number"==typeof a||"string"==typeof a)c&&b.append(c,a.toString());else if(null==a)c&&b.append(c,"");else if(a instanceof FileList){if(c)for(d=0;d<a.length;d++)b.append(c+"[]",a[d])}else if(a instanceof File)c&&b.append(c,a);else if(Array.isArray(a)){if(c)if(a.length)for(d=0;d<a.length;d++)SF.lib.td(a[d],b,c+"["+d+"]");else b.append(c,"")}else if("object"==typeof a)for(d in a)SF.lib.td(a[d],b,c?c+"["+d+"]":
d);return b};
SF.lib.xhr=function(a,b,c,d,e){var f={showSpinner:!0,handleErrors:!0,handleUpdates:!0,allowEmptyResponse:!1},h,g;if("GET"==a||"DELETE"==a){var k="";SF.lib.ml(f,c);var m=d||0}else k=c||"",SF.lib.ml(f,d),m=e||0;return(new Promise(function(l,n){if(0>["GET","POST","PUT","PATCH","DELETE"].indexOf(a))f.handleErrors?n(null):l({error:"Invalid request"});else{f.showSpinner&&SF.lib.sn(!0);h=new XMLHttpRequest;h.open(a,(0===b.indexOf("https://api.membershipworks.com/")?"":"https://api.membershipworks.com/")+b,
!0);SF.lib.gs()&&h.setRequestHeader("Authorization","Bearer "+SF.lib.gs());f.admin&&h.setRequestHeader("X-Role","admin");(g=f.org||SF._st.org||SF.get("SFctr","data-org"))&&h.setRequestHeader("X-Org",g.toString());h.setRequestHeader("Accept","application/json");if("undefined"!=typeof h.responseType)try{h.responseType="json"}catch(q){}"GET"==a||"DELETE"==a?h.send():"string"==typeof k?(h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(k)):h.send(SF.lib.td(k));4===h.readyState?
l():h.onreadystatechange=function(){4===h.readyState&&l()}}})).then(function(){var l=!1;if("object"==typeof h.response)var n=h.response;else try{n=h.responseText?JSON.parse(h.responseText):null}catch(q){n=null}if(!h.status&&!n&&"GET"==a&&1>m)return(new Promise(function(q){setTimeout(q,6E4)})).then(function(){return SF.lib.xhr(a,b,f,m+1)});f.showSpinner&&SF.lib.sn(!1);switch(h.status){case 200:case 201:if(n||"DELETE"==a||f.allowEmptyResponse){if(n&&n._re&&f.handleUpdates&&"function"==typeof SF.u&&
!SF.u(n._re))return;n&&n.error&&(l=n.error)}else l="No response from server";break;case 301:case 307:case 308:l="Resource has moved";break;case 400:l="Bad request";break;case 401:return l="Session expired, please sign in again",SF.lib.ss(!1),SF._st.usr.uid?(SF.ss&&setTimeout(function(){SF.ss.o({msg:"Your session requires re-verification - please sign in again."})},500),Promise.reject(null)):SF.ss?SF.ss.i(!1).then(function(){SF.close();delete SF._st.hsh;delete SF._st.ger;SF.ss.o();return Promise.reject(l)}):
Promise.reject(l);case 403:return l="Access denied",SF.ss?SF.ss.i(!1).then(function(){SF.close();delete SF._st.hsh;delete SF._st.ger;SF.ss.o();return Promise.reject(l)}):Promise.reject(l);case 404:l="Resource not found";break;case 405:l="Invalid request";break;case 409:l="This application needs to be reloaded, please refresh the page";if(f.handleErrors&&confirm("This application needs to be reloaded.\nPlease click OK to refresh the browser."))return window.location.reload(!0),Promise.reject(null);
break;case 500:l="System error";break;case 503:l="System temporarily unavailable, please try again later";break;default:l=h.statusText?"Error: "+h.statusText:"Network connection error ["+h.status+"]"}if(l){if(f.handleErrors)return Promise.reject(l);if(!n)return{error:l};n.error=l}return n})};
SF.lib.lo=function(a){var b="object"==typeof a?a.src:a;if(!b||SF._is.robot)return Promise.resolve();SF._st.ldr||(SF._st.ldr={});if("undefined"!=typeof SF._st.ldr[b])return SF._st.ldr[b];SF._st.ldr[b]=new Promise(function(c,d){var e;SF._st._do="loading "+b;if(0>b.indexOf(".js")&&(0<=b.indexOf(".css")||0<=b.indexOf("/css"))){var f=document.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.href=b}else f=document.createElement("script"),f.setAttribute("type",
"text/javascript"),f.async=!0,f.src=b;if("object"==typeof a)for(e in a)"src"!=e&&"href"!=e&&"onload"!=e&&"onerror"!=e&&f.setAttribute(e,a[e]);f.onload=c;f.onerror=d;document.head.appendChild(f)});return SF._st.ldr[b]};
SF.lib.sm=function(a){a=void 0===a?{url:"",title:"",description:"",image:"",previousTab:"",nextTab:""}:a;var b={},c,d;var e=(new Date).getTime();if(a)var f=!1;else{if("undefined"==typeof SF._st.mta||e<SF._st.mta._ts+500)return;f=!0;a=SF._st.mta}a.title&&(a.title=a.title.replace(/(<[^>]*>)/ig,""));a.description&&(a.description=160<(d=a.description.replace(/(<[^>]*>)/ig,"")).length?d.slice(0,157)+"...":d);try{if(c=document.querySelector("title"))b.title=c.innerHTML;a.title?c?c.innerHTML=a.title:SF.lib.i(document.head,
[{nodeName:"title",innerHTML:a.title}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('meta[property="og:title"]'))b.ogTitle=c.getAttribute("content");(d=a.ogTitle||a.title)?c?c.setAttribute("content",SF.lib.ft(d)):SF.lib.i(document.head,[{nodeName:"meta",property:"og:title",content:SF.lib.ft(d)}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('meta[name="description"]'))b.description=c.getAttribute("content");a.description?c?c.setAttribute("content",SF.lib.ft(a.description)):SF.lib.i(document.head,
[{nodeName:"meta",name:"description",content:SF.lib.ft(a.description)}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('meta[property="og:description"]'))b.ogDescription=c.getAttribute("content");(d=a.ogDescription||a.description)?c?c.setAttribute("content",SF.lib.ft(d)):SF.lib.i(document.head,[{nodeName:"meta",property:"og:title",content:SF.lib.ft(d)}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('link[rel="canonical"]'))b.url=c.getAttribute("href");a.url?c?c.setAttribute("href",
a.url):SF.lib.i(document.head,[{nodeName:"link",rel:"canonical",href:a.url}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('meta[property="og:url"]'))b.ogUrl=c.getAttribute("content");(d=a.ogUrl||a.url)?c?c.setAttribute("content",d):SF.lib.i(document.head,[{nodeName:"meta",property:"og:url",content:d}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('meta[property="og:image"]'))b.image=c.getAttribute("content");(d=a.image?"http:"+a.image.replace(/^http[s]:?/,""):"")?c?c.setAttribute("content",
d):SF.lib.i(document.head,[{nodeName:"meta",property:"og:image",content:d}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('meta[property="og:image:secure_url"]'))b.secureImage=c.getAttribute("content");(d=a.secureImage?a.secureImage:a.image?"https:"+a.image.replace(/^http[s]:?/,""):"")?c?c.setAttribute("content",d):SF.lib.i(document.head,[{nodeName:"meta",property:"og:image:secure_url",content:d}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('link[rel="prev"]'))b.previousTab=
c.getAttribute("href");a.previousTab?c?c.setAttribute("href",a.previousTab):SF.lib.i(document.head,[{nodeName:"link",rel:"prev",href:a.previousTab}]):SF.lib.dn(c)}catch(h){}try{if(c=document.querySelector('link[rel="next"]'))b.nextTab=c.getAttribute("href");a.nextTab?c?c.setAttribute("href",a.nextTab):SF.lib.i(document.head,[{nodeName:"link",rel:"next",href:a.nextTab}]):SF.lib.dn(c)}catch(h){}f?delete SF._st.mta:("undefined"==typeof SF._st.mta&&(SF._st.mta=b),SF._st.mta._ts=e)};
SF.lib.win=function(a){var b=SF.$("SFctr");SF._st.win||(SF._st.win={});try{if(window===window.parent)SF._st.win.w=window.innerWidth,SF._st.win.h=window.innerHeight;else throw"default";}catch(d){SF._st.win.w=document&&document.documentElement&&document.documentElement.clientWidth||window.innerWidth,SF._st.win.h=document&&document.documentElement&&document.documentElement.clientHeight||window.innerHeight}var c=Math.round(10*SF._st.win.w/window.innerWidth)/10;SF._st.win.h>c*window.innerHeight&&(SF._st.win.h=
c*window.innerHeight);SF._st.win.l=window.scrollX;SF._st.win.t=window.scrollY;if("complete"==document.readyState&&b&&!SF.$("SFspn")&&a&&a.type&&"scroll"==a.type)try{SF.t(a)}catch(d){}else(new Promise(function(d,e){SF._st.win.working||!b?e(null):b&&a&&a.type&&"resize"==a.type?(SF._st.win.working=!0,setTimeout(d,300)):d()})).then(function(){var d;var e=b.getBoundingClientRect();SF._st.win.x=d&&d.childNodes.length?d.clientWidth:b.clientWidth;SF._st.win.c=Math.max(Math.floor(SF._st.win.x/310),1);if(d=
SF.$("SFpne"))d.className="SF"+SF._st.win.c+(480>SF._st.win.x?" SF0":""),d.style.minHeight=0;SF.lib.fe(".SFdlg",function(f){f.className="SFdlg SF"+SF._st.win.c+(480>SF._st.win.x?" SF0":"")});SF.lib.fe(".SFwnr[data-wnr]",function(f){var h=SF.$("SFctr").getBoundingClientRect(),g=SF.$(f.getAttribute("data-wnr")).getBoundingClientRect();f.style.top=Math.max(0,h.top)+"px";f.style.left=Math.max(0,h.left)+"px";f.style.right=SF._st.win.w-g.left+"px";d&&(d.style.minHeight=Math.max(0,SF._st.win.h-Math.max(0,
e.top))+"px")});delete SF._st.win.working}).catch(SF.lib.no)};
SF.lib.sn=function(a){var b;if(SF.$("SFctr"))if(a){if(SF.$("SFspn")||SF.lib.i(document.body,[{id:"SFspn",className:"SFspn",childNodes:[SF._is.touch?{nodeName:"i",className:"SFspn"}:null]}]),"object"==typeof a&&(a.processingPayment||a.resumingPayment)&&!SF.$("SFspndlg")){if(a.resumingPayment)for(a=SF.$("SFctr").querySelectorAll(".SFfpycrd .SFpy0"),b=a.length-1;0<=b;b--)SF.lib.iv(a[b])&&(a[b].className=(a[b].className.replace(/^SFdsn|\sSFdsn/,"")+" SFdsn").trim());SF.lib.cn("SFspn");SF.lib.dg("SFspndlg",
{childNodes:[{nodeName:"span",innerHTML:"Processing, please do not refresh or leave this page"},{nodeName:"i",className:"SFspn"}]})}}else for(SF.lib.dg("SFspndlg",!1),SF.lib.dn("SFspn"),a=SF.$("SFctr").querySelectorAll(".SFfpycrd .SFpy0.SFdsn"),b=a.length-1;0<=b;b--)a[b].className=a[b].className.replace(/^SFdsn|\sSFdsn/,"").trim()};
SF.lib.dg=function(a,b,c){c=void 0===c?{}:c;var d,e,f,h=!1,g=!1,k,m=[];SF._st.dlg||(SF._st.dlg=[]);if(!1===a){SF.lib.fe(".SFdlg",SF.lib.dn);SF._st.dlg=[];SF._is.mobile||(document.body.style.overflow="",document.body.style.paddingRight="");try{document.body.style.scrollBehavior&&(document.body.style.scrollBehavior=""),document.documentElement.style.scrollBehavior&&(document.documentElement.style.scrollBehavior="")}catch(w){}}else if(!0===b){if(f=SF.$(a)){if("auto"!=f.style.width){f.style.width="auto";
var l=f.firstChild;for(a=0;l;l=l.nextSibling)l.className&&"SFclz"==l.className||"fixed"==l.style.position||(a=Math.ceil(Math.max(a,l.scrollWidth,l.offsetWidth)));f.style.width=a+3+"px";l=f.getBoundingClientRect();0>l.left?f.style.width=Math.min(SF._st.win.w,l.right)-(2>SF._st.win.c?0:15)+"px":l.right>SF._st.win.w&&(f.style.width=SF._st.win.w-Math.max(0,l.left)-(2>SF._st.win.c?0:15)+"px")}if("auto"!=f.style.height){l=f.firstChild;for(k=0;l;l=l.nextSibling)l.className&&"SFclz"==l.className||"fixed"==
l.style.position||(k+=Math.ceil(Math.max(l.scrollHeight,l.offsetHeight)));f.style.height=k+3+"px";l=f.getBoundingClientRect();0>l.top?f.style.height=Math.min(SF._st.win.h,l.bottom)-(2>SF._st.win.c?0:15)+"px":l.bottom>SF._st.win.h&&(f.style.height=SF._st.win.h-Math.max(0,l.top)-(2>SF._st.win.c?0:15)+"px")}c||setTimeout(function(){SF.lib.dg(f,!0,!0)},50)}}else{if(f=SF.$(a)){if(SF._st.dlg)for(l=SF._st.dlg.length-1;0<=l;l--)if(SF._st.dlg[l].dlg==f){!b&&SF._st.dlg[l].act&&SF.lib.fc(SF._st.dlg[l].act);
m=SF._st.dlg[l].mod;SF._st.dlg.splice(l,1);break}SF.lib.dn(f);if(m.length)for(l=m.length-1;0<=l;l--){try{m[l].node.style.transform=m[l].style.transform}catch(w){}try{m[l].node.style.zIndex=m[l].style.zIndex}catch(w){}try{m[l].node.style.isolation=m[l].style.isolation}catch(w){}try{m[l].node.style.containerType=m[l].style.containerType}catch(w){}try{m[l].node.style.animation=m[l].style.animation}catch(w){}}if(!SF._st.dlg.length){SF._is.mobile||(document.body.style.overflow="",document.body.style.paddingRight=
"");try{document.body.style.scrollBehavior&&(document.body.style.scrollBehavior=""),document.documentElement.style.scrollBehavior&&(document.documentElement.style.scrollBehavior="")}catch(w){}}}if(b&&(d=SF.$("SFctr"))){if(!(SF._is.mobile||c.placement&&"h"!=c.placement&&"v"!=c.placement)){document.body.style.margin=0;if(l=window.innerWidth-document.body.offsetWidth)document.body.style.paddingRight=l+"px";document.body.style.margin="";document.body.style.overflow="hidden"}for(l=d.parentNode;l;l=l.parentNode){SF._st.dlg.length||
m.push({node:l,style:{transform:l.style.transform||"",zIndex:l.style.zIndex,isolation:l.style.isolation||"",containerType:l.style.containerType||"",animation:l.style.animation||""}});try{l.style.transform="none"}catch(w){}try{l.style.zIndex="auto"}catch(w){}try{l.style.isolation="auto"}catch(w){}try{l.style.containerType="normal"}catch(w){}try{l.style.animation="none"}catch(w){}if(l==document.body)break}SF.lib.win({type:"resize"});480>SF._st.win.w?e=!1:c.target&&(e=SF.$(c.target));if(e){var n=e.getBoundingClientRect();
l=SF.get("SFctr","data-top");if(null===l||isNaN(l=parseInt(l)))l=((k=document.body.querySelector("header"))||(k=SF.$("header"))||(k=SF.$("hcontainer"))||(k=SF.$("top"))||(k=SF.$("nav"))||(k=document.body.querySelector("nav")))&&(k=k.getBoundingClientRect())&&"undefined"!=typeof k.y&&"undefined"!=typeof k.height?0<=k.y&&10>k.y&&20<k.height&&k.y+k.height<.5*SF._st.win.h?Math.ceil(k.y+k.height):0:0;if(!c.noScroll&&(0>n.right||0>n.bottom||n.left>SF._st.win.w||n.top>SF._st.win.h||n.top<l)){try{document.body.style.scrollBehavior=
"auto",document.documentElement.style.scrollBehavior="auto"}catch(w){}e.scrollIntoView({behavior:"instant",block:"center"});n=e.getBoundingClientRect()}}var q=1E4;SF.lib.fe(".SFdlg",function(w){parseInt(w.style.zIndex)>q&&(q=parseInt(w.style.zIndex))});c.noBackdrop||SF.lib.i(d,[{id:a+"_gry",className:"SFgry",style:{zIndex:q+1}}]);if(SF._is.mobile&&"undefined"!=typeof SF._st.win&&!c.top&&!c.left&&!c.right&&!c.bottom){l=d.getBoundingClientRect();var t=l.left;var u=l.right-SF._st.win.w;var v=l.top;var x=
l.bottom-SF._st.win.h;200<x-v&&(d.style.position="relative",h=!0)}h||(x=v=u=t=0);l=SF.lib.me({zIndex:q+2,transition:"opacity 0.5s",opacity:0},SF.lib.c(c,{exclude:["target","placement","noBackdrop","dismiss"]}),{position:h?"absolute":"fixed"});f=SF.lib.n({id:a,className:"SFdlg"+(SF.$("SFpne")?" "+SF.$("SFpne").className:""),"aria-modal":"true",style:l});SF._st.dlg.push({dlg:f,act:c.target||document.activeElement,mod:m});"string"==typeof b?f.innerHTML=b:SF.lib.i(f,b instanceof Array||b instanceof NodeList?
b:[b]);c.dismiss&&SF.lib.i(f,[{nodeName:"button",className:"SFclz",title:"Close",onclick:function(){SF.lib.dg(this.parentNode,!1)}}]);SF.lib.i(d,[f]);b="function"===typeof f.getBoundingClientRect?{w:f.getBoundingClientRect().width,h:f.getBoundingClientRect().height}:{w:f.scrollWidth,h:f.scrollHeight};if(e&&c.placement)if(g=SF.lib.n({id:a+"_ptr",style:{position:h?"absolute":"fixed",zIndex:l.zIndex,opacity:0,width:"0",height:"0"}}),SF.lib.i(d,[g]),"h"==c.placement||"H"==c.placement)g.style.borderTop=
g.style.borderBottom="10px solid transparent",SF._st.win.w-n.right>n.left?"h"==c.placement&&n.right>SF._st.win.w-n.right?(b.w=Math.min(b.w,n.right-25),f.style.right=parseInt(Math.max(0,SF._st.win.w-n.right+15)+u)+"px",g.style.right=parseInt(SF._st.win.w-n.right+5+u)+"px",g.style.borderLeft="10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")):(b.w=Math.min(b.w,SF._st.win.w-n.right-25),f.style.left=parseInt(n.right+15-t)+"px",g.style.left=parseInt(n.right+5-t)+"px",g.style.borderRight=
"10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")):"h"==c.placement&&SF._st.win.w-n.left>n.left?(b.w=Math.min(b.w,SF._st.win.w-n.left-25),f.style.left=parseInt(n.left+15-t)+"px",g.style.left=parseInt(n.left+5-t)+"px",g.style.borderRight="10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")):(b.w=Math.min(b.w,n.left-25),f.style.right=parseInt(Math.max(0,SF._st.win.w-n.left+15)+u)+"px",g.style.right=parseInt(SF._st.win.w-n.left+5+u)+"px",g.style.borderLeft=
"10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")),(n.top+n.bottom)/2>SF._st.win.h/2?(b.h=Math.min(b.h,parseInt((n.top+n.bottom)/2-5)),f.style.bottom=parseInt(SF._st.win.h-(n.top+n.bottom)/2-30+x)+"px",g.style.bottom=parseInt(SF._st.win.h-(n.top+n.bottom)/2-10+x)+"px"):(b.h=Math.min(b.h,parseInt(SF._st.win.h-(n.top+n.bottom)/2-35)),f.style.top=parseInt((n.top+n.bottom)/2-25-v)+"px",g.style.top=parseInt((n.top+n.bottom)/2-10-v)+"px");else{if("v"==c.placement||"V"==c.placement)g.style.borderLeft=
g.style.borderRight="10px solid transparent",SF._st.win.h-n.bottom>n.top?"v"==c.placement&&n.bottom>SF._st.win.h-n.bottom?(b.h=Math.min(b.h,n.bottom-25),f.style.bottom=parseInt(Math.max(0,SF._st.win.h-n.bottom+15)+x)+"px",g.style.bottom=parseInt(SF._st.win.h-n.bottom+5+x)+"px",g.style.borderTop="10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")):(b.h=Math.min(b.h,SF._st.win.h-n.bottom-25),f.style.top=parseInt(n.bottom+15-v)+"px",g.style.top=parseInt(n.bottom+5-v)+"px",
g.style.borderBottom="10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")):"v"==c.placement&&SF._st.win.h-n.top>n.top?(b.h=Math.min(b.h,SF._st.win.h-n.top-25),f.style.top=parseInt(n.top+15-v)+"px",g.style.top=parseInt(n.top+5-v)+"px",g.style.borderBottom="10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")):(b.h=Math.min(b.h,n.top-25),f.style.bottom=parseInt(Math.max(0,SF._st.win.h-n.top+15)+x)+"px",g.style.bottom=parseInt(SF._st.win.h-n.top+
5+x)+"px",g.style.borderTop="10px solid "+(c.backgroundColor?c.backgroundColor:"var(--SF-color-background)")),(n.left+n.right)/2>SF._st.win.w/2?(b.w=Math.min(b.w,parseInt((n.left+n.right)/2-5)),f.style.right=parseInt(SF._st.win.w-(n.left+n.right)/2-30+u)+"px",g.style.right=parseInt(SF._st.win.w-(n.left+n.right)/2-10+u)+"px"):(b.w=Math.min(b.w,parseInt(SF._st.win.w-(n.left+n.right)/2-25)),f.style.left=parseInt((n.left+n.right)/2-15-t)+"px",g.style.left=parseInt((n.left+n.right)/2-10-t)+"px")}else b.h=
Math.min(b.h,SF._st.win.h),b.w=Math.min(b.w,SF._st.win.w),c.top||c.bottom||(f.style.top=e?parseInt(Math.min(SF._st.win.h-b.h,Math.max(0,(n.top+n.bottom)/2-b.h/2))-v)+"px":parseInt((SF._st.win.h-b.h)/2-v)+"px"),c.left||c.right||(f.style.left=e?parseInt(Math.min(SF._st.win.w-b.w,Math.max(0,(n.left+n.right)/2-b.w/2))-t)+"px":parseInt((SF._st.win.w-b.w)/2-t)+"px");b.h&&(f.style.height?f.style.maxHeight||(f.style.maxHeight=parseInt(b.h+1)+"px"):(f.style.height=parseInt(b.h+1)+"px",f.firstChild.style.height=
""));b.w&&(f.style.width?f.style.maxWidth||(f.style.maxWidth=parseInt(b.w+1)+"px"):(f.style.width=parseInt(b.w+1)+"px",f.firstChild.style.width=""));f.setAttribute("rendered","");setTimeout(function(){f.style.opacity=1;g&&(g.style.opacity=1);SF.lib.fc(f)},SF._is.IE?1:100);return f}}};
SF.lib.alr=function(a,b){b=void 0===b?{}:b;SF.lib.sn(!1);if("string"==typeof a)var c=a;else if(null!=a&&"object"==typeof a&&a.message)c=a.message,!b.target&&"undefined"!=typeof a.cause&&a.cause instanceof Element&&(b={target:a.cause,placement:"v"});else return;SF._st.win&&SF._st.win.h&&SF._st.win.w&&SF.$("SFctr")&&document.body.contains(SF.$("SFctr"))?(SF.lib.dg("SFdlgtxt",{childNodes:[{"aria-live":"polite",innerHTML:c},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFdlgtxt",
!1)},innerHTML:"OK"}]}]},SF.lib.me({maxHeight:"80%",maxWidth:"80%"},b)),SF.$("SFdlgtxt").setAttribute("role","alertdialog")):SF.$("SFctr")?alert(c):setTimeout(function(){SF.close();delete SF._st.hsh;SF.lib.dn("SFspn");if(location.hash)if("undefined"!=typeof history&&"function"==typeof history.replaceState)try{history.replaceState(null,null,window.location.href.split("#")[0])}catch(d){}else try{window.location.replace(window.location.href.split("#")[0])}catch(d){}SF._st._do="MW removed"},1E3)};
SF.lib.ui=function(a){return SF.lib.n({nodeName:"img",className:"SFico",src:SF._is.cdn+"u/"+a+"_ico.jpg",onerror:function(){this.src=SF._is.cdn+"u/n_ico.jpg"}})};
SF.lib.ff=function(a){return"string"==typeof a?SF.lib.fx(a):"object"!=typeof a||"undefined"==typeof a.ad1&&"undefined"==typeof a.ad2&&"undefined"==typeof a.con?"object"!=typeof a||"undefined"==typeof a._ts&&"undefined"==typeof a.ipa?0===a?"N":1===a?"Y":typeof("number"==a)?a.toString():"":(a.sig?"<strong>"+a.sig+"</strong> @":"")+SF.lib.fd(a._ts):SF.lib.fb(a)};
SF.lib.fm=function(a,b){b=void 0===b?{preview:!1}:b;var c=[],d=[],e=[];b.preview&&(a.nam&&c.push({innerHTML:"From: "+a.nam}),a.eml&&c.push({innerHTML:"Reply-To: "+a.eml}),a.ttl&&c.push({innerHTML:"Subject: "+a.ttl}),c.length&&e.push({className:"SFmb2 SFplh",childNodes:c}));e.push({innerHTML:SF.lib.fx(a.dtl.replace(/<p[^>]*>/ig,"<p>").replace(/<div[^>]*>/ig,"<div>").replace(/<span[^>]*>/ig,"<span>").replace(/<br\s*\/?>/ig,"<br>").replace(/<br><br>/ig,"<br>").replace(/^<br>|<br>$/i,"").replace(/<p><br>/ig,
"<p>").replace(/<br><\/p>/ig,"</p>").replace(/<div><br>*/ig,"<div>").replace(/<br><\/div>/ig,"</div>"),SF._st.admin?{allowed:["a","img"]}:null)});if(a.att&&a.att.length)for(b=0;b<a.att.length;b++)a.att[b].url?d.push({childNodes:[{nodeName:"a",target:"_blank",onclick:SF.lib.fl,href:a.att[b].url,childNodes:[{nodeName:"i",className:"SFicoatc"},{nodeName:"span",innerHTML:a.att[b].lbl}]}]}):d.push({childNodes:[{nodeName:"span",className:"SFlnk",childNodes:[{nodeName:"i",className:"SFicoatc"},{nodeName:"span",
innerHTML:a.att[b].lbl}]}]});d.length&&e.push({className:"SFmt2",childNodes:d});return e};
SF.lib.fw=function(a,b){b=void 0===b?{host:""}:b;if(!a||"string"!=typeof a||0<=a.indexOf("javascript:"))return"";var c;a=a.trim().replace(/"/g,"%22").replace(/'/g,"%27").replace(/ /g,"%20");if(0<=(c=a.indexOf("://"))){var d=a.slice(0,c+3);"http://"!=d&&"https://"!=d&&(d="http://");a=a.slice(c+3)}else 0<=(c=a.indexOf("//"))?(d="//",a=a.slice(c+2)):d="http://";if(0<=(c=a.search(/\/|#/gi))){var e=a.slice(0,c);a=a.slice(c)}else e=a,a="";return(b&&b.host&&0<b.host.indexOf("//")?"":d)+(b&&b.host?b.host:
e)+a};SF.lib.fd=function(a){"string"==typeof a&&(a=parseInt(a.slice(0,8),16));"number"==typeof a&&(a=new Date(1E3*a));return a instanceof Date?a.toDateString().replace(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\s/g,"").replace(/([A-Z][a-z]{2})\s[0]?([1-9]?[0-9])\s([0-9]{4})/,"$1 $2, $3"):"n/a"};SF.lib.fy=function(a){"string"==typeof a&&(a=parseInt(a.slice(0,8),16));"number"==typeof a&&(a=new Date(1E3*a));return a instanceof Date?a.toDateString().replace(" 0"," ").replace(","," ").replace("  "," "):"n/a"};
SF.lib.fg=function(a){"string"==typeof a&&(a=parseInt(a.slice(0,8),16));"number"==typeof a&&(a=new Date(1E3*a));return a instanceof Date?a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).replace("a.m.","am").replace("p.m.","pm").replace(/^0?(\d{1,2}:\d{1,2})\s(am|pm)$/i,"$1$2").toLowerCase():"n/a"};
SF.lib.fq=function(a){"string"==typeof a&&(a=parseInt(a.slice(0,8),16));"number"==typeof a&&(a=new Date(1E3*a));a instanceof Date||(a=new Date);var b=a.getTimezoneOffset()/60;switch((new Date(a.getFullYear(),0,1)).getTimezoneOffset()/60){case 11:return 10==b?"SDT":"SST";case 10:return 9==b?"HADT":"HAST";case 9:return 8==b?"AKDT":"AKST";case 8:return 7==b?"PDT":"PST";case 7:return 6==b?"MDT":"MST";case 6:return 5==b?"CDT":"CST";case 5:return 4==b?"EDT":"EST";case 4:return"AST";case 0:return"GMT";case -1:return"CET";
case -2:return"EET";case -3:return"EAT";case -4:return"MSK";case -5:return"PKT";case -5.5:return"IST";case -7:return"THA";case -8:return"ACT";case -9:return"JST";case -10:return"AEST";case -12:return"NZST";default:a=Math.floor(Math.abs(b));var c=60*(Math.abs(b)-a);return"UTC"+(0<b?"-":"+")+(9<a?"":"0")+a+(c?":"+("00"+c).slice(-2):"")}};
SF.lib.fa=function(a,b){if(b&&0<=SF._is.szc.indexOf(b)){var c=Math.abs(a).toPrecision(14).split(".");if(!c[0].match(/^[0-9\-]*$/))return a.toString();var d=parseInt(c[0])+(1<c.length&&5<=parseInt(c[1].slice(0,1))?0<a?1:-1:0);c=""}else{c=(100*Math.abs(a)).toPrecision(14).split(".");if(!c[0].match(/^[0-9\-]*$/))return a.toString();d=(parseInt(c[0])+(1<c.length&&5<=parseInt(c[1].slice(0,1))?0<a?1:-1:0))/100;c=(d%1).toFixed(2).substr(1);".00"==c&&(c="")}var e=[];var f=Math.floor(Math.abs(d)%1E3);for(d=
Math.floor(Math.abs(d)/1E3);f||d;f=d%1E3,d=Math.floor(d/1E3))e.push((10>f?"00":100>f?"0":"")+f.toFixed(0));e=e.reverse().join(",").replace(/^0*/,"");return(0>a?"-":"")+(b?SF._is.spc[b]:"")+(e?e:"0")+c};SF.lib.fi=function(a){return"object"==typeof a&&a?!a.cit&&a.ad1&&a.sta&&a.zip||a.con&&"NZ"==a.con&&!a.ad2&&!a.cit&&a.sta?SF.lib.fh(a.sta):a.cit?SF.lib.fh(a.cit):"":""};
SF.lib.fs=function(a){return"object"!=typeof a||!a||!a.cit&&a.ad1&&a.sta&&a.zip||a.con&&0<="AT BE CH DE ES FI FR GR IS LU MC NL NO PL PT SE SG".split(" ").indexOf(a.con)?"":a.con&&0<=["GB","IE"].indexOf(a.con)&&a.cot?SF.lib.fh(a.cot):a.sta?SF.lib.fh(a.sta):""};SF.lib.fz=function(a){return"object"==typeof a&&a&&a.zip?SF.lib.fh(a.zip):""};SF.lib.fo=function(a){return"object"==typeof a&&a&&a.con?SF.lib.fh(a.con):""};SF.lib.f1=function(a){return"object"==typeof a&&a&&a.ad1?SF.lib.fh(a.ad1):""};
SF.lib.f2=function(a){if("object"!=typeof a||!a)return"";if(a.ad2)return SF.lib.fh(a.ad2);var b=[];a.con&&0<="AT BE CH DE ES FR GR IS LU MC NL NO PL PT SE".split(" ").indexOf(a.con)?(a.zip&&b.push(a.zip),a.cit&&b.push(a.cit)):a.con&&0<=["FI"].indexOf(a.con)?(a.zip&&b.push(a.zip),a.cit&&b.push(a.cit.toUpperCase())):a.con&&0<=["IE"].indexOf(a.con)?(a.cit&&b.push(a.cit),a.cot&&b.push(a.cot),a.zip&&b.push(a.zip)):a.con&&0<=["IT"].indexOf(a.con)?(a.zip&&b.push(a.zip),a.cit&&b.push(a.cit),a.sta&&b.push(a.sta)):
(a.con&&"GB"==a.con?(a.cit&&b.push(a.cit),!a.cot||a.cit&&a.cot==a.cit||b.push(a.cot),!a.sta||a.cot||a.cit&&a.sta==a.cit||b.push(a.sta)):a.con&&"NZ"==a.con?a.cit?b.push(a.cit):!a.ad2&&a.sta&&b.push(a.sta):a.con&&"SG"==a.con?b.push("Singapore"):(a.cit&&b.push(a.cit),!a.sta||a.cit&&a.sta.toLowerCase()==a.cit.toLowerCase()||b.push(a.sta)),a.zip&&b.push(a.zip));return SF.lib.fh(b.join(" ")+(a.con?b.length?", "+a.con:a.con:""))};
SF.lib.fv=function(a){if("object"!=typeof a||!a)return"Global";var b=[];a.cit&&b.push("City: "+SF.lib.fh(a.cit));a.sta&&b.push("State: "+SF.lib.fh(a.sta));a.zip&&b.push("Zip: "+SF.lib.fh(a.zip));a.con&&b.push("Country: "+SF.lib.fh(a.con));return b.length?b.join(", "):"Global"};
SF.lib.fb=function(a){if("string"==typeof a)return SF.lib.fh(a);if("object"!=typeof a||!a)return"";var b=[];a.ad2?b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.ad2)+"</span>"):a.con&&0<="AT BE CH DE ES FR GR IS LU MC NL NO PL PT SE".split(" ").indexOf(a.con)?(a.zip&&b.push('<span itemprop="postalCode">'+SF.lib.fh(a.zip)+"</span>"),a.cit&&b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.cit)+"</span>")):a.con&&0<=["FI"].indexOf(a.con)?(a.zip&&b.push('<span itemprop="postalCode">'+SF.lib.fh(a.zip)+
"</span>"),a.cit&&b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.cit.toUpperCase())+"</span>")):a.con&&0<=["IE"].indexOf(a.con)?(a.cit&&b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.cit)+"</span>"),a.cot&&b.push('<span itemprop="addressRegion">'+SF.lib.fh(a.cot)+"</span>"),a.zip&&b.push('<span itemprop="postalCode">'+SF.lib.fh(a.zip)+"</span>")):a.con&&0<=["IT"].indexOf(a.con)?(a.zip&&b.push('<span itemprop="postalCode">'+SF.lib.fh(a.zip)+"</span>"),a.cit&&b.push('<span itemprop="addressLocality">'+
SF.lib.fh(a.cit)+"</span>"),a.sta&&b.push('<span itemprop="addressRegion">'+SF.lib.fh(a.sta)+"</span>")):(a.con&&"GB"==a.con?(a.cit&&b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.cit)+"</span>"),!a.cot||a.cit&&a.cot==a.cit||b.push('<span itemprop="addressRegion">'+SF.lib.fh(a.cot)+"</span>"),!a.sta||a.cot||a.cit&&a.sta==a.cit||b.push('<span itemprop="addressRegion">'+SF.lib.fh(a.sta)+"</span>")):a.con&&"NZ"==a.con?a.cit?b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.cit)+"</span>"):
!a.ad2&&a.sta&&b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.sta)+"</span>"):a.con&&"SG"==a.con?b.push('<span itemprop="addressCountry">Singapore</span>'):(a.cit&&b.push('<span itemprop="addressLocality">'+SF.lib.fh(a.cit)+"</span>"),!a.sta||a.cit&&a.sta.toLowerCase()==a.cit.toLowerCase()||b.push('<span itemprop="addressRegion">'+SF.lib.fh(a.sta)+"</span>")),a.zip&&b.push('<span itemprop="postalCode">'+SF.lib.fh(a.zip)+"</span>"));!a.ad2&&a.con&&b.length&&(b.push(","),b.push('<span itemprop="addressCountry">'+
SF.lib.fh(a.con)+"</span>"));a.ad1&&b.unshift('<span itemprop="streetAddress">'+SF.lib.fh(a.ad1)+"</span>");return b.join("")};SF.lib.ca=function(a){return a.replace(/^[a-z]/,function(b){return b.toUpperCase()})};
SF.lib.fh=function(a){var b,c;if(!a)return"";"string"!=typeof a&&(a=a.toString());var d=0;var e=a.length;for(b=[];d<e;d++){var f=a.charCodeAt(d);127>=f?b.push(a.charAt(d)):55296<=f&&56319>=f&&d+1<e&&56320<=(c=a.charCodeAt(d+1))&&57343>=c?b.push("&#"+(1024*(f-55296)+a.charCodeAt(++d)-56320+65536).toString()+";"):b.push("&#"+f+";")}return b.join("")};
SF.lib.fu=function(a){var b;if(!a)return"";for("string"!=typeof a&&(a=a.toString());0<=(b=a.search(/&#[0-9a-fA-F]{2,6};/ig));){b=a.slice(b,a.indexOf(";",b)+1);var c=parseInt(b.slice(2,-1));a=65535>=c?a.replace(b,String.fromCharCode(c)):a.replace(b,String.fromCharCode((c-65536>>10)+55296)+String.fromCharCode((c-65536)%1024+56320))}for(;0<=(b=a.search(/&#x[0-9a-fA-F]{2,6};/ig));)b=a.slice(b,a.indexOf(";",b)+1),c=parseInt(b.slice(3,-1),16),a=65535>=c?a.replace(b,String.fromCharCode(c)):a.replace(b,String.fromCharCode((c-
65536>>10)+55296)+String.fromCharCode((c-65536)%1024+56320));return a};SF.lib.fr=function(a,b){if(!a)return"";"string"!=typeof a&&(a=a.toString());a=SF.lib.fh(a).replace(/%u([0-9a-fA-F]{4})/ig,"&#x$1;").replace(/'/ig,"&apos;").replace(/"/ig,"&quot;").replace(/</ig,"&lt;").replace(/>/ig,"&gt;").replace(/[\t\r]/g,"");b&&b.allowed&&0<=b.allowed.indexOf("br")&&(a=a.replace(/\n/g,"<br>").replace(/&lt;br&gt;/g,"<br>"));return a.replace(/(\s|\t|<br>)+$|^(\s|\t|<br>)+/g,"")};
SF.lib.ft=function(a,b){if(!a)return"";"string"!=typeof a&&(a=a.toString());a=SF.lib.fu(a);a=b&&b.allowed&&0<=b.allowed.indexOf("br")?a.replace(/<br\s?\/?>/g,"\n"):a.replace(/\n/g,"");return a.replace(/(<[^>]*>)/ig," ").replace(/&nbsp;/ig," ").replace(/&apos;/ig,"'").replace(/&quot;/ig,'"').replace(/&amp;/ig,"&").replace(/&lt;/ig,"<").replace(/&gt;/ig,">").replace(/(\s|\t|\n)+$|^(\s|\t|\n)+/g,"")};
SF.lib.fx=function(a,b){if(!a)return"";"string"!=typeof a&&(a=a.toString());a=SF.lib.fh(a.trim()).replace(/<[wo]:[^>]*>[^<]*?<\/[wo]:[^>]*>/ig,"").replace(/<[\/]?[wo]:[^\\>]*[\\]?>/ig,"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/<\s*br[\s\/]*>/ig,"&l;br&g;").replace(/%u([0-9a-fA-F]{4})/ig,"&#x$1;").replace(/<!\-\-\[if[^!]*!\[endif]\-\->/g,"").replace(/<style>[^<]*<\/style>/g,"").replace(/[\t\r\n]/g,"").replace(/(\s|\t|&l;br&g;)+$|^(\s|\t|&l;br&g;)+/g,"").replace(/<(\/)?\s*(b|em|strong|i|u|s|strike|sub|sup|ul|ol|li|tbody|thead|tfoot)(\s[^>]*)?>/ig,
"&l;$1$2&g;").replace(/<\s*(p|span|div|pre|blockquote|h1|h2|h3|h4|h5|h6|table|tr|td|th)(\s*class="[^"]*")?(\s*style="[^"]*")?[^>]*>/ig,"&l;$1$2$3&g;").replace(/<\s*(p|span|div|pre|blockquote|h1|h2|h3|h4|h5|h6|table|tr|td|th)(\s*class='[^']*')?(\s*style='[^']*')?[^>]*>/ig,"&l;$1$2$3&g;").replace(/<\/\s*(p|span|div|pre|blockquote|h1|h2|h3|h4|h5|h6|table|tr|td|th)\s*>/ig,"&l;/$1&g;");b&&b.allowed&&0<=b.allowed.indexOf("a")&&(a=a.replace(/<\s*a([^>]*)>/ig,"&l;a$1&g;").replace(/<\/\s*a\s*>/ig,"&l;/a&g;"));
b&&b.allowed&&0<=b.allowed.indexOf("img")&&(a=a.replace(/<\s*img([^>]*)>/ig,"&l;img$1&g;"));return a.replace(/(<[^>]*>)/ig,"").replace(/&g;/ig,">").replace(/&l;/ig,"<").replace(/^(<p><\/p>)*|(<p><\/p>)$/g,"")};
SF.lib.fj=function(a){return SF.lib.fh(a).replace(/<[wo]:[^>]*>[^<]*?<\/[wo]:[^>]*>/ig,"").replace(/<[\/]?[wo]:[^\\>]*[\\]?>/ig,"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/%u([0-9a-fA-F]{4})/ig,"&#x$1;").replace(/<!\-\-\[if[^!]*!\[endif]\-\->/g,"").replace(/<\s*!doctype[^>]*>/ig,"").replace(/<\s*head[^>]*>.*<\s*\/head\s*>/ig,"").replace(/<\s*\/?(html|body)[^>]*>/ig,"").trim()};
SF.lib.cm=function(a,b){var c,d,e=/\s[0-9\$]*$|^[0-9\$]*$/,f=/^[0-9\$]*\s/;"object"==typeof a?(a=(a.nam||a.biz||("string"==typeof a.ctc?a.ctc:"")||("string"==typeof a.lbl?a.lbl:"")||a.ttl||"").toLowerCase(),b=(b.nam||b.biz||("string"==typeof b.ctc?b.ctc:"")||("string"==typeof b.lbl?b.lbl:"")||b.ttl||"").toLowerCase()):(a=a.toLowerCase(),b=b.toLowerCase());return(c=a.match(e))&&(d=b.match(e))&&a.replace(e,"")==b.replace(e,"")?parseInt(c[0].replace(/[^0-9]/g,""))-parseInt(d[0].replace(/[^0-9]/g,"")):
(c=a.match(f))&&(d=b.match(f))?parseInt(c[0].replace(/[^0-9]/g,""))-parseInt(d[0].replace(/[^0-9]/g,"")):a>b?1:a<b?-1:0};
SF.lib.en=function(a){var b="and & dr mr ms miss mrs master rev fr prof pres gov ofc coach captain general magistrate the hon honorable honourable pv2 pfc lcpl cpl spc spc2 spc3 spc4 sn po3 po2 po1 cpo sgt ssg ssgt tsgt msgt sfc gysgt 1sg msg scpo smsgt sgm csm mgysgt sgtmaj mcpo cmsgt sma sgtmajmc mcpon cmsaf cmssf mcpocg wo1 cw2 cwo2 cw3 cwo3 cw4 cwo4 cw5 cwo5 2lt 2ndlt ens 1lt 1stlt ltjg cpt capt lt maj lcdr ltc ltcol cdr col bg bgen rdml mg majgen radm ltg ltgen vadm gen adm 1st 2d".split(" ");var c=
"jr sr ii iii iv v vi 2nd 3rd abpp bcc chef coo cpa cpa ccim dc dds edd esq esquire esq fabno fca frp gm jd lac lbsw licsw lmhc lmsw lpc lpcc manager med ms msw msom mph md nd phd psyd pa pe ps vm assoc".split(" "),d=["MAc","FAIA","AIA"],e="abu da de del della den der des di dos du la mac st st. von van zu".split(" "),f="architects agency appliance appliances bistro brasserie cafe computer corporation company consulting connection connections conditioning catering construction communications cnc control deli diner design express enterprise enterprises espresso foods gourmet hotel investments international interiors innovations insurance legal limited lounge media management office offices organic promotions promotional partners partnership pizza productions printing plumbing professionals racing realty repair resources restaurant remodeling roofing seafood services sichuan strategies steakhouse solutions studio staffing sushi systems trattoria tech technology travel tax taxes thai".split(" "),
h=["abc","a1","1st"],g="centre company corp events firm farms farm group inc lp llp llc ltd limited machine moving pllc pte pty plus pro pros ranch ranches signs trust tiles treating".split(" ");a=a.trim().replace(/\s{1,}/g," ");if(a.match(/^[0-9]{1,}$|^[0-9]{1,}\s|\s[0-9]{1,}\s|\s[0-9]{1,}$/))return{first:a.trim(),last:""};var k=a.toLowerCase().replace(/[\.,]/g," ").trim().split(" ");if(k.length&&(k.filter(function(m){return 0<=f.indexOf(m)}).length||0<=h.indexOf(k[0])||0<=g.indexOf(k.pop())))return{first:a.trim(),
last:""};for(k=a.split(" ");k.length&&0<=b.indexOf(k[0].replace(/[,\.]/g,"").toLowerCase());)k.splice(0,1);b=k.join(" ");if(b.match(/^([A-Za-z][a-z]+\s){1,3}[A-Za-z][A-Za-z]+(\-[A-Za-z][a-z]+)?,\s?[A-Z\.]{2,5}[a-z]{0,2}([,]?\s[A-Z\.]{2,5}[a-z]{0,2})*$/))k=b.slice(0,b.indexOf(",")).split(" ");else for(;k.length&&(0<=c.indexOf(k.slice(-1)[0].replace(/[,.]/g,"").toLowerCase())||0<=d.indexOf(k.slice(-1)[0].replace(/[,.]/g,"")));)k.pop();b=k.join(" ").split(",");if(1<b.length){for(;b.length&&!b.slice(-1)[0].trim();)b.pop();
if(2==b.length){b[0]=b[0].trim().split(" ");if(1<b[0].length)for(;b[0].length&&0<=c.indexOf(b[0].slice(-1)[0].replace(/[,.]/g,"").toLowerCase());)b[0].pop();if(1==b[0].length||2==b[0].length||3==b[0].length&&0<=e.indexOf(b[0][0].toLowerCase())&&0<=e.indexOf(b[0][1].toLowerCase()))return{first:b[1].trim(),last:b[0].join(" ").trim()};b[0]=b[0].join(" ")}k=b[0].split(" ")}for(;k.length&&0<=c.indexOf(k.slice(-1)[0].replace(/[,.]/g,"").toLowerCase());)k.pop();2>k.length&&(k=a.replace(/[.,]/g,"").split(" "));
return 3<k.length&&0<=e.indexOf(k.slice(-3,-2)[0].toLowerCase())&&0<=e.indexOf(k.slice(-2,-1)[0].toLowerCase())?{first:k.slice(0,-3).join(" "),last:k.slice(-3).join(" ")}:2<k.length&&0<=e.indexOf(k.slice(-2,-1)[0].toLowerCase())?{first:k.slice(0,-2).join(" "),last:k.slice(-2).join(" ")}:1<k.length?{first:k.slice(0,-1).join(" "),last:k.slice(-1).join(" ")}:{first:k.join(" "),last:""}};
SF.lib.ra=function(a){var b;if("object"==typeof a&&a.length)for(b=a.length-1;b;b--){var c=Math.floor(Math.random()*(b+1));var d=a[b];a[b]=a[c];a[c]=d}};
SF.lib.tf=function(a,b,c,d){var e,f,h,g,k,m=!1,l=!1;SF._st.admin&&!SF.$("SFusrpne")&&(l=!0);if("undefined"==typeof d){var n=SF.lib.n({nodeName:"formtable"});n.appendChild(e=SF.lib.n({nodeName:"formrowgroup"}))}else e=d;for(k=n=0;n<a.length;n++)if(h=a[n]){if(h._id&&b&&"object"==typeof b){var q=h._id.replace(/\]/g,"").split("[");var t=1==q.length&&"undefined"!=typeof b[q[0]]?b[q[0]]:2==q.length&&"undefined"!=typeof b[q[0]]&&"undefined"!=typeof b[q[0]][q[1]]?b[q[0]][q[1]]:3==q.length&&"undefined"!=typeof b[q[0]]&&
"undefined"!=typeof b[q[0]][q[1]]&&"undefined"!=typeof b[q[0]][q[1]][q[2]]?b[q[0]][q[1]][q[2]]:4==q.length&&"undefined"!=typeof b[q[0]]&&"undefined"!=typeof b[q[0]][q[1]]&&"undefined"!=typeof b[q[0]][q[1]][q[2]]&&"undefined"!=typeof b[q[0]][q[1]][q[2]][q[3]]?b[q[0]][q[1]][q[2]][q[3]]:h.def?h.def:!1}else t=h.def?h.def:!1;"undefined"==typeof h.typ&&(h.typ="undefined"==typeof h.opt?-1:9);"undefined"==typeof h.lbl&&"undefined"!=typeof h.ask&&(h.lbl=h.ask);(f=8==h.typ||12==h.typ?h.plh?h.plh:null:h.lbl?
h.lbl:null)&&(k=Math.max(k,f.length));q={nodeName:"formrow",label:f,childNodes:[]};switch(h.typ){case -2:q.className="SFpad";q.childNodes.push({innerHTML:h.dtl});break;case -1:q.className="SFdsn";q.childNodes.push({nodeName:"input",name:h._id,type:"hidden",value:!1===t?null:t});break;case 1:q.childNodes.push({nodeName:"input",type:"text",name:h._id,"aria-label":f,autocomplete:l?"off":null,required:h.req?!0:null,dataset:h.rxp||h.err?SF.lib.c(h,{only:["rxp","err"]}):null,placeholder:h.plh?SF.lib.ft(h.plh):
null,value:!1===h?"":t});break;case 2:q.childNodes.push({nodeName:"a",innerHTML:"Change","aria-label":f?"Change "+f:null,onclick:function(){this.style.display="none";this.nextSibling.style.display="";this.nextSibling.removeAttribute("readonly");SF.lib.fc(this.nextSibling)}},{nodeName:"input",type:"password",name:h._id,style:{display:"none"},"aria-label":f,autocomplete:"new-password-"+(new Date).getTime(),readonly:"readonly",required:!0,dataset:{rxp:h.rxp?h.rxp:"^.{6,}$",err:h.err?h.err:"Too short"},
value:""});break;case 3:q.childNodes.push({nodeName:"textarea",name:h._id,"aria-label":f,required:h.req?!0:null,value:!1===t?"":t});break;case 4:for(g=0;SF.$("SFmce"+h._id+g);g++);q.childNodes.push({nodeName:"textarea",className:"SFhtm",id:"SFmce"+h._id+g,name:h._id,"aria-label":f,required:h.req?!0:null,style:{height:"13em"},innerHTML:!1===t?"":SF.lib.fx(t)});m=!0;break;case 5:q.childNodes.push({nodeName:"input",type:"date",name:h._id,"aria-label":f,autocomplete:l?"off":null,placeholder:h.plh?SF.lib.ft(h.plh):
null,value:!1===t?"":t});break;case 6:q.childNodes.push({nodeName:"input",type:"time",name:h._id,"aria-label":f,autocomplete:l?"off":null,placeholder:h.plh?SF.lib.ft(h.plh):null,value:!1===t?"":t});break;case 7:q.childNodes.push({nodeName:"input",type:"text",name:h._id+"[ad1]","aria-label":f?f+" (street)":null,required:h.req?!0:null,placeholder:h.plh?SF.lib.ft(h.plh):null,autocomplete:l?"off":null,value:"object"==typeof t&&t&&"undefined"!=typeof t.ad1?t.ad1:"",onblur:SF.lib.gg},{nodeName:"input",
type:"text",name:h._id+"[ad2]","aria-label":f?f+" (city, state/province, postal code)":null,required:h.req?!0:null,placeholder:"City, state/province, postal code",autocomplete:l?"off":null,value:"object"==typeof t&&t?SF.lib.f2(t):"",onblur:SF.lib.gg});"object"==typeof t&&t&&SF.lib.gg(t,{updateCacheOnly:!0});l&&q.childNodes.push({nodeName:"button",className:"SFlnk",childNodes:[{nodeName:"i",className:"SFicoset"}],onclick:SF.lib.ge});break;case 8:q.childNodes.push({nodeName:"input",type:"checkbox",
name:h._id,checked:t&&"0"!=t,innerHTML:h.lbl?h.lbl:""});break;case 9:g=h.opt?h.opt.map(function(u,v){return{nodeName:"option",value:"object"==typeof u?"undefined"==typeof u._id?v.toString():u._id:u.trim(),disabled:"object"==typeof u&&"undefined"!=typeof u.cap&&0>=u.cap?"disabled":null,innerHTML:SF.lib.fr("object"==typeof u?u.lbl:u)+" "}}):[];c?g.unshift({nodeName:"option",value:"",innerHTML:"-- n/a --"}):(h.nul||!g.length)&&g.unshift({nodeName:"option",value:"",innerHTML:" "});q.childNodes.push({nodeName:"select",
name:h._id,"aria-label":f,required:h.req&&h.opt&&h.opt.length?!0:null,childNodes:g,value:!1!==t?t:c||h.nul?"":null});break;case 10:q.childNodes.push({nodeName:"input",type:"file",name:h._id,"aria-label":f,required:h.req?!0:null,value:t?t:null});break;case 11:g=!1===t?"":"object"==typeof t&&(t.ad1||t.ad2||t.con)?SF.lib.f2(t):"object"==typeof t&&t._ts&&t.ipa?"Acknowledged"+(t.sig?" <strong>"+t.sig+"</strong>":"")+(l?" by "+t.nam:"")+" on "+SF.lib.fd(t._ts)+" "+SF.lib.fg(t._ts)+(l?" from IP address "+
t.ipa:""):"object"==typeof t&&t._ts&&t.fnm?"File "+t.fnm+" uploaded "+SF.lib.fd(t._ts)+" "+SF.lib.fg(t._ts):t;q.childNodes.push({nodeName:"span",className:"SFtxt",innerHTML:g});break;case 12:"string"!=typeof t||"n"!=t.trim().toLowerCase()&&"0"!=t.trim()||(t="");l&&!t?q.childNodes.push({childNodes:[h.dtl?{nodeName:"button",className:"SFlnk",data:{dtl:h.dtl},style:{display:"block"},onclick:function(){SF.lib.alr(SF.d.get(this).dtl,{dismiss:!0});return!1},innerHTML:h.lbl||"Required"}:{innerHTML:h.lbl||
""},{className:"SFemp",innerHTML:"Not acknowledged"}]}):h.req?q.childNodes.push({nodeName:"input",type:"termssignature",name:h._id,"aria-label":f,innerHTML:h.lbl||null,terms:h.dtl||null,value:t}):q.childNodes.push({nodeName:"input",type:"termscheckbox",name:h._id,innerHTML:h.lbl||null,terms:h.dtl||null,value:t});break;case 13:break;case 14:break;case 15:if(l)t&&q.childNodes.push({nodeName:"span",className:"SFtxt",innerHTML:t});else{g=!1;if(!1===t&&h.utm)for(t=window.location.search.slice(1).split("&"),
f=0;f<t.length;f++)t[f]=t[f].split("="),t[f][0]==h.utm&&(g=decodeURIComponent(t[f].slice(1).join("=")));g?(q.className="SFdsn",q.childNodes.push({nodeName:"input",name:h._id,type:"hidden",value:g})):q=!1}break;case 16:q.childNodes.push({nodeName:"input",type:"price",name:h._id,"aria-label":f,autocomplete:l?"off":null,required:h.req?!0:null,min:"undefined"==typeof h.min?null:h.min,max:"undefined"==typeof h.max?null:h.max,placeholder:h.plh?SF.lib.ft(h.plh):null,value:!1===h?"":t});break;default:q=!1}q&&
SF.lib.i(e,[q])}(40<k||m)&&e.parentNode&&0>e.parentNode.className.indexOf("SFblc")&&(e.parentNode.className+=" SFblc");m&&setTimeout(function(){SF.lib.it("textarea.SFhtm",!1)},100);return"undefined"==typeof d?e.parentNode:e};
SF.lib.it=function(a,b,c){SF._is.edit&&(new Promise(function(d){"undefined"==typeof tinymce||"undefined"==typeof tinymce.majorVersion||4>parseFloat(tinymce.majorVersion)?d(SF.lib.lo("https://cdn.membershipworks.com/mce.js")):d()})).then(function(){var d={selector:a,theme:"modern",resize:"both",skin:!1,relative_urls:!1,convert_urls:!1,content_style:"body{"+(SF._is.dark?"color:#eee;background:#000;":"color:#111;background:#fff;")+"font-family:system-ui,sans-serif;font-size:15px}",browser_spellcheck:!0};
b?"tpl"===b?(d.target_list=[{title:"Normal",value:""},{title:"New window",value:"_blank"}],d.plugins=6>parseFloat(tinymce.minorVersion)?"link code":"paste link code",d.paste_as_text=!0,d.menubar="format edit",d.toolbar="removeformat | bold italic underline | outdent indent | link unlink | code"):"tag"===b&&"function"==typeof c?(d.target_list=[{title:"Normal",value:""},{title:"New window",value:"_blank"}],d.plugins=6>parseFloat(tinymce.minorVersion)?"link image code":"paste lists link image code",
d.menubar="format edit",d.toolbar="tag removeformat | bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent | link unlink image | code",d.setup=c):(d.target_list=[{title:"Normal",value:""},{title:"New window",value:"_blank"}],d.plugins=6>parseFloat(tinymce.minorVersion)?"link image code":"paste lists link image code",d.menubar="format edit",d.toolbar="removeformat | bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent | link unlink image | code"):
(d.plugins=6>parseFloat(tinymce.minorVersion)?"":"paste lists",d.menubar="edit",d.toolbar="removeformat | bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent");return tinymce.init(d)}).then(function(d){var e,f;for(e=d.length-1;0<=e;e--)if(d[e].targetElm){d[e].targetElm.hasAttribute("aria-label")&&d[e].iframeElement&&(d[e].iframeElement.title="Rich text area for "+d[e].targetElm.getAttribute("aria-label")+". Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help.");
if(d[e].targetElm.hasAttribute("required")||d[e].targetElm.hasAttribute("data-rxp"))d[e].on("blur",SF.v);var h=d[e].contentAreaContainer.parentNode.querySelectorAll('button[role="presentation"]');for(f=h.length-1;0<=f;f--)h[f].parentNode.hasAttribute("aria-label")&&(h[f].setAttribute("aria-label",h[f].parentNode.getAttribute("aria-label")),h[f].parentNode.removeAttribute("aria-label"),h[f].parentNode.removeAttribute("role"),h[f].parentNode.removeAttribute("tabindex")),h[f].removeAttribute("role")}}).catch(SF.lib.no)};
SF.lib.sv=function(a,b){b=void 0===b?null:b;var c=!1,d=0;if((null!=b||!SF._st.ini)&&"undefined"!=typeof SF._st&&"undefined"!=typeof SF._st.win&&"undefined"!=typeof SF._st.win.h&&(a=SF.$(a))){if(!(b=SF.$(b)))for(b=a.parentNode;b&&b!=document.documentElement&&!SF.lib.ma(b,".SFdlg");b=b.parentNode){var e=b.scrollTop;b.scrollTop+=1;if(b.scrollTop!=e){b.scrollTop=e;break}}if(b&&b instanceof Element){var f=b.querySelector("header")||b.querySelector("#header")||b.querySelector("#hcontainer")||b.querySelector("#top")||
b.querySelector("#nav")||b.querySelector("nav");if(!b.contains(SF.$("SFctr"))||SF.$("SFctr").contains(f))f=!1;var h=setInterval(function(){var g;var k=SF.get("SFctr","data-top");if(null===k||isNaN(k=parseInt(k)))k=f&&(g=f.getBoundingClientRect())?20<g.y||g.height>.5*SF._st.win.h?0:0>g.y+g.height?0:0<=g.y&&20>g.y&&20<g.height&&g.y+g.height<.5*SF._st.win.h?Math.ceil(g.y+g.height):0:0;k=a.getBoundingClientRect().top-k;b.scrollTop+k<.25*SF._st.win.h&&(k=-b.scrollTop);if(Math.round(k))if(50>d++&&"smooth"!=
window.getComputedStyle(b).scrollBehavior){if(!1===c&&(c=Math.max(16-parseInt(Math.log(Math.abs(k))),2)),k=Math.round(0<k?Math.min(k,Math.max(k/c,20)):Math.max(k,Math.min(k/c,-20))),e=b.scrollTop,b.scrollTop+=k,2<Math.abs(b.scrollTop-e))return}else b.scrollTop+=k;clearInterval(h)},18)}else a.scrollIntoView({behavior:"smooth"})}};
SF.lib.sp=function(a){var b;if(a=SF.$(a))for(b=a.parentNode;b;b=b.parentNode)if((b.scrollTop+=1)&&b.scrollTop){--b.scrollTop;a.setAttribute("pos-h",a.clientHeight);a.setAttribute("pos-t",b.scrollTop);break}};
SF.lib.rt=function(a){var b;if(!(a=SF.$(a))||!a.getAttribute("pos-t")||!a.getAttribute("pos-h"))return!1;for(b=a.parentNode;b;b=b.parentNode)if((b.scrollTop+=1)&&b.scrollTop)return b.scrollTop=parseInt(a.getAttribute("pos-t"))+a.clientHeight-parseInt(a.getAttribute("pos-h")),a.removeAttribute("pos-h"),a.removeAttribute("pos-t"),!0;return!1};
SF.lib.th=function(a){if("touchstart"==a.type){var b;if(a.touches&&a.touches.length&&"object"==typeof(b=a.touches[0].target)){for(;b&&"object"==typeof b&&(!b.className||0>b.className.indexOf("SFwnr")&&0>b.className.indexOf("SFdlg"));)b=b.parentNode;SF._st.tch=b&&"object"==typeof b?{n:b,t:b.scrollTop+a.touches[0].pageY}:!1}}else"touchmove"==a.type?a.touches&&a.touches.length&&SF._st.tch&&(SF._st.tch.n.scrollTop=parseInt(SF._st.tch.t-a.touches[0].pageY),a.stopPropagation()):"touchend"==a.type&&delete SF._st.tch};
SF.lib.vd=function(a){var b=a.currentTarget,c=!1,d;var e=b.parentNode;if(e.hasAttribute("data-lst")&&b.className&&(c=e.getAttribute("data-lst"),e=SF.$(c),!e))return!1;if("dragstart"==a.type){a.dataTransfer.effectAllowed="move";a.dataTransfer.setData("Text",(new Date).getTime().toString());for(d=b.firstChild;d;d=d.nextSibling)if(d instanceof Element&&SF.lib.ma(d,".SFddi")){a.dataTransfer.setDragImage(d,0,0);break}a.stopPropagation();e.ondragover=SF.lib.vd;setTimeout(function(){b.className=(b.className.replace(/^SFddn|\sSFddn/,
"")+" SFddn").trim()},10)}else if("dragover"==a.type){var f=e.querySelector(".SFddn");!f||f==b||!c&&f.parentNode!=e||f&&f.parentNode.hasAttribute("data-lst")&&(!c||f.parentNode.getAttribute("data-lst")!=c)||c&&(!f.className||f.className.replace(/^SFddn|\sSFddn/,"").trim()!=b.className)?a.preventDefault&&a.preventDefault():(d=b.getBoundingClientRect(),a.clientY<d.top+d.height/2||b==e.lastChild||c&&b==b.parentNode.lastChild&&b.parentNode.getAttribute("data-lst")==c?f.nextSibling!=b&&SF.lib.i(b.parentNode,
[f],b):b.nextSibling!=f&&SF.lib.i(b.parentNode,[f],b.nextSibling),a.dataTransfer.dropEffect="move",a.stopPropagation(),a.preventDefault())}else if("dragend"==a.type){b.className=b.className.replace(/^SFddn|\sSFddn/,"").trim();for(d=e;d;d=d.parentNode)if((f=d.querySelector(".SFtplwrn"))&&SF.lib.iv(f.parentNode)){SF.set(d,"data-wrn","1");SF.lib.s(f,!0);break}a.stopPropagation();SF.lib.fc(b)}};
SF.lib.hd=function(a){var b=a.currentTarget,c;var d=b.parentNode;if("dragstart"==a.type)a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("Text",(new Date).getTime().toString()),a.dataTransfer.setDragImage(b,0,0),a.stopPropagation(),d.ondragover=SF.lib.hd,setTimeout(function(){b.className=(b.className.replace(/^SFddn|\sSFddn/,"")+" SFddn").trim()},10);else if("dragover"==a.type)if((c=d.querySelector(".SFddn"))&&c!=b&&c.parentNode==d){var e=b.getBoundingClientRect();a.clientX<e.left+e.width/
2||b==d.lastChild?c.nextSibling!=b&&SF.lib.i(b.parentNode,[c],b):b.nextSibling!=c&&SF.lib.i(b.parentNode,[c],b.nextSibling);a.dataTransfer.dropEffect="move";a.stopPropagation();a.preventDefault()}else a.preventDefault&&a.preventDefault();else"dragend"==a.type&&(b.className=b.className.replace(/^SFddn|\sSFddn/,"").trim(),a.stopPropagation(),SF.lib.fc(b))};
SF.lib.is=function(a,b,c){if(a=SF.$(a))SF.lib.i(a,[{style:{cssFloat:"left"},childNodes:[{nodeName:"a",href:"https://twitter.com/share",className:"twitter-share-button","data-count":"none","data-url":b,"data-text":c,innerHTML:"Tweet"}]},{style:{cssFloat:"left",marginLeft:"0.5em"},childNodes:[{className:"fb-share-button","data-layout":"button","data-href":b}]},{style:{clear:"both"}}]),a.onscroll=function(d){setTimeout(function(){d.currentTarget.scrollTop=0},10)},"object"==typeof twttr&&"object"==typeof twttr.widgets&&
"function"==typeof twttr.widgets.load?twttr.widgets.load():SF.lib.lo("//platform.twitter.com/widgets.js"),"object"==typeof window.FB&&"object"==typeof window.FB.XFBML&&"function"==typeof window.FB.XFBML.parse?window.FB.XFBML.parse(a.lastChild.previousSibling):SF.lib.lo("https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v23.0"+(SF.get("SFctr","data-fbk")?"&appId="+SF.get("SFctr","data-fbk"):""))};
SF.lib.se=function(a){var b,c=!1,d=!1,e;if(b=SF.$(a))if("A"==b.nodeName||"LI"==b.nodeName||b.parentNode&&"NAV"==b.parentNode.nodeName?c=b:(d=b,d.id&&(c=SF.$('[aria-controls="'+d.id+'"]'))),!c||!c.getAttribute("aria-disabled")){!d&&c&&c.hasAttribute("aria-controls")&&(d=SF.$(c.getAttribute("aria-controls")));if(d){var f=d.className.split(" ")[0];var h=!1;if(f)for(b=d.parentNode.querySelectorAll("."+f),e=0;e<b.length;e++)if(!b[e].style.display){h=b[e];break}h&&"SFpne"==f&&SF.lib.sp(h);if(c&&c.parentNode.hasAttribute("animated")&&
(!SF._is.IE||8<SF._is.IE)){if(c){b=c.parentNode.childNodes;for(e=0;e<b.length&&!b[e].hasAttribute("aria-selected")&&b[e]!=c;e++);var g=b[e]==c?"r":"l"}if(h!=d)if(h){var k=h.style.transition;b=h.offsetWidth;h.style.transition=(9===SF._is.IE?"-ms-":"")+(SF._is.WebKit?"-webkit-":"")+"transform 0.5s linear 0s,opacity 0.5s";SF._is.WebKit?h.style.webkitTransform="translate("+("r"==g?"":"-")+b+"px,0)":h.style.transform="translate("+("r"==g?"":"-")+b+"px,0)";h.style.opacity=0;setTimeout(function(){h.style.transition=
k?k:"";h.style.display="none";h.style.opacity=1;SF._is.WebKit?h.style.webkitTransform="":h.style.transform="";d.style.display=""},400)}else d.style.display=""}else f&&(SF.lib.fe(d.parentNode.querySelectorAll("."+f),function(m){m.style.display="none"}),d.style.display="");h!=d&&SF.lib.iv(d.parentNode)&&(SF.lib.rt(d)||SF._st.ini||"object"==typeof a&&a instanceof Event||h==d||SF.lib.sv(d.parentNode))}if(c){"LI"==c.nodeName&&1==c.childNodes.length&&"A"==c.firstChild.nodeName&&(c=c.firstChild);c.setAttribute("aria-selected",
"true");for(a=c;a&&a.parentNode&&("A"==a.parentNode.nodeName||"LI"==a.parentNode.nodeName||"UL"==a.parentNode.nodeName||"NAV"==a.parentNode.nodeName);a=a.parentNode)a.className=(a.className.replace(/^SFsel|\sSFsel/,"")+" SFsel").trim();if(a){b=a.querySelectorAll("[aria-selected]");for(e=b.length-1;0<=e;e--)b[e]!=c&&b[e].removeAttribute("aria-selected");b=a.querySelectorAll(".SFsel");for(e=b.length-1;0<=e;e--)b[e].contains(c)||(b[e].className=b[e].className.replace(/^SFsel|\sSFsel/,""))}}}};
SF.lib.sd=function(a){var b;a=document.querySelectorAll(a);for(b=0;b<a.length;b++)if(SF.lib.s(a[b]))return a[b];return!1};
SF.lib.vid=function(a,b){var c=SF._is.phone?480:852,d=SF._is.phone?270:480,e=(SF._is.phone?"http:":"https:")+SF._is.cmm;SF.lib.fe("video",function(f){f.pause()});SF.lib.dg("SFviddlg",[{nodeName:"video",controls:"controls",autoplay:b?null:"autoplay",width:c,height:d,style:{display:"block"},childNodes:[{nodeName:"source",type:"video/mp4",src:e+a+(SF._is.phone?"-m":"")+".mp4"},{nodeName:"source",type:"video/ogg",codecs:"theora, vorbis",src:e+a+".ogv"},{nodeName:"source",type:"video/webm",src:e+a+".webm"},
{nodeName:"object",id:"SFflv",width:c,height:d,type:"application/x-shockwave-flash",childNodes:[{nodeName:"param",name:"movie",value:e+"flv.swf"},{nodeName:"param",name:"allowfullscreen",value:"false"},{nodeName:"param",name:"flashvars",value:'config={"plugins":{"controls":{"url":"'+e+'flc.swf"}},"clip":{"url":"'+e+a+'.flv"'+(b?',"autoPlay":false':"")+"}}"},{innerHTML:"Adobe Flash player or a newer browser with HTML5 video support required"}]}]}],{dismiss:!0,width:c+"px",height:d+"px",overflow:"hidden"})};
SF.lib.vl=function(a,b){var c;if(b=SF.$(b)){var d=b.getBoundingClientRect();b.style.opacity=.1;(new Promise(function(e,f){c=SF.lib.dg("SFimgdlg",[{nodeName:"img",className:"SFclk",style:{opacity:0,transition:"opacity:0.5s"},title:"Click to close",onload:function(){this.style.opacity=1;var h=this.naturalHeight||this.height;var g=this.naturalWidth||this.width;if(h&&g){var k=Math.min(.9*SF._st.win.h/h,.9*SF._st.win.w/g);1>k&&(this.style.width=(g=parseInt(k*g))+"px",this.style.height=(h=parseInt(k*h))+
"px");c.style.top=parseInt((SF._st.win.h-h-20)/2)+"px";c.style.left=parseInt((SF._st.win.w-g)/2)+"px";c.style.width=g+"px";c.style.height=h+"px";SF.lib.s(this.nextSibling,!0);SF.lib.fc(c)}},onclick:function(){e()},onerror:function(){0<=this.src.indexOf("Expires")?(SF.lib.dg("SFimgdlg",!1),b.style.opacity=1,SF.lib.alr("Access to this image has expired, please refresh the profile"),f(null)):this.src=b.src},src:a},{nodeName:"button",className:"SFclz",title:"Close",style:{display:"none"},onclick:function(){e()}}],
{top:d.top+"px",left:d.left+"px",width:d.width+"px",height:d.height+"px",maxWidth:"none",maxHeight:"none",overflow:"hidden",transition:"top 0.5s,left 0.5s,width 0.5s,height 0.5s"})})).then(function(){c.childNodes[1].style.maxWidth="100%";c.style.top=parseInt(d.top)+"px";c.style.left=parseInt(d.left)+"px";c.style.width=d.width+"px";c.style.height=d.height+"px";setTimeout(function(){SF.lib.dg("SFimgdlg",!1);b.style.opacity=1},450)}).catch(SF.lib.no)}};
SF.lib.pr=function(a){var b=document.activeElement,c=SF.$("SFctr"),d=c.parentNode,e=c.nextSibling,f=[],h=[],g,k;return(new Promise(function(m){var l,n;for(n=c.firstChild;n;n=n.nextSibling)n.style&&SF.lib.s(n)&&(f.push(n),SF.lib.sp(n),SF.lib.s(n,!1));for(n=document.body.firstChild;n;n=n.nextSibling)!n.style||n.id&&"SFctr"==n.id||(h.push({n:n,d:n.style.display?n.style.display:""}),n.style.display="none");c.appendChild(g=SF.lib.n({id:"SFprn",childNodes:[{style:{position:"relative"},innerHTML:a.innerHTML},
{nodeName:"button",className:"SFclz",onclick:function(){clearInterval(k);m()}}]}));document.body.appendChild(c);window.onafterprint=function(){m()};k=setInterval(function(){n=g.querySelectorAll("img");for(l=0;l<n.length;l++)if(n[l].src&&!n[l].complete)return;clearInterval(k);window.print()},250)})).then(function(){var m;window.onafterprint=null;SF.lib.dn("SFprn");SF.lib.i(d,[c],e);for(m=0;m<h.length;m++)h[m].n.style.display=h[m].d;for(m=0;m<f.length;m++)SF.lib.s(f[m],!0);SF.lib.win({type:"resize"});
setTimeout(function(){for(m=0;m<f.length;m++)SF.lib.rt(f[m]);SF.lib.fc(b)},250)})};
SF.lib.ge=function(a){var b=a.currentTarget,c={ad1:SF.get(b.parentNode.childNodes[0]),ad2:SF.get(b.parentNode.childNodes[1])},d;if(c.ad1||c.ad2){var e=(SF.lib.f1(c)+" "+SF.lib.f2(c)).toLowerCase().replace(/,|\-/g," ").replace(/\s{2,}/g," ").trim();if(SF._st.ger)for(d=SF._st.ger.length-1;0<=d;d--)if(SF._st.ger[d].s==e||!c.con&&SF._st.ger[d].a.con&&SF._st.ger[d].s.slice(-3)==" "+SF._st.ger[d].a.con.toLowerCase()&&SF._st.ger[d].s.slice(0,-3)==e||c.con&&!SF._st.ger[d].a.con&&e.slice(-3)==" "+c.con.toLowerCase()&&
SF._st.ger[d].s==e.slice(0,-3)){c=SF.lib.c(SF._st.ger[d].a);break}!SF._st.ger||0>d?SF.lib.alr("No address data",{target:b,placement:"v"}):(new Promise(function(f){var h=function(){var g=SF.lib.f("SFgeodlg");0<="AT BE CH DE ES FI FR GR IS LU MC NL NO PL PT SE SG".split(" ").indexOf(g.con)?(SF.lib.s("#SFgeodlg .SFgeosta",!1),SF.lib.s("#SFgeodlg .SFgeocot",!1)):0<=["US","GB","IE","UK"].indexOf(g.con)?(SF.lib.s("#SFgeodlg .SFgeosta",!0),SF.lib.s("#SFgeodlg .SFgeocot",!0)):(SF.lib.s("#SFgeodlg .SFgeosta",
!0),SF.lib.s("#SFgeodlg .SFgeocot",!1))};SF.lib.dg("SFgeodlg",{childNodes:[{formRows:[{label:"Street",childNodes:[{nodeName:"input",type:"text",name:"ad1"}]},{label:"City",childNodes:[{nodeName:"input",type:"text",name:"cit"}]},{label:"Province/State",className:"SFgeosta",childNodes:[{nodeName:"input",type:"text",name:"sta"}]},{label:"County",className:"SFgeocot",childNodes:[{nodeName:"input",type:"text",name:"cot"}]},{label:"Postal/zip Code",childNodes:[{nodeName:"input",type:"text",name:"zip"}]},
{label:"Country",childNodes:[{nodeName:"input",type:"text",name:"con",required:!0,dataset:{rxp:"^[A-Z]{2}$",err:"ISO 3166 Alpha-2 code"},onchange:h}]},{label:"Longitude",childNodes:[{nodeName:"input",type:"number",name:"loc[0]",required:!0,dataset:{min:-180,max:180}}]},{label:"Latitude",childNodes:[{nodeName:"input",type:"number",name:"loc[1]",required:!0,dataset:{min:-90,max:90}}]},{className:"SFpad",childNodes:[{nodeName:"button",onclick:function(){SF.v("SFgeodlg")&&f(!0)},innerHTML:"Update"},{nodeName:"button",
onclick:function(){f(!1)},innerHTML:"Cancel"}]}]}]},{target:b,placement:"v"});SF.lib.f("SFgeodlg",c);h();SF.lib.fc("SFgeodlg")})).then(function(f){var h,g;if(f){SF._st.ger.splice(d,1);f=SF.lib.f("SFgeodlg");f.cit||delete f.cit;f.sta||delete f.sta;f.cot||delete f.cot;var k=(SF.lib.f1(f)+" "+SF.lib.f2(f)).toLowerCase().replace(/,|\-/g," ").replace(/\s{2,}/g," ").trim();for(d=SF._st.ger.length-1;0<=d;d--)if(SF._st.ger[d].s==k||!f.con&&SF._st.ger[d].a.con&&SF._st.ger[d].s.slice(-3)==" "+SF._st.ger[d].a.con.toLowerCase()&&
SF._st.ger[d].s.slice(0,-3)==k||f.con&&!SF._st.ger[d].a.con&&k.slice(-3)==" "+f.con.toLowerCase()&&SF._st.ger[d].s==k.slice(0,-3)){SF._st.ger[d].s=k;SF._st.ger[d].a=SF.lib.c(f);break}0>d&&SF._st.ger.push({s:k,a:SF.lib.c(f)});k=document.querySelectorAll('input[name$="[ad2]"]');for(g=k.length-1;0<=g;g--)if(h=k[g].parentNode.parentNode.querySelector('input[name="'+k[g].getAttribute("name").replace("[ad2]","[ad1]")+'"]')){var m={ad1:SF.get(h),ad2:SF.get(k[g])};m=(SF.lib.f1(m)+" "+SF.lib.f2(m)).toLowerCase().replace(/,|\-/g,
" ").replace(/\s{2,}/g," ").trim();if(m==e||c.con&&e.slice(-3)==" "+c.con.toLowerCase()&&e.slice(0,-3)==m)if(SF.set(h,f.ad1),SF.set(k[g],SF.lib.f2(f)),"function"==typeof k[g].onchange)k[g].onchange()}}}).then(function(){SF.lib.dg("SFgeodlg",!1)}).catch(SF.lib.alr)}else SF.lib.alr("Empty address",{target:b,placement:"v"})};
SF.lib.lm=function(a,b){a=void 0===a?"js":a;b=void 0===b?{}:b;var c;(c=SF.get("SFctr","data-map"))||(c="AIzaSy"+"BETFlBeVVxebb0P9qiRSYcYEFTH3fv8c4 CIuI2Qx8-FufN8_Cg_Jhic1_xHVUuHQRo CGUAtZQKOAbdAgT_CaEnIh--CAsmCWIYc Au_kErx0e0DC35fNybRFJF2urqyjy1rrA AQAGTvRHck0a_F0ih_DikBHAGNfI9sPxg CKeCsjdgk1Z_QYPNM4nmRIFEP8AmBsFmM B2NxI34ki8p31rvyRX56QSzVXvDfucJCg CrcSRObZVK2gVb8m0lKYiz1Ku922rnBwg CS1eqM0aZlM7f-C_hwK3KnUxqZTTAZCuI DA9Zy7GLewpg_bNW8ePeyZKNVyVfzSBME BKo2iHMZJP_8OWbbjKpgEVXM1BZQ2LY8o BCZ2oe_Srm_kA6W7IO8tlozukFLKOFgvY D95jTJEoNHl4qRZoPww_st5sFeGFYYfgc CYaH2OJESSAFtJnBOBECMi73P5QMGuVIo BP9nPuAdARMHJAVDnrQmGyUguIVXczZbQ C_8j5YqUucR3cKSpY7UVZkJNA9c4VyVoM Bz-Ppm_34CkfMDBzJwjfLdjqB7zOUMRwY B1qw--VB7SWynxjsRWKq_iu5BLnGWmX08 DbJHlK4A46-12H9kczAem1ek334KWnPXw CIsqb5I88dQmxYSMZEzgO6durhORN6mNk".split(" ")[Math.floor(("undefined"==typeof SF._st.org?
parseInt(SF.get("SFctr","data-org")):SF._st.org)%1E4/500)]);if("js"==a){if(SF._is.robot||"function"!=typeof String.prototype.matchAll)return Promise.reject(null);if("undefined"!=typeof google&&"undefined"!=typeof google.maps&&"object"==typeof google.maps.geometry)return SF.lib.lm.authFailed=Promise.resolve(),Promise.resolve();SF.lib.lm.authFailed=new Promise(function(d){window.gm_authFailure=d});return SF.lib.lo("//maps.googleapis.com/maps/api/js?v=3&libraries=geometry&key="+c+(b._rc?"&region="+b._rc:
""))}if("embed"==a){a={nodeName:"iframe",width:"100%",height:"100%",frameborder:"0",style:{border:"0"},allowfullscreen:"",src:"https://www.google.com/maps/embed/v1/"+(b.ad2||b.con?"place":"view")+"?key="+c+(b._rc?"&region="+b._rc:"")};if(b.ad2||b.con)a.src+="&q="+encodeURIComponent(SF.lib.fu((b.ad1?b.ad1+",":"")+SF.lib.f2(b)));b.loc&&(a.src+="&center="+b.loc[1]+","+b.loc[0]+"&zoom=11");return SF.lib.n(a)}};
SF.lib.gg=function(a,b){b=void 0===b?{updateCacheOnly:!1,returnFormattedAddress:!1,returnBoundary:!1,_rc:""}:b;var c=!1,d;if(a instanceof Event){c=a;var e=c.currentTarget;if(c.relatedTarget&&e.name&&c.relatedTarget.name&&c.relatedTarget.name.slice(0,-2)==e.name.slice(0,-2))return Promise.resolve(null);a={};var f=e.name.slice(-4,-1);a[f]=SF.lib.fh(e.value);"ad1"==f&&e.nextSibling&&e.nextSibling.name&&e.nextSibling.name==e.name.slice(0,-5)+"[ad2]"?a.ad2=SF.lib.fh(e.nextSibling.value):"ad2"==f&&e.previousSibling&&
e.previousSibling.name&&e.previousSibling.name==e.name.slice(0,-5)+"[ad1]"&&(a.ad1=SF.lib.fh(e.previousSibling.value))}"undefined"==typeof SF._st.ger&&(SF._st.ger=[{s:"usa",a:{con:"US",ad2:"usa",ful:"United States",loc:[-95.71289100000001,37.09024],bnd:{_ne:[-66.88541700000002,71.5388001],_sw:[170.59569999999997,18.7763]}}},{s:"alabama",a:{sta:"AL",con:"US",ful:"Alabama, USA",loc:[-86.90229799999997,32.3182314],bnd:{_ne:[-84.88824599999998,35.008028],_sw:[-88.47322689999999,30.144425]}}},{s:"alaska",
a:{sta:"AK",con:"US",ful:"Alaska, USA",loc:[-149.4936733,64.2008413],bnd:{_ne:[-129.97951090000004,71.441059],_sw:[172.34784609999997,51.175092]}}},{s:"arizona",a:{sta:"AZ",con:"US",ful:"Arizona, USA",loc:[-111.09373110000001,34.0489281],bnd:{_ne:[-109.04522309999999,37.0042599],_sw:[-114.8165909,31.3321771]}}},{s:"arkansas",a:{sta:"AR",con:"US",ful:"Arkansas, USA",loc:[-91.8318334,35.20105],bnd:{_ne:[-89.64483790000003,36.4997491],_sw:[-94.61791900000003,33.0041059]}}},{s:"california",a:{sta:"CA",
con:"US",ful:"California, USA",loc:[-119.41793239999998,36.778261],bnd:{_ne:[-114.13121100000001,42.0095169],_sw:[-124.48200300000002,32.528832]}}},{s:"colorado",a:{sta:"CO",con:"US",ful:"Colorado, USA",loc:[-105.78206740000002,39.5500507],bnd:{_ne:[-102.04087800000002,41.0034439],_sw:[-109.06025599999998,36.992424]}}},{s:"connecticut",a:{sta:"CT",con:"US",ful:"Connecticut, USA",loc:[-73.08774900000003,41.6032207],bnd:{_ne:[-71.787239,42.050587],_sw:[-73.72777500000001,40.950943]}}},{s:"delaware",
a:{sta:"DE",con:"US",ful:"Delaware, USA",loc:[-75.52766989999998,38.9108325],bnd:{_ne:[-74.98416499999996,39.8394839],_sw:[-75.78914789999999,38.451018]}}},{s:"florida",a:{sta:"FL",con:"US",ful:"Florida, USA",loc:[-81.51575350000002,27.6648274],bnd:{_ne:[-79.97430600000001,31.000968],_sw:[-87.63489600000003,24.396308]}}},{s:"georgia",a:{sta:"GA",con:"US",ful:"Georgia, USA",loc:[-82.90007509999998,32.1656221],bnd:{_ne:[-80.75142900000003,35.0006589],_sw:[-85.60516489999998,30.3555908]}}},{s:"hawaii",
a:{sta:"HI",con:"US",ful:"Hawaii, USA",loc:[-155.58278180000002,19.8967662],bnd:{_ne:[-154.75579189999996,28.517269],_sw:[-178.4435931,18.86546]}}},{s:"idaho",a:{sta:"ID",con:"US",ful:"Idaho, USA",loc:[-114.74204079999998,44.0682019],bnd:{_ne:[-111.04349500000001,49.0011461],_sw:[-117.24302699999998,41.9880051]}}},{s:"illinois",a:{sta:"IL",con:"US",ful:"Illinois, USA",loc:[-89.39852830000001,40.6331249],bnd:{_ne:[-87.01993499999998,42.5083379],_sw:[-91.51307889999998,36.970298]}}},{s:"indiana",a:{sta:"IN",
con:"US",ful:"Indiana, USA",loc:[-86.13490189999999,40.2671941],bnd:{_ne:[-84.78466200000003,41.761368],_sw:[-88.097892,37.7717419]}}},{s:"iowa",a:{sta:"IA",con:"US",ful:"Iowa, USA",loc:[-93.09770200000003,41.8780025],bnd:{_ne:[-90.14006089999998,43.5011961],_sw:[-96.63953500000002,40.375437]}}},{s:"kansas",a:{sta:"KS",con:"US",ful:"Kansas, USA",loc:[-98.48424649999998,39.011902],bnd:{_ne:[-94.58838700000001,40.0045419],_sw:[-102.05176879999999,36.9930159]}}},{s:"kentucky",a:{sta:"KY",con:"US",ful:"Kentucky, USA",
loc:[-84.27001789999997,37.8393332],bnd:{_ne:[-81.9649708,39.147458],_sw:[-89.57150890000003,36.4971289]}}},{s:"louisiana",a:{sta:"LA",con:"US",ful:"Louisiana, USA",loc:[-91.96233269999999,30.9842977],bnd:{_ne:[-88.75838799999997,33.019544],_sw:[-94.04335200000003,28.8551271]}}},{s:"maine",a:{sta:"ME",con:"US",ful:"Maine, USA",loc:[-69.44546889999998,45.253783],bnd:{_ne:[-66.8850751,47.459686],_sw:[-71.08433409999998,42.91712589999999]}}},{s:"maryland",a:{sta:"MD",con:"US",ful:"Maryland, USA",loc:[-76.6412712,
39.0457549],bnd:{_ne:[-74.9862819,39.723037],_sw:[-79.4876511,37.8866049]}}},{s:"massachusetts",a:{sta:"MA",con:"US",ful:"Massachusetts, USA",loc:[-71.38243740000001,42.4072107],bnd:{_ne:[-69.85886099999999,42.88679],_sw:[-73.5081419,41.18705300000001]}}},{s:"michigan",a:{sta:"MI",con:"US",ful:"Michigan, USA",loc:[-85.60236429999998,44.3148443],bnd:{_ne:[-82.12297089999998,48.3060628],_sw:[-90.41813580000002,41.696118]}}},{s:"minnesota",a:{sta:"MN",con:"US",ful:"Minnesota, USA",loc:[-94.68589980000002,
46.729553],bnd:{_ne:[-89.48338509999996,49.384358],_sw:[-97.23919590000003,43.499361]}}},{s:"mississippi",a:{sta:"MS",con:"US",ful:"Mississippi, USA",loc:[-89.39852830000001,32.3546679],bnd:{_ne:[-88.09788800000001,34.9961091],_sw:[-91.65500889999998,30.146096]}}},{s:"missouri",a:{sta:"MO",con:"US",ful:"Missouri, USA",loc:[-91.8318334,37.9642529],bnd:{_ne:[-89.09949399999999,40.61364],_sw:[-95.77470399999999,35.9956829]}}},{s:"montana",a:{sta:"MT",con:"US",ful:"Montana, USA",loc:[-110.36256579999997,
46.8796822],bnd:{_ne:[-104.03956299999999,49.00139],_sw:[-116.050003,44.3582089]}}},{s:"nebraska",a:{sta:"NE",con:"US",ful:"Nebraska, USA",loc:[-99.90181310000003,41.4925374],bnd:{_ne:[-95.30829,43.00170689999999],_sw:[-104.053514,39.999932]}}},{s:"nevada",a:{sta:"NV",con:"US",ful:"Nevada, USA",loc:[-116.41938900000002,38.8026097],bnd:{_ne:[-114.03964789999998,42.002207],_sw:[-120.0064729,35.001857]}}},{s:"new hampshire",a:{sta:"NH",con:"US",ful:"New Hampshire, USA",loc:[-71.57239529999998,43.1938516],
bnd:{_ne:[-70.57509399999998,45.3054761],_sw:[-72.557185,42.696985]}}},{s:"new jersey",a:{sta:"NJ",con:"US",ful:"New Jersey, USA",loc:[-74.4056612,40.0583238],bnd:{_ne:[-73.88506000000001,41.357423],_sw:[-75.56358610000001,38.788657]}}},{s:"new mexico",a:{sta:"NM",con:"US",ful:"New Mexico, USA",loc:[-105.87009009999997,34.5199402],bnd:{_ne:[-103.00196399999999,37.0002931],_sw:[-109.05017299999997,31.332172]}}},{s:"new york",a:{sta:"NY",con:"US",ful:"New York, USA",loc:[-74.21793260000004,43.2994285],
bnd:{_ne:[-71.777491,45.015865],_sw:[-79.76259010000001,40.4773991]}}},{s:"north carolina",a:{sta:"NC",con:"US",ful:"North Carolina, USA",loc:[-79.01929969999998,35.7595731],bnd:{_ne:[-75.40011900000002,36.5881568],_sw:[-84.32186899999999,33.7528778]}}},{s:"north dakota",a:{sta:"ND",con:"US",ful:"North Dakota, USA",loc:[-101.00201190000001,47.5514926],bnd:{_ne:[-96.55449099999998,49.000692],_sw:[-104.05003999999997,45.9350719]}}},{s:"ohio",a:{sta:"OH",con:"US",ful:"Ohio, USA",loc:[-82.90712300000001,
40.4172871],bnd:{_ne:[-80.51819999999998,42.327132],_sw:[-84.8203049,38.4034229]}}},{s:"oklahoma",a:{sta:"OK",con:"US",ful:"Oklahoma, USA",loc:[-97.09287699999999,35.0077519],bnd:{_ne:[-94.43066199999998,37.0023119],_sw:[-103.002455,33.615787]}}},{s:"oregon",a:{sta:"OR",con:"US",ful:"Oregon, USA",loc:[-120.55420119999997,43.8041334],bnd:{_ne:[-116.46326199999999,46.299099],_sw:[-124.7035411,41.9917941]}}},{s:"pennsylvania",a:{sta:"PA",con:"US",ful:"Pennsylvania, USA",loc:[-77.19452469999999,41.2033216],
bnd:{_ne:[-74.68950180000002,42.516072],_sw:[-80.51989500000002,39.7197989]}}},{s:"rhode island",a:{sta:"RI",con:"US",ful:"Rhode Island, USA",loc:[-71.4774291,41.5800945],bnd:{_ne:[-71.08857089999998,42.0188],_sw:[-71.90725809999998,41.095834]}}},{s:"south carolina",a:{sta:"SC",con:"US",ful:"South Carolina, USA",loc:[-81.1637245,33.836081],bnd:{_ne:[-78.49930089999998,35.2155401],_sw:[-83.353928,32.033454]}}},{s:"south dakota",a:{sta:"SD",con:"US",ful:"South Dakota, USA",loc:[-99.90181310000003,43.9695148],
bnd:{_ne:[-96.43658900000003,45.945713],_sw:[-104.05773909999999,42.479686]}}},{s:"tennessee",a:{sta:"TN",con:"US",ful:"Tennessee, USA",loc:[-86.5804473,35.5174913],bnd:{_ne:[-81.64690000000002,36.678118],_sw:[-90.3102978,34.9829239]}}},{s:"texas",a:{sta:"TX",con:"US",ful:"Texas, USA",loc:[-99.90181310000003,31.9685988],bnd:{_ne:[-93.50803889999997,36.5007041],_sw:[-106.64564610000002,25.8371638]}}},{s:"utah",a:{sta:"UT",con:"US",ful:"Utah, USA",loc:[-111.09373110000001,39.3209801],bnd:{_ne:[-109.04105809999999,
42.001618],_sw:[-114.05299789999998,36.99790309999999]}}},{s:"vermont",a:{sta:"VT",con:"US",ful:"Vermont, USA",loc:[-72.57784149999998,44.5588028],bnd:{_ne:[-71.46503899999999,45.0166591],_sw:[-73.437905,42.7268499]}}},{s:"virginia",a:{sta:"VA",con:"US",ful:"Virginia, USA",loc:[-78.65689420000001,37.4315734],bnd:{_ne:[-75.16643490000001,39.466012],_sw:[-83.67541499999999,36.5407589]}}},{s:"washington",a:{sta:"WA",con:"US",ful:"Washington, USA",loc:[-120.7401385,47.7510741],bnd:{_ne:[-116.91557999999998,
49.0024305],_sw:[-124.84897390000003,45.543541]}}},{s:"west virginia",a:{sta:"WV",con:"US",ful:"West Virginia, USA",loc:[-80.45490259999997,38.5976262],bnd:{_ne:[-77.7189679,40.638801],_sw:[-82.64441299999999,37.2015399]}}},{s:"wisconsin",a:{sta:"WI",con:"US",ful:"Wisconsin, USA",loc:[-88.78786780000001,43.7844397],bnd:{_ne:[-86.24954789999998,47.3098219],_sw:[-92.88943310000002,42.4917199]}}},{s:"wyoming",a:{sta:"WY",con:"US",ful:"Wyoming, USA",loc:[-107.29028390000002,43.0759678],bnd:{_ne:[-104.0522449,
45.005904],_sw:[-111.05688900000001,40.994746]}}},{s:"canada",a:{con:"CA",ad2:"canada",ful:"Canada",loc:[-106.34677099999999,56.130366],bnd:{_ne:[-50.97659999999996,83.6381],_sw:[-141.00187,41.6765559]}}},{s:"alberta",a:{sta:"AB",con:"CA",ful:"Alberta, Canada",loc:[-116.5765035,53.9332706],bnd:{_ne:[-109.99985509999999,60.00006209999999],_sw:[-120.00052189999997,48.9966671]}}},{s:"british columbia",a:{sta:"BC",con:"CA",ful:"British Columbia, Canada",loc:[-127.64762050000002,53.7266683],bnd:{_ne:[-114.05422099999998,
60.0001489],_sw:[-139.0570702,48.224556]}}},{s:"manitoba",a:{sta:"MB",con:"CA",ful:"Manitoba, Canada",loc:[-98.81387619999998,53.7608608],bnd:{_ne:[-88.91770209999999,60.000164],_sw:[-102.00000410000001,48.998861]}}},{s:"new brunswick",a:{sta:"NB",con:"CA",ful:"New Brunswick, Canada",loc:[-66.4619164,46.5653163],bnd:{_ne:[-63.647341299999994,48.1735157],_sw:[-69.05347210000002,44.2235811]}}},{s:"newfoundland",a:{sta:"NL",con:"CA",ad2:"newfoundland",ful:"Newfoundland and Labrador, Canada",loc:[-57.66043639999998,
53.1355091],bnd:{_ne:[-51.99999589999999,60.37774399999999],_sw:[-67.82168489999998,45.7675001]}}},{s:"northwest territories",a:{sta:"NT",con:"CA",ful:"Northwest Territories, Canada",loc:[-124.84573339999997,64.8255441],bnd:{_ne:[-101.999999,79.572773],_sw:[-136.4981679,59.99995399999999]}}},{s:"nova scotia",a:{sta:"NS",con:"CA",ful:"Nova Scotia, Canada",loc:[-63.74431100000004,44.68198659999999],bnd:{_ne:[-57.99999789999998,47.69405],_sw:[-67.7425278,40.451472]}}},{s:"nunavut",a:{sta:"NU",con:"CA",
ful:"Nunavut, Canada",loc:[-83.10757699999999,70.2997711],bnd:{_ne:[-59.999977,83.6381],_sw:[-121.04924920000002,51.6274319]}}},{s:"ontario",a:{sta:"ON",con:"CA",ful:"Ontario, Canada",loc:[-85.32321400000001,51.253775],bnd:{_ne:[-74.32064789999998,56.931393],_sw:[-95.15622710000002,41.6765559]}}},{s:"prince edward island",a:{sta:"PE",con:"CA",ful:"Prince Edward Island, Canada",loc:[-63.416813599999955,46.510712],bnd:{_ne:[-61.64056800000003,47.478589],_sw:[-64.58730989999998,45.8574361]}}},{s:"quebec",
a:{sta:"QC",con:"CA",ful:"Quebec, Canada",loc:[-73.5491361,52.9399159],bnd:{_ne:[-57.10548589999996,62.600852],_sw:[-79.7794738,44.9913581]}}},{s:"saskatchewan",a:{sta:"SK",con:"CA",ful:"Saskatchewan, Canada",loc:[-106.4508639,52.9399159],bnd:{_ne:[-101.36230499999999,60.0000631],_sw:[-110.00775499999997,48.9988059]}}},{s:"yukon",a:{sta:"YT",con:"CA",ad2:"yukon",ful:"Yukon Territory, Canada",loc:[-135,64.2823274],bnd:{_ne:[-123.8009179,70.5002031],_sw:[-141.00187,59.996889]}}},{s:"australia",a:{con:"AU",
ad2:"australia",ful:"Australia",loc:[133.77513599999997,-25.274398],bnd:{_ne:[159.28722229999994,-9.187026399999999],_sw:[110.95103389999997,-54.83376579999999]}}},{s:"new south wales",a:{sta:"NSW",con:"AU",ful:"New South Wales, Australia",loc:[146.92109900000003,-31.2532183],bnd:{_ne:[159.1054441,-28.15702],_sw:[140.9992793,-37.5052801]}}},{s:"queensland",a:{sta:"QLD",con:"AU",ful:"Queensland, Australia",loc:[142.70279559999994,-20.9175738],bnd:{_ne:[153.64978910000002,-9.210063],_sw:[137.99595720000002,
-29.1778976]}}},{s:"south australia",a:{sta:"SA",con:"AU",ful:"South Australia, Australia",loc:[136.2091547,-30.0002315],bnd:{_ne:[141.00295559999995,-25.9963765],_sw:[129.00134000000003,-38.1345913]}}},{s:"tasmania",a:{sta:"TAS",con:"AU",ful:"Tasmania, Australia",loc:[145.97066470000004,-41.4545196],bnd:{_ne:[148.616675,-39.1296041],_sw:[143.70806700000003,-44.0557135]}}},{s:"western australia",a:{sta:"WA",con:"AU",ful:"Western Australia, Australia",loc:[121.62830980000001,-27.6728168],bnd:{_ne:[129.00185350000004,
-13.6105008],_sw:[112.76045069999998,-35.2132016]}}},{s:"australian capital territory",a:{sta:"ACT",con:"AU",ful:"Australian Capital Territory, Australia",loc:[149.01236789999996,-35.4734679],bnd:{_ne:[149.39928450000002,-35.124517],_sw:[148.7626752,-35.9207621]}}},{s:"jervis bay territory",a:{sta:"JBT",con:"AU",ful:"Jervis Bay Territory, Australia",loc:[150.70270890000006,-35.1522047],bnd:{_ne:[150.77691230000005,-35.1121876],_sw:[150.5913551,-35.2120291]}}},{s:"northern territory",a:{sta:"NT",con:"AU",
ful:"Northern Territory, Australia",loc:[132.55096030000004,-19.4914108],bnd:{_ne:[138.00119970000003,-10.809854],_sw:[129.00047610000001,-25.9986183]}}},{s:"new zealand",a:{con:"NZ",ad2:"new zealand",ful:"New Zealand",loc:[174.88597100000004,-40.900557],bnd:{_ne:[-175.1235077,-28.8773225],_sw:[165.74376410000002,-52.7224663]}}},{s:"auckland",a:{sta:"Auckland",con:"NZ",cit:"Auckland",ful:"Auckland, New Zealand",loc:[174.76333150000005,-36.8484597],bnd:{_ne:[175.2871371,-36.660571],_sw:[174.44380160000003,
-37.0654751]}}},{s:"gisborne",a:{sta:"Gisborne",con:"NZ",cit:"Gisborne",ful:"Gisborne, New Zealand",loc:[178.017649,-38.662334],bnd:{_ne:[178.1153541,-38.6219639],_sw:[177.93730690000007,-38.710757]}}},{s:"hawke's bay",a:{sta:"Hawke&apos;s Bay",con:"NZ",ful:"Hawke's Bay, New Zealand",loc:[176.74163739999995,-39.1089867],bnd:{_ne:[178.00650010000004,-38.580999],_sw:[176.06104690000006,-40.429153]}}},{s:"taranaki",a:{sta:"Taranaki",con:"NZ",ful:"Taranaki, New Zealand",loc:[174.43827209999995,-39.3538149],
bnd:{_ne:[175.00221499999998,-38.699306],_sw:[173.748474,-39.8687169]}}},{s:"manawatu wanganui",a:{sta:"Manawatu-Wanganui",con:"NZ",ad2:"manawatu wanganui",ful:"Manawatu-Wanganui, New Zealand",loc:[175.43755740000006,-39.7273356],bnd:{_ne:[176.63085890000002,-38.4711149],_sw:[174.69721600000003,-40.77409]}}},{s:"wellington",a:{sta:"Wellington",con:"NZ",cit:"Wellington",ful:"Wellington, New Zealand",loc:[174.77623600000004,-41.2864603],bnd:{_ne:[174.91062520000003,-41.126285],_sw:[174.61308399999996,
-41.3624551]}}},{s:"otago",a:{sta:"OTA",con:"NZ",ful:"Otago, New Zealand",loc:[170.1547567,-45.47906709999999],bnd:{_ne:[171.1429051,-43.9501939],_sw:[168.13156300000003,-46.6558271]}}}]);if("object"!=typeof a||"undefined"==typeof a.ad1&&"undefined"==typeof a.ad2&&"undefined"==typeof a.cit&&"undefined"==typeof a.sta&&"undefined"==typeof a.zip&&"undefined"==typeof a.con)return Promise.resolve(null);if("object"==typeof a&&!SF.lib.f2(a).trim())return Promise.resolve(SF.lib.c(a));var h=(SF.lib.f1(a)+
" "+SF.lib.f2(a)).toLowerCase().replace(/,/g," ").replace(/\s{2,}/g," ").trim();if(!h)return Promise.resolve(SF.lib.c(a));if(c&&SF._st.geocoding&&0<=SF._st.geocoding.indexOf(h))return Promise.resolve(null);for(e=SF._st.ger.length-1;0<=e;e--)if(SF._st.ger[e].s==h||!a.con&&SF._st.ger[e].a.con&&SF._st.ger[e].s.slice(-3)==" "+SF._st.ger[e].a.con.toLowerCase()&&SF._st.ger[e].s.slice(0,-3)==h||a.con&&!SF._st.ger[e].a.con&&h.slice(-3)==" "+a.con.toLowerCase()&&SF._st.ger[e].s==h.slice(0,-3))if(!b.returnFormattedAddress&&
!b.returnBoundary||SF._st.ger[e].a.ful){if(a.con&&a.loc)return SF._st.ger[e].s=h,SF._st.ger[e].a=SF.lib.c(a),Promise.resolve(a);if(SF._st.ger[e].a.con)return c=SF.lib.c(SF._st.ger[e].a),a.ad1&&(c.ad1=a.ad1),a.ad2&&c.ad2&&(c.ad2=a.ad2),b.returnFormattedAddress||delete c.ful,b.returnBoundary||delete c.bnd,Promise.resolve(c)}return a.con&&a.loc?(SF._st.ger.push({s:h,a:SF.lib.c(a)}),Promise.resolve(SF.lib.c(a))):a.ad2&&(f=a.ad2.match(/^\s*(apo|fpo|dpo),?\s+(ae|ap|aa)\s+([0-9]{5}(\-[0-9]{4})?)\s*/i))?
(c={cit:f[1].toUpperCase(),sta:f[2].toUpperCase(),zip:f[3],con:"US"},a.ad1&&(c.ad1=a.ad1),SF._st.ger.push({s:h,a:SF.lib.c(c)}),Promise.resolve(c)):b.updateCacheOnly?Promise.resolve(SF.lib.c(a)):(new Promise(function(g){"undefined"==typeof SF._st.geocoding&&(SF._st.geocoding=[]);SF._st.geocoding.push(h);f=[];a.ad1&&f.push(a.ad1);SF.lib.f2(a)&&f.push(SF.lib.f2(a));d={address:SF.lib.fu(f.join(", "))};a._rc&&(d.region="GB"==a._rc?"uk":a._rc.toLowerCase());"undefined"!=typeof SF._st.geo?g():SF._is.robot||
"function"!=typeof String.prototype.matchAll?(SF._st.geo=!1,g()):SF.lib.lm("js",SF.lib.c(SF._st,{only:["_rc"]})).then(function(){SF._st.geo=new google.maps.Geocoder;g()}).catch(function(){SF._st.geo=!1;g()})})).then(function(){return SF._st.geo&&"undefined"!=typeof SF.lib.lm.authFailed?new Promise(function(g){var k;SF.lib.lm.authFailed.then(function(){SF._st.geo=!1;g(null)});(k=SF._st.geo.geocode(d))instanceof Promise?k.then(function(m){g(m)}).catch(function(m){"ZERO_RESULTS"!=m.code?(SF._st.geo=
!1,g(null)):(d.address=SF.lib.fu(SF.lib.f2(a)))?SF._st.geo.geocode(d).then(function(l){g(l)}).catch(function(){g({results:[]})}):g({results:[]})}):(SF._st.geo=!1,g(null))}):null}).then(function(g){return SF._st.geo?g:SF.lib.xhr("GET","v1/geo?org="+SF._st.org+"&adr="+encodeURIComponent(d.address)+(d.region?"&_rc="+d.region:""),{showSpinner:!1}).then(function(k){return k&&"OK"==k.status?k:(d.address=SF.lib.ft(SF.lib.f2(a)))?SF.lib.xhr("GET","v1/geo?org="+SF._st.org+"&adr="+encodeURIComponent(d.address)+
(d.region?"&_rc="+d.region:""),{showSpinner:!1}).then(function(m){return m&&"OK"==m.status?m:{results:[]}}):{results:[]}})}).then(function(g){var k,m,l=!1,n,q={};if(!g||!g.results)return SF.lib.c(a);if(n=a.ad2?SF.lib.fu(a.ad2):a.cit||a.sta||a.zip||a.con?SF.lib.fu(SF.lib.f2(a)):"")for(k=0;k<g.results.length&&!l;k++)for(m=0;m<g.results[k].address_components.length;m++)if(0<=g.results[k].address_components[m].types.indexOf("country")){var t=g.results[k].address_components[m].short_name;var u=new RegExp("[\\s,\\.]"+
t+"[\\s,\\.]|^"+t+"[\\s,\\.]|[\\s,\\.]"+t+"$|^"+t+"$","i");0>n.search(u)&&(t=g.results[k].address_components[m].long_name,u=new RegExp("[\\s,\\.]"+t+"[\\s,\\.]|^"+t+"[\\s,\\.]|[\\s,\\.]"+t+"$|^"+t+"$","i"));0<=n.search(u)&&(l=g.results[k]);break}!l&&g.results.length&&(l=g.results[0]);t=n.toLowerCase();g=n.toLowerCase();if(l)for(m=0;m<l.address_components.length;m++)if(0<=l.address_components[m].types.indexOf("postal_town"))var v=l.address_components[m].long_name;else if(0<=l.address_components[m].types.indexOf("locality"))var x=
l.address_components[m].long_name;else if(0<=l.address_components[m].types.indexOf("neighborhood"))var w=l.address_components[m].long_name;else if(0<=l.address_components[m].types.indexOf("sublocality"))var r=l.address_components[m].long_name;else if(0<=l.address_components[m].types.indexOf("administrative_area_level_3"))var p=l.address_components[m].long_name;else 0<=l.address_components[m].types.indexOf("administrative_area_level_2")?q.cot=l.address_components[m].short_name:0<=l.address_components[m].types.indexOf("administrative_area_level_1")?
(q.sta=l.address_components[m].short_name,u=new RegExp("^"+q.sta+"[\\s,\\.]|[\\s,\\.]"+q.sta+"[\\s,\\.]|[\\s,\\.]"+q.sta+"$|^"+q.sta+"$|^"+l.address_components[m].long_name+"[\\s,\\.]|[\\s,\\.]"+l.address_components[m].long_name+"[\\s,\\.]|[\\s,\\.]"+l.address_components[m].long_name+"$|^"+l.address_components[m].long_name+"$","gi"),t=t.replace(u," "),g=g.split(u),g=2==g.length?g[1]:""):0<=l.address_components[m].types.indexOf("postal_code")?(q.zip=l.address_components[m].short_name,t=t.replace(new RegExp("^"+
q.zip+"[\\s,\\.]|[\\s,\\.]"+q.zip+"[\\s,\\.]|[\\s,\\.]"+q.zip+"$|^"+q.zip+"$","gi")," ")):0<=l.address_components[m].types.indexOf("country")&&(q.con=l.address_components[m].short_name,u=new RegExp("^"+q.con+"[\\s,\\.]|[\\s,\\.]"+q.con+"[\\s,\\.]|[\\s,\\.]"+q.con+"$|^"+q.con+"$","gi"),t=t.replace(u," "),g=g.replace(u," "));v&&0<=t.search(v.toLowerCase())?q.cit=v:x&&0<=t.search(x.toLowerCase())?q.cit=x:w&&0<=t.search(w.toLowerCase())?q.cit=w:r&&0<=t.search(r.toLowerCase())?q.cit=r:p&&0<=t.search(p.toLowerCase())?
q.cit=p:v?q.cit=v:x?q.cit=x:w?q.cit=w:r?q.cit=r:p&&(q.cit=p);q.cit&&(t=t.replace(new RegExp("^"+q.cit+"[\\s,\\.]|[\\s,\\.]"+q.cit+"[\\s,\\.]|[\\s,\\.]"+q.cit+"$|^"+q.cit+"$","gi")," "));q.con&&q.cot&&"GB"==q.con&&(t=t.replace(new RegExp("^"+q.cot+"[\\s,\\.]|[\\s,\\.]"+q.cot+"[\\s,\\.]|[\\s,\\.]"+q.cot+"$|^"+q.cot+"$","gi")," "));q.con&&(("GB"==q.con||"IM"==q.con)&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([A-Z0-9]{2,4}\s?[0-9][A-Z0-9]{2})(?:\s|$|,)/g))&&1==k.length?(q.zip=k[0].replace(/[\s,]/g,""),q.zip=
q.zip.slice(0,q.zip.length-3)+" "+q.zip.slice(-3)):"CA"==q.con&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([A-Z][0-9][A-Z][\s\-]?[0-9][A-Z][0-9])(?:\s|$|,)/g))&&1==k.length?(q.zip=k[0].replace(/[\s\-,]/g,""),q.zip=q.zip.slice(0,q.zip.length-3)+" "+q.zip.slice(-3)):("US"==q.con||"CR"==q.con||"SA"==q.con)&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([0-9]{5}\-[0-9]{4})(?:\s|$|,)/g))&&1==k.length?q.zip=k[0].replace(/[\s,]/g,""):"BR"==q.con&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([0-9]{5}\-[0-9]{3})(?:\s|$|,)/g))&&
1==k.length?q.zip=k[0].replace(/[\s,]/g,""):q.zip&&(m=a.ad2||a.zip)&&0<=m.indexOf(q.zip)||(0<="AU AT BE DK HU LV NZ NO PY PH SI ZA CH VE".split(" ").indexOf(q.con)&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([0-9]{4})(?:\s|$|,)/g))&&1==k.length?q.zip&&q.zip.slice(0,2)!=k[0].replace(/[\s,]/g,"").slice(0,2)||(q.zip=k[0].replace(/[\s,]/g,"")):0<="US BR CR CZ DO EG EE FI FR DE GT ID IT LT LU MY MX ME PK PE RS SK ES TH TR UA UY".split(" ").indexOf(q.con)&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([0-9]{5})(?:\s|$|,)/g))&&
1==k.length?q.zip&&q.zip.slice(0,2)!=k[0].replace(/[\s,]/g,"").slice(0,2)||(q.zip=k[0].replace(/[\s,]/g,"")):0<="CO EC IN RO RU SG VN".split(" ").indexOf(q.con)&&(m=a.ad2||a.zip)&&(k=m.match(/(?:^|\s)([0-9]{6})(?:\s|$|,)/g))&&1==k.length&&(!q.zip||q.zip.slice(0,3)==k[0].replace(/[\s,]/g,"").slice(0,3))&&(q.zip=k[0].replace(/[\s,]/g,""))));if(t=t.replace(/[,\.\s]/g,""))if(a.ad2)q.ad2=a.ad2;else if(a.cit||a.sta||a.zip||a.con)q.ad2=SF.lib.f2(a);a.ad1&&(q.ad1=SF.lib.fh(a.ad1));q.cit&&(q.cit=SF.lib.fh(q.cit));
q.cot&&(q.cot=SF.lib.fh(q.cot));q.sta&&(q.sta=SF.lib.fh(q.sta));q.zip&&(q.zip=SF.lib.fh(q.zip));"NZ"!=q.con||!q.sta||q.ad2||q.cit||(q.cit=q.sta,delete q.sta);l&&l.formatted_address&&(q.ful=l.formatted_address);l&&"undefined"!=typeof l.geometry&&("undefined"!=typeof l.geometry.location&&("function"==typeof l.geometry.location.lng?q.loc=[l.geometry.location.lng(),l.geometry.location.lat()]:"number"==typeof l.geometry.location.lng&&(q.loc=[l.geometry.location.lng,l.geometry.location.lat])),"undefined"!=
typeof l.geometry.bounds&&("function"==typeof l.geometry.bounds.getNorthEast?q.bnd={_ne:[l.geometry.bounds.getNorthEast().lng(),l.geometry.bounds.getNorthEast().lat()],_sw:[l.geometry.bounds.getSouthWest().lng(),l.geometry.bounds.getSouthWest().lat()]}:"number"==typeof l.geometry.bounds.northeast.lat&&(q.bnd={_ne:[l.geometry.bounds.northeast.lng,l.geometry.bounds.northeast.lat],_sw:[l.geometry.bounds.southwest.lng,l.geometry.bounds.southwest.lat]})));SF._st.ger.push({s:h,a:SF.lib.c(q)});b.returnFormattedAddress||
delete q.ful;b.returnBoundary||delete q.bnd;return q}).then(function(g){SF._st.geocoding&&0<=(e=SF._st.geocoding.indexOf(h))&&SF._st.geocoding.splice(e,1);SF._st.geocoding.length||delete SF._st.geocoding;return g})};
SF.lib.pa=function(a){if("object"==typeof a)return Object.keys(a).reduce(function(b,c){return"object"!=typeof a[c]||null==a[c]?b:"undefined"==typeof a[c].ad1&&"undefined"==typeof a[c].ad2?b.then(function(){return SF.lib.pa(a[c])}):a[c].con||!a[c].ad1&&!a[c].ad2?b:b.then(function(){return SF.lib.gg(a[c]).then(function(d){delete a[c].ad2;for(var e in d)a[c][e]=d[e]})})},Promise.resolve())};
SF.lib.sw=function(a){a.settings._sx&&a.settings._sx.gc3&&a.settings._sx.gc3.pub&&"undefined"==typeof SF._st.gc3&&SF.lib.lo("https://www.recaptcha.net/recaptcha/api.js?render="+encodeURIComponent(a.settings._sx.gc3.pub)).then(function(){SF._st.gc3=a.settings._sx.gc3.pub})};
SF.lib.ps=function(a){delete a._sr;if(!SF._st.gc3||"undefined"==typeof grecaptcha)return Promise.resolve();try{return grecaptcha.execute(SF._st.gc3,{action:"membershipworks/"+SF._st.hsh.replace(/[^A-Za-z0-9\/_]/g,"").slice(0,84)}).then(function(b){a._sr={gc3:b}})}catch(b){return Promise.reject(b.toString().match(/invalid\ssite\skey/i)?"Invalid Google reCATPCHA site key":"Google reCAPTCHA error")}};
SF.lib.sy=function(a){var b=!1,c,d,e,f=!1,h=!1;if("https:"==location.protocol)f=!0;else try{window.parent&&window.parent.location&&"https:"==window.parent.location.protocol&&(f=!0)}catch(q){}if(!a.pageElement||!(d=a.pageElement=SF.$(a.pageElement))||!d.id)return Promise.resolve();var g=a.paymentElement?a.paymentElement=SF.$(a.paymentElement):d.querySelector("[fpydata]");if(!g)return Promise.resolve();if(c=SF.d.get(g))SF.lib.ml(c,a,{only:"getName getAddress currency way sum allowDiscountCode allowPaymentMethodId".split(" ")});
else{b=!0;SF.lib.cn(g);var k=a.settings._px||{};"undefined"==typeof k.spy&&(k.spy=-1);c={};SF.lib.ml(c,a,{only:"pageElement paymentElement getName getAddress currency way sum allowDiscountCode saveCheckout preProcess".split(" ")});c.spy=k.spy;SF.d.set(g,c);SF.set(g,"fpydata","");var m=function(q){if(!SF.get(q.currentTarget)){switch(q.currentTarget.name){case "crd[nam]":var t="nam";break;case "crd[ad1]":t="adr[ad1]";break;case "crd[ad2]":t="adr[ad2]"}if(t=SF.get(d.querySelector('[name="'+t+'"]')))if(SF.set(q.currentTarget,
t),"function"==typeof q.currentTarget.onchange)q.currentTarget.onchange({type:"change"})}};var l=[];(a.getName||a.getPaymentMethod&&-1!=k.spy&&6!=k.spy)&&l.push({nodeName:"formrow",className:"SFfpynam",label:"Billing name",noWrap:!0,childNodes:[{nodeName:"input",type:"text",name:"crd[nam]",required:!0,onfocus:m}]});(a.getAddress||a.getPaymentMethod&&-1!=k.spy&&6!=k.spy)&&l.push({nodeName:"formrow",className:"SFfpyadr",label:"Billing address",noWrap:!0,childNodes:[{nodeName:"input",type:"text",name:"crd[ad1]",
required:!0,onfocus:m,onblur:SF.lib.gg},{nodeName:"input",type:"text",name:"crd[ad2]",required:!0,placeholder:"City, state/province, postal code",onfocus:m,onblur:SF.lib.gg}]});a.getPaymentMethod&&6==k.spy?l.push({nodeName:"formrow",className:"SFfpycrd",childNodes:[{nodeName:"input",type:"hidden",name:"crd[spi]",value:"paypalcheckout"}]}):a.getPaymentMethod&&0==k.spy?l.push({nodeName:"formrow",className:"SFfpycrd SFpad",childNodes:[{className:"SFpy0"}]}):a.getPaymentMethod&&-1!=k.spy&&(l.push({nodeName:"formrow",
className:"SFfpycrd",label:"Credit/debit card number",childNodes:[{nodeName:"input",type:"text",name:"crd[ccn]",required:!0,dataset:{rxp:"^[0-9\\- ]{13,20}$",err:"Invalid card number"}}]}),l.push({nodeName:"formrow",className:"SFfpycrd",label:"Expiration date",childNodes:[{nodeName:"input",type:"text",name:"crd[exm]","aria-label":"Card expiration month",required:!0,dataset:{rxp:"^(1|01|2|02|3|03|4|04|5|05|6|06|7|07|8|08|9|09|10|11|12)$",err:"Invalid month"}},{nodeName:"span",innerHTML:"/"},{nodeName:"input",
type:"text",name:"crd[exy]","aria-label":"Card expiration year",required:!0,dataset:{rxp:"^[0-9]{2,4}$",err:"Invalid year"}}]}),l.push({nodeName:"formrow",className:"SFfpycrd",label:"CVC number",childNodes:[{nodeName:"input",type:"text",name:"crd[cvc]","aria-label":"CVC number",required:!0,dataset:{rxp:"^[0-9]{3,4}$",err:"Invalid CVV code"}}]}));a.allowDiscountCode&&l.push({nodeName:"formrow",className:"SFfpydcc SFpad",label:"Discount code",childNodes:[{nodeName:"input",type:"text",name:"dcc"},{nodeName:"button",
innerHTML:"Apply"},{className:"SFfpydccmsg SFemp"}]});a.allowPaymentMethodId&&(c.allowPaymentMethodId=k.rid||"",l.push({nodeName:"formrow",className:"SFfpyrid SFpad",childNodes:[{nodeName:"input",type:"checkbox",name:"crd[rid]",value:k.rid||"",onchange:function(){SF.lib.sy({pageElement:d})},childNodes:[{style:{fontWeight:"bold"},innerHTML:"Charge to payment method on file"+(k.ccn?" (ending in "+k.ccn+")":"")}]}]}));a.allowOffline&&l.push({nodeName:"formrow",className:"SFfpydue SFpad",childNodes:[{nodeName:"input",
type:"checkbox",name:"due",checked:!a.getPaymentMethod||-1==k.spy,onchange:function(){a.getPaymentMethod&&-1!=k.spy?SF.lib.sy({pageElement:d}):SF.set(this.true)},childNodes:[a.getPaymentMethod?{style:{fontWeight:"bold",marginBottom:"5px"},innerHTML:"Click here to:"}:null,{innerHTML:a.allowOffline}]}]});a.allowEmailReceipt&&l.push({nodeName:"formrow",className:"SFpad",label:"Email receipt to",childNodes:[{nodeName:"input",type:"email",name:"_er",placeholder:"optional"}]});SF.lib.ma(g,'[role="rowgroup"]')?
SF.lib.i(g,l):SF.lib.i(g,[{formRows:l}])}m=SF.lib.f(g);var n=!1;l=g.querySelectorAll('[role="row"]');for(e=0;e<l.length;e++)SF.lib.ma(l[e],".SFfpynam")?SF.lib.s(l[e],c.getName||c.way&&1===c.way&&(!m.crd||!m.crd.rid)||c.sum&&!m.due&&(!m.crd||!m.crd.rid)):SF.lib.ma(l[e],".SFfpyadr")?c.getAddress?!0===c.getAddress?SF.lib.s(l[e],!0):SF.lib.s(l[e],c.sum):SF.lib.s(l[e],c.way&&1===c.way&&(!m.crd||!m.crd.rid)||c.sum&&!m.due&&(!m.crd||!m.crd.rid)):SF.lib.ma(l[e],".SFfpycrd")?SF.lib.s(l[e],(c.way&&1===c.way||
c.sum&&!m.due)&&(!m.crd||!m.crd.rid)):SF.lib.ma(l[e],".SFfpyrid")?(SF.lib.s(l[e],c.sum&&!m.due&&c.allowPaymentMethodId),"string"==typeof c.allowPaymentMethodId&&(l[e].querySelector('[name="crd[rid]"]').value=c.allowPaymentMethodId),!c.sum||m.due||m.crd&&m.crd.rid||SF.lib.f(l[e],{crd:{rid:0}})):SF.lib.ma(l[e],".SFfpydue")?(SF.lib.s(l[e],c.sum&&(!m.crd||!m.crd.rid)),!c.sum||m.crd&&m.crd.rid||m.due||SF.lib.f(l[e],{due:-1==c.spy?1:0})):SF.lib.ma(l[e],".SFfpydcc")&&(c.allowDiscountCode?(SF.lib.s(l[e],
!0),"function"==typeof c.allowDiscountCode&&l[e].querySelector("button")&&(l[e].querySelector("button").onclick=c.allowDiscountCode)):SF.lib.s(l[e],!1)),!SF.lib.s(l[e])||6==c.spy&&SF.lib.ma(l[e],".SFfpycrd")||(n=!0);g.className=(g.className.replace(/^SFdsn|\sSFdsn/,"")+(n?"":" SFdsn")).trim();l=d.querySelector(".SFfpybtn");6==c.spy&&l&&(m.due||m.crd&&m.crd.rid||!c.sum?l.hasAttribute("data-lbl")&&(l.innerHTML=l.getAttribute("data-lbl"),l.removeAttribute("data-lbl")):l.hasAttribute("data-lbl")||(l.setAttribute("data-lbl",
l.innerHTML),l.innerHTML="Continue To Payment"));if(c.stripe&&(l={currency:c.currency||"usd",captureMethod:"manual"},c.way&&1===c.way&&!c.sum?(l.mode="setup",l.amount=null,l.setupFutureUsage="off_session"):c.sum&&(l.mode="payment",l.amount=0<=SF._is.szc.indexOf(c.currency||"usd")?c.sum:Math.round(100*c.sum),l.setupFutureUsage=c.way&&1===c.way?"off_session":null),l.mode))if(c.stripeElements)"undefined"==typeof a.currency&&"undefined"==typeof a.way&&"undefined"==typeof a.sum||c.stripeElements.update(l);
else if(c.mount=c.pageElement.querySelector("div.SFpy0"))c.stripeElements=c.stripe.elements(l),c.stripeElement=c.stripeElements.create("payment",{layout:{type:"accordion",radios:!1,spacedAccordionItems:!1},fields:{billingDetails:{name:"never",email:"never",phone:"auto",address:"never"}}}),c.stripeElement.mount(c.mount);if(b&&!SF._is.robot&&a.getPaymentMethod&&!SF._is.robot)if(0!=k.spy||f&&k.spk&&!(SF._is.IE&&9>SF._is.IE)){if(0==k.spy)return c.spk=k.spk.trim(),SF.lib.lo("https://js.stripe.com/v3/").then(function(){c.stripe=
window.Stripe(c.spk);if(c.sum||c.way&&1===c.way)return SF.lib.sy({pageElement:d,paymentElement:g})}).catch(function(q){window.Stripe=!1;h="Stripe payments failed to load. Please try refreshing your browser. If you are using a firewall please allow scripts from js.stripe.com.";SF.lib.i(g.querySelector(".SFpy0"),[{nodeName:"span",className:"SFemp",innerHTML:"Error - "+h}]);SF.lib.alr(h)});if(3==k.spy&&k.spn&&k.spc)return c.accept={clientKey:k.spc,apiLoginID:k.spn},SF.lib.lo(SF._st&&SF._st.org&&0<=SF._is.sandbox.indexOf(SF._st.org)?
"https://jstest.authorize.net/v1/Accept.js":"https://js.authorize.net/v1/Accept.js").catch(function(){window.Accept=!1});if(!(6!=k.spy||k.spg&&k.spd))h="Paypal Checkout client token error, please contact site administrator",SF.lib.i(g.querySelector(".SFfpycrd>*:last-child"),[{nodeName:"span",className:"SFemp",innerHTML:h}]),SF.lib.alr(h);else if(6==k.spy)return c.paypal={clientId:k.spg,clientToken:k.spd},SF.lib.lo({src:"https://www.paypal.com/sdk/js?components=buttons&vault=true"+(k.cur?"&currency="+
k.cur.toUpperCase():"")+"&client-id="+encodeURIComponent(k.spg),"data-client-token":k.spd,"data-partner-attribution-id":"MemberFindMe_SP"}).catch(function(){window.paypal=!1;h="Paypal checkout failed to load.<br>Please try refreshing your browser. If you are using a firewall please allow scripts from www.paypal.com.";SF.lib.i(g.querySelector(".SFfpycrd>*:last-child"),[{nodeName:"span",className:"SFemp",innerHTML:"Error - "+h}]);SF.lib.alr(h)})}else h="Stripe payments unable to load because "+(f?k.spk?
"browser not supported":"public key is missing":"HTTPS connection is required"),SF.lib.i(g.querySelector(".SFpy0"),[{nodeName:"span",className:"SFemp",innerHTML:"Error - "+h}]),SF.lib.alr(h);return Promise.resolve()};
SF.lib.pp=function(a){var b=!1,c,d;if("undefined"==typeof a.crd)return SF.lib.ps(a);var e=SF.$("SFctr").querySelectorAll("[fpydata]");for(c=0;c<e.length;c++)if((d=SF.d.get(e[c]))&&SF.lib.iv(d.pageElement)&&SF.lib.iv(d.paymentElement)){b=d;break}if(!b)return SF.lib.ps(a);if(!b.preProcess||!b.preProcess.act||!b.preProcess.url)return Promise.reject(a.crd.error="Invalid payment configuration");b.preProcess.opt=SF.lib.me({handleErrors:!1,showSpinner:!1},b.preProcess.opt||{});a.crd&&(a.crd.ccn?(a.crd.ccn=
a.crd.ccn.replace(/[^0-9]/g,""),a.crd.exm=a.crd.exm.replace(/[^0-9]/g,""),a.crd.exy=a.crd.exy.replace(/[^0-9]/g,""),a.crd.cvc=a.crd.cvc.replace(/[^0-9]/g,"")):(delete a.crd.ccn,delete a.crd.exm,delete a.crd.exy,delete a.crd.cvc));return b.stripe&&SF.lib.iv(b.mount)?(new Promise(function(f,h){a.crd||(a.crd={});a.crd.nam&&a.crd.con&&a.eml||b.stripeElement.update({fields:{billingDetails:{name:a.crd.nam?"never":"auto",email:a.eml?"never":"auto",phone:"auto",address:a.crd.con?"never":"if_required"}}});
f()})).then(function(){return b.stripeElements.submit().then(function(f){if(f.error)return Promise.reject(a.crd.error=f.error.message)})}).then(function(){return SF.lib.ps(a)}).then(function(){a._pv=1;SF._is.iframe()&&(a._if=1);return SF.lib.xhr(b.preProcess.act,b.preProcess.url,a,b.preProcess.opt).then(function(f){if(f&&f.error)return f;if(!f||!f.client_secret||!f.id)return Promise.reject("Stripe pre-processing error");"undefined"!=typeof f.sum&&f.sum!=(b.sum||0)&&SF.lib.sy({pageElement:b.pageElement,
sum:f.sum});a.crd._cs=f.client_secret;a.crd.spi=f.id;return new Promise(function(h,g){window.indexedDB.deleteDatabase("MembershipWorks");var k=indexedDB.open("MembershipWorks");k.onerror=function(){g("Access rejected - unable to save page state for payment processing")};k.onupgradeneeded=function(m){try{m.target.result.createObjectStore("data")}catch(l){}};k.onsuccess=function(m){var l,n;var q={href:location.href,_st:SF.lib.c(SF._st,{only:"admin org usr _sf _rt _fd _ro _ml cur atg evg oeg tpl dcc dek lbl".split(" ")}),
preProcessUrl:b.preProcess.url,pst:a};for(l=b.pageElement;l;l=l.parentNode)if(n=SF.d.get(l)){q.data=n;if(l=SF.e.get(l))q.subdata=l;break}try{var t=m.target.result.transaction(["data"],"readwrite");t.addEventListener("abort",function(){g("Unable to save page state")});t.addEventListener("complete",h);t.objectStore("data").put(q,"restore")}catch(u){g("Unable to save page state")}}})}).then(function(f){if(f&&f.error)return f;try{var h=SF._is.iframe()?window.parent.location.href:location.href.split("#")[0]}catch(g){h=
location.href.split("#")[0]}d={elements:b.stripeElements,clientSecret:a.crd._cs,confirmParams:{return_url:h,payment_method_data:{billing_details:{}}},redirect:"if_required"};a.crd.nam&&(d.confirmParams.payment_method_data.billing_details.name=SF.lib.ft(a.crd.nam));if(a.eml)for(f=a.eml.split(/[,;\s]/),c=0;c<f.length;c++)if(f[c].trim()){d.confirmParams.payment_method_data.billing_details.email=f[c].trim();break}a.crd.con&&(d.confirmParams.payment_method_data.billing_details.address={line1:SF.lib.ft(SF.lib.f1(a.crd)),
line2:"",city:SF.lib.ft(SF.lib.fi(a.crd)),state:SF.lib.ft(SF.lib.fs(a.crd)),postal_code:SF.lib.ft(SF.lib.fz(a.crd)),country:SF.lib.ft(SF.lib.fo(a.crd))});return(0===a.crd.spi.indexOf("seti_")?b.stripe.confirmSetup:b.stripe.confirmPayment)(d).then(function(g){window.indexedDB.deleteDatabase("MembershipWorks");if(g.error)return a.crd.error=g.error.message||"Stripe error",SF.lib.xhr(b.preProcess.act,b.preProcess.url,a,b.preProcess.opt).then(function(){return Promise.reject(a.crd.error)});delete a._pv;
delete a._if})})}):b.accept&&window.Accept&&a.crd.ccn?(d={authData:b.accept,cardData:{cardNumber:a.crd.ccn,month:SF.lib.pl(a.crd.exm,2,"0").slice(-2),year:SF.lib.pl(a.crd.exy,2,"2").slice(-2),cardCode:a.crd.cvc}},delete a.crd.ccn,delete a.crd.exm,delete a.crd.exy,delete a.crd.cvc,a.crd.nam&&(d.cardData.fullName=SF.lib.ft(a.crd.nam)),a.crd.zip&&(d.cardData.zip=a.crd.zip),(new Promise(function(f,h){window.Accept.dispatchData(d,function(g){try{if(g&&g.messages&&g.messages.resultCode&&"Error"===g.messages.resultCode){var k=
[];for(c=0;c<g.messages.message.length;c++)k.push(g.messages.message[c].text);a.crd.error=k.join(", ")}else g&&"undefined"!=typeof g.opaqueData&&"string"==typeof g.opaqueData.dataValue?a.crd.tok=g.opaqueData.dataValue:a.crd.error="Card tokenization error"}catch(m){a.crd.error="Card tokenization error"}a.crd.error?h(a.crd.error):f()})})).then(function(){return SF.lib.ps(a)})):b.paypal&&window.paypal&&"paypalcheckout"==a.crd.spi?(delete a.crd.spi,a._pv=1,SF.lib.ps(a).then(function(){return SF.lib.xhr(b.preProcess.act,
b.preProcess.url,a,b.preProcess.opt)}).then(function(f){var h,g=!1,k,m,l;return f&&f.error?f:f&&(f.plan_id||f.order_id)?(new Promise(function(n,q){SF.lib.sn(!1);SF.lib.s(h=b.pageElement.querySelector(".SFfpybtx"),!1);SF.lib.dn(b.pageElement.id+"spn");m=b.pageElement.getBoundingClientRect();m.width&&m.height&&SF.lib.i(b.pageElement,[g=SF.lib.n({id:b.pageElement.id+"spn",className:"SFspn",style:{position:"absolute",top:"0",left:"0",width:m.width+"px",height:m.height+"px",border:"none",backgroundColor:"rgba(255,255,255,0.4)"}})]);
SF.lib.dn(b.pageElement.id+"fpy");SF.lib.i(b.pageElement,[k=SF.lib.n({id:b.pageElement.id+"fpy",childNodes:[SF.lib.n({id:b.pageElement.id+"fp6",className:"SFpy6btn"}),{nodeName:"button",className:"SFbig",onclick:function(){q(null)},innerHTML:"Cancel"}]})]);l={style:{label:"pay",tagline:!1},onApprove:n};if(f.plan_id)l.createSubscription=function(t,u){return u.subscription.create(f)};else if(f.order_id)l.createOrder=function(t,u){return f.order_id};else{q("Paypal order error");return}window.paypal.Buttons(l).render("#"+
k.firstChild.id).then(function(){SF.lib.sv(k)}).catch(function(t){var u="Paypal checkout error";t.details&&(u=t.details.reduce(function(v,x){x.description&&v.push(x.description);return v},[]).join(", "));q(u)})})).then(function(n,q){SF.lib.dn(g);SF.lib.dn(k);SF.lib.s(h,!0);SF.lib.sn(!0,!0);delete a._pv;f.plan_id&&!n.planID&&(n.planID=f.plan_id);f.order_id&&!n.orderID&&(n.orderID=f.order_id);a.crd.tok=n}).catch(function(n){SF.lib.dn(g);SF.lib.dn(k);SF.lib.s(h,!0);return f.plan_id?(a.crd.error=n?n:
"Transaction cancelled",a.crd.tok={planID:f.plan_id,subscriptionID:"null"},SF.lib.sn(!0),SF.lib.xhr(b.preProcess.act,b.preProcess.url,a,b.preProcess.opt).then(function(q){return Promise.reject(n)})):Promise.reject(n)}):Promise.reject("Paypal pre-processing error")})):SF.lib.ps(a)};
SF.lib.ip=function(){var a,b=!1,c=!1;var d=location.search.substr(1).split("&");for(a=d.length-1;0<=a;a--)if(d[a]=d[a].split("="),"payment_intent"==d[a][0]||"setup_intent"==d[a][0])b=d[a][1];else if("payment_intent_client_secret"==d[a][0]||"setup_intent_client_secret"==d[a][0])c=d[a][1];return b&&c?(new Promise(function(e){var f=indexedDB.open("MembershipWorks");f.onerror=function(){e(!1)};f.onsuccess=function(h){try{h.target.result.transaction("data").objectStore("data").get("restore").onsuccess=
function(g){e(g.target.result)}}catch(g){e(!1)}}})).then(function(e){window.indexedDB.deleteDatabase("MembershipWorks");return e&&e._st&&e.data&&e.pst&&e.href&&e.pst.crd&&e.pst.crd.spi&&e.pst.crd.spi==b&&e.pst.crd._cs&&e.pst.crd._cs==c?e:!1}):!1};
SF.lib.rp=function(a){SF.lib.ml(SF._st,a._st);delete a._st;(new Promise(function(b){a.data._st&&a.data._st._px&&a.data._st._px.spk?b(SF.lib.lo("https://js.stripe.com/v3/").then(function(){var c=window.Stripe(a.data._st._px.spk);return 0===a.pst.crd.spi.indexOf("seti_")?c.retrieveSetupIntent(a.pst.crd._cs):c.retrievePaymentIntent(a.pst.crd._cs)}).then(function(c){var d;c&&(d=c.paymentIntent||c.setupIntent)?d.status&&0<=["requires_capture","requires_action","processing","succeeded"].indexOf(d.status)||
(a.pst.crd.error="Payment failed"):a.pst.crd.error="Invalid payment session"})):(a.pst.crd.error="Invalid Stripe key",b())})).then(function(){a.pst.crd.error||delete a.pst._pv;if("undefined"!=typeof history&&"function"==typeof history.replaceState)try{history.replaceState(null,null,a.href.split("#")[0])}catch(b){}SF.open(a.href.split("#").pop(),a)}).catch(function(b){alert("Error resuming payment session")})};SF.ss={};
SF.ss.i=function(a,b){var c={},d=!1,e=!1,f=!1;return(new Promise(function(h,g){"undefined"!=typeof a?(c=a&&a.uid&&(SF.lib.gs()||a.SF)?a:{},h()):SF._is.robot||!SF.lib.gs()?h():(SF._st._do="Getting user session",SF.lib.xhr("GET","v2/account/session",{org:SF.get("SFctr","data-org"),handleErrors:!1}).then(function(k){!k||k.error?h():k.uid&&SF.get("SFctr","data-zzz")&&"myaccount"==SF.get("SFctr","data-ini")&&SF.lib.ma(SF.$("SFctr").parentNode,".memberonly")?(0>window.location.href.indexOf("?")?SF.lib.re(SF.get("SFctr",
"data-zzz")+"?uid="+k.uid):(SF.lib.i("SFpne",[{id:"SFusrerr",className:"SFpne",innerHTML:"Error: unable to bypass page cache to load memberonly content"}]),SF.lib.se("SFusrerr")),g(null)):(c=k,h())}).catch(function(){c={};h()}))})).then(function(){var h=[],g=!1;c.uid?c.SF&&(SF.lib.ss(c.SF),SF._st.usr.uid||(e=!0)):(SF.lib.ss(!1),SF._st.usr.uid&&(d=!0));SF._st.usr.uid&&c.uid&&SF._st.usr.uid==c.uid&&SF._st.org==(SF._st.admin?c.org:SF.get("SFctr","data-org")?parseInt(SF.get("SFctr","data-org"),10):!1)&&
(f=!0);c.org&&SF.get("SFctr","data-wpo")&&SF.$("SFwpo")&&h.push(new Promise(function(k){SF._st._do="Setting organization key";var m=new XMLHttpRequest;SF.lib.sn(!0);m.open("POST",SF.$("SFwpo").getAttribute("action"),!0);m.setRequestHeader("Content-type","application/x-www-form-urlencoded");m.onreadystatechange=function(){4==this.readyState&&(SF.lib.sn(!1),k())};var l=SF.lib.f("SFwpo");l["sf_set[org]"]=c.org;m.send(SF.lib.tq(l))}));SF.get("SFctr","data-wpl")&&(e&&b&&b.eml&&(b.pwd||c.pwd)||d)&&h.push(new Promise(function(k){SF._st._do=
"Synchronizing "+(c.uid?"login":"logout");SF.lib.sn(!0);var m=new XMLHttpRequest;m.open("POST","//"+window.location.hostname+SF.get("SFctr","data-wpl"),!0);m.setRequestHeader("Content-type","application/x-www-form-urlencoded");m.onreadystatechange=function(){4==this.readyState&&(SF.lib.sn(!1),e&&(SF.lib.ss(!0),SF.lib.fe(".widget_sf_widget_login",function(l){l.innerHTML="Welcome"+(c.nam?" "+c.nam:"")+"!"})),k())};d?m.send(SF.lib.tq({action:"sf_logout"})):0<=SF.get("SFctr","data-wpl").indexOf("wp-login.php")?
m.send(SF.lib.tq({log:b.eml,pwd:b.pwd||c.pwd,redirect_to:window.location.href.split("#")[0]})):m.send(SF.lib.tq({log:b.eml,pwd:b.pwd||c.pwd,action:"sf_login"}))}));c.sso&&c.sso.wtb&&c.sso.wtb.log&&c.sso.wtb.tok?(g=c.sso.wtb,SF.lib.sc("SFssowtb",g.log+" "+g.tok)):SF.lib.gc("SFssowtb")&&(g={log:SF.lib.gc("SFssowtb").split(" ")[0],tok:SF.lib.gc("SFssowtb").split(" ")[1]});g&&SF.lib.i(document.body,[{nodeName:"img",src:"//"+g.log+".websitetoolbox.com/register/logout?authtoken="+g.tok,style:{width:"1px",
height:"1px"}}]);if(h.length)return Promise.all(h)}).then(function(){var h=!0,g=0,k;f||(SF.lib.dn("SFhdrder"),SF._st.usr={},delete SF._st.evg);SF.ss.r(c);SF._st.usr.uid=c.uid?c.uid:"";SF._st.usr.pid=c.pid?c.pid:!1;SF._st.usr.end=c.end?c.end:!1;SF._st.usr.adr=c.adr?c.adr:!1;SF._st.usr.eml=c.eml?c.eml:"";SF._st.usr.typ=c.typ?c.typ:!1;SF._st.usr.org=c.org?c.org:!1;SF._st.admin=c.org&&"10000"==SF.get("SFctr","data-org")&&"org"==SF.get("SFctr","data-typ")?c.org:!1;SF._st.org=SF._st.admin?c.org:SF.get("SFctr",
"data-org")?parseInt(SF.get("SFctr","data-org"),10):!1;SF._st._rt=c._ts?c._ts-parseInt((new Date).getTime()/1E3):0;SF._st._fd=c._fd?c._fd:0;SF._st._rc=c._rc||"";if("10000"==SF.get("SFctr","data-org")&&"org"==SF.get("SFctr","data-typ")){SF._st._ro=c._ro?c._ro:!1;SF._st.cur="undefined"==typeof c.cur?!1:c.cur;SF._st.atg="undefined"==typeof c.atg?"iif":c.atg;SF._st._ml="undefined"==typeof c._ml?0:c._ml;SF._st.evg="undefined"==typeof c.evg?[]:c.evg;c.oeg?SF._st.oeg=c.oeg:delete SF._st.oeg;SF._st.tpl="undefined"==
typeof c.tpl?!1:c.tpl;SF._st.dcc="undefined"==typeof c.dcc?!1:c.dcc;if(c.dek)for(SF._st.dek=[],SF._st.lbl=[],k=0;k<c.dek.length;k++)c.dek[k].dek?(SF._st.dek.push(c.dek[k]),c.dek[k]._ro&&-1==c.dek[k]._ro||g++,"members"==c.dek[k].lbl.toLowerCase()&&c.dek[k]._ro&&-1==c.dek[k]._ro&&(h=!1)):SF._st.lbl.push(c.dek[k]);else delete SF._st.dek,delete SF._st.lbl;(1<g||1==g&&!h)&&SF.$("SFhdrdem")&&!SF.$("SFhdrall")&&SF.lib.i(SF.$("SFhdrdem").parentElement,[{nodeName:"li",id:"SFhdrall",childNodes:[{nodeName:"a",
href:"#all",onclick:SF.lib.no,innerHTML:"All Accounts"}]}],SF.$("SFhdrdem"));SF.lib.s("SFhdrdem",h);SF.lib.s("SFhdrfrm",!SF._st.usr.org||!SF._st._ro||-1!==SF._st._ro.frm);SF.lib.s("SFhdrlbd",!SF._st.usr.org||!SF._st._ro||-1!==SF._st._ro.lbd);SF.lib.s("SFhdrevl",!SF._st.usr.org||!SF._st._ro||-1!==SF._st._ro.evt);SF.lib.s("SFhdrevc",!SF._st.usr.org||!SF._st._ro||-1!==SF._st._ro.evt);SF.lib.s("SFhdrdbd",!SF._st.usr.org||!SF._st._ro||-1!==SF._st._ro.dbd);SF.lib.s("SFhdrlbl",!SF._st.usr.org||!SF._st._ro||
-1!==SF._st._ro.lbl);SF.lib.s("SFhdrtpl",!SF._st.usr.org||!SF._st._ro||-1!==SF._st._ro.tpl);1E4==SF._st.usr.org?(0>SF._is.cri.indexOf(2)&&(SF._is.crm[2]="Limited",SF._is.cri.push(2)),0>SF._is.cri.indexOf(3)&&(SF._is.crm[3]="Accessed",SF._is.cri.push(3))):(0<=SF._is.cri.indexOf(3)&&(delete SF._is.crm[3],SF._is.cri.splice(SF._is.cri.indexOf(3),1)),0<=SF._is.cri.indexOf(2)&&(delete SF._is.crm[2],SF._is.cri.splice(SF._is.cri.indexOf(2),1)))}SF.lio();c.warn&&setTimeout(SF.lib.alr,5E3,c.warn);f||(e&&SF._st.usr.uid&&
SF.get("SFctr","data-zzz")?window.open(SF.get("SFctr","data-zzz"),SF._is.iframe()?"_top":"_self"):d&&SF.get("SFctr","data-out")&&SF.lib.re(SF.get("SFctr","data-out")))})};
SF.ss.r=function(a){var b,c=a.uid?a.nam||a.biz||a.ctc||"Member":"";SF._st.usr.nam=c;try{a.uid?window.localStorage.setItem("SF_uid",a.uid):window.localStorage.removeItem("SF_uid")}catch(e){}try{c?window.localStorage.setItem("SF_nam",SF.lib.fr(c)):window.localStorage.removeItem("SF_nam")}catch(e){}try{var d=document.querySelectorAll(".SFnam");for(b=d.length-1;0<=b;b--)d[b].innerHTML=SF.lib.fr(c)}catch(e){}try{for(d=document.querySelectorAll(".SF_li"),b=d.length-1;0<=b;b--)d[b].style.display=a.uid?"":
"none"}catch(e){}try{for(d=document.querySelectorAll(".SF_lo"),b=d.length-1;0<=b;b--)d[b].style.display=a.uid?"none":""}catch(e){}};SF.ss.p=function(){SF.$("SFctr")&&SF._st.usr.uid&&SF.lib.xhr("GET","v2/account/session",{org:SF.get("SFctr","data-org"),showSpinner:!1,handleErrors:!1}).then(function(a){if(a&&!a.error)return SF.ss.i(a)}).catch(SF.lib.no)};
SF.ss.d=function(){if(!SF._st.usr.uid)return Promise.resolve();SF._st._do="Signing out";return SF.lib.xhr("DELETE","v2/account/session",{org:SF.get("SFctr","data-org"),handleErrors:!1}).then(function(a){return SF.ss.i(!1)})};
SF.ss.c=function(){SF.ss.d().then(function(){SF.close();delete SF._st.hsh;delete SF._st.ger;SF.get("SFctr","data-ini")&&"signout"!=SF.get("SFctr","data-ini")?SF.open(SF.get("SFctr","data-ini")):SF.get("SFctr","data-hme")&&"signout"!=SF.get("SFctr","data-hme")?SF.open(SF.get("SFctr","data-hme")):(SF.$("SFusrbye")||SF.lib.i("SFpne",[{id:"SFusrbye",className:"SFpne",innerHTML:"You have been signed out"}]),SF.lib.se("SFusrbye"))}).catch(SF.lib.alr)};SF.r({url:/^signout$/,pageId:"SFusrbye",open:SF.ss.c});
SF.ss.o=function(a){var b=function(e){var f=e.currentTarget,h=SF.lib.fp(f,'[role="form"]');if(("keydown"!=e.type||13==e.keyCode)&&SF.v(h)){var g=SF.lib.f(h);SF._st._do="Requesting password";SF.lib.xhr("GET","v2/account/password?"+SF.lib.tq(g),{org:SF.get("SFctr","data-org"),allowEmptyResponse:!0}).then(function(k){if(k)return(new Promise(function(m,l){var n,q=[{nodeName:"h4",innerHTML:"Which Account?"}];for(n=0;n<k.length;n++)q.push({nodeName:"button",data:{eml:g.eml,uid:k[n].uid},onclick:function(){SF.lib.dg("SFusrlogdlg",
!1);m(SF.d.get(this))},innerHTML:SF.lib.fr(k[n].nam+(k[n].ctc?" - "+k[n].ctc:""))});q.push({});q.push({nodeName:"button",onclick:function(){SF.lib.dg("SFusrlogdlg",!1);l(null)},innerHTML:"Cancel"});SF.lib.dg("SFusrlogdlg",{className:"SFmnu",childNodes:q},{target:f,placement:"v"})})).then(function(m){return SF.lib.xhr("GET","v2/account/password?"+SF.lib.tq(m),{org:SF.get("SFctr","data-org"),allowEmptyResponse:!0}).then(function(l){if(l)return Promise.reject("Error")})})}).then(function(){SF.lib.alr("An email with your new password is on its way! If you do not receive the email within a few minutes please check your spam folder.");
d()}).catch(SF.lib.alr)}};var c=function(e){var f=SF.lib.fp(e.currentTarget,'[role="form"]');if(("keydown"!=e.type||13==e.keyCode)&&SF.v(f)){var h=SF.lib.f(f);(new Promise(function(g,k){SF._st.usr.org&&SF._st.usr.org==parseInt(SF.get("SFctr","data-org"))&&"org"!=SF.get("SFctr","data-typ")?SF.lib.dg("SFusrlogdlg",{childNodes:[{nodeName:"p",innerHTML:"You are currently signed in as the administrator, continuing will sign you out as an administrator."},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrlogdlg",
!1);SF.ss.d().then(g).catch(k)},innerHTML:"Continue"},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrlogdlg",!1);k(null)},innerHTML:"Cancel"}]}):g()})).then(function(){SF._st._do="Signing in";return SF.lib.xhr("POST","v2/account/session",h,{org:SF.get("SFctr","data-org")}).then(function(g){if(!g.uid||!g.SF)return Promise.reject("Invalid response");SF.lib.dg("SFusrlog",!1);if(SF._st.usr.uid&&g.uid==SF._st.usr.uid)return SF.ss.i(g,h).then(function(){SF.lib.alr("Thank you for verifying your session! Your last request was not processed, please submit it again.")});
if(SF._st.usr.uid)return SF.ss.d().then(function(){SF.close();delete SF._st.hsh;delete SF._st.ger;return SF.ss.i(g,h)}).then(function(){SF.open()});SF.close();delete SF._st.hsh;return SF.ss.i(g,h).then(function(){SF.open()})})}).catch(SF.lib.alr)}};if(a instanceof Event&&a.currentTarget||"object"==typeof a){a instanceof Event&&(a.stopPropagation(),a.preventDefault());var d=function(e){var f=SF.lib.f("SFusrlog");e=e&&"SFusrlogpst"==SF.lib.fp(e.currentTarget,"#SFusrlogpst,#SFusrlogpwd").id?!0:!1;SF.lib.s("SFusrlogpst",
!e);SF.lib.s("SFusrlogpwd",e);SF.lib.f(e?"SFusrlogpwd":"SFusrlogpst",{eml:f.eml})};SF.lib.dg("SFusrlog",{childNodes:[a.msg?{className:"SFmb1",innerHTML:a.msg}:null,{id:"SFusrlogpst",role:"form",formRows:[{label:"Email",childNodes:[{nodeName:"input",type:"email",name:"eml",required:!0}]},{label:"Password",childNodes:[{nodeName:"input",type:"password",name:"pwd",required:!0,dataset:{rxp:"^.{3,}$"},onkeydown:c}]},{childNodes:[{nodeName:"button",onclick:c,innerHTML:"Sign In"},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrlog",
!1);SF._st.usr.uid&&SF.ss.c()},innerHTML:"Close"}]},{childNodes:[{nodeName:"a",onclick:d,innerHTML:"Need a password?"}]}]},{id:"SFusrlogpwd",role:"form",style:{display:"none"},formRows:[{label:"Email",childNodes:[{nodeName:"input",type:"email",name:"eml",required:!0,onkeydown:b}]},{childNodes:[{nodeName:"button",onclick:b,innerHTML:"Request Password"},{nodeName:"button",onclick:d,innerHTML:"Cancel"}]}]}]},a.currentTarget?{target:a.currentTarget,placement:"v"}:{});SF._st.usr.uid&&SF.lib.f("SFusrlog",
SF._st.usr)}else d=function(e){var f=SF.lib.f("SFusrlog");e=e&&"SFusrlogpwd"==e.currentTarget.id?!0:!1;SF.set("SFusrlogpst",!e);SF.set("SFusrlogpwd",e);SF.lib.s("#SFusrlogpstfrm",!e);SF.lib.s("#SFusrlogpwdfrm",e);SF.lib.f(e?"#SFusrlogpwdfrm":"#SFusrlogpstfrm",{eml:f.eml})},SF.lib.dn("SFusrlog"),SF.$("SFpne")||SF.lib.i("SFctr",[{id:"SFpne",style:{position:"relative"}}]),SF.lib.i("SFpne",[{id:"SFusrlog",className:"SFpne",style:{display:"none"},childNodes:["org"!=SF.get("SFctr","data-typ")?null:{className:"SFmb2",
childNodes:[{nodeName:"h1",innerHTML:"MembershipWorks Admin Login"},{childNodes:[{nodeName:"a",href:"https://membershipworks.com",target:"_blank",innerHTML:"About MembershipWorks"},{nodeName:"a",href:"https://membershipworks.com/pricing/",target:"_blank",innerHTML:"Sign Up"}]}]},{className:"SFmb2",childNodes:[{nodeName:"input",type:"checkbox",checked:!0,id:"SFusrlogpst",onchange:d,childNodes:[{nodeName:"strong",innerHTML:"Sign In"}]},{id:"SFusrlogpstfrm",className:"SFmt1",role:"form",formRows:[{label:"Email",
childNodes:[{nodeName:"input",type:"email",name:"eml",required:!0}]},{label:"Password",childNodes:[{nodeName:"input",type:"password",name:"pwd",required:!0,dataset:{rxp:"^.{3,}$"},onkeydown:c}]},{childNodes:[{nodeName:"button",innerHTML:"Sign In",onclick:c}]}]}]},{className:"SFmb2",childNodes:[{nodeName:"input",type:"checkbox",id:"SFusrlogpwd",onchange:d,childNodes:[{nodeName:"strong",innerHTML:"Request Password"}]},{id:"SFusrlogpwdfrm",className:"SFmt1",role:"form",style:{display:"none"},formRows:[{label:"Email",
childNodes:[{nodeName:"input",type:"email",name:"eml",required:!0,onkeydown:b}]},{childNodes:[{nodeName:"button",innerHTML:"Request Password",onclick:b}]}]}]}]}]),SF.lib.se("SFusrlog")};SF.r({pageId:"SFusrlog",close:function(){SF.lib.dn("SFusrlog")},closeOnLeave:!0});SF.co={};
SF.co.n=function(a,b){var c,d;SF.lib.ml(a,b,{exclude:["error","warn","crm"]});if(b.crm)for(c=0;c<b.crm.length;c++){if(!a.crm)a.crm=[];else if(b.crm[c].cid)for(d=a.crm.length-1;0<=d;d--)if(a.crm[d].cid&&(a.crm[d].cid==b.crm[c].cid||"_"==a.crm[d].cid.substr(0,1)&&b.crm[c].bid)){a.crm.splice(d,1);break}a.crm.push(b.crm[c]);a.crm.sort(function(e,f){return f._dp==e._dp?e.cid-f.cid:e._dp-f._dp})}};
SF.co.p=function(a,b,c){c=void 0===c?"":c;var d,e;if(d=a.match(/\[[a-z0-9_]{3}(\]|\?[^\]]*\]|![^\]]*\]|\.[a-z0-9_]{3}\])/g))for(e=0;e<d.length;e++){var f=d[e].slice(1,4);var h="ico"==f||"lgo"==f||"lgx"==f?(h=b.lgo?"ico"==f?b.lgo.i?b.lgo.i:"":"lgx"==f?b.lgo.l?b.lgo.l:b.lgo.s?b.lgo.s:"":b.lgo.s?b.lgo.s:"":"")?'<img class="SF'+c+f+'" alt src="'+h+'">':"]"==d[e].slice(4,5)?'<span class="SF'+c+f+'"></span>':"":"lgl"==f?b.lgo?b.lgo.s:"":"gnm"==f?SF.lib.en(b.ctc||b.nam||"").first:"lnm"==f?SF.lib.en(b.ctc||
b.nam||"").last:"_de"==f?b._dp?Math.round((parseInt((new Date).getTime()/1E3)-b._dp)/86400).toString():"":"_dp"==f?b._dp?SF.lib.fd(b._dp):"":"web"==f&&"ltg"==c?b.web?'<a class="SF'+c+'web" href="'+SF.lib.fw(b.web)+'">'+SF.lib.fw(b.web)+"</a>":"":"web"==f||"erl"==f?b[f]?SF.lib.fw(b[f]):"":"tag"==f?b.tag&&"object"==typeof b.tag&&b.tag.length?'<div><span class="SFrcpchk">'+b.tag.join('</span><span class="SFrcpchk">')+"</span></div>":"":"undefined"==typeof b[f]?"":"object"!=typeof b[f]?SF.lib.fx(b[f].toString()):
"undefined"!=typeof b[f].ad2||"undefined"!=typeof b[f].con?".ads"==d[e].slice(4,8)?SF.lib.f2(b[f]):SF.lib.fb(b[f]):"undefined"!=typeof b[f][0]?SF.lib.fx(b[f].join(", ")):b[f]?"1":"";a="?"==d[e].slice(4,5)?a.replace(d[e],h&&"0"!=h?d[e].slice(5,d[e].length-1):""):"!"==d[e].slice(4,5)?a.replace(d[e],h&&"0"!=h?"":d[e].slice(5,d[e].length-1)):h&&"function"==typeof h.toString?a.replace(d[e],h):a.replace(d[e],"")}return a};
SF.co.g=function(a,b){var c,d;switch(a){case "now":return SF.lib.fd((new Date).getTime()/1E3);case "uid":return SF.$("SFusrpne")?SF._st.usr.uid:b.uid;case "gnm":return SF.lib.en(b.ctc||b.nam||"").first;case "lnm":return SF.lib.en(b.ctc||b.nam||"").last;case "ico":return"undefined"==typeof b.lgo?null:b.lgo&&b.lgo.i?'<img src="'+b.lgo.i+'" alt="Card image icon">':"";case "lgx":return"undefined"==typeof b.lgo?null:b.lgo&&b.lgo.l?'<img src="'+b.lgo.l+'" alt="Card image">':"";case "lgo":return"undefined"==
typeof b.lgo?null:b.lgo&&b.lgo.s?'<img src="'+b.lgo.s+'" alt="Card image">':"";case "lgl":return"undefined"==typeof b.lgo?null:b.lgo&&b.lgo.s?b.lgo.s:"";case "lvl":if("undefined"==typeof b.dek)return null;for(a=0;a<b.dek.length;a++)if("undefined"!=typeof b.dek[a].bid)return b.dek[a].lbl?b.dek[a].lbl:"";return"";case "aon":if("undefined"==typeof b.dek)return null;a=0;for(c=[];a<b.dek.length;a++)"undefined"!=typeof b.dek[a].bid&&"undefined"!=typeof b.dek[a].add&&(c=b.dek[a].add);a=0;for(d=[];a<b.dek.length;a++)0<=
c.indexOf(b.dek[a].did)&&d.push(b.dek[a].lbl);return d.join(", ");case "dne":if("undefined"==typeof b.crm)return null;a=0;for(c={_dp:0};a<b.crm.length;a++)("object"==typeof b.crm[a].typ&&0<=b.crm[a].typ.indexOf(12)||"number"==typeof b.crm[a].typ&&12==b.crm[a].typ)&&b.crm[a]._dp>c._dp&&(c=b.crm[a]);return c&&c._dp?SF.lib.fd(parseInt(c._dp)):null;case "ren":case "end":if("undefined"!=typeof b.crm)for(a=0;a<b.crm.length;a++)if(11==b.crm[a].typ)return b.crm[a]._dp?SF.lib.fd(b.crm[a]._dp):"";if("undefined"!=
typeof b.dek)for(a=0;a<b.dek.length;a++)if("undefined"!=typeof b.dek[a].bid)return b.dek[a].end?SF.lib.fd(b.dek[a].end):"";return null;case "joi":if("undefined"==typeof b.crm)return null;for(a=0;a<b.crm.length;a++)if(10==b.crm[a].typ)return b.crm[a]._dp?SF.lib.fd(b.crm[a]._dp):"";return null;case "atg":return"undefined"==typeof b.atg?null:"xro"==b.atg?"Xero":"QuickBooks"}return"undefined"==typeof b[a]?null:null==b[a]?"":"nam"==a||"ctc"==a||"biz"==a||"pos"==a?SF.lib.fr(b[a]):"object"!=typeof b[a]||
"undefined"==typeof b[a].ad1&&"undefined"==typeof b[a].ad2&&"undefined"==typeof b[a].con?"object"!=typeof b[a]||"undefined"==typeof b[a]._ts&&"undefined"==typeof b[a].ipa?typeof("number"==b[a])?b[a].toString():b[a]:(b[a].sig?"<strong>"+b[a].sig+"</strong> @":"")+SF.lib.fd(b[a]._ts):SF.lib.fb(b[a])};
SF.co.b=function(a,b){SF.lib.i(a,[b=SF.lib.n({draggable:!0,ondragstart:SF.lib.vd,ondragover:SF.lib.vd,ondragend:SF.lib.vd,childNodes:[{nodeName:"input",name:"opt[]",type:"text","aria-label":"Option",value:void 0===b?null:b}]})],a.lastChild);return b};
SF.co.d=function(a){var b,c,d;var e=SF.lib.fp(a.currentTarget,"li");a=e.parentNode;var f=0;for(b=!1;f<a.childNodes.length;f++)if(!1===b)a.childNodes[f]==e&&(b=f);else{var h=a.childNodes[f].querySelectorAll("[name]");for(c=0;c<h.length;c++)1<(d=h[c].name.split("[")).length&&d[1]==f+"]"&&(d[1]=f-1+"]",h[c].name=d.join("["))}e.style.opacity=0;setTimeout(function(){var g=e.nextSibling;SF.lib.dn(e);SF.lib.fc(g)},500)};
SF.co.a=function(a){var b;var c=[];if(SF._st.dek)for(SF._st.dek.sort(SF.lib.cm),b=0;b<SF._st.dek.length;b++)"Recommend"!=SF._st.dek[b].lbl&&c.push({nodeName:"option",value:SF._st.dek[b].did,selected:"Members"==SF._st.dek[b].lbl?"":null,innerHTML:SF.lib.fr(SF._st.dek[b].lbl)+" (folder)"});if(SF._st.lbl)for(SF._st.lbl.sort(SF.lib.cm),b=0;b<SF._st.lbl.length;b++)c.push({nodeName:"option",value:SF._st.lbl[b].did,innerHTML:SF.lib.fr(SF._st.lbl[b].lbl)});b=a.childNodes.length-1;c=SF.lib.n({nodeName:"li",
childNodes:[{nodeName:"select",name:"dcl["+b+"][did]","aria-label":"Discount for members in label or folder",style:{width:"160px"},childNodes:c},{nodeName:"span",innerHTML:"discount amount"},{nodeName:"input",type:"price",name:"dcl["+b+"][amt]","aria-label":"Discount amount",min:0,required:!0},{nodeName:"button",className:"SFdel",title:"Delete",onclick:SF.co.d}]});SF.lib.i(a,[c],a.lastChild);return c};
SF.co.c=function(a){var b=a.childNodes.length-1;b=SF.lib.n({nodeName:"li",childNodes:[{nodeName:"span",innerHTML:"For quantities of"},{nodeName:"input",type:"count",name:"dcq["+b+"][qty]","aria-label":"Minimum quantity",min:1,required:!0},{nodeName:"span",innerHTML:"or more, discount each by"},{nodeName:"input",type:"price",name:"dcq["+b+"][amt]","aria-label":"Discount amount",min:0,required:!0},{nodeName:"button",className:"SFdel",title:"Delete",onclick:SF.co.d}]});SF.lib.i(a,[b],a.lastChild);return b};
SF.co.f=function(a){var b=!1;return(new Promise(function(c){if("INPUT"==a.nodeName&&a.hasAttribute("name"))if(b=!0,SF.v(a)&&SF.get(a)){var d={};d["nam"==a.name?"tag":a.name]=SF.get(a);c(d)}else c(!1);else SF.lib.dg("SFcomdlg",{childNodes:[{innerHTML:"Search by name or keyword"},{className:"SFmb1",childNodes:[{nodeName:"input",type:"text",name:"tag",required:!0}]},{nodeName:"button",onclick:function(){SF.v("SFcomdlg")&&c(SF.lib.f("SFcomdlg"))},innerHTML:"Search"},{nodeName:"button",onclick:function(){c(!1)},
innerHTML:"Cancel"}]},{target:a,placement:"v"})})).then(function(c){SF.lib.dg("SFcomdlg",!1);return c?SF.lib.xhr("GET","v2/accounts?"+SF.lib.tq(c),{admin:!0,handleErrors:!b}):Promise.reject(null)}).then(function(c){return c&&c.usr&&c.usr.length?new Promise(function(d){var e,f,h=[];b&&h.push({nodeName:"h4",innerHTML:"Member Account?"});for(e=0;e<c.usr.length;e++)if(c.usr[e]._xp||h.push({nodeName:"button",data:c.usr[e],onclick:function(){SF.lib.dg("SFcomdlg",!1);d(SF.d.get(this))},innerHTML:SF.lib.fr(c.usr[e].nam)+
(c.usr[e].ctc?" - "+SF.lib.fr(c.usr[e].ctc):"")}),c.usr[e].alt)for(f=0;f<c.usr[e].alt.length;f++)c.usr[e].alt[f].parent=SF.lib.c(c.usr[e],{only:["uid","nam"]}),h.push({nodeName:"button",data:c.usr[e].alt[f],onclick:function(){SF.lib.dg("SFcomdlg",!1);d(SF.d.get(this))},innerHTML:SF.lib.fr(c.usr[e].nam)+(c.usr[e].alt[f].nam?" - "+SF.lib.fr(c.usr[e].alt[f].nam):"")});h.push({});h.push({nodeName:"button",onclick:function(){SF.lib.dg("SFcomdlg",!1);d(null)},innerHTML:b?"None of the above":"Cancel"});
SF.lib.dg("SFcomdlg",{className:"SFmnu",childNodes:h},{target:a,placement:"v"})}):Promise.reject("No matching accounts found")})};SF.co.l={};SF.co.l.i=function(a,b){"string"==typeof a&&(a=SF.$(a));SF.lib.cn(a);b&&b.typ&&(SF.lib.i(a,[{nodeName:"input",type:"checkbox",checked:b.lst?!0:!1,onchange:SF.co.l.t,innerHTML:"add registrants to email list"},{style:{display:"none"}}]),SF.d.set(a,b),b.lst&&SF.co.l.t({currentTarget:a.firstChild}))};
SF.co.l.t=function(a){var b=a.currentTarget.parentNode;SF.lib.s(b.childNodes[1],SF.get(a.currentTarget)?!0:!1);if(SF.lib.s(b.childNodes[1])&&!b.childNodes[1].childNodes.length){var c=SF.d.get(b);b.childNodes[1].innerHTML='<i class="SFspn"></i>';SF.lib.xhr("GET","v1/mcc?typ="+c.typ,{showSpinner:!1,handleErrors:!1}).then(function(d){var e;if(d&&!d.error&&d.lst&&d.lst.length){var f=[{nodeName:"option",value:"",innerHTML:"None"}];for(e=0;e<d.lst.length;e++)f.push({nodeName:"option",value:d.lst[e]._id,
innerHTML:SF.lib.fr(d.lst[e].lbl)});SF.lib.cn(b.childNodes[1]);SF.lib.i(b.childNodes[1],[{nodeName:"select",name:"mcc[lst][0][_id]","aria-label":"List",childNodes:f},"SFevtadvmcc"!=b.id?null:{className:"SFmt1",childNodes:[{nodeName:"input",type:"checkbox",name:"mcc[lst][0][ctc]",innerHTML:"exclude secondary registrants"}]},{className:"SFmt1",childNodes:[{nodeName:"span",innerHTML:"and attach tag"},{nodeName:"input",type:"text",name:"mcc[lst][0][tag]","aria-label":"Attach tag",placeholder:"tag name"},
{nodeName:"span",className:"SFplh",innerHTML:"(optional)"}]}]);c&&c.lst&&c.lst[0]&&(e=SF.lib.c(c.lst[0],{only:["_id","ctc"]}),c.lst[0].tag&&c.lst[0].tag.add&&(e.tag=c.lst[0].tag.add.join(";")),SF.lib.f(b.childNodes[1],{mcc:{lst:[e]}}))}else b.childNodes[1].innerHTML=d?d.error?d.error:"No lists in MailChimp":"No response"}).catch(SF.lib.alr)}};SF.co.u={};
SF.co.u.i=function(a,b){var c;"string"==typeof a&&(a=SF.$(a));SF.lib.cn(a);SF.d.set(a,{editor:SF.co.t.o});a.childNodes.length||SF.lib.i(a,[{nodeName:"button",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Tax Rule"}]}]);if(b)for(c=0;c<b.length;c++)SF.lib.i(a,[SF.co.t.e(b[c])],a.lastChild)};SF.co.u.g=function(a){var b,c=[];"string"==typeof a&&(a=SF.$(a));for(a=a.firstChild;a;a=a.nextSibling)(b=SF.d.get(a))&&c.push(b);return c.length?c:"[]"};
SF.co.t={};SF.co.t.e=function(a,b){(b=void 0===b?null:b)?SF.lib.cn(b):b=SF.lib.n({nodeName:"button",onclick:SF.lib.e});SF.lib.i(b,[{nodeName:"span",innerHTML:Math.round(a.tax/1E4)/100+"%"},{nodeName:"span",innerHTML:SF.lib.fv(a.adr)}]);SF.d.set(b,a);return b};
SF.co.t.o=function(a){var b=SF.d.get(a.currentTarget);a=SF.lib.n({className:"SFfrm",role:"form",childNodes:[{formRows:[{label:"Apply tax to registrants located in",childNodes:[{nodeName:"input",type:"text",name:"adr",placeholder:"city/state/province/country",onchange:SF.co.t.h}]},{label:"Tax rate",childNodes:[{nodeName:"input",type:"number",name:"tax",min:0,required:!0},{nodeName:"span",innerHTML:"%"}]},{childNodes:[{nodeName:"button",onclick:SF.co.t.s,innerHTML:"OK"},b?{nodeName:"button",onclick:SF.co.t.d,
innerHTML:"Delete"}:null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"}]}]}]});b&&(b=SF.lib.c(b),b.adr=SF.lib.f2(b.adr),b.tax=Math.round(b.tax/1E4)/100,SF.lib.f(a,b),SF.co.t.h({currentTarget:a.querySelector('[name="adr"]')}));return a};
SF.co.t.h=function(a){var b=a.currentTarget;SF.lib.dn(b.nextSibling);var c=SF.get(b).replace(/^\s*|\s*$/,"");SF.set(b,c);c?SF.lib.gg({ad2:c}).then(function(d){d&&d.con?(d.zip&&0>c.toLowerCase().indexOf(d.zip.toLowerCase())&&delete d.zip,SF.lib.i(b.parentNode,[{innerHTML:SF.lib.fv(d)}])):SF.lib.i(b.parentNode,[{className:"SFemp",innerHTML:"Area not recognized"}])}):SF.lib.i(b.parentNode,[{innerHTML:"(blank=global)"}])};
SF.co.t.s=function(a){var b,c;var d=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(d)){var e=SF.lib.f(d);e.tax=Math.round(1E6*e.tax);e.tax?(new Promise(function(f){f(!e.adr||SF.lib.gg({ad2:e.adr}).then(function(h){if(h&&h.con)h.zip&&0>e.adr.toLowerCase().indexOf(h.zip.toLowerCase())&&delete h.zip,e.adr=SF.lib.c(h,{only:["cit","cot","sta","zip","con"]}),e.adr.cit||delete e.adr.cit,e.adr.sta||delete e.adr.sta,e.adr.zip||delete e.adr.zip,e.adr.con||delete e.adr.con;else return Promise.reject("Invalid address")}))})).then(function(){b=
SF.lib.e(d,!1);c=b.parentNode;SF.d.get(b)?SF.co.t.e(e,b):SF.lib.i(c,[b=SF.co.t.e(e)],c.lastChild);SF.lib.fc(b)}).catch(SF.lib.alr):SF.lib.alr("Invalid tax rate")}};SF.co.t.d=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');var b=SF.lib.e(a,!1);b.style.opacity=0;setTimeout(function(){var c=b.nextSibling;SF.lib.dn(b);SF.lib.fc(c)},500)};SF.co.m={};
SF.co.m.o=function(a){a=SF.d.get(a.currentTarget);var b,c=[];for(b in a)0>["nam","eml","ttl","dtl"].indexOf(b)&&c.push({nodeName:"input",type:"hidden",name:b});SF.lib.dg("SFmsgdlg",{childNodes:[b=SF.lib.n({role:"form",childNodes:[{nodeName:"button",className:"SFclz",onclick:SF.co.m.c,title:"Close"},{id:"SFmsgfrm",className:"SFmsgedt SFblc",formRows:[SF._st.usr.uid?null:{label:"Your name",childNodes:[{nodeName:"input",type:"text",name:"nam",required:!0}]},SF._st.usr.uid?null:{label:"Your email",childNodes:[{nodeName:"input",
type:"email",name:"eml",required:!0}]},{label:"Subject",childNodes:[{nodeName:"input",type:"text",name:"ttl",required:!0}]},SF._is.upload()?{childNodes:[{className:"SFfbx SFmin",childNodes:[{className:"SFlnk SFfillst",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to add attachments"},{nodeName:"input",type:"file",name:"att",multiple:!0,"aria-label":"Upload attachments",onchange:function(){SF.v(this,{alert:!0})}}]}]}:null,{label:"Message",childNodes:[{nodeName:"textarea",className:"SFhtm",
name:"dtl",placeholder:"Message",style:{height:"20em"},required:!0}]},c.length?{className:"SFhid",childNodes:c}:null]},{id:"SFmsgpvw",className:"SFmsgpvw",style:{display:"none"}},{className:"SFmt2",innerHTML:'By clicking send you are indicating that the message you are sending is <strong class="SFemp">not spam or advertising</strong>'},{className:"SFbtx",childNodes:[{nodeName:"button",className:"SFmsgpvw",style:{display:"none"},onclick:SF.co.m.s,innerHTML:"Send"},{nodeName:"button",className:"SFmsgpvw",
style:{display:"none"},onclick:SF.co.m.p,innerHTML:"Edit"},{nodeName:"button",className:"SFmsgedt",onclick:SF.co.m.p,innerHTML:"Preview & Send"},{nodeName:"button",innerHTML:"Cancel",onclick:SF.co.m.c}]}]})]},{width:"720px",height:"720px"});SF.lib.it("#SFmsgdlg .SFhtm",SF._st.admin?!0:!1);SF.lib.f(b,a);SF.lib.fc(b)};
SF.co.m.c=function(a){(new Promise(function(b){var c=SF.lib.f("SFmsgfrm");a&&a.currentTarget&&(c.ttl||c.dtl)?SF.lib.dg("SFmsgdlgmnu",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){b(!1)},innerHTML:"Go back"},{},{nodeName:"button",onclick:function(){b(!0)},innerHTML:"Confirm cancel &amp; discard"}]},{target:a.currentTarget,placement:"v"}):b(!0)})).then(function(b){SF.lib.dg("SFmsgdlgmnu",!1);b&&SF.lib.dg("SFmsgdlg",!1)}).catch(SF.lib.alr)};
SF.co.m.p=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');var b=a.querySelector(".SFmsgedt.SFfrm"),c=a.querySelector("div.SFmsgpvw"),d=!SF.lib.s(c),e,f=[];if(d){if(!SF.v(b))return;var h=SF.lib.f(b);h.dtl=SF.lib.fx(h.dtl,SF._st.admin?{allowed:["a","img"]}:null);if(10>h.dtl.length){SF.lib.alr("Please enter a message");return}if(h.att)for(e=0;e<h.att.length;e++)f.push({lbl:h.att.item(e).name});f.length&&(h.att=f);SF.lib.f(b,{dtl:h.dtl});SF.lib.cn(c);SF.lib.i(c,SF.lib.fm(h,{preview:!0}))}SF.lib.s(a.querySelectorAll(".SFmsgedt"),
!d);SF.lib.s(a.querySelectorAll(".SFmsgpvw"),d);SF.lib.fc(d?a.querySelector(".SFbtx"):b)};SF.co.m.s=function(a){SF.v("SFmsgfrm")&&(a=SF.lib.f("SFmsgfrm"),a.dtl=SF.lib.fx(a.dtl,SF._st.admin?{allowed:["a","img"]}:null),10>a.dtl.length?SF.lib.alr("Please enter a message"):(SF._st._do="Sending your message",SF.lib.xhr("POST","v2/message",a,{admin:SF._st.admin?!0:!1}).then(function(b){SF.co.m.c();SF._st.usr.uid?SF.lib.alr("Your message has been sent"):SF.lib.alr('<p>A verification link has been emailed to you.<br>Click on the link in the email to finish sending the message.</p><p class="SFemp">If you do not click on this link within 72 hours you will be blocked from sending messages in the future.</p><p>Please check your spam folder if you do not receive this email within a few minutes.</p>')}).catch(SF.lib.alr)))};
SF.py={};
SF.py.x=function(a,b){var c;if("number"==typeof a){var d=b&&b.txi?{sum:1,amt:1,tax:a/(1E8+a),txx:a/1E8,txi:b.txi}:{sum:1+a/1E8,amt:1,tax:a/1E8,txx:a/1E8};b&&b.txh&&(d.txh=b.txh);return d}d={txx:0,tot:0};var e=a&&a.adr?a.adr:a;if(b&&b.tax)for(c=0;c<b.tax.length;c++)if(d.tot+=b.tax[c].tax/1E8,!a||!a.ntx)if(!b.tax[c].adr.zip||e&&e.zip&&(0>b.tax[c].adr.zip.indexOf("-")?e.zip.split("-")[0]:e.zip).toLowerCase().trim()==b.tax[c].adr.zip.toLowerCase().trim())if(!b.tax[c].adr.cit||e&&e.cit&&e.cit.toLowerCase().trim()==b.tax[c].adr.cit.toLowerCase().trim())if(!b.tax[c].adr.sta||
e&&e.sta&&e.sta.toLowerCase().trim()==b.tax[c].adr.sta.toLowerCase().trim())if(!b.tax[c].adr.con||e&&e.con&&e.con.toLowerCase().trim()==b.tax[c].adr.con.toLowerCase().trim())d.txx+=b.tax[c].tax/1E8;b&&b.txi?(d.txi=b.txi,d.tax=d.txx/(1+d.tot),d.amt=(1+d.txx)/(1+d.tot),d.sum=d.amt):(d.tax=d.txx,d.amt=1,d.sum=1+d.txx);b&&b.txh&&(d.txh=b.txh);delete d.tot;return d};
SF.py.r=function(a,b){if("undefined"==typeof a.cur||0>SF._is.szc.indexOf(a.cur.toLowerCase()))return a=(100*b).toPrecision(14).split("."),a[0].match(/^[0-9\-]*$/)?(parseInt(a[0])+(1<a.length&&5<=parseInt(a[1].slice(0,1))?0<b?1:-1:0))/100:b;a=b.toPrecision(14).split(".");return a[0].match(/^[0-9\-]*$/)?parseInt(a[0])+(1<a.length&&5<=parseInt(a[1].slice(0,1))?0<b?1:-1:0):b};
SF.py.v=function(a,b,c,d,e){var f=new Date(a.getTime()-1E3*d);b=new Date(f.getFullYear(),b-1,c,1,0,d,0);b.setFullYear(b.getFullYear()+e-(864E5<b.getTime()-a.getTime()?1:0));return b};SF.py.y=function(a){return"undefined"!=typeof a.cat?1==a.cat||2==a.cat?"d":4==a.cat?"e":5==a.cat?"c":"m":"undefined"==typeof a.typ||"m"!=a.typ&&"e"!=a.typ&&"d"!=a.typ&&"c"!=a.typ&&"o"!=a.typ&&"h"!=a.typ?"m":a.typ};
SF.py.d=function(a,b){return 12*(b.getUTCFullYear()-a.getUTCFullYear())+(b.getUTCMonth()-a.getUTCMonth())+(b.getUTCDate()-a.getUTCDate())/(365/12)+(b.getUTCHours()-a.getUTCHours())/24/(365/12)};SF.py.c=function(a,b,c){return Math.round(100*a/(("y"==b?12:1)*c))/100};SF.py.a=function(a,b,c){return b.itv?SF.py.r(a,c.aon*(b.mux?b.mux:1)*("y"==b.itv?12:1)/((c.mux?c.mux:1)*("y"==c.itv?12:1))):SF.py.r(a,c.aon)};
SF.py.z=function(a,b){var c={},d;for(d in b)c[b[d].typ]=("undefined"==typeof c[b[d].typ]?0:c[b[d].typ])+SF.py.r(a,b[d].qty*b[d].amt);return c};SF.py.i=function(a,b,c,d,e,f){if(e||d&&!(0>d.indexOf("trial")))if(SF.py.k(a,a,e,b.amt,a.lbl+(b.ttl?" - "+b.ttl:""),d?d:"",f),a.add)for(d=0;d<c.length;d++)0<=a.add.indexOf(c[d].did)&&SF.py.k(a,c[d],e,b.itv?SF.py.r(a,c[d].aon*(b.mux?b.mux:1)*("y"==b.itv?12:1)/((c[d].mux?c[d].mux:1)*("y"==c[d].itv?12:1))):SF.py.r(a,c[d].aon),c[d].lbl,"",f)};
SF.py.j=function(a,b,c,d,e,f,h){var g,k;var m=0;for(k in f)m+=f[k];var l=0;var n=h.itm.length;for(k in f)if(k!=SF.py.y(a)&&(g=SF.py.r(a,c*f[k]/m))){l+=g;var q={typ:k,lbl:d,qty:1,amt:g};b&&b.did?q.did=b.did:b&&b.gid&&(q.gid=b.gid);e&&(q.nte=e);h.itm.push(q);h.amt+=g;"undefined"!=typeof h.mbl&&(q=SF.lib.c(q),h.mbl.itm.push(q))}SF.py.r(a,l)!=SF.py.r(a,c)&&(g=SF.py.r(a,c)-SF.py.r(a,l),q={typ:SF.py.y(a),lbl:d,qty:1,amt:g},b&&b.did?q.did=b.did:b&&b.gid&&(q.gid=b.gid),e&&(q.nte=e),h.itm.splice(n,0,q),h.amt+=
g,"undefined"!=typeof h.mbl&&(q=SF.lib.c(q),h.mbl.itm.splice(n,0,q)))};SF.py.k=function(a,b,c,d,e,f,h){d={typ:SF.py.y(b),lbl:e,qty:c,amt:SF.py.r(a,d)};b&&b.did?d.did=b.did:b&&b.gid&&(d.gid=b.gid);f&&(d.nte=f);h.itm.push(d);h.amt+=SF.py.r(a,c*d.amt);"undefined"!=typeof h.mbl&&(d=SF.lib.c(d),h.mbl.itm.push(d))};
SF.py.l=function(a,b,c){var d;if(c.itm)for(d=0;d<c.itm.length;d++)if("Capped"!=c.itm[d].lbl&&"Rounding"!=c.itm[d].lbl){var e=SF.lib.c(c.itm[d]);b.itm.push(e);b.amt+=SF.py.r(a,e.qty*e.amt);"undefined"!=typeof b.mbl&&(e=SF.lib.c(e),b.mbl.itm.push(e))}};
SF.py.t=function(a,b,c){var d;b.amt=0;b.tax=0;b.sum=0;if(b.itm)for(d=b.itm.length-1;0<=d;d--){var e=b.itm[d].amt;b.itm[d].amt=SF.py.r(a,e*("undefined"==typeof c.amt?1:c.amt));b.amt+=SF.py.r(a,b.itm[d].qty*e);b.tax+=b.itm[d].qty*e*("undefined"==typeof c.tax?0:c.tax);b.sum+=SF.py.r(a,b.itm[d].qty*b.itm[d].amt)}b.amt=SF.py.r(a,b.amt);b.tax=SF.py.r(a,b.tax);b.sum=SF.py.r(a,b.sum+(c.txi?0:b.tax))};
SF.py.e=function(a,b,c){var d;if("undefined"!=typeof b.mbl&&b.mbl.itm)for(d=b.mbl.itm.length-1;0<=d;d--)(b.mbl.itm[d].lbl==c||"Discount"==c&&b.mbl.itm[d].gid)&&b.mbl.itm.splice(d,1);var e=0;if(b.itm)for(d=b.itm.length-1;0<=d;d--)if(b.itm[d].lbl==c||"Discount"==c&&b.itm[d].gid)"undefined"!=typeof b.amt&&(b.amt-=SF.py.r(a,b.itm[d].qty*b.itm[d].amt)),e+=SF.py.r(a,b.itm[d].qty*b.itm[d].amt),b.itm.splice(d,1);return e};
SF.py.m=function(a,b,c,d,e,f){var h=new Date,g={amt:0,dif:0,pro:0},k={},m=[],l,n=!1,q=!1;SF._st._rt&&h.setSeconds(h.getSeconds()+SF._st._rt);var t=new Date("1/1/2000");t=(c._rt?c._rt:0)+946688400-parseInt(t.getTime()/1E3);if(b){a&&(g.mbl=SF.lib.c(a));b.end&&(g.end=new Date(1E3*b.end),g.end.setMinutes(0,0,0),g.dif=SF.py.d(g.end,h));b.joi&&(g.joi=new Date(1E3*b.joi),g.joi.setMinutes(0,0,0));b.did&&(g.did=b.add?[b.did].concat(b.add):[b.did]);b.bid&&(g.bid=b.bid);if(b.bil)for(l=0;l<b.bil.length;l++){if(b.bid&&
b.bid==b.bil[l].bid){g.bil=b.bil[l];g.amt=SF.py.r(c,b.bil[l].amt);g.its={};g.its[SF.py.y(b)]=g.amt;g.bil.itv&&(g.itv=g.bil.itv,g.mux=g.bil.mux?g.bil.mux:1,g.pro=SF.py.c(g.dif,g.itv,g.mux));if(b.add){var u=d.length-1;for(g.amo=g.amt;0<=u;u--)0<=b.add.indexOf(d[u].did)&&(g.amt+=SF.py.a(c,g.bil,d[u]),g.its[SF.py.y(d[u])]=("undefined"==typeof g.its[SF.py.y(d[u])]?0:g.its[SF.py.y(d[u])])+SF.py.a(c,g.bil,d[u]))}g.amt=SF.py.r(c,g.amt);break}b.bil[l].pub&&b.bil[l].itv&&(u=b.bil[l].amt*("y"==b.bil[l].itv?
1:12)/(b.bil[l].mux?b.bil[l].mux:1),!1===n||u<n)&&(n=u,q=b.bil[l])}!g.bil&&!q&&g.end&&b.bil&&1==b.bil.length&&b.bil[0].itv&&(q=b.bil[0]);if(!g.bil&&q){g.bil=SF.lib.c(q);g.bil.ttl="";g.amt=SF.py.r(c,q.amt);g.its={};g.its[SF.py.y(b)]=g.amt;g.itv=q.itv;g.mux=q.mux?q.mux:1;g.pro=SF.py.c(g.dif,g.itv,g.mux);if(b.add)for(u=d.length-1,g.amo=g.amt;0<=u;u--)0<=b.add.indexOf(d[u].did)&&(g.amt+=SF.py.a(c,g.bil,d[u]),g.its[SF.py.y(d[u])]=("undefined"==typeof g.its[SF.py.y(d[u])]?0:g.its[SF.py.y(d[u])])+SF.py.a(c,
g.bil,d[u]));g.amt=SF.py.r(c,g.amt)}}k.did=c.add?[c.did].concat(c.add):[c.did];if(b){for(l=k.did.length-1;0<=l;l--)0>g.did.indexOf(k.did[l])&&m.push(k.did[l]);for(l=g.did.length-1;0<=l;l--)0>k.did.indexOf(g.did[l])&&m.push(g.did[l])}else m=k.did;if(a&&b&&g.end&&g.amt&&g.itv&&g.bil)if("object"==typeof a)if(a.nxt&&a.itm){var v=SF.lib.c(a);v.nxt=new Date(1E3*v.nxt)}else v=!1;else{v={};b.nmn&&b.ndn?v={nxt:SF.py.v(g.end,b.nmn,b.ndn,t,0)}:g.bil.nmn&&g.bil.ndn?v={nxt:SF.py.v(g.end,g.bil.nmn,g.bil.ndn,t,
0)}:v.nxt=new Date(g.end.getFullYear(),g.end.getMonth(),g.end.getDate(),g.end.getHours(),0,0,0);v.dif=SF.py.d(g.end,v.nxt);for(v.amt=a+SF.py.r(c,SF.py.c(v.dif,g.itv,g.mux)*g.amt);0>v.amt||0>v.dif;)v.nxt=new Date(v.nxt.getFullYear()+("y"==g.itv?g.mux:0),v.nxt.getMonth()+("m"==g.itv?g.mux:0),v.nxt.getDate(),v.nxt.getHours(),0,0,0),v.dif+=g.mux*("y"==g.itv?12:1),v.amt=a+SF.py.r(c,SF.py.c(v.dif,g.itv,g.mux)*g.amt);v.itm=[{typ:SF.py.y(b),lbl:b.lbl,nte:"Previous balance",qty:1,amt:v.amt}]}else v=!1;var x=
"undefined"==typeof c.prp?.12:c.prp/100;var w=SF.py.y(c);if(c.bil)for(l=0,k.bil=[];l<c.bil.length;l++){var r=SF.lib.c(c.bil[l]);c.nyn&&(delete r.nmn,delete r.ndn,delete r.npn,delete r.psm,"undefined"!=typeof c.nmn&&(r.nmn=c.nmn),"undefined"!=typeof c.ndn&&(r.ndn=c.ndn),"undefined"!=typeof c.npn&&(r.npn=c.npn),"undefined"!=typeof c.psm&&(r.psm=c.psm));var p={amt:0,tax:0,sum:0,pmt:{amt:0,tax:0,sum:0,itm:[],mbl:{did:c.did,bid:r.bid,itm:[]}}};r.bid&&(p.bid=r.bid);"undefined"!=typeof r.way&&(p.way=r.way);
if(r.itv){r.cnt&&(p.cnt=r.cnt);p.mux=r.mux?r.mux:r.mux=1;p.itv=r.itv;var y=SF.py.r(c,r.amt);p.amt=y;p.its={};p.its[SF.py.y(c)]=y;p.tax=y*("undefined"==typeof e.tax?0:e.tax);p.sum=SF.py.r(c,y*("undefined"==typeof e.amt?1:e.amt));if(c.add)for(u=d.length-1,p.amo=p.amt;0<=u;u--)0<=c.add.indexOf(d[u].did)&&(y=SF.py.a(c,r,d[u]),p.its[SF.py.y(d[u])]=("undefined"==typeof p.its[SF.py.y(d[u])]?0:p.its[SF.py.y(d[u])])+y,p.amt+=y,p.tax+=y*("undefined"==typeof e.tax?0:e.tax),p.sum+=SF.py.r(c,y*("undefined"==typeof e.amt?
1:e.amt)));p.amt=SF.py.r(c,p.amt);p.tax=SF.py.r(c,p.tax);p.sum=SF.py.r(c,p.sum+(e.txi?0:p.tax));if(!1===b||!b.did||b&&b.did&&(g.itv||b.did==c.did)&&!g.end||!v&&b.due&&(g.pro>x||g.pro>1-x)||!v&&b.dum&&(g.pro>x||g.pro>1-x)&&Math.round(g.pro*g.amt)>b.dum||(b.did!=c.did||g.amt!=p.amt)&&g.end&&g.end<h&&g.joi&&864E5>Math.abs(g.joi.getTime()-g.end.getTime())){if(r.nmn&&r.ndn){p.nxt=SF.py.v(h,r.nmn,r.ndn,t,r.mux);p.dif=SF.py.d(h,p.nxt);p.pro=SF.py.c(p.dif,r.itv,r.mux);y=0;q=Math.abs(p.pro-1)<=x?SF.py.v(h,
r.nmn,r.ndn,t,0):p.nxt;if(b&&b.did&&(g.itv||b.did==c.did)&&!g.end&&(!g.joi||Math.abs(SF.py.c(SF.py.d(g.joi,q),r.itv,r.mux))>x)&&(Math.abs(p.pro)<=x||Math.abs(p.pro-1)<=x))Math.abs(p.pro-1)<=x&&SF.py.i(c,r,d,SF.lib.fd(SF.py.v(h,r.nmn,r.ndn,t,0))+" - "+SF.lib.fd(p.nxt),1,p.pmt);else if(r.npn)b&&(g.pro>x||g.pro>1-x)&&b.dum&&Math.round(g.pro*g.amt)>b.dum&&SF.py.k(c,b,1,b.dum,"Past due",SF.lib.fd(g.end)+" - "+SF.lib.fd(h),p.pmt),SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt)+(1==p.pro?"":" (prorated)"),
p.pro,p.pmt);else if(b&&(g.pro>x||g.pro>1-x)&&b.dum&&Math.round(g.pro*g.amt)>b.dum&&SF.py.k(c,b,1,b.dum,"Past due",SF.lib.fd(g.end)+" - "+SF.lib.fd(h),p.pmt),SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),1,p.pmt),"undefined"!=typeof c.mat){y=p.amt;var A=c.mat;var C=c.mtp;var B=c.mmn;var D=c.mdn}else!c.nyn&&r.mat&&r.mmn&&r.mdn&&(y=p.amt,A=[r.mat],C=[r.mtp?r.mtp:0],B=[r.mmn],D=[r.mdn]);if(0<y)for(u=A.length-1;0<=u;u--)if(n=SF.py.v(h,r.nmn,r.ndn,t,1),q=SF.py.v(n,B[u],D[u],t,0),!(q>h)){C[u]?(q=SF.py.r(c,
Math.min(A[u],y)))&&SF.py.k(c,c,1,-q,b&&(g.pro>x||g.pro>1-x)?"Partial year discount (restart)":"Partial year discount (signup)","",p.pmt):SF.py.j(c,c,-1*A[u]*y/100,b&&(g.pro>x||g.pro>1-x)?"Partial year discount (restart)":"Partial year discount (signup)","",p.its,p.pmt);break}if(p.pro<=x||1!=r.way&&!p.pmt.amt)q=new Date(p.nxt.getTime()),"y"==r.itv?p.nxt.setFullYear(p.nxt.getFullYear()+r.mux):p.nxt.setMonth(p.nxt.getMonth()+r.mux),p.dif+=r.mux*("y"==r.itv?12:1),p.pro+=1,SF.py.i(c,r,d,SF.lib.fd(q)+
" - "+SF.lib.fd(p.nxt),1,p.pmt);!1!==b&&b.did||!r.trl||1==r.way?p.pmt.mbl.cxt=h:(p.pmt.mbl.cxt=new Date(h.getFullYear(),h.getMonth(),h.getDate()+r.trl,h.getHours(),0,0,0),p.trl=r.trl,p.dif=0,p.pro=0,p.nxt=p.pmt.mbl.cxt,p.pmt={amt:0,tax:0,sum:0,itm:[],mbl:{did:c.did,bid:r.bid,itm:[]}},SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt)+" (trial)",0,p.pmt))}else!1!==b&&b.did||!r.trl?(b&&(g.pro>x||g.pro>1-x)&&b.dum&&Math.round(g.pro*g.amt)>b.dum&&SF.py.k(c,b,1,b.dum,"Past due",SF.lib.fd(g.end)+" - "+SF.lib.fd(h),
p.pmt),p.nxt=new Date(h.getFullYear()+("y"==r.itv?r.mux:0),h.getMonth()+("m"==r.itv?r.mux:0),h.getDate(),h.getHours(),0,0,0),p.dif=r.mux*("y"==r.itv?12:1),p.pro=1,SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),1,p.pmt),p.pmt.mbl.cxt=h):(p.nxt=new Date(h.getFullYear(),h.getMonth(),h.getDate()+r.trl,h.getHours(),0,0,0),p.trl=r.trl,p.dif=0,p.pro=0,p.pmt.mbl.cxt=p.nxt,SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt)+" (trial)",0,p.pmt));(!1===b||!b.did||g.end&&g.end<h&&g.joi&&864E5>Math.abs(g.joi.getTime()-
g.end.getTime()))&&r.app&&(p.app=SF.py.r(c,r.app),(q=SF.py.e(c,p.pmt,"Application fee"))&&q!=p.app&&SF.py.e(c,p.pmt,"Discount"),SF.py.k(c,c,1,p.app,"Application fee","",p.pmt))}else if(!m.length||b.did==c.did&&g.amt==p.amt){v?(p.nxt=new Date(v.nxt.getTime()),p.dif=SF.py.d(h,p.nxt),p.pro=SF.py.c(p.dif,r.itv,r.mux)):r.nmn&&r.ndn?(p.nxt=SF.py.v(g.end,r.nmn,r.ndn,t,0),p.dif=SF.py.d(h,p.nxt),p.pro=SF.py.c(p.dif,r.itv,r.mux)):g.pro<=x||b.dkr?(p.nxt=new Date(g.end.getFullYear(),g.end.getMonth(),g.end.getDate(),
g.end.getHours(),0,0,0),p.dif=SF.py.d(h,p.nxt),p.pro=SF.py.c(p.dif,r.itv,r.mux)):(p.nxt=new Date(h.getFullYear()+("y"==r.itv?r.mux:0),h.getMonth()+("m"==r.itv?r.mux:0),h.getDate(),h.getHours(),0,0,0),p.dif=r.mux*("y"==r.itv?12:1),p.pro=1);for(n=0;p.pro<=(1==r.way||v||g.pro>-1*x?x:Math.max(.5,x));)"y"==r.itv?p.nxt.setFullYear(p.nxt.getFullYear()+r.mux):p.nxt.setMonth(p.nxt.getMonth()+r.mux),p.dif+=r.mux*("y"==r.itv?12:1),p.pro+=1,n+=1;v?(SF.py.l(c,p.pmt,v),SF.py.i(c,r,d,SF.lib.fd(v.nxt)+" - "+SF.lib.fd(p.nxt),
n,p.pmt)):(!g.end||864E5<Math.abs(p.nxt.getTime()-g.end.getTime()))&&SF.py.i(c,r,d,SF.lib.fd(g.end?g.end:h)+" - "+SF.lib.fd(p.nxt),Math.round(100*("y"==r.itv?(g.dif+p.dif)/12:g.dif+p.dif)/r.mux)/100,p.pmt);p.pmt.mbl.cxt=g.end?g.end:h;0>=p.pmt.amt&&g.end&&g.end<h&&g.joi&&864E5>Math.abs(g.joi.getTime()-g.end.getTime())&&(q=new Date(p.nxt.getTime()),"y"==r.itv?p.nxt.setFullYear(p.nxt.getFullYear()+r.mux):p.nxt.setMonth(p.nxt.getMonth()+r.mux),p.dif+=r.mux*("y"==r.itv?12:1),p.pro+=1,SF.py.i(c,r,d,SF.lib.fd(q)+
" - "+SF.lib.fd(p.nxt),1,p.pmt))}else{if(r.nmn&&r.ndn){if(Math.abs(SF.py.c(SF.py.d(h,SF.py.v(h,r.nmn,r.ndn,t,1)),r.itv,1))<=x?p.nxt=SF.py.v(h,r.nmn,r.ndn,t,r.mux+1):p.nxt=SF.py.v(h,r.nmn,r.ndn,t,r.mux),p.dif=SF.py.d(h,p.nxt),p.pro=SF.py.c(p.dif,r.itv,r.mux),p.pro<=x&&("y"==r.itv?p.nxt.setFullYear(p.nxt.getFullYear()+r.mux):p.nxt.setMonth(p.nxt.getMonth()+r.mux),p.dif+=r.mux*("y"==r.itv?12:1),p.pro+=1),y=0,g.itv&&!v&&Math.abs(g.pro)<=x&&Math.abs(p.pro-1)<=x||g.itv&&v&&v.nxt&&Math.abs(SF.py.c(SF.py.d(v.nxt,
h),g.itv,g.mux))<=x&&Math.abs(p.pro-1)<=x?(v&&g.itv&&SF.py.l(b,p.pmt,v),q=new Date(p.nxt.getFullYear()-("y"==r.itv?r.mux:0),p.nxt.getMonth()-("m"==r.itv?r.mux:0),p.nxt.getDate(),p.nxt.getHours(),0,0,0),SF.py.i(c,r,d,SF.lib.fd(q)+" - "+SF.lib.fd(p.nxt),1,p.pmt)):c.psm?g.itv?(q=new Date(p.nxt.getFullYear()-("y"==r.itv?r.mux:0),p.nxt.getMonth()-("m"==r.itv?r.mux:0),p.nxt.getDate(),p.nxt.getHours(),0,0,0),v?(SF.py.l(b,p.pmt,v),n=v.nxt):n=g.end,SF.py.i(b,g.bil,d,SF.lib.fd(n)+" - "+SF.lib.fd(n<q?q:h),Math.max(Math.floor(SF.py.c(SF.py.d(n,
h),g.itv,g.mux)),Math.ceil(SF.py.c(SF.py.d(n,q),g.itv,g.mux))),p.pmt),SF.py.i(c,r,d,SF.lib.fd(n<q?q:h)+" - "+SF.lib.fd(p.nxt),1,p.pmt),p.pro>1-x||("undefined"!=typeof c.uat?(y=p.amt-g.amt,A=c.uat,C=c.utp,B=c.umn,D=c.udn):!c.nyn&&r.uat&&r.umn&&r.udn&&(y=p.amt-g.amt,A=[r.uat],C=[r.utp],B=[r.umn],D=[r.udn]))):(SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),1,p.pmt),p.pro>1-x||("undefined"!=typeof c.uat?(y=p.amt,A=c.uat,C=c.utp,B=c.umn,D=c.udn):c.psm&&!c.nyn&&r.uat&&r.umn&&r.udn&&(y=p.amt,A=[r.uat],
C=[r.utp?r.utp:0],B=[r.umn],D=[r.udn]))):(v&&g.itv?(SF.py.l(b,p.pmt,v),SF.py.i(b,g.bil,d,SF.lib.fd(v.nxt)+" - "+SF.lib.fd(h),SF.py.c(SF.py.d(v.nxt,h),g.itv,g.mux),p.pmt)):g.end&&g.itv&&SF.py.i(b,g.bil,d,SF.lib.fd(g.end)+" - "+SF.lib.fd(h),g.pro,p.pmt),SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),p.pro,p.pmt)),1<y||c.unc&&-1>y)for(u=A.length-1;0<=u;u--)if(n=SF.py.v(h,r.nmn,r.ndn,t,1),q=SF.py.v(n,B[u],D[u],t,0),!(q>h)){if(C[u])0<y&&0<(q=SF.py.r(c,Math.min(A[u],y)))&&SF.py.k(c,c,1,-q,"Partial year discount (upgrade)",
"",p.pmt),0>y&&0>(q=SF.py.r(c,Math.max(-A[u],y)))&&SF.py.k(c,c,1,-q,"Partial year adjustment (downgrade)","",p.pmt);else{n={};for(z in p.its)n[z]=("undefined"==typeof n[z]?0:n[z])+p.its[z];if(g.its)for(z in g.its)n[z]=("undefined"==typeof n[z]?0:n[z])-g.its[z];SF.py.j(c,c,-1*A[u]*y/100,0<y?"Partial year discount (upgrade)":"Partial year adjustment (downgrade)","",n,p.pmt)}break}}else if(g.itv&&!v&&Math.abs(g.pro)<=x||g.itv&&v&&v.nxt&&Math.abs(SF.py.c(SF.py.d(v.nxt,h),g.itv,g.mux))<=x)n=v?v.nxt:g.end,
p.nxt=new Date(n.getFullYear()+("y"==r.itv?r.mux:0),n.getMonth()+("m"==r.itv?r.mux:0),n.getDate(),n.getHours(),0,0,0),p.dif=SF.py.d(h,p.nxt),p.pro=SF.py.c(p.dif,r.itv,r.mux),v&&g.itv&&SF.py.l(b,p.pmt,v),SF.py.i(c,r,d,SF.lib.fd(n)+" - "+SF.lib.fd(p.nxt),1,p.pmt);else if(c.psm)g.itv?(v?(SF.py.l(b,p.pmt,v),n=v.nxt):n=g.end,u=SF.py.c(SF.py.d(n,h),g.itv,g.mux),p.nxt=n<h?new Date(n.getFullYear()+("y"==g.itv?Math.ceil(u)*g.mux:0),n.getMonth()+("m"==g.itv?Math.ceil(u)*g.mux:0),n.getDate(),n.getHours(),0,
0,0):new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),0,0,0),p.dif=SF.py.d(h,p.nxt),p.pro=SF.py.c(p.dif,r.itv,r.mux),Math.max(0,Math.floor(u)*g.amt+Math.ceil(p.pro)*p.amt)<=p.pro*(Math.max(0,Math.ceil(u)*g.amt)+p.amt)?(q=new Date(n.getFullYear()+("y"==g.itv?Math.floor(u)*g.mux:0),n.getMonth()+("m"==g.itv?Math.floor(u)*g.mux:0),n.getDate(),n.getHours(),0,0,0),SF.py.i(b,g.bil,d,SF.lib.fd(n)+" - "+SF.lib.fd(n<h?q:h),Math.floor(u),p.pmt),SF.py.i(c,r,d,SF.lib.fd(n<h?q:h)+" - "+SF.lib.fd(p.nxt),
Math.ceil(p.pro),p.pmt)):(p.nxt=new Date(h.getFullYear()+("y"==r.itv?r.mux:0),h.getMonth()+("m"==r.itv?r.mux:0),h.getDate(),h.getHours(),0,0,0),p.dif=r.mux*("y"==r.itv?12:1),p.pro=1,SF.py.i(b,g.bil,d,SF.lib.fd(n)+" - "+SF.lib.fd(h),Math.max(0,Math.ceil(u)),p.pmt),SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),1,p.pmt))):(p.nxt=new Date(h.getFullYear()+("y"==r.itv?r.mux:0),h.getMonth()+("m"==r.itv?r.mux:0),h.getDate(),h.getHours(),0,0,0),p.dif=r.mux*("y"==r.itv?12:1),p.pro=1,SF.py.i(c,r,d,SF.lib.fd(h)+
" - "+SF.lib.fd(p.nxt),1,p.pmt));else if(v&&g.itv?(SF.py.l(b,p.pmt,v),SF.py.i(b,g.bil,d,SF.lib.fd(v.nxt)+" - "+SF.lib.fd(h),SF.py.c(SF.py.d(v.nxt,h),g.itv,g.mux),p.pmt)):g.end&&g.itv&&SF.py.i(b,g.bil,d,SF.lib.fd(g.end)+" - "+SF.lib.fd(h),g.pro,p.pmt),c.unc&&1<=(u=Math.round(-100*p.pmt.amt/p.amt)/100)){var z=u*r.mux*("y"==r.itv?12:1);p.nxt=new Date(h.getFullYear(),h.getMonth()+Math.floor(z),h.getDate(),h.getHours(),0,0,0);p.nxt=new Date(p.nxt.getFullYear(),p.nxt.getMonth(),p.nxt.getDate()+Math.floor(z%
1*365/12),p.nxt.getHours(),0,0,0);p.nxt=new Date(p.nxt.getFullYear(),p.nxt.getMonth(),p.nxt.getDate(),p.nxt.getHours()+Math.floor(z%1*365/12%1*24),0,0,0);p.dif=u*r.mux*("y"==r.itv?12:1);p.pro=u;SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),u,p.pmt)}else p.nxt=new Date(h.getFullYear()+("y"==r.itv?r.mux:0),h.getMonth()+("m"==r.itv?r.mux:0),h.getDate(),h.getHours(),0,0,0),p.dif=r.mux*("y"==r.itv?12:1),p.pro=1,SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt),1,p.pmt);c.unc&&p.pmt.amt&&-1>p.pmt.amt&&
1<=(z=Math.floor(Math.round(-100*p.pmt.amt/p.amt)/100))&&(q=new Date(p.nxt.getTime()),"y"==r.itv?p.nxt.setFullYear(p.nxt.getFullYear()+z*r.mux):p.nxt.setMonth(p.nxt.getMonth()+z*r.mux),p.dif+=z*r.mux*("y"==r.itv?12:1),p.pro+=z,SF.py.i(c,r,d,SF.lib.fd(q)+" - "+SF.lib.fd(p.nxt),z,p.pmt));p.pro<=x&&(q=new Date(p.nxt.getTime()),"y"==r.itv?p.nxt.setFullYear(p.nxt.getFullYear()+r.mux):p.nxt.setMonth(p.nxt.getMonth()+r.mux),p.dif+=r.mux*("y"==r.itv?12:1),p.pro+=1,SF.py.i(c,r,d,SF.lib.fd(q)+" - "+SF.lib.fd(p.nxt),
1,p.pmt));p.pmt.mbl.cxt=1>p.pmt.amt?p.nxt:h}b&&b.did&&b.dla&&"undefined"!=typeof b.dld&&g.end&&h.getTime()>g.end.getTime()+864E5*b.dld&&((q=SF.py.e(c,p.pmt,"Late payment"))&&q!=b.dla&&SF.py.e(c,p.pmt,"Discount"),SF.py.k(c,b,1,b.dla,"Late payment","",p.pmt),p.dla=b.dla);r.dcc&&"undefined"!=typeof r.dcc.amt&&SF.py.e(c,p.pmt,"Discount");if(SF.py.r(c,p.pmt.amt))if(-1>p.pmt.amt){n=SF.py.z(c,p.pmt.itm);for(z in n)if(0<SF.py.r(c,n[z])){n=null;break}if(n)for(z in n)SF.py.r(c,n[z])&&SF.py.k(c,{typ:z},1,-n[z],
"Capped","",p.pmt);else SF.py.k(c,{typ:w},1,-p.pmt.amt,"Capped","",p.pmt);p.pmt.amt=0}else 1>p.pmt.amt&&(SF.py.k(c,{typ:w},1,-p.pmt.amt,1>Math.abs(p.pmt.amt)?"Rounding":"Capped","",p.pmt),p.pmt.amt=0);r.dcc&&"undefined"!=typeof r.dcc.amt&&(p.dcc=r.dcc.typ?SF.py.r(c,r.dcc.amt):SF.py.r(c,r.dcc.amt*p.pmt.amt/100),1>p.pmt.amt||!p.dcc||(r.dcc.typ?SF.py.k(c,{typ:w},1,-1*SF.py.r(c,Math.min(p.pmt.amt,r.dcc.amt)),f&&f.lbl?"Discount code: "+f.lbl:"Discount code","",p.pmt):(n=SF.py.z(c,p.pmt.itm),SF.py.j(c,
{},-1*r.dcc.amt*p.pmt.amt/100,f&&f.lbl?"Discount code: "+f.lbl:"Discount code","",n,p.pmt))));SF.py.t(c,p.pmt,e);SF.py.r(c,p.pmt.amt)&&1>p.pmt.amt&&(SF.py.k(c,{typ:w},1,-p.pmt.amt,1>Math.abs(p.pmt.amt)?"Rounding":"Capped","",p.pmt),p.pmt.amt=0);SF.py.r(c,p.pmt.amt)&&SF.py.r(c,p.pmt.sum)||(p.pmt.amt=0,p.pmt.tax=0,p.pmt.sum=0);3==r.way&&p.pmt.sum?(p.pmt.mbl._ts=h,p.pmt.mbl.nxt=p.nxt,p.pmt.mbl.dif=p.dif):delete p.pmt.mbl}else{y=SF.py.r(c,r.amt);p.amt=y;p.its={};p.its[SF.py.y(c)]=y;p.tax=y*("undefined"==
typeof e.tax?0:e.tax);p.sum=SF.py.r(c,y*("undefined"==typeof e.amt?1:e.amt));if(c.add)for(u=d.length-1,p.amo=p.amt;0<=u;u--)0<=c.add.indexOf(d[u].did)&&(y=SF.py.a(c,r,d[u]),p.amt+=y,p.its[SF.py.y(d[u])]=("undefined"==typeof p.its[SF.py.y(d[u])]?0:p.its[SF.py.y(d[u])])+y,p.tax+=y*("undefined"==typeof e.tax?0:e.tax),p.sum+=SF.py.r(c,y*("undefined"==typeof e.amt?1:e.amt)));p.amt=SF.py.r(c,p.amt);p.tax=SF.py.r(c,p.tax);p.sum=SF.py.r(c,p.sum+(e.txi?0:p.tax));if(!1!==b&&b.did||!r.trl)if(a&&"object"==typeof a&&
a.itm&&g&&g.did&&g.did.toSorted().join()==k.did.toSorted().join()&&g.bid&&g.bid==r.bid)SF.py.l(c,p.pmt,a);else if(b&&b.did&&b.did==c.did&&!g.itv&&!g.end){if(p.amt>g.amt)for(z=0;z<d.length;z++)c.add&&0<=c.add.indexOf(d[z].did)&&(!b.add||0>b.add.indexOf(d[z].did))?SF.py.k(c,d[z],1,d[z].aon,d[z].lbl,"",p.pmt):b.add&&0<=b.add.indexOf(d[z].did)&&(!c.add||0>c.add.indexOf(d[z].did))&&SF.py.k(c,d[z],-1,d[z].aon,d[z].lbl,"",p.pmt);p.pmt.mbl.cxt=h}else SF.py.i(c,r,d,"",1,p.pmt),p.pmt.mbl.cxt=b&&b.did&&b.did==
c.did&&!g.itv&&g.end?g.end:h;else p.nxt=new Date(h.getFullYear(),h.getMonth(),h.getDate()+r.trl,h.getHours(),0,0,0),p.trl=r.trl,SF.py.i(c,r,d,SF.lib.fd(h)+" - "+SF.lib.fd(p.nxt)+" (trial)",0,p.pmt);(!1===b||!b.did||g.end&&g.end<h&&g.joi&&864E5>Math.abs(g.joi.getTime()-g.end.getTime()))&&r.app&&(p.app=SF.py.r(c,r.app),(q=SF.py.e(c,p.pmt,"Application fee"))&&q!=p.app&&SF.py.e(c,p.pmt,"Discount"),SF.py.k(c,c,1,p.app,"Application fee","",p.pmt));b&&b.did&&b.dla&&"undefined"!=typeof b.dld&&g.end&&h.getTime()>
g.end.getTime()+864E5*b.dld&&((q=SF.py.e(c,p.pmt,"Late payment"))&&q!=b.dla&&SF.py.e(c,p.pmt,"Discount"),SF.py.k(c,b,1,b.dla,"Late payment","",p.pmt),p.dla=b.dla);r.dcc&&"undefined"!=typeof r.dcc.amt&&SF.py.e(c,p.pmt,"Discount");if(SF.py.r(c,p.pmt.amt))if(-1>p.pmt.amt){n=SF.py.z(c,p.pmt.itm);for(z in n)if(0<SF.py.r(c,n[z])){n=null;break}if(n)for(z in n)SF.py.r(c,n[z])&&SF.py.k(c,{typ:z},1,-n[z],"Capped","",p.pmt);else SF.py.k(c,{typ:w},1,-p.pmt.amt,"Capped","",p.pmt);p.pmt.amt=0}else 1>p.pmt.amt&&
(SF.py.k(c,{typ:w},1,-p.pmt.amt,1>Math.abs(p.pmt.amt)?"Rounding":"Capped","",p.pmt),p.pmt.amt=0);r.dcc&&"undefined"!=typeof r.dcc.amt&&(p.dcc=r.dcc.typ?SF.py.r(c,r.dcc.amt):SF.py.r(c,r.dcc.amt*p.pmt.amt/100),1>p.pmt.amt||!p.dcc||(r.dcc.typ?SF.py.k(c,{typ:w},1,-1*SF.py.r(c,Math.min(p.pmt.amt,r.dcc.amt)),f&&f.lbl?"Discount code: "+f.lbl:"Discount code","",p.pmt):(n=SF.py.z(c,p.pmt.itm),SF.py.j(c,{},-1*r.dcc.amt*p.pmt.amt/100,f&&f.lbl?"Discount code: "+f.lbl:"Discount code","",n,p.pmt))));SF.py.t(c,
p.pmt,e);SF.py.r(c,p.pmt.amt)&&1>p.pmt.amt&&(SF.py.k(c,{typ:w},1,-p.pmt.amt,1>Math.abs(p.pmt.amt)?"Rounding":"Capped","",p.pmt),p.pmt.amt=0);SF.py.r(c,p.pmt.amt)&&SF.py.r(c,p.pmt.sum)||(p.pmt.amt=0,p.pmt.tax=0,p.pmt.sum=0);3==r.way&&p.pmt.sum?p.pmt.mbl._ts=h:delete p.pmt.mbl}k.bil.push(p)}delete g.bil;k.pre=g;return k};SF.bx={};SF.bx._={};SF.bx.r=function(a,b){SF.bx._[a]=b};
SF.bx.o=function(a,b,c){var d;return b.dat&&"object"==typeof SF.bx._[b.dat]&&"function"==typeof SF.bx._[b.dat].open?(SF.set(a,"data-box",b.dat),(d=SF.bx._[b.dat].open(a,b,c))?d:!0):!1};SF.bx.t=function(a,b,c){var d;return b.dat&&"object"==typeof SF.bx._[b.dat]&&"function"==typeof SF.bx._[b.dat].render?(SF.set(a,"data-box",b.dat),(d=SF.bx._[b.dat].render(a,b,c))?d:!0):!1};
SF.bx.q=function(a,b){var c=SF.get(a,"data-box");return c&&"object"==typeof SF.bx._[c]&&"function"==typeof SF.bx._[c].restore?SF.bx._[c].restore(a,b):!1};SF.bx.p=function(a,b,c){var d=SF.get(a,"data-box");return d&&"object"==typeof SF.bx._[d]&&"function"==typeof SF.bx._[d].refresh?SF.bx._[d].refresh(a,b,c):!1};SF.bx.c=function(a){var b=SF.get(a,"data-box");return b&&"object"==typeof SF.bx._[b]&&"function"==typeof SF.bx._[b].close?SF.bx._[b].close(a):!1};
SF.bx.s=function(a,b){return(b=SF.get(a,"data-box"))&&"object"==typeof SF.bx._[b]&&"function"==typeof SF.bx._[b].save?SF.bx._[b].save(a):{}};SF._is.spy={0:"Stripe",1:"Paypal",2:"Paypal",3:"Authorize.net",5:"Braintree",6:"Paypal"};SF._is.spy[-1]="Deactivated";SF.bx.bi={};SF.bx.bi.o=function(a,b,c){SF.d.set(a,c);a.id="SFusrpay";return SF.bx.bi.p(a,c,c)};
SF.bx.bi.q=function(a,b){var c=SF.$("SFusradm"),d=SF.d.get(a),e=SF.$("SFusrpayinv"),f;if(!c&&e)return SF.bx.hi.q(e,b);if(!(b.pst&&b.preProcessUrl&&b.preProcessUrl.match(/^v2\/account/)&&b.pst.dek))return!1;var h=SF.lib.c(b.pst,{only:"_gi _en _er sub crd dcc due".split(" ")});h.aon=[];d=c?SF._st.lbl:d.dek;for(e=0;e<b.pst.dek.length;e++)for(f=0;f<d.length;f++)d[f].did==b.pst.dek[e].did&&(d[f].cur&&"del"!=b.pst.dek[e]._do?(h.lvl=b.pst.dek[e].did,b.pst.dek[e].bid&&(h.bil=b.pst.dek[e].bid),SF.lib.ml(h,
b.pst.dek[e],{only:["pmt","nxt"]})):d[f].cur&&"undefined"==typeof h.lvl?h.lvl="":"undefined"!=typeof d[f].aon&&"del"!=b.pst.dek[e]._do&&h.aon.push(b.pst.dek[e].did));if("undefined"==typeof h.lvl)return!1;SF.lib.sn(!0);SF.lib.f(a,h);return(new Promise(function(g){g(SF.bx.bi.t(h.lvl))})).then(function(){if(h.bil)return SF.bx.bi.r(h.bil)}).then(function(){SF.lib.f(a,h);return SF.bx.bi.r()}).then(function(){if(c)return SF.lib.sv(a.querySelector("button.SFfpybtn")),SF.lib.sn({resumingPayment:!0}),SF.bx.bi.v(b.pst)})};
SF.bx.bi.p=function(a,b,c){var d=SF.$("SFusradm"),e,f=b==c,h=f&&!SF.e.get(a),g=!1,k=!1,m=!1,l,n,q,t,u=SF.lib.gq("discount"),v=Promise.resolve();f?SF.e.set(a,e={currentLevel:{},addons:[],levels:[]}):e=SF.e.get(a);SF.lib.ml(e,b,{only:["ntx","adr"]});f||"undefined"==typeof b.ntx&&"undefined"==typeof b.adr||!c._st._tx||(g=!0);if(b.dek){f||(k=!0,e.currentLevel={},e.levels=[],e.addons=[]);for(n=b.dek.length-1;0<=n;n--)if(b.dek[n].bid){e.currentLevel=SF.lib.c(b.dek[n]);break}if(d)for(SF._st.lbl.sort(SF.lib.cm),
n=0;n<SF._st.lbl.length;n++)SF._st.lbl[n].cur||"undefined"!=typeof SF._st.lbl[n].amt?e.levels.push(SF.lib.c(SF._st.lbl[n])):"undefined"!=typeof SF._st.lbl[n].aon&&e.addons.push(SF.lib.c(SF._st.lbl[n])),e.currentLevel.did&&e.currentLevel.did==SF._st.lbl[n].did&&SF.lib.ml(e.currentLevel,SF.lib.c(SF._st.lbl[n]));else{if(t=SF.get("SFctr","data-lvl")){t=t.split(",");for(n=0;n<t.length;n++){var x=SF.lib.ft(decodeURIComponent(t[n])).trim().toLowerCase();for(q=0;q<c.dek.length;q++)if(c.dek[q].did==x||c.dek[q].lbl&&
c.dek[q].lbl.trim().toLowerCase()==x){for(l=e.levels.length-1;0<=l&&e.levels[l].did!=c.dek[q].did;l--);0<=l||e.levels.push(SF.lib.c(c.dek[q]))}}if(e.currentLevel.did){for(n=e.levels.length-1;0<=n&&e.levels[n].did!=e.currentLevel.did;n--);if(0>n)for(q=0;q<c.dek.length;q++)c.dek[q].did==e.currentLevel.did&&e.levels.unshift(SF.lib.c(c.dek[q]))}}for(n=0;n<c.dek.length;n++)!t&&c.dek[n].cur?e.levels.push(SF.lib.c(c.dek[n])):"undefined"!=typeof c.dek[n].aon&&e.addons.push(SF.lib.c(c.dek[n]))}}if(c.crm)for(n=
0;n<c.crm.length;n++)24==c.crm[n].typ&&!c.crm[n].pay&&c.crm[n].sub&&(m=!0);var w=SF.$("SFusrpayinv");l=!1;if(b.crm&&b.crm.length)for(n=0;n<b.crm.length;n++)!m&&!w||d||l||24!=b.crm[n].typ||(l=!0,v=(new Promise(function(r){w?r(SF.bx.hi.p(w,b,c)):(SF.lib.cn(a),SF.lib.i(a,[w=SF.lib.n({id:"SFusrpayinv",className:"SFbox"})]),r(SF.bx.hi.o(a.firstChild,{crm:[24]},c)))})).then(function(){x=[];for(q=c.crm.length-1;0<=q;q--)24==c.crm[q].typ&&(c.crm[q].pay?SF.lib.dn(a.querySelector('[data-cid="'+c.crm[q].cid+
'"]')):x.push(c.crm[q].cid));m&&(SF.lib.f(a,{inv:x}),SF.bx.hi.h({currentTarget:a.firstChild}))})),10==b.crm[n].typ&&e.currentLevel.did&&(b.crm[n]._dp?e.currentLevel.joi=b.crm[n]._dp:delete e.currentLevel.joi,k=!0),11==b.crm[n].typ&&e.currentLevel.did&&(b.crm[n]._dp?e.currentLevel.end=b.crm[n]._dp:(delete e.currentLevel.end,e.currentLevel.bid="000"+e.currentLevel.did.slice(3,24)),k=!0);if(!f&&!g&&!k||!d&&m)return v;if(!f&&SF.lib.s("SFusrpayinf")&&!k)return SF.bx.bi.c();if(!f&&(SF.lib.s("SFusrpaylvl")||
SF.lib.s("SFusrpaymsg"))&&(!k||!f&&b._re))return SF.bx.bi.t();SF.lib.cn(a);if(!e.levels.length)return d&&SF.lib.i(a,[{nodeName:"p",innerHTML:"You have not created any membership levels yet."},{nodeName:"a",href:"#levels",innerHTML:"Click here to set up Membership Levels"}]),Promise.resolve();SF.lib.i(a,[{id:"SFusrpayinf",className:"SFbox"},{id:"SFusrpaymsg",className:"SFbox"},{id:"SFusrpaylvl",className:"SFbox",role:"radiogroup","aria-label":"Membership Level"},{id:"SFusrpayaon",className:"SFbox"},
{id:"SFusrpaybil",className:"SFbox",role:"radiogroup","aria-label":"Billing Option"},d?{id:"SFusrpaymod",className:"SFbox",childNodes:[{formRows:[{id:"SFusrpaysub",label:"Migrate billing",childNodes:[{nodeName:"input",type:"checkbox",name:"sub",onchange:function(){SF.lib.s(this.nextSibling,SF.get(this));SF.bx.bi.r().catch(SF.lib.alr)},innerHTML:"use existing payment method on file (no charge/pro-rating)"}]},{id:"SFusrpaypmt",label:"Current balance",childNodes:[{nodeName:"input",type:"price",name:"pmt",
required:!0,value:0,onchange:function(){SF.bx.bi.r().catch(SF.lib.alr)}},{nodeName:"span",innerHTML:"negative = account credit"}]},{id:"SFusrpaynxt",label:"Next renewal date",childNodes:[{nodeName:"input",type:"date",name:"nxt",required:!0}]}]}]}:null,d?null:{id:"SFusrpayopt",className:"SFbox",childNodes:[{nodeName:"input",type:"checkbox",name:"_gi",innerHTML:"Email me an invoice for payment"}]},{id:"SFusrpaypay",className:"SFbox"},d?{id:"SFusrpayopt",className:"SFbox",childNodes:[{nodeName:"input",
type:"checkbox",name:"_en",innerHTML:"Send new member welcome email"}]}:null,d?{id:"SFusrpaybtx",className:"SFfpybtx"}:null]);if(d){x=[{nodeName:"option",value:"",innerHTML:"No membership"}];for(n=0;n<e.levels.length;n++)x.push({nodeName:"option",id:"SFusrpay"+e.levels[n].did,value:e.levels[n].did,innerHTML:e.levels[n].lbl});SF.lib.i("SFusrpaylvl",[{nodeName:"select",name:"lvl","aria-label":"Membership level",onchange:function(){SF.bx.bi.t(this.value).catch(SF.lib.alr)},childNodes:x}])}else{for(n=
0;n<e.levels.length;n++)SF.lib.i("SFusrpaylvl",[{nodeName:"input",type:"radio",id:"SFusrpay"+e.levels[n].did,name:"lvl",value:e.levels[n].did,className:"SFusrlvl",onclick:function(){SF.bx.bi.t(this.id.slice(8)).catch(SF.lib.alr);return!1},childNodes:[{nodeName:"hgroup",role:"presentation",childNodes:[{nodeName:"h4",role:"presentation",innerHTML:e.levels[n].lbl},e.levels[n].dtl?{innerHTML:e.levels[n].dtl}:null]}]}]);e.currentLevel.did&&e.currentLevel.sdm&&SF.lib.s("SFusrpay"+e.currentLevel.did,!1)}for(n=
0;n<e.addons.length;n++)SF.lib.i("SFusrpayaon",[{nodeName:"input",type:"checkbox",id:"SFusrpay"+e.addons[n].did,name:"aon[]",value:e.addons[n].did,className:"SFusraon",onclick:function(){SF.lib.tc(this);SF.bx.bi.t().catch(SF.lib.alr);return!1},childNodes:[{nodeName:"hgroup",role:"presentation",childNodes:[{nodeName:"h4",role:"presentation",innerHTML:e.addons[n].lbl},!e.addons[n].dtl||d?null:{innerHTML:e.addons[n].dtl}]}]}]);e.currentLevel.did&&SF.lib.f(a,{lvl:e.currentLevel.did,aon:e.currentLevel.add?
e.currentLevel.add:[]});return(new Promise(function(r){d?c._st._ro?(SF.lib.s("SFusrpaypay",!1),r()):r(Promise.all([SF.lib.sw({pageElement:"SFusrpay",settings:c._st}),SF.lib.sy({pageElement:"SFusrpay",paymentElement:"SFusrpaypay",settings:c._st,getPaymentMethod:!0,preProcess:{act:"PATCH",url:"v2/account/"+c.uid,opt:{admin:!0}}}).then(function(){x={nam:c.nam||c.biz||c.ctc||"",ad1:c.adr&&c.adr.ad1?c.adr.ad1:"",ad2:c.adr?SF.lib.f2(c.adr):""};SF.lib.f("SFusrpaypay",{crd:x})})])):r(Promise.all([SF.lib.sw({pageElement:a.parentNode,
settings:c._st}),SF.lib.sy({pageElement:a.parentNode,paymentElement:"SFusrpaypay",settings:c._st,getPaymentMethod:!0,allowDiscountCode:SF.bx.bi.h,preProcess:{act:SF._st.usr.uid?"PATCH":"POST",url:"v2/account",opt:{org:SF.get("SFctr","data-org")}}})]))})).then(function(){f&&c.adr&&SF.lib.f(a,{crd:{nam:c.nam||"",ad1:SF.lib.f1(c.adr),ad2:SF.lib.f2(c.adr)}});!d&&h&&u&&SF.lib.f(a,{dcc:u});return!c.uid&&!SF._st.usr.uid||!e.currentLevel.did&&SF._st.hsh&&SF._st.hsh.match(/^(join|account\/join)/)?SF.bx.bi.t(e.levels[0].did):
SF.bx.bi.c()})};
SF.bx.bi.c=function(){var a=SF.$("SFusradm"),b,c,d,e=new Date,f=!1;if(b=SF.$("SFusrpayinf")){var h=SF.d.get(SF.$("SFusrpay"));var g=SF.e.get(SF.$("SFusrpay"));SF.lib.cn(b);SF.lib.s(b,!0);SF.lib.s("SFusrpaymsg",!1);SF.lib.s("SFusrpaylvl",!1);SF.lib.s("SFusrpayaon",!1);SF.lib.s("SFusrpaybil",!1);SF.lib.s("SFusrpaypay",!1);SF.lib.s("SFusrpaymod",!1);SF.lib.s("SFusrpayopt",!1);SF.lib.s("SFusrpaybtx",!1);if(!g.currentLevel.did){if(a)return SF.lib.s("SFusrpayinf",!1),SF.bx.bi.t("");SF.$("SFusrpaylvl").childNodes.length?SF.lib.i(b,
[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.levels[0].did).catch(SF.lib.alr)},innerHTML:"Select Membership"}]):SF.lib.s("SFusrpayinf",!1);return Promise.resolve()}var k=SF.py.x(g?g:{},h._st._tx?h._st._tx:null);k=SF.py.m(h.mbl?h.mbl:0,g.currentLevel,g.currentLevel,g.addons,k);var m=[];if(g.currentLevel.add)for(c=0;c<g.currentLevel.add.length;c++)for(d=g.addons.length-1;0<=d;d--)g.currentLevel.add[c]==g.addons[d].did&&m.push(g.addons[d].lbl);SF.lib.cn(b);SF.lib.i(b,[{nodeName:"hgroup",role:"presentation",
childNodes:[{nodeName:"h3",role:"presentation",innerHTML:g.currentLevel.lbl},m.length?{nodeName:"h4",role:"presentation",innerHTML:m.sort().join(", ")}:null]}]);if(g.currentLevel.bil&&g.currentLevel.bil.length){for(c=g.currentLevel.bil.length-1;0<=c;c--)if(g.currentLevel.bil[c].bid==g.currentLevel.bid){SF.lib.i(b,[{innerHTML:"Billing method: "+g.currentLevel.bil[c].ttl},g.currentLevel.smp?{innerHTML:"Payment method: "+g.currentLevel.smp+(g.currentLevel.ccn?" "+g.currentLevel.ccn+("undefined"==typeof g.currentLevel.exm||
"undefined"==typeof g.currentLevel.exy?"":" expiring "+g.currentLevel.exm+"/"+g.currentLevel.exy):"")}:null,a&&g.currentLevel.rid?{innerHTML:SF._is.spy[g.currentLevel.spy]+' profile ID: <span data-fld="rid">'+g.currentLevel.rid+"</span>"}:null]);g.currentLevel.end&&(g.currentLevel.end+86400<parseInt(e.getTime()/1E3)?(SF.lib.i(b,[{className:"SFemp",innerHTML:"Membership past due since "+SF.lib.fd(g.currentLevel.end)}]),f=!0):SF.lib.i(b,[{innerHTML:(1==g.currentLevel.bil[c].way?"Next automatic renewal: ":
"Membership expires: ")+SF.lib.fd(g.currentLevel.end)}]));!a&&g.currentLevel.sdm&&g.currentLevel.bil[c].itv||!k.bil[c].pmt.sum||1==g.currentLevel.bil[c].way||(!g.currentLevel.bil[c].itv||g.currentLevel.end&&86400>Math.abs(parseInt(k.bil[c].nxt.getTime()/1E3)-g.currentLevel.end)?SF.lib.i(b,[{innerHTML:"Payment due "+SF.lib.fa(k.bil[c].pmt.sum,g.currentLevel.cur)}]):(SF.lib.i(b,[{innerHTML:"Payment of  "+SF.lib.fa(k.bil[c].pmt.sum,g.currentLevel.cur)+" to renew to "+SF.lib.fd(k.bil[c].nxt)}]),"undefined"!=
typeof g.currentLevel.prp&&k.bil[c].pro<=g.currentLevel.prp/100&&(f=!0)));a||!g.currentLevel.dso||!k.bil[c].pmt.sum||g.currentLevel.sdm&&g.currentLevel.bil[c].itv||SF.lib.i(b,[{innerHTML:g.currentLevel.bil[c].dso}]);break}0>c&&(a&&SF.lib.i(b,[{innerHTML:"Unassigned / Manual Billing"}]),g.currentLevel.end&&(g.currentLevel.end+86400<parseInt(e.getTime()/1E3)?SF.lib.i(b,[{className:"SFemp",innerHTML:"Membership past due since "+SF.lib.fd(g.currentLevel.end)}]):SF.lib.i(b,[{innerHTML:"Membership expires on "+
SF.lib.fd(g.currentLevel.end)}])));a&&g.currentLevel.joi&&SF.lib.i(b,[{innerHTML:"Joined on "+SF.lib.fd(g.currentLevel.joi)}]);if(a)h._st._ro||SF.lib.i(b,[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.currentLevel.did).catch(SF.lib.alr)},innerHTML:"Update"},"undefined"!=typeof g.currentLevel.spy&&0<=g.currentLevel.spy&&g.currentLevel.rid?null:{nodeName:"button",onclick:SF.bx.ti.p,innerHTML:"Renew"}]}]);else if("10000"==SF.get("SFctr","data-org")&&"http:"==window.location.protocol)SF.lib.i(b,
[{className:"SFbtx",childNodes:[{nodeName:"a",className:"SFbtn",target:"_blank",href:"https://membershipworks.com/admin/",innerHTML:g.currentLevel.bil?"Upgrade or Update Billing":"Upgrade"}]}]);else if(!g.currentLevel.sdm||1!=SF.$("SFusrpaylvl").childNodes.length){if(f)return SF.bx.bi.t(g.currentLevel.did).then(function(){SF.lib.s("SFusrpaymsg",!1);SF.lib.s("SFusrpaylvl",!1);SF.lib.s("SFusrpayaon",!1);SF.lib.s("SFusrpayinf",!0);SF.lib.i(b,[{nodeName:"input",type:"hidden",name:"lvl",value:g.currentLevel.did}]);
if(g.currentLevel.add)for(c=0;c<g.currentLevel.add.length;c++)SF.lib.i(b,[{nodeName:"input",type:"hidden",name:"aon[]",value:g.currentLevel.add[c]}]);SF.lib.i(b,[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.currentLevel.did).catch(SF.lib.alr)},innerHTML:"Upgrade or Change Options"}]}])});(!g.currentLevel.sdm||1<SF.$("SFusrpaylvl").childNodes.length)&&SF.lib.i(b,[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.currentLevel.did).catch(SF.lib.alr)},
innerHTML:"Renew, Upgrade or Update Billing"}]}])}}else if(a)SF.lib.i(b,[{innerHTML:"Free"},g.currentLevel.joi?{innerHTML:"Joined: "+SF.lib.fd(g.currentLevel.joi)}:null,h._st._ro?null:{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.currentLevel.did).catch(SF.lib.alr)},innerHTML:"Update"}]}]);else if(1<SF.$("SFusrpaylvl").childNodes.length)SF.lib.i(b,[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.currentLevel.did).catch(SF.lib.alr)},
innerHTML:"Upgrade"}]}]);else for(c=g.addons.length-1;0<=c;c--)if(g.addons[c].lvl&&0<=g.addons[c].lvl.indexOf(g.currentLevel.did)){SF.lib.i(b,[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.bx.bi.t(g.currentLevel.did).catch(SF.lib.alr)},innerHTML:"Update"}]}]);break}return Promise.resolve()}};
SF.bx.bi.t=function(a,b){var c=SF.$("SFusradm"),d=!1,e,f;if(!SF.$("SFusrpaylvl"))return Promise.resolve();var h=SF.d.get(SF.$("SFusrpay"));var g=SF.e.get(SF.$("SFusrpay"));var k=c?SF.$("SFusrpay"):SF.$("SFusrpay").parentNode;c&&(SF.lib.cn("SFusrpaybtx"),SF.lib.i("SFusrpaybtx",[{nodeName:"button",className:"SFfpybtn",onclick:SF.bx.bi.u,innerHTML:"Save"},{nodeName:"button",onclick:function(){SF.hlp.dlg(47)},innerHTML:"Help"},g.currentLevel.did?{nodeName:"button",onclick:SF.bx.bi.c,innerHTML:"Cancel"}:
null]));var m=SF.py.x(g?g:{},h._st._tx?h._st._tx:null);var l=SF.lib.s("SFusrpaylvl")||SF.lib.s("SFusrpaymsg")?SF.lib.f("SFusrpay"):SF.lib.f("SFusrpaylvl");if("undefined"==typeof a){if(l.lvl)for(e=0;e<g.levels.length;e++)l.lvl==g.levels[e].did&&(d=SF.lib.c(g.levels[e],{exclude:["bid","add","end","joi"]}))}else{SF.lib.s("SFusrpayinf",!1);a=SF.lib.ft(decodeURIComponent(a)).trim().toLowerCase();if(c){if(a)for(e=0;e<g.levels.length;e++)a==g.levels[e].did&&(d=SF.lib.c(g.levels[e],{exclude:["bid","add",
"end","joi"]}));SF.lib.s("SFusrpaymsg",!1);SF.lib.s("SFusrpaylvl",!0);SF.lib.s("SFusrpaybtx",!0)}else{if(a){var n=!1;for(e=0;e<g.levels.length;e++)if(SF.lib.s("SFusrpay"+g.levels[e].did)){if(g.levels[e].did==a){d=SF.lib.c(g.levels[e],{exclude:["bid","add","end","joi"]});break}0===SF.lib.ft(g.levels[e].lbl).trim().toLowerCase().indexOf(a)&&(!1===n||g.levels[e].lbl.length<n)&&(d=SF.lib.c(g.levels[e],{exclude:["bid","add","end","joi"]}),n=d.lbl.length)}}if(d)b?(SF.lib.cn("SFusrpaymsg"),SF.lib.i("SFusrpaymsg",
[{nodeName:"h2",innerHTML:d.lbl},d.dtl?{innerHTML:d.dtl}:null,{nodeName:"input",type:"hidden",name:"lvl",value:d.did}]),SF.lib.s("SFusrpaymsg",!0),SF.lib.s("SFusrpaylvl",!1)):(SF.lib.s("SFusrpaymsg",!1),SF.lib.s("SFusrpaylvl",!0));else{for(e=0;e<g.levels.length;e++)if(SF.lib.s("SFusrpay"+g.levels[e].did)){d=SF.lib.c(g.levels[e],{exclude:["bid","add","end","joi"]});break}SF.lib.s("SFusrpaymsg",!1);SF.lib.s("SFusrpaylvl",!0)}}SF.lib.f("SFusrpay",{lvl:d?d.did:""})}if(!d)return SF.lib.s("SFusrpayaon",
!1),SF.lib.s("SFusrpaybil",!1),SF.lib.s("SFusrpaypay",!1),SF.lib.s("SFusrpaymod",!1),SF.lib.s("SFusrpayopt",!1),SF.lib.s("SFusrpaylvl")||SF.lib.s("SFusrpaymsg")?(SF.lib.s("SFusrpaybtx",g.currentLevel.did),SF.lib.sy({pageElement:k,way:null,sum:!1,allowDiscountCode:!1})):Promise.resolve();!c&&(!SF._st.usr.uid||SF._st.hsh&&0<=SF._st.hsh.indexOf("join"))&&(e=k.querySelector(".SFfpybtn"))&&(e.hasAttribute("data-lbl")?SF.set(e,"data-lbl",d.btn?SF.lib.fr(d.btn):"Sign Up!"):SF.set(e,d.btn?SF.lib.fr(d.btn):
"Sign Up!"));l.aon=[];for(e=0;e<g.addons.length;e++)d&&g.addons[e].lvl&&0<=g.addons[e].lvl.indexOf(d.did)?(SF.lib.s("SFusrpay"+g.addons[e].did,!0),SF.get("SFusrpay"+g.addons[e].did)&&l.aon.push(g.addons[e].did)):SF.lib.s("SFusrpay"+g.addons[e].did,!1);for(f=0;f<g.addons.length;f++){n=!1;for(e=0;e<g.addons.length;e++)if(SF.lib.s("SFusrpay"+g.addons[e].did)&&g.addons[e].req){if(l.aon)for(b=g.addons[e].req.length-1;0<=b&&!(0<=l.aon.indexOf(g.addons[e].req[b]));b--);else b=-1;0<=b||(SF.lib.s("SFusrpay"+
g.addons[e].did,!1),0<=(b=l.aon.indexOf(g.addons[e].did))&&l.aon.splice(b,1),n=!0)}if(!n)break}n=!1;for(e=0;e<g.addons.length;e++)if(SF.lib.s("SFusrpay"+g.addons[e].did)){n=!0;break}SF.lib.s("SFusrpayaon",(SF.lib.s("SFusrpaylvl")||SF.lib.s("SFusrpaymsg"))&&n);l.aon&&l.aon.length&&(d.add=l.aon);h=SF.py.m(h.mbl?h.mbl:0,g.currentLevel.did?g.currentLevel:!1,d,g.addons,m);SF.lib.cn("SFusrpaybil");if(d.bil&&d.bil.length){c&&SF.lib.i("SFusrpaybil",[{nodeName:"input",type:"radio",id:"SFusrbil000"+d.did.slice(d.did.length-
21),name:"bil",value:"000"+d.did.slice(d.did.length-21),className:"SFusrbil",onchange:function(){SF.bx.bi.r(this.id.slice(8)).catch(SF.lib.alr)},innerHTML:'<h4 role="presentation">Unassigned / Manual Billing</h4>',dataset:{bid:"000"+d.did.slice(d.did.length-21)}}]);for(e=0;e<d.bil.length;e++)n={cur:d.cur,bid:d.bil[e].bid,way:d.bil[e].way,sum:h.bil[e].sum,pmt:h.bil[e].pmt.sum},"undefined"!=typeof h.bil[e].nxt?n.nxt=parseInt(h.bil[e].nxt.getTime()/1E3):1==n.way&&(n.nxt=parseInt((new Date).getTime()/
1E3)),c||"undefined"==typeof d.bil[e].dcc||!h.bil[e].pmt.sum&&!h.bil[e].dcc||(n.dcc=d.bil[e].dcc),!c&&h.bil[e].pmt.sum&&d.bil[e].mgi&&(n.mgi=1),c&&g.currentLevel.did&&(g.currentLevel.did!=d.did||("undefined"==typeof g.currentLevel.add?"":g.currentLevel.add.sort().join())!=("undefined"==typeof d.add?"":d.add.sort().join())||g.currentLevel.bid!=d.bil[e].bid||h.bil[e].amt!=h.pre.amt)&&0<=g.currentLevel.spy&&g.currentLevel.rid&&(0==g.currentLevel.spy||2==g.currentLevel.spy||3==g.currentLevel.spy||h.pre&&
d.bil[e].itv&&h.pre.itv==d.bil[e].itv&&h.pre.mux==(d.bil[e].mux?d.bil[e].mux:1))&&1==d.bil[e].way&&(n.rid=1),k=h.bil[e].nxt?!d.bil[e].trl||g.currentLevel.did||h.bil[e].pmt.sum?h.bil[e].pmt.sum||1!=d.bil[e].way?1==d.bil[e].way?SF.lib.fa(h.bil[e].pmt.sum,d.cur)+" current payment due, renews automatically ("+SF.lib.fa(h.bil[e].sum,d.cur)+") next on "+SF.lib.fd(h.bil[e].nxt):SF.lib.fa(h.bil[e].pmt.sum,d.cur)+(g.currentLevel.did&&g.currentLevel.did==d.did&&h.bil[e].nxt?" to renew":" due")+" for period through "+
SF.lib.fd(h.bil[e].nxt):"Auto renewal starts "+SF.lib.fd(h.bil[e].nxt):"Trial ends "+SF.lib.fd(h.bil[e].nxt)+(1==d.bil[e].way?", auto billing ("+SF.lib.fa(h.bil[e].sum,d.cur)+") starts when trial ends":""):h.bil[e].pmt.sum&&h.bil[e].pmt.sum!=h.bil[e].sum?SF.lib.fa(h.bil[e].pmt.sum,d.cur)+" due":"",SF.lib.i("SFusrpaybil",[{nodeName:"input",type:"radio",id:"SFusrbil"+d.bil[e].bid,name:"bil",value:d.bil[e].bid,dataset:n,className:"SFusrbil",onchange:function(){SF.bx.bi.r(this.id.slice(8)).catch(SF.lib.alr)},
childNodes:[{nodeName:"hgroup",role:"presentation",childNodes:[{nodeName:"h4",role:"presentation",innerHTML:d.bil[e].ttl},{className:"SFusrbilsum",childNodes:[{nodeName:"span",innerHTML:SF.lib.fa(h.bil[e].sum,d.cur)},d.bil[e].itv?{nodeName:"span",innerHTML:"/"}:null,d.bil[e].itv&&d.bil[e].mux&&1!=d.bil[e].mux?{nodeName:"span",innerHTML:d.bil[e].mux}:null,d.bil[e].itv?{nodeName:"span",innerHTML:("y"==d.bil[e].itv?"year":"month")+(d.bil[e].mux&&1<d.bil[e].mux?"s":"")}:null,h.bil[e].app?{nodeName:"span",
className:"SFsep"}:null,h.bil[e].app?{nodeName:"span",innerHTML:(0<h.bil[e].app?"initial fee ":"initial discount ")+SF.lib.fa(h.bil[e].app*m.sum,d.cur)}:null,m.txx?{nodeName:"span",className:"SFsep"}:null,m.txx?{nodeName:"span",innerHTML:"tax rate "+(100*m.txx).toFixed(2)+"%"}:null]}]},c?null:{className:"SFusrbildtl",childNodes:[{innerHTML:k},h.bil[e].pmt.sum&&3==d.bil[e].way&&d.bil[e].dso?{className:"SFusrbildso",innerHTML:d.bil[e].dso}:null]},c?null:{className:"SFusrbilmgi"}]}]);SF.lib.s("SFusrpaybil",
SF.lib.s("SFusrpaylvl")||SF.lib.s("SFusrpaymsg")||SF.lib.s("SFusrpayinf")&&SF.lib.f("SFusrpayinf").lvl);SF.lib.s("SFusrpaypay",SF.lib.s("SFusrpaybil"));return"undefined"==typeof a&&l.bil?SF.bx.bi.r(l.bil):g.currentLevel.did&&g.currentLevel.did==d.did&&g.currentLevel.bid&&(c||"000"!=g.currentLevel.bid.slice(0,3))?SF.bx.bi.r(g.currentLevel.bid):c?SF.bx.bi.r("000"+d.did.slice(d.did.length-21)):SF.bx.bi.r(d.bil[0].bid)}SF.lib.s("SFusrpaybil",!1);SF.lib.s("SFusrpaymod",!1);SF.lib.s("SFusrpayopt",c?!0:
!1);return SF.lib.s("SFusrpaylvl")||SF.lib.s("SFusrpaymsg")?SF.lib.sy({pageElement:k,way:null,sum:!1,allowDiscountCode:!1}):Promise.resolve()};
SF.bx.bi.r=function(a){var b=SF.$("SFusradm"),c=!1;if(!SF.$("SFusrpaybil"))return Promise.resolve();var d=b?SF.$("SFusrpay"):SF.$("SFusrpay").parentNode;if("undefined"==typeof a){var e=SF.lib.f("SFusrpaybil");c=e.bil?SF.lib.ds("SFusrbil"+e.bil):{}}else c=a&&SF.$("SFusrbil"+a)?SF.lib.ds("SFusrbil"+a):SF.$("SFusrpaybil").childNodes.length?SF.lib.ds(SF.$("SFusrpaybil").firstChild):{bid:""},c.bid&&SF.lib.f("SFusrpaybil",{bil:c.bid});if("undefined"!=typeof a)if(c.bid&&"000"!=c.bid.slice(0,3))if(b)SF.lib.f("SFusrpaymod",
c),SF.lib.s("SFusrpaysub",c.rid?!0:!1),SF.lib.s("SFusrpaynxt","undefined"==typeof c.nxt?!1:!0),SF.lib.s("SFusrpaypmt",3!=c.way||"undefined"!=typeof c.nxt?!0:!1),1==c.way?(SF.$("SFusrpaypmt").firstChild.innerHTML="Balance to charge now",SF.$("SFusrpaynxt").firstChild.innerHTML="Start automatic billing on"):2==c.way?(SF.$("SFusrpaypmt").firstChild.innerHTML="Amount to charge now",SF.$("SFusrpaynxt").firstChild.innerHTML="Move renewal date to"):3==c.way&&(SF.$("SFusrpaypmt").firstChild.innerHTML="Payment due for current period",
SF.$("SFusrpaynxt").firstChild.innerHTML="Current period end date"),SF.lib.s("SFusrpaymod",SF.lib.s("SFusrpaysub")||SF.lib.s("SFusrpaypmt")||SF.lib.s("SFusrpaynxt")),SF.lib.s("SFusrpayopt",!0);else{for(e=SF.$("SFusrpaybil").firstChild;e;e=e.nextSibling)SF.lib.s(e.querySelector(".SFusrbildtl"),SF.lib.ds(e).bid==a);SF.lib.s("SFusrpayopt",c.pmt&&c.mgi?!0:!1)}else SF.lib.s("SFusrpaymod",!1),SF.lib.s("SFusrpayopt",b?!0:!1);return c.bid&&"000"!=c.bid.slice(0,3)?b?(e=SF.lib.f("SFusrpaymod"),"undefined"!=
typeof e.sub&&(SF.lib.s("SFusrpaynxt",e.sub||"undefined"==typeof c.nxt?!1:!0),SF.lib.s("SFusrpaypmt",e.sub||3==c.way&&"undefined"==typeof c.nxt?!1:!0)),SF.lib.sy({pageElement:d,way:e.sub?null:c.way,currency:c.cur,sum:e.sub?!1:1==c.way||2==c.way?e.pmt:!1})):SF.lib.sy({pageElement:d,way:c.way,currency:c.cur,sum:1==c.way||2==c.way?c.pmt:!1,allowDiscountCode:"undefined"!=typeof c.dcc&&(c.pmt||c.dcc)?SF.bx.bi.h:!1}).then(function(){var f;(f=SF.$("#SFusrpaypay .SFfpydccmsg"))&&SF.set(f,c.dcc?c.dcc.typ?
SF.lib.fa(c.dcc.amt,c.cur)+" discount applied":c.dcc.amt+"% discount applied":SF.lib.f("SFusrpaypay").dcc?"Discount code not applicable for selection":"")}):SF.lib.sy({pageElement:d,way:null,sum:!1,allowDiscountCode:!1})};
SF.bx.bi.h=function(){var a=!SF._st.usr.uid||!SF._st.admin&&SF._st.usr.org&&parseInt(SF.get("SFctr","data-org"))==SF._st.usr.org?"":SF._st.usr.uid;if(SF.$("SFusrpay")){var b=SF.lib.f("SFusrpaypay");SF._st._do="Applying discount";SF.lib.xhr("GET","v2/account"+(a?"":"/signup")+(b.dcc?"?dcc="+encodeURIComponent(b.dcc):""),{admin:!1}).then(function(c){SF.am.t(c)}).catch(SF.lib.alr)}};
SF.bx.bi.s=function(a){var b=SF.d.get(SF.$("SFusrpay")),c=SF.e.get(a);a=SF.lib.f(a);var d;if(a.bil&&b._st._tx&&b._st._tx.tax&&c&&c.adr&&!c.adr.con)return SF.lib.alr("The address you entered does not appear to be correct - please check and update the address."),!1;if(a.lvl){a.dek=[{did:a.lvl,_do:"add"}];if(a.bil)a.dek[0].bid=a.bil;else if((d=SF.lib.ds("SFusrpay"+a.lvl))&&d.bil&&d.bil.length)return SF.lib.alr("A billing option must be selected."),!1;if(a.aon)for(b=0;b<a.aon.length;b++)a.dek.push({did:a.aon[b],
_do:"add"});if(c.currentLevel.did){if(c.currentLevel.add)for(b=0;b<c.currentLevel.add.length;b++){for(d=0;d<a.dek.length;d++)if(a.dek[d].did==c.currentLevel.add[b]){a.dek[d]._do="upd";break}d>=a.dek.length&&a.dek.push({did:c.currentLevel.add[b],_do:"del"})}a.dek[0].did==c.currentLevel.did?a.dek[0]._do="upd":a.dek.unshift({did:c.currentLevel.did,_do:"del"})}}delete a.lvl;delete a.aon;delete a.bil;if(a.inv)for(a.crm=[],b=0;b<a.inv.length;b++)a.crm.push({cid:a.inv[b],_do:"pay"});delete a.inv;return a};
SF.bx.bi.u=function(){var a=SF.d.get(SF.$("SFusradm")),b=!1,c=!1,d=!1,e;if(SF.v("SFusrpay")){var f=SF.lib.f("SFusrpay");f.dek=[];if(f.lvl){for(e=SF._st.lbl.length-1;0<=e;e--)if(SF._st.lbl[e].did==f.lvl){c=SF._st.lbl[e];break}if(!c)return;if(!f.bil&&c.bil&&c.bil.length){SF.lib.alr("A billing option must be selected.");return}if(f.bil&&"000"!=f.bil.slice(0,3)){if(c.bil)for(e=c.bil.length-1;0<=e;e--)if(c.bil[e].bid==f.bil){d=c.bil[e];break}if(!d)return}f.dek.push(SF.lib.me({did:f.lvl,_do:"add",bid:f.bil},
SF.lib.c(f,{only:["pmt","nxt"]})));if(f.aon)for(e=0;e<f.aon.length;e++)f.dek.push({did:f.aon[e],_do:"add"})}delete f.lvl;delete f.aon;delete f.bil;delete f.pmt;delete f.nxt;if(a.dek)for(e=a.dek.length-1;0<=e;e--)if(a.dek[e].bid){b=a.dek[e];break}if(b){if(b.add)for(e=0;e<b.add.length;e++){for(a=f.dek.length-1;0<=a;a--)if(f.dek[a].did==b.add[e]){f.dek[a]._do="upd";break}0>a&&f.dek.push({did:b.add[e],_do:"del"})}f.dek.length&&f.dek[0].did==b.did?f.dek[0]._do="upd":f.dek.unshift({did:b.did,_do:"del"})}SF._st.processing||
SF._st.geocoding||(SF._st.processing=!0,(new Promise(function(h,g){!(b&&b.rid&&0<=b.spy)||c&&d&&"undefined"!=typeof d.way&&1==d.way?c?h(!0):SF.lib.dg("SFusrpaydlg",{childNodes:[{nodeName:"p",innerHTML:"Warning: Current membership information will be deleted!"},{nodeName:"button",onclick:function(){h(!0)},innerHTML:"Continue"},{nodeName:"button",onclick:function(){g(null)},innerHTML:"Cancel"}]}):SF.lib.dg("SFusrpaydlg",{childNodes:[{nodeName:"p",innerHTML:"Warning: Current automatic recurring billing information will be deleted!"},
{nodeName:"button",onclick:function(){h(!0)},innerHTML:"Continue"},{nodeName:"button",onclick:function(){g(null)},innerHTML:"Cancel"}]})})).then(function(){SF.lib.dg("SFusrpaydlg",!1);SF.lib.sn(!0);return SF.lib.pa(f)}).then(function(){return SF.lib.pp(f)}).then(function(h){return SF.bx.bi.v(f,h)}).catch(function(h){SF.lib.dg("SFusrpaydlg",!1);SF.lib.alr(h)}).then(function(){delete SF._st.processing}))}};
SF.bx.bi.v=function(a,b){b=void 0===b?null:b;var c=SF.d.get(SF.$("SFusradm"));return(new Promise(function(d,e){b&&b.error?d(b):!a.crd||(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&!a.crd.error?(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),SF._st._do="Updating membership",d(SF.lib.xhr("PATCH","v2/account/"+c.uid,a,{admin:!0,handleErrors:!1}))):e(a.crd.error||"Payment method required")})).then(function(d){if(!d||d.error||a._pv)return Promise.reject(d?d.error||
"Error":"No response from server");c.crm?(SF.aa.u(d),SF.bx.bi.c()):SF.aa.r();SF.lib.fc("SFusrpay")})};SF.bx.r("pay",{open:SF.bx.bi.o,restore:SF.bx.bi.q,refresh:SF.bx.bi.p,save:SF.bx.bi.s});SF.bx.ca={};SF.bx.ca.o=function(a,b,c){if(b.tpl&&b.tpl.dtl)return a.id="SFusrcrd",SF.set(a,"data-crd",b.tpl&&b.tpl.typ||0),SF.d.set(a,c),SF.e.set(a,b),SF.lib.i(a,[{id:"SFusrcrdcrd",className:"SFcrd"}]),SF.bx.ca.p(a,c,c)};
SF.bx.ca.q=function(a,b){var c,d=!1;if(!b.pst||!b.preProcessUrl||!b.preProcessUrl.match(/^v2\/account/))return!1;var e=SF.lib.f(a);for(c in e)"undefined"!=typeof b.pst[c]?(e[c]=b.pst[c],d=!0):delete e[c];d&&SF.lib.f(a,e);return d};
SF.bx.ca.p=function(a,b,c){var d=SF.e.get(a),e,f,h=b==c;var g=SF.$("SFusrcrdlgo");var k=SF.$("SFusrcrdcnm");var m=d.tpl.dtl;if(e=m.match(/\[[a-z0-9]{3}(\]|\?[^\]]*\]|![^\]]*\]|@\])/g))for(f=0;f<e.length;f++){var l=e[f].slice(1,4);"undefined"!=typeof b[l]&&(h=!0);l="[ico]"==e[f]||"[lgo]"==e[f]||"[lgx]"==e[f]?'<div data-fld="'+l+'"></div>':SF.co.g(l,c);m="?"==e[f].slice(4,5)?m.replace(e[f],l&&"0"!=l?e[f].slice(5,e[f].length-1):""):"!"==e[f].slice(4,5)?m.replace(e[f],l&&"0"!=l?"":e[f].slice(5,e[f].length-
1)):"[cnm]"==e[f]&&d.tpl.cnm?m.replace(e[f],'<textarea name="cnm" maxlength="80"></textarea>'):m.replace(e[f],null==l?"":l)}if(h){try{SF.$("SFusrcrdcrd").innerHTML=m}catch(n){}if(d=a.querySelector('[data-fld="ico"],[data-fld="lgo"],[data-fld="lgx"]'))g?d.parentNode.replaceChild(g,d):(d.id="SFusrcrdlgo",SF._is.upload()&&!c._st._ro&&SF.lib.i(d,[{id:"SFusrcrdfil",nodeName:"input",type:"file",name:"lgo","aria-label":"Upload image",onchange:SF.bx.ca.u}]),c._st._ro||SF.lib.i(a,[{id:"SFusrcrddel",className:"SFmb2",
style:{display:"none"},childNodes:[{nodeName:"a",onclick:SF.bx.ca.d,innerHTML:"Click here to delete the current image."}]}],"SFusrcrdcrd"),SF.bx.ca.f(b));if(d=a.querySelector('textarea[name="cnm"]'))k?d.parentNode.replaceChild(k,d):(SF.lib.i(a,[{id:"SFusrcrdcnt",className:"SFemp SFmt1",style:{display:"none"}}]),d.id="SFusrcrdcnm",d.setAttribute("placeholder","Short description"),d.setAttribute("aria-label","Short description"),d.onfocus=function(){SF.lib.s("SFusrcrdcnt",!0);this.oninput()},d.onblur=
function(){SF.lib.s("SFusrcrdcnt",!1)},d.oninput=function(){this.value=this.value.replace("\n"," ").slice(0,80);SF.$("SFusrcrdcnt").innerHTML='<span class="SFemp">'+(80-this.value.length)+"</span> characters left (80 characters max)"},c._st._ro&&(d.disabled=!0),k=d),"undefined"!=typeof b.cnm&&SF.set(k,b.cnm)}};SF.bx.ca.s=function(a){return SF.v(a)?SF.lib.f(a):!1};
SF.bx.ca.n=function(){var a=SF.$("SFusrcrdlgo");if(a){var b=SF.get(a,"data-fld");!a.firstChild||"IMG"!=a.firstChild.nodeName&&"DIV"!=a.firstChild.nodeName||SF.lib.dn(a.firstChild);SF.lib.i(a,[{className:"SFinf",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to upload image"}],a.firstChild);a.className="lgo"==b?"SFcrdlgo SFcrdlgw SFfbx":"SFcrd"+b+" SFfbx";SF.lib.s("SFusrcrddel",!1)}};
SF.bx.ca.f=function(a){var b=SF.$("SFusrcrdlgo");if(b){var c=SF.get(b,"data-fld");a&&a.lgo?(!b.firstChild||"IMG"!=b.firstChild.nodeName&&"DIV"!=b.firstChild.nodeName||SF.lib.dn(b.firstChild),SF.lib.i(b,[{nodeName:"img",onload:function(){var d=this.naturalHeight,e=this.naturalWidth;b.className="lgo"==c?e&&d&&2>e/d?"SFcrdlgo SFcrdlgt SFfbx":"SFcrdlgo SFcrdlgw SFfbx":"SFcrd"+c+" SFfbx";SF.lib.s("SFusrcrddel",!0)},onerror:SF.bx.ca.n,src:"ico"==c?a.lgo.i:"lgx"==c?a.lgo.l:a.lgo.s}],b.firstChild)):SF.bx.ca.n()}};
SF.bx.ca.u=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrcrd")),d=SF.lib.f("SFusrcrdlgo");if(d.lgo){if(1E7<d.lgo.size)return a.currentTarget.value=null,SF.lib.alr("File too large (10MB max)"),Promise.resolve();SF._st._do="Uploading logo";return SF.lib.xhr("POST","v2/account"+(b?"/"+c.uid:"")+"/image",d,{admin:b?!0:!1,handleErrors:!1}).then(function(e){a.currentTarget.value=null;e&&e.error?SF.lib.alr(e.error):(SF.bx.ca.f(e),(b?SF.aa.u:SF.am.t)(e),SF.lib.fn())})}};
SF.bx.ca.d=function(){var a=SF.$("SFusradm"),b=SF.d.get(SF.$("SFusrcrd"));SF._st._do="Deleting logo";SF.lib.xhr("DELETE","v2/account"+(a?"/"+b.uid:"")+"/image?lgo",{admin:a?!0:!1,handleErrors:!1}).then(function(c){c&&c.error?SF.lib.alr(c.error):(SF.bx.ca.n(),(a?SF.aa.u:SF.am.t)(c),SF.lib.fc("SFusrcrdlgo"))})};SF.bx.r("crd",{open:SF.bx.ca.o,restore:SF.bx.ca.q,refresh:SF.bx.ca.p,save:SF.bx.ca.s});SF.bx.co={};
SF.bx.co.o=function(a,b,c){b=SF.$("SFusradm");var d,e;if(!b||c.uid){SF.d.set(a,c);a.id="SFusrctc";SF.lib.i(a,[{id:"SFusrctclst",className:"SFlst",data:{editor:SF.bx.co.c.o},childNodes:[c._st&&c._st._ro?null:{nodeName:"button",id:"SFusrctcnew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Contact"}]}]}]);b&&SF.lib.i("SFusrctclst",[SF.bx.co.c.e(c)],"SFusrctcnew");if(c.alt)for(d=0;d<c.alt.length;d++)if(SF.lib.i("SFusrctclst",[SF.bx.co.c.e(c.alt[d])],
"SFusrctcnew"),b&&c.alt[d].dek)for(e=0;e<c.alt[d].dek.length;e++)SF.aa.j(c.alt[d].uid,c.alt[d].dek[e].did);return SF.bx.co.p(a,c,c)}};SF.bx.co.p=function(a,b,c){SF.$("SFusradm")&&SF.$("SFusrctclst").replaceChild(SF.bx.co.c.e(c),SF.$("SFusrctc"+c.uid));"undefined"!=typeof b.dir&&SF.lib.s("#SFusrctc .SFbizctcdir",b.dir?!1:!0)};SF.bx.co.s=function(a){return(a=a.querySelector('[role="form"]'))?(SF.lib.alr("Please save or close this form first",{target:a,placement:"v"}),!1):{}};
SF.bx.co.r=function(a,b,c){var d,e;if(!b.ftp||0>b.ftp.indexOf("pri")){var f=SF.lib.c(c,{exclude:["alt"]});if(b.ftp)for(e=b.ftp.length-1;0<=e;e--)f[b.ftp[e]]=!1;SF.lib.i(a,[SF.lib.n({id:"SFbizctc"+f.uid,className:"SFbizctc",childNodes:[SF.bx.co.d(f,!0)]})])}if(c.alt)for(d=0;d<c.alt.length;d++)if(!c.alt[d].dir){f=SF.lib.c(c.alt[d]);if(b.ftp)for(e=b.ftp.length-1;0<=e;e--)f[b.ftp[e]]=!1;SF.lib.i(a,[SF.lib.n({id:"SFbizctc"+f.uid,className:"SFbizctc",childNodes:[SF.bx.co.d(f,!1)]})])}};
SF.bx.co.d=function(a,b){b=void 0===b?!1:b;var c=SF.$("SFusradm"),d=SF.$("SFbizpne"),e;var f=[{nodeName:"i",className:"SFicophn",title:"Phone"}];if(a.phn){var h=0;for(e=a.phn.split(",");h<e.length;h++)f.push({nodeName:"a",className:"SFbizctcphn",title:"Phone",itemprop:"telephone",href:"tel:"+SF.lib.fr(e[h]).replace(/"|'/g,""),innerHTML:SF.lib.fr(e[h]).replace(/"|'/g,"")})}var g=[{nodeName:"i",className:"SFicocel",title:"Mobile"}];if(a.cel)for(h=0,e=a.cel.split(",");h<e.length;h++)g.push({nodeName:"a",
className:"SFbizctccel",title:"Mobile",itemprop:"telephone",href:"tel:"+SF.lib.fr(e[h]).replace(/"|'/g,""),innerHTML:SF.lib.fr(e[h]).replace(/"|'/g,"")});var k=[{nodeName:"i",className:"SFicofax",title:"Fax"}];if(a.fax)for(h=0,e=a.fax.split(",");h<e.length;h++)k.push({nodeName:"a",className:"SFbizctcfax",title:"Fax",itemprop:"faxNumber",href:"fax:"+SF.lib.fr(e[h]).replace(/"|'/g,""),innerHTML:SF.lib.fr(e[h]).replace(/"|'/g,"")});var m=[{nodeName:"i",className:"SFicowap",title:"WhatsApp"}];if(a.wap)for(h=
0,e=a.wap.split(",");h<e.length;h++)m.push({nodeName:"a",className:"SFbizctcwap",title:"WhatsApp",target:SF._is.iframe()?"_top":"_blank",href:"https://wa.me/"+SF.lib.fr(e[h].replace(/[^0-9]/g,"")),innerHTML:SF.lib.fr(e[h])});var l=[{nodeName:"i",className:"SFicomsg",title:"Email"}];if(!d&&a.eml)for(h=0,e=a.eml.split(",");h<e.length;h++)l.push({nodeName:"a",className:"SFbizctceml",title:"Email",itemprop:"email",href:"mailto:"+SF.lib.fr(e[h]).replace(/"|'/g,""),innerHTML:SF.lib.fr(e[h]).replace(/"|'/g,
"")});h=a.adr?SF.lib.fb(a.adr):"";return SF.lib.n({className:"SFbizinf",itemprop:"contactPoint",itemscope:"",itemtype:"https://schema.org/PostalAddress",childNodes:[a.nam?{nodeName:"h3",className:"SFbizctcnam",itemprop:"name",innerHTML:SF.lib.fr(a.nam)}:null,a.biz?{nodeName:"h4",className:"SFbizctcbiz",innerHTML:SF.lib.fr(a.biz)}:null,a.ctc?{className:"SFbizctcctc",innerHTML:SF.lib.fr(a.ctc)}:null,a.pos?{className:"SFbizctcpos",innerHTML:SF.lib.fr(a.pos)}:null,d||b||"undefined"==typeof a.dir?null:
{className:"SFbizctcdir",childNodes:[{nodeName:"i",className:"SFicoscl",title:"Publish"},{nodeName:"span",innerHTML:0===a.dir?"Public":"Private"}]},(d||c)&&h?{childNodes:[{nodeName:"i",className:"SFicogeo",title:"Address"},{nodeName:"address",className:"SFbizctcadr",innerHTML:h}]}:null,(d||c)&&1<f.length?{childNodes:f}:null,(d||c)&&1<g.length?{childNodes:g}:null,(d||c)&&1<k.length?{childNodes:k}:null,(d||c)&&1<m.length?{childNodes:m}:null,(d||c)&&a.web?{childNodes:[{nodeName:"i",className:"SFicoweb",
title:"Website"},{nodeName:"a",className:"SFbizctcweb",title:"Website",itemprop:"url",target:SF.get("SFctr","data-wgo")?"_blank":null,href:SF.lib.fw(a.web),innerHTML:SF.lib.fr(a.web)}]}:null,1<l.length?{childNodes:l}:null,d&&"undefined"==typeof a.eml||c&&a.eml&&(!SF._st._ro||-1!=SF._st._ro.msg)?{childNodes:[{nodeName:"i",className:"SFicomsg",title:"Message"},{nodeName:"a",className:"SFbizctcmsg",data:{uid:a.uid,_om:c?1:0},onclick:SF.co.m.o,innerHTML:"Send a Message"}]}:null,SF._st.usr.uid&&d&&"undefined"==
typeof a.eml||c&&a.eml&&(!SF._st._ro||-1!=SF._st._ro.msg)?{childNodes:[{nodeName:"i",className:"SFicomsg",title:"Message"},{nodeName:"a",className:"SFbizctcwal",data:{uid:a.uid},onclick:SF.bx.co.m,innerHTML:"View Message History"}]}:null,(d||c)&&!b&&a.pfl?{childNodes:[{nodeName:"i",className:"SFicopfl",title:"Public Profile"},{nodeName:"span",className:"SFbizctcpfl",innerHTML:SF.lib.fr(a.pfl,{allowed:["br"]})}]}:null,!b&&c&&a.nte?{childNodes:[{nodeName:"i",className:"SFicoatc",title:"Private Note"},
{nodeName:"span",className:"SFbizctcnte",innerHTML:SF.lib.fr(a.nte,{allowed:["br"]})}]}:null]})};
SF.bx.co.m=function(a){var b=a.currentTarget,c=SF.d.get(b),d=SF.$("SFbizwal");SF._st._do="Fetching messages";SF.lib.xhr("GET","v2/messages?uid="+c.uid+(d?"&_of="+d.childNodes.length:""),{admin:SF._st.admin?!0:!1}).then(function(e){var f,h;if(!d)if(e&&e.msg.length)SF.lib.dg("SFbizwaldlg",{childNodes:[d=SF.lib.n({id:"SFbizwal",childNodes:[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFbizwaldlg",!1)},innerHTML:"Close"}]}]})]},{width:"800px",height:"800px",dismiss:!0});
else{SF.lib.alr("No message history",{target:b,placement:"v"});return}for(f=0;f<e.msg.length;f++)d.insertBefore(h=SF.lib.n({className:"SFmsg",childNodes:[SF.lib.ui(e.msg[f].edt[0].uid),{childNodes:[{className:"SFmsghdr",childNodes:[{innerHTML:SF.lib.fr(e.msg[f].edt[0].uid==SF._st.usr.uid?"You":e.msg[f].edt[0].nam)+(e.msg[f].ref?" replied on ":" wrote on ")+SF.lib.fd(e.msg[f].mid)},{nodeName:"strong",innerHTML:SF.lib.fr(e.msg[f].ttl)}]},{className:"SFmsgdtl","aria-expanded":"false",childNodes:SF.lib.fm(e.msg[f])},
{nodeName:"a",className:"SFmsgmor",onclick:function(){var g="SFicoaru"==this.firstChild.className;this.firstChild.className=g?"SFicoard":"SFicoaru";this.childNodes[1].innerHTML=g?"show more":"show less";this.previousSibling.setAttribute("aria-expanded",g?"false":"true")},childNodes:[{nodeName:"i",className:"SFicoard"},{nodeName:"span",innerHTML:"show more"}]}]}]}),d.lastChild),h=h.querySelector(".SFmsgdtl"),150>h.scrollHeight&&(h.removeAttribute("aria-expanded"),SF.lib.dn(h.nextSibling));20<=e.msg.length&&
SF.lib.i(d,[{className:"SFmt2",childNodes:[{nodeName:"a",data:c,onclick:function(g){SF.lib.dn(this);SF.bx.co.m(g)},innerHTML:"Load More"}]}],d.lastChild)}).catch(SF.lib.alr)};SF.bx.co.c={};
SF.bx.co.c.e=function(a){var b=SF.$("SFusradm");var c=SF.$("SFusrctc");var d=SF.d.get(c),e;c=d.uid&&d.uid==a.uid;a.adr&&SF.lib.gg(a.adr,{updateCacheOnly:!0});!b||c||(e=SF.$("SFusrlbl"+a.uid))||(e=SF.lib.n({id:"SFusrlbl"+a.uid,className:"SFusrlbl SFtaglst",childNodes:[{nodeName:"button",id:"SFusrlbl"+a.uid+"new",className:"SFlnk",data:{uid:a.uid},onclick:SF.aa.a,innerHTML:'<i class="SFicoadd" role="presentation"></i><span>Add Label</span>'}]}));return SF.lib.n({nodeName:b?"div":"button",id:"SFusrctc"+
a.uid,className:"SFusrctc",onclick:b?null:SF.lib.e,tabIndex:b?"-1":null,data:d._st._ro||c?null:a,childNodes:[SF.bx.co.d(a,c),!b||c?null:e,!b||c||d._st._ro?null:{childNodes:[{nodeName:"button",onclick:SF.lib.e,innerHTML:"Edit Contact"}]}]})};
SF.bx.co.c.o=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrctc")),d,e,f,h=!1,g=!1;SF.$("SFusrpne")||SF.$("SFusradm");var k=SF.lib.n({role:"form",className:"SFfrm"});a=SF.d.get(a.currentTarget);var m=[{_id:"nam",typ:1,lbl:"Name"},{_id:"pos",typ:1,lbl:"Position/relation"},{_id:"adr",typ:7,lbl:"Address"},{_id:"eml",typ:1,lbl:"Email",rxp:"^\\s*([a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*,\\s*)*[a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*$",
err:"Invalid email address"},{_id:"phn",typ:1,lbl:"Phone",rxp:"^[0-9x\\+\\-\\.\\(\\)\\s,]*$"},{_id:"cel",typ:1,lbl:"Mobile",rxp:"^[0-9x\\+\\-\\.\\(\\)\\s,]*$"},{_id:"fax",typ:1,lbl:"Fax",rxp:"^[0-9x\\+\\-\\.\\(\\)\\s,]*$"},b?{_id:"pwd",typ:2,lbl:"Password",rxp:"^.{6,}$",err:"Too short",req:1}:null,{_id:"pfl",typ:3,lbl:b?"Public note":"Additional info"},b?{_id:"nte",typ:3,lbl:"Admin note"}:null];var l=c._st.adm||c._st.acc||c._st.anm;for(d=l.length-1;0<=d;d--)if(l[d].box)for(e=l[d].box.length-1;0<=
e;e--)if(l[d].box[e].dat&&"object"==typeof l[d].box[e].dat)for(f=l[d].box[e].dat.length-1;0<=f;f--)l[d].box[e].dat[f]._id&&"mcf"==l[d].box[e].dat[f]._id?h={_id:"mcf",typ:8,lbl:l[d].box[e].dat[f].lbl?l[d].box[e].dat[f].lbl:"Opt-in to email list"}:l[d].box[e].dat[f]._id&&"mcd"==l[d].box[e].dat[f]._id&&(h={_id:"mcd",typ:8,lbl:l[d].box[e].dat[f].lbl?l[d].box[e].dat[f].lbl:"Opt-out from email list"});h?m.push(h):m.push({_id:"mcd",typ:8,lbl:"Opt-out from email list"});if(c.dek)for(d=c.dek.length-1;0<=d;d--)if(c.dek[d].bid){c.dek[d].dir&&
(g=!0);break}(b||!g&&!c.dir)&&m.push({_id:"dir",typ:8,lbl:b?"Private - do not show in public profile":"Do not show this in my public profile",def:1});k.appendChild(SF.lib.tf(m,a));SF.lib.i(k.querySelector('[role="rowgroup"]'),[{nodeName:"formrow",className:"SFpad",childNodes:[{nodeName:"button",onclick:SF.bx.co.c.s,innerHTML:"Save"},a?{nodeName:"button",onclick:SF.bx.co.c.d,innerHTML:"Delete"}:null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"},a?{nodeName:"input",name:"_id",type:"hidden",
value:a.uid}:null]}]);return k};
SF.bx.co.c.s=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrctc"));var d=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(d)){var e=SF.lib.f(d);b&&(e.tid=c.uid);SF.lib.sn(!0);SF.lib.pa(e).then(function(){SF._st._do="Saving contact";return SF.lib.xhr("POST","v1/alt",e)}).then(function(f){var h=SF.lib.e(d,!1),g=SF.bx.co.c.e(f),k;delete f._id;if(e._id){for(k=c.alt.length-1;0<=k;k--)c.alt[k].uid==e._id&&(c.alt[k]=f);h.parentNode.replaceChild(g,h)}else c.alt||(c.alt=[]),c.alt.push(f),SF.lib.i("SFusrctclst",
[g],h);SF.$("SFusradm")&&SF.aa.u({alt:c.alt});SF.lib.fc(g)}).catch(SF.lib.alr)}};
SF.bx.co.c.d=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrctc"));var d=SF.lib.fp(a.currentTarget,'[role="form"]');(new Promise(function(e){SF.lib.dg("SFusrctcdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){e(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){e(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(e){SF.lib.dg("SFusrctcdlg",!1);if(e){var f=SF.lib.f(d);f={_id:f._id,del:1};b&&(f.tid=c.uid);SF._st._do=
"Deleting contact";return SF.lib.xhr("POST","v1/alt",f).then(function(){var h;for(h=c.alt.length-1;0<=h;h--)if(c.alt[h].uid==f._id){c.alt.splice(h,1);break}var g=SF.lib.e(d,!1);g.style.opacity=0;setTimeout(function(){var k=g.nextSibling;SF.lib.dn(g);SF.$("SFusradm")&&SF.aa.u({alt:c.alt});SF.lib.fc(k)},500)})}}).catch(SF.lib.alr)};SF.bx.r("ctc",{open:SF.bx.co.o,refresh:SF.bx.co.p,save:SF.bx.co.s,render:SF.bx.co.r});SF.bx.r("alt",{open:SF.bx.co.o,refresh:SF.bx.co.p,save:SF.bx.co.s});SF.bx.de={};
SF.bx.de.o=function(a,b,c){b=SF.$("SFusradm");var d=SF._is.upload()&&!(b&&c._st&&c._st._ro);SF.d.set(a,c);a.id="SFusrcpn";SF.lib.i(a,[{innerHTML:"Upload a main image (or click on existing image to replace)"},{className:"SFmb1",style:{position:"relative"},childNodes:[{id:"SFusrcpnfra",className:"SFfbx",childNodes:[{id:"SFusrcpncpa",style:{display:"none"}},d?{className:"SFinf",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to upload image"}:null,d?{nodeName:"input",type:"file",name:"cpa",
"aria-label":"Upload main image",onchange:SF.bx.de.u}:null]},{nodeName:"h2",className:"SFbizcpc0",childNodes:[{id:"SFusrcpncptcpy"},{nodeName:"textarea",id:"SFusrcpncpt",name:"cpn[cpt]","aria-label":"Title",cols:"40",onchange:SF.bx.de.h,oninput:SF.bx.de.h,innerHTML:"Title"}]}]},{className:"SFmb1",childNodes:[{nodeName:"span",innerHTML:"Title layout"},{nodeName:"select",id:"SFusrcpncpc",name:"cpn[cpc]","aria-label":"Title layout",onchange:SF.bx.de.i,childNodes:[{nodeName:"option",value:"0",selected:"selected",
innerHTML:"Normal"},{nodeName:"option",value:"1",innerHTML:"Overlay image with white text, black background"},{nodeName:"option",value:"2",innerHTML:"Overlay image with black text, white background"}]}]},{innerHTML:"Description"},{className:"SFmb1",childNodes:[{nodeName:"textarea",id:"SFusrcpncpd",name:"cpn[cpd]","aria-label":"Description",style:{width:"100%",height:"15em"}}]},{innerHTML:"Optional: Add a barcode, QR code or other image"},{id:"SFusrcpncpb",className:"SFmb1 SFmt1",style:{display:"none"}},
d?{id:"SFusrcpnfrb",className:"SFfbx",childNodes:[{className:"SFinf",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to upload image"},{nodeName:"input",type:"file",name:"cpb","aria-label":"Upload optional image",onchange:SF.bx.de.u}]}:null,b&&c._st&&c._st._ro?null:{className:"SFbtx",childNodes:[{nodeName:"button",id:"SFusrcpnpst",onclick:SF.bx.de.s,innerHTML:c.cpn?"Save":"Create"},{nodeName:"button",id:"SFusrcpndel",onclick:SF.bx.de.d,innerHTML:"Delete"}]}]);c.cpn&&c.cpn.cpa&&SF.bx.de.f("a",
c);c.cpn&&c.cpn.cpb&&SF.bx.de.f("b",c);c.cpn&&"undefined"!=typeof c.cpn.cpt?(SF.lib.f(a,c),SF.lib.s("SFusrcpndel",!0),SF.bx.de.i(),SF.bx.de.h()):SF.lib.s("SFusrcpndel",!1)};SF.bx.de.i=function(){SF.$("SFusrcpncpt").parentNode.className="SFbizcpc"+SF.get("SFusrcpncpc")};SF.bx.de.h=function(){var a=SF.$("SFusrcpncpt"),b=SF.get(a);(a=a.value.match(/(\s|\n)+$/g))&&(b+=a[0].replace(/\n/g,"<br>&nbsp;").replace(/\s*$/,"&nbsp;"));SF.set("SFusrcpncptcpy",b)};
SF.bx.de.f=function(a,b){SF.lib.cn("SFusrcpncp"+a);"a"==a&&SF.lib.s(SF.$("SFusrcpncpa").nextSibling,!1);SF.lib.i("SFusrcpncp"+a,[{nodeName:"img",style:{border:"none",maxWidth:"100%"},alt:"a"==a?"Main image":"Optional image",src:"a"==a?b.cpn.cpa:b.cpn.cpb,onerror:function(){this&&this.parentNode&&(SF.lib.s("SFusrcpncp"+a,!1),"SFusrcpncpa"==this.parentNode.id&&(SF.lib.s(SF.$("SFusrcpncpa").nextSibling,!0),SF.lib.s(SF.$("SFusrcpncpc").parentNode,!1)),SF.lib.dn(this))},onload:function(){this&&this.parentNode&&
(SF.lib.s("SFusrcpncp"+a,!0),"SFusrcpncpa"==this.parentNode.id&&SF.lib.s(SF.$("SFusrcpncpc").parentNode,!0))}}])};
SF.bx.de.u=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrcpn")),d;a.currentTarget.value&&(d=SF.lib.f(a.currentTarget.parentNode))&&(d.cpa||d.cpb)&&(d.cpa&&1E7<d.cpa.size||d.cpb&&1E7<d.cpb.size?(a.currentTarget.value=null,SF.lib.alr("File too large (10MB max)")):(SF._st._do="Uploading deal picture",SF.lib.xhr("POST","v2/account"+(b?"/"+c.uid:"")+"/deal",d,{admin:b?!0:!1}).then(function(e){a.currentTarget.value=null;SF.bx.de.f(d.cpa?"a":"b",e);(b?SF.aa.u:SF.am.t)(e)}).catch(SF.lib.alr)))};
SF.bx.de.s=function(){var a=SF.$("SFusradm"),b=SF.d.get(SF.$("SFusrcpn")),c=SF.lib.f("SFusrcpn");c.cpn&&(c.cpn.cpt?c.cpn.cpd?(SF._st._do="Saving deal",SF.lib.xhr("POST","v2/account"+(a?"/"+b.uid:"")+"/deal",c.cpn,{admin:a?!0:!1}).then(function(d){SF.$("SFusrcpnpst").innerHTML="Save";SF.lib.s("SFusrcpndel",!0);(a?SF.aa.u:SF.am.t)(d)}).catch(SF.lib.alr)):SF.lib.alr("Please enter a description",{target:"SFusrcpncpd",placement:"v"}):SF.lib.alr("Please enter a title",{target:"SFusrcpncpt",placement:"v"}))};
SF.bx.de.d=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrcpn"));(new Promise(function(d){SF.lib.dg("SFusrcpndlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){d(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){d(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(d){SF.lib.dg("SFusrcpndlg",!1);if(d)return SF._st._do="Deleting deal",SF.lib.xhr("DELETE","v2/account"+(b?"/"+c.uid:"")+"/deal",{admin:b?!0:!1}).then(function(e){SF.lib.cn("SFusrcpn");
(b?SF.aa.u:SF.am.t)(e);SF.bx.de.o(SF.$("SFusrcpn"),{},c);SF.lib.fc("SFusrcpn")})}).catch(SF.lib.alr)};
SF.bx.de.r=function(a,b,c){c.cpn&&SF.lib.i(a,[{className:"SFbizcpn",childNodes:[c.cpn.cpa?{className:"SFbizcp1",childNodes:[{nodeName:"img",src:c.cpn.cpa}]}:null,{nodeName:"h2",className:"SFbizcpc"+c.cpn.cpc,innerHTML:SF.lib.fr(c.cpn.cpt,{allowed:["br"]})},{className:"SFbizcpd",innerHTML:SF.lib.fr(c.cpn.cpd,{allowed:["br"]})},c.cpn.cpb?{className:"SFbizcp2",childNodes:[{nodeName:"img",src:c.cpn.cpb}]}:null]},{nodeName:"button",onclick:SF.bx.de.p,innerHTML:"Print"}])};
SF.bx.de.p=function(a){a=a.currentTarget.previousSibling;var b=!1,c,d,e;var f=SF.$("SFbizpne").querySelectorAll(".SFbizctc");if(f.length)for(SF.lib.i(a,[b=SF.lib.n()]),d=0;d<f.length;d++)SF.lib.i(b,[c=SF.lib.n({className:"SFbizctc",innerHTML:f[d].innerHTML})]),(e=c.querySelector("i.SFicomsg"))&&SF.lib.dn(e.parentNode),(e=c.querySelector("i.SFicopfl"))&&SF.lib.dn(e.parentNode);SF.lib.pr(a).then(function(){b&&SF.lib.dn(b)})};SF.bx.r("cpn",{open:SF.bx.de.o,render:SF.bx.de.r});SF.bx.ga={};
SF.bx.ga.o=function(a,b,c){b=SF.$("SFusradm");SF.d.set(a,c);a.id="SFusrpfx";SF.lib.i(a,[{id:"SFusrpfxlst",className:"SFbizpfxlst"},!SF._is.upload()||b&&c._st&&c._st._ro?null:{id:"SFusrpfxfrm",className:"SFfbx",childNodes:[{className:"SFinf",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to upload image"},{nodeName:"input",type:"file",id:"SFusrpfxfil",name:"fil","aria-label":"Upload image for profile gallery",onchange:SF.bx.ga.u}]}]);SF.bx.ga.q(a,c)};
SF.bx.ga.q=function(a,b,c){a=0;if("undefined"!=typeof b.pfz){if(b.pfz)for(;a<b.pfz.length;a++)(c=SF.$("SFusrpfx"+(a+1)))||SF.lib.i("SFusrpfxlst",[c=SF.lib.n({id:"SFusrpfx"+(a+1),className:"SFbizpfx",childNodes:[{nodeName:"img",onerror:function(){SF.lib.dn(this.parentNode)},onload:function(){this.style.opacity=1;SF.lib.dn(this.nextSibling.nextSibling)},style:{opacity:0}},{nodeName:"button",title:"View/Delete",dataset:{idx:a+1},onclick:SF.bx.ga.p,childNodes:[{nodeName:"i",className:"SFicoset"}]},{nodeName:"i",
className:"SFspn"}]})]),SF.d.set(c.firstChild,b.pfz[a]),c.firstChild.src=b.pfz[a].s;for(;c=SF.$("SFusrpfx"+(a+1));a++)SF.lib.dn(c)}};
SF.bx.ga.u=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrpfx")),d=SF.$("SFusrpfxlst").childNodes.length+1,e={};if(e["pf"+d]=SF.get("SFusrpfxfil"))1E7<e["pf"+d].size?(a.currentTarget.value=null,SF.lib.alr("File too large (10MB max)")):(SF._st._do="Uploading gallery image",SF.lib.xhr("POST","v2/account"+(b?"/"+c.uid:"")+"/image",e,{admin:b?!0:!1,handleErrors:!1}).then(function(f){a.currentTarget.value=null;!f||"undefined"==typeof f.pfz&&"undefined"==typeof f.crm||(b?SF.aa.u:SF.am.t)(f);f&&
f.error?SF.lib.alr(f.error):f.pfz&&SF.lib.fc(SF.$("SFusrpfx"+f.pfz.length))}))};
SF.bx.ga.p=function(a){var b=SF.$("SFusradm"),c=SF.d.get(SF.$("SFusrpfx")),d=a.currentTarget;var e=SF.lib.ds(d).idx;var f=d.previousSibling;(new Promise(function(h,g){SF.lib.dg("SFusrpfxdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){h(null)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){h("expand")},innerHTML:"View / expand"},{},{nodeName:"button",onclick:function(){h("delete")},innerHTML:"Delete"}]},{target:d,placement:"v"})})).then(function(h){SF.lib.dg("SFusrpfxdlg",
!1);if("expand"==h)SF.lib.vl(SF.d.get(f).l,f);else if("delete"==h)return(new Promise(function(g){SF.lib.dg("SFusrpfxdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){g(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){g(!0)},innerHTML:"Confirm delete"}]},{target:d,placement:"v"})})).then(function(g){SF.lib.dg("SFusrpfxdlg",!1);if(g)return SF._st._do="Deleting profile picture",SF.lib.xhr("DELETE","v2/account"+(b?"/"+c.uid:"")+"/image?pf"+e,{admin:b?!0:!1,handleErrors:!1}).then(function(k){!k||
"undefined"==typeof k.pfz&&"undefined"==typeof k.crm||(b?SF.aa.u:SF.am.t)(k);if(k&&k.error)return Promise.reject(k.error);SF.lib.fc(!k.pfz.length||k.pfz.length<e?"SFusrpfxfrm":d)})})}).catch(SF.lib.alr)};
SF.bx.ga.r=function(a,b,c){if(c.pfz&&c.pfz.length)for(a.id="SFbizpfx",a.className+=" SFbizpfxlst",b=0;b<c.pfz.length;b++)SF.lib.i(a,[{className:"SFbizpfx",childNodes:[{nodeName:"img",alt:"Image "+(b+1)+" for "+SF.lib.fr(c.nam||c.biz||c.ctc||"Member"),onerror:function(){SF.lib.dn(this.parentNode)},onload:function(){this.style.opacity=1;SF.lib.dn(this.parentNode.querySelector("i.SFspn"))},style:{opacity:0},src:c.pfz[b].s},{nodeName:"button",title:"Expand Image",data:c.pfz[b],onclick:function(){SF.lib.vl(SF.d.get(this).l,
this.previousSibling)},childNodes:[{nodeName:"i",className:"SFicopvw"}]},{nodeName:"i",className:"SFspn"}]}])};SF.bx.r("pfx",{open:SF.bx.ga.o,refresh:SF.bx.ga.q,render:SF.bx.ga.r});SF.bx.hi={};SF.bx.hi.o=function(a,b,c){c.crm&&c.crm.length&&(SF.d.set(a,c),SF.e.set(a,b),SF.bx.hi.p(a,c,c))};
SF.bx.hi.q=function(a,b){SF.d.get(a);var c=SF.e.get(a),d={inv:[]},e=!1;if(!(b.pst&&b.preProcessUrl&&b.preProcessUrl.match(/^v2\/account/)&&b.pst.crm&&c.crm)||0>c.crm.indexOf(24))return!1;for(c=0;c<b.pst.crm.length;c++)"pay"==b.pst.crm[c]._do&&(d.inv.push(b.pst.crm[c].cid),e=!0);return e?(SF.lib.sn(!0),SF.lib.f(a,d),SF.bx.hi.h({currentTarget:a}).then(function(){var f=SF.lib.fp(a,".SFusrpne,.SFpne").querySelector('.SFfpy[data-typ="crd"]');SF.lib.f(f,b.pst)})):e};
SF.bx.hi.p=function(a,b,c){var d=SF.e.get(a),e,f,h=a.querySelector("tbody"),g,k=!1;if(b.crm&&b.crm.length)for(e=0;e<b.crm.length;e++)if("undefined"!=typeof b.crm[e].typ){if("object"==typeof b.crm[e].typ){var m=!1;for(f=b.crm[e].typ.length-1;0<=f;f--)if(0<=d.crm.indexOf(23==b.crm[e].typ[f]?14:b.crm[e].typ[f])){m=!0;break}if(!m)continue}else if(0>d.crm.indexOf(23==b.crm[e].typ?14:b.crm[e].typ))continue;k=!0;b.crm[e].cid&&(g=a.querySelector('[data-cid="'+b.crm[e].cid+'"]'))?SF.lib.cn(g):(h||(SF.lib.dn(a.querySelector(".SFnon")),
SF.lib.i(a,[{nodeName:"table",className:"SFtbl",childNodes:[{nodeName:"thead",childNodes:[{nodeName:"tr",childNodes:[{nodeName:"th"},{nodeName:"th"},{nodeName:"th",innerHTML:"Date"},{nodeName:"th",innerHTML:"Description"},{nodeName:"th",innerHTML:"Amount"},{nodeName:"th",innerHTML:"Notes"}]}]},h=SF.lib.n({nodeName:"tbody"})]}])),SF.lib.i(h,[g=SF.lib.n({nodeName:"tr",dataset:{cid:b.crm[e].cid}})],h.firstChild));SF.lib.i(g,[{nodeName:"td",childNodes:[24!=b.crm[e].typ||b.crm[e].pay||!c._st._px||0>c._st._px.spy?
null:{nodeName:"input",type:"checkbox",name:"inv[]",value:b.crm[e].cid,"aria-label":"Pay invoice "+b.crm[e]._in,title:"Select to pay",onchange:function(l){SF.bx.hi.h(l).catch(SF.lib.alr)}}]},{nodeName:"td",childNodes:[14==b.crm[e].typ||24!=b.crm[e].typ&&b.crm[e].due||!b.crm[e].cid?null:{nodeName:"a",title:"View",data:b.crm[e],onclick:SF.bx.hi.v,childNodes:[{nodeName:"i",className:"SFicopvw"}]}]},{nodeName:"td",innerHTML:SF.lib.fd(b.crm[e]._dp)},{nodeName:"td",innerHTML:24==b.crm[e].typ?"Invoice #"+
b.crm[e]._in:12==b.crm[e].typ?"Membership"+(0<=b.crm[e].sum?" payment":" refund"):13==b.crm[e].typ?"Donation"+(0<=b.crm[e].sum?"":" refund"):19==b.crm[e].typ?SF.lib.fr(b.crm[e].ttl||"Cart")+(0<=b.crm[e].sum?" payment":" refund"):14==b.crm[e].typ?"Event "+SF.lib.fr(b.crm[e].act):23==b.crm[e].typ?"Event"+(0<=b.crm[e].sum?" payment":" refund"):0<=b.crm[e].sum?"Payment":"Refund"},{nodeName:"td",innerHTML:"undefined"==typeof b.crm[e].sum?null:SF.lib.fa(b.crm[e].sum,b.crm[e].cur)},{nodeName:"td"}]);24==
b.crm[e].typ?SF.lib.i(g.lastChild,[{className:b.crm[e].pay?null:"SFemp",innerHTML:b.crm[e].pay?"Paid "+SF.lib.fd(b.crm[e].pay._dp):"Unpaid"}]):14==b.crm[e].typ&&b.crm[e].ttl?SF.lib.i(g.lastChild,[b.crm[e].url?{nodeName:"a",href:"#!event/"+b.crm[e].url,innerHTML:SF.lib.fr(b.crm[e].ttl)}:{innerHTML:SF.lib.fr(b.crm[e].ttl)}]):b.crm[e].due&&SF.lib.i(g.lastChild,[{className:"SFemp",innerHTML:"Unpaid"},b.crm[e].ds3?{nodeName:"a",data:b.crm[e],onclick:function(){SF.lib.alr(SF.d.get(this).ds3,{target:this,
placement:"v"})},innerHTML:"Payment instructions"}:null]);SF.d.set(g,b.crm[e])}if(!h&&!a.querySelector(".SFnon"))SF.lib.i(a,[{className:"SFnon",innerHTML:"No history"}]);else if(k)return a.querySelector("thead").firstChild.firstChild.innerHTML=h.querySelector('input[name="inv[]"]')?"Pay":"",SF.bx.hi.h({currentTarget:a})};SF.bx.hi.s=function(a){a=SF.lib.f(a);var b;if(a.inv&&a.inv.length)for(a.crm=[],b=0;b<a.inv.length;b++)a.crm.push({cid:a.inv[b],_do:"pay"});delete a.inv;return a};
SF.bx.hi.v=function(a){var b=SF.$("SFusradm");var c=a instanceof Event?SF.d.get(a.currentTarget):a;SF._st._do="Getting record";SF.lib.xhr("GET","v2/timeline/"+c.cid+"/receipt",{admin:b?!0:!1,org:b?SF._st.org:SF.get("SFctr","data-org")}).then(function(d){SF.lib.dg("SFusrcrmdlg",{childNodes:[{innerHTML:d.dtl},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.lib.pr(this.parentNode.previousSibling)},innerHTML:"Print"},{nodeName:"button",data:c,onclick:SF.bx.hi.e,innerHTML:"Email"},
{nodeName:"button",onclick:function(){SF.lib.dg("SFusrcrmdlg",!1)},innerHTML:"Close"}]}]},{width:"800px",dismiss:!0})}).catch(SF.lib.alr)};
SF.bx.hi.e=function(a){var b=SF.$("SFusradm"),c=a.currentTarget,d=SF.d.get(c);(new Promise(function(e,f){SF.lib.dg("SFusrcrmeml",{role:"form",childNodes:[{formRows:[{label:"Email to",childNodes:[{nodeName:"input",type:"text",name:"eml",required:!0}]},{childNodes:[{nodeName:"button",onclick:function(){SF.v("SFusrcrmeml")&&e()},innerHTML:"Send"},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrcrmeml",!1);f(null)},innerHTML:"Cancel"}]}]}]},{target:c,placement:"v"});SF.lib.f("SFusrcrmeml",b?SF.d.get(SF.$("SFusradm")):
SF._st.usr);SF.lib.fc("SFusrcrmeml")})).then(function(){var e=SF.lib.f("SFusrcrmeml");SF._st._do="Emailing record";return SF.lib.xhr("GET","v2/timeline/"+d.cid+"/receipt?_er="+encodeURIComponent(e.eml),{admin:b?!0:!1,org:b?SF._st.org:SF.get("SFctr","data-org")}).then(function(f){SF.lib.dg("SFusrcrmeml",{childNodes:[{nodeName:"p",innerHTML:"Email sent!"},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrcrmeml",!1)},innerHTML:"Close"}]},{target:c,placement:"v"})})}).catch(SF.lib.alr)};
SF.bx.hi.h=function(a){var b,c,d=[],e=!1,f=!1,h=0,g=0;var k=SF.lib.fp(a.currentTarget,".SFbox");var m=SF.d.get(k);var l=SF.lib.fp(k,".SFusrpne,.SFpne");if(a.currentTarget!=k&&SF.get(a.currentTarget,"value")){var n=SF.get(a.currentTarget);SF.lib.fe(l.querySelectorAll('input[name="inv[]"][value="'+SF.get(a.currentTarget,"value")+'"]'),function(t){SF.set(t,n)})}k=l.querySelectorAll('input[name="inv[]"]');for(c=k.length-1;0<=c;c--)if(SF.lib.s(SF.lib.fp(k[c],".SFbox"))&&SF.get(k[c])&&(n=SF.d.get(SF.lib.fp(k[c],
"tr")),!(0<=d.indexOf(n.cid)))){if(!1===e)e=n.cur;else if(e!=n.cur){f=!0;break}d.push(n.cid);h+=n.sum;g+="undefined"==typeof n.tax?0:n.tax}if(f)return SF.get(a.currentTarget,"value")&&SF.lib.fe(l.querySelectorAll('input[name="inv[]"][value="'+SF.get(a.currentTarget,"value")+'"]'),function(t){SF.set(t,!1)}),Promise.reject("Multiple invoice currencies cannot be paid together");var q=l.querySelector('.SFfpy[data-typ="msg"]');return d.length?(new Promise(function(t){q?t():(SF.lib.i(l,[q=SF.lib.n({className:"SFbox SFfpy",
dataset:{typ:"msg"}}),b=SF.lib.n({className:"SFbox SFfpy",dataset:{typ:"crd"}})],l.lastChild),t(Promise.all([SF.lib.sw({pageElement:l,settings:m._st}),SF.lib.sy({pageElement:l,paymentElement:b,settings:m._st,getPaymentMethod:!0,preProcess:{act:"PATCH",url:"v2/account",opt:{org:SF.get("SFctr","data-org")}}})]).then(function(){SF.lib.f(b,{crd:SF.lib.me(m.adr?m.adr:{},m.nam?{nam:m.nam}:{})})})))})).then(function(){SF.lib.cn(q);SF.lib.i(q,[{nodeName:"h4",innerHTML:d.length+" invoice"+(1<d.length?"s":
"")+" to pay, total "+SF.lib.fa(h,e)}]);return SF.lib.sy({pageElement:l,currency:e,sum:h})}).then(function(){return{inv:d,sum:h,tax:g}}):(q&&(SF.lib.dn(q.nextSibling),SF.lib.dn(q)),Promise.resolve({inv:[],sum:0,tax:0}))};SF.bx.r("crm",{open:SF.bx.hi.o,restore:SF.bx.hi.q,refresh:SF.bx.hi.p,save:SF.bx.hi.s});SF.bx.ht={};
SF.bx.ht.o=function(a,b,c){b.htm&&(SF.e.set(a,b),SF.lib.i(a,[SF.lib.n({className:"SFusrhtm",style:{position:"relative",overflowX:"auto"}})]),b.prn&&SF.lib.i(a,[{nodeName:"button",className:"SFmt2",onclick:function(){SF.lib.pr(this.previousSibling)},innerHTML:"Print"}]),SF.bx.ht.p(a,c,c))};
SF.bx.ht.p=function(a,b,c){var d=!1,e,f;var h=SF.e.get(a).htm;if(e=h.match(/\[[a-z0-9]{3}(\]|\?[^\]]*\]|![^\]]*\])/g))for(f=0;f<e.length;f++){var g=e[f].slice(1,4);var k="gnm"==g||"lnm"==g?SF.co.g(g,SF.lib.me(SF.lib.c(c,{only:["nam","ctc"]}),SF.lib.c(b,{only:["nam","ctc"]}))):SF.co.g(g,b);null!=k?d=!0:k=SF.co.g(g,c);h="?"==e[f].slice(4,5)?h.replace(e[f],k&&"0"!=k?e[f].slice(5,e[f].length-1):""):"!"==e[f].slice(4,5)?h.replace(e[f],k&&"0"!=k?"":e[f].slice(5,e[f].length-1)):h.replace(e[f],null==k?"":
k)}if(d||b==c)try{a.querySelector(".SFusrhtm").innerHTML=h}catch(m){}};SF.bx.r("htm",{open:SF.bx.ht.o,refresh:SF.bx.ht.p});SF.bx.la={};SF.bx.la.o=function(a,b,c){var d;if(b.dek&&b.dek.length){SF.e.set(a,b);b.dek.sort(SF.lib.cm);for(d=0;d<b.dek.length;d++)SF.lib.i(a,[{nodeName:"input",type:"checkbox",name:"lbl["+b.dek[d].did+"]",data:{did:b.dek[d].did},onchange:SF.bx.la.h,innerHTML:b.dek[d].lbl}]);SF.bx.la.p(a,c,c)}};
SF.bx.la.q=function(a,b){var c=SF.e.get(a),d,e,f={lbl:{}},h=!1;if(!(b.pst&&b.preProcessUrl&&b.preProcessUrl.match(/^v2\/account/)&&b.pst.dek))return!1;for(d=0;d<b.pst.dek.length;d++)for(e=0;e<c.dek.length;e++)if(b.pst.dek[d].did==c.dek[e].did){f.lbl[c.dek[e].did]="add"==b.pst.dek[d]._do?1:0;h=!0;break}h&&SF.lib.f(a,f);return h};
SF.bx.la.p=function(a,b,c){var d={};if("undefined"!=typeof b.dek){for(c=b.dek.length-1;0<=c;c--)"undefined"==typeof b.dek[c].cur&&"undefined"==typeof b.dek[c].aon&&(d[b.dek[c].did]=1);SF.lib.f(a,{lbl:d},!0)}};
SF.bx.la.s=function(a){var b=SF.e.get(a),c,d=0;var e=SF.lib.f(a);if(e.lbl)for(c in e.lbl)e.lbl[c]&&d++;if("undefined"!=typeof b.max&&d>b.max)return a.scrollIntoView({behavior:"instant",block:"center"}),SF.lib.alr("You cannot select more than "+b.max,{target:a,placement:"v"}),!1;if("undefined"!=typeof b.min&&d<b.min&&("undefined"==typeof b.max||b.min<=b.max))return a.scrollIntoView({behavior:"instant",block:"center"}),SF.lib.alr("You must select at least "+b.min,{target:a,placement:"v"}),!1;e.dek=
[];for(c in e.lbl)e.dek.push({did:c,_do:e.lbl[c]?"add":"del"});delete e.lbl;return e};
SF.bx.la.h=function(a){var b=a.currentTarget,c=SF.e.get(b.parentNode);a=SF.lib.f(b.parentNode);var d=SF.d.get(b).did,e,f=0;if(a.lbl)for(e in a.lbl)a.lbl[e]&&f++;if(a.lbl[d]&&"undefined"!=typeof c.min&&"undefined"!=typeof c.max&&1==c.min&&1==c.max&&1<f){if(a.lbl)for(e in a.lbl)a.lbl[e]&&e!=d&&(a.lbl[e]=0)}else a.lbl[d]&&"undefined"!=typeof c.max&&f>c.max?(SF.lib.alr("You cannot select more than "+c.max,{target:b.querySelector("i"),placement:"v"}),a.lbl[d]=0):!a.lbl[d]&&"undefined"!=typeof c.min&&f<
c.min&&("undefined"==typeof c.max||c.min<=c.max)&&(SF.lib.alr("You must select at least "+c.min,{target:b.querySelector("i"),placement:"v"}),a.lbl[d]=1);b=SF.$("SFusrpne").querySelectorAll('[data-box="lbl"]');for(e=b.length-1;0<=e;e--)SF.lib.f(b[e],a);SF.am.r(a).catch(SF.lib.alr)};
SF.bx.la.r=function(a,b,c){var d,e,f=[];if(c.dek&&b.dek&&b.dek.length){for(d=0;d<c.dek.length;d++)for(e=b.dek.length-1;0<=e;e--)b.dek[e].did==c.dek[d].did&&f.push({className:"SFtag",innerHTML:c.dek[d].lbl});f.length&&SF.lib.i(a,[{className:"SFtaglst",childNodes:f}])}};SF.bx.r("lbl",{open:SF.bx.la.o,restore:SF.bx.la.q,refresh:SF.bx.la.p,save:SF.bx.la.s,render:SF.bx.la.r});SF.bx.ma={};SF.bx.ma.o=function(a,b,c){SF.bx.ma.r(a,b,c);a.childNodes.length||(SF.lib.i(a,[{}]),SF.lib.s(a,!1))};
SF.bx.ma.refresh=function(a,b,c){if("undefined"!=typeof b.adr||"undefined"!=typeof b.alt)SF.bx.ma.r(a,{},c),SF.lib.s(a,a.childNodes.length)};
SF.bx.ma.r=function(a,b,c){var d=[],e;a.id="SFbizmap";SF.lib.cn(a);SF.set(a,"mapdata",null);c.adr&&c.adr.loc&&d.push(c.adr);if(c.alt)for(e=0;e<c.alt.length;e++)if(c.alt[e].adr&&c.alt[e].adr.loc){for(b=d.length-1;0<=b&&d[b].loc.join(",")!=c.alt[e].adr.loc.join(",");b--);0>b&&d.push(c.alt[e].adr)}d.length&&(1==d.length?a.appendChild(SF.lib.lm("embed",SF.lib.me(d[0],SF.lib.c(c._st||{},{only:["_rc"]})))):(SF.lib.i(a,[{}]),SF.lib.lm("js",SF.lib.c(c._st||{},{only:["_rc"]})).then(function(){var f={map:new google.maps.Map(a,
{mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"SFm"]},zoom:15,minZoom:2,maxZoom:17,scrollwheel:!1}),SFm:{}};SF.d.set(a,f);SF.set(a,"mapdata","");var h=new google.maps.LatLngBounds;for(e=0;e<d.length;e++){var g=new google.maps.LatLng(d[e].loc[1],d[e].loc[0]);h=h.extend(g);f.SFm[e]=new google.maps.Marker({icon:{url:"//maps.google.com/mapfiles/ms/icons/blue.png",size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,33)},position:g,map:f.map})}f.map.fitBounds(h)}).catch(function(f){SF.lib.cn(a)})))};
SF.bx.r("map",{open:SF.bx.ma.o,refresh:SF.bx.ma.refresh,render:SF.bx.ma.r});SF.bx.pl={};SF.bx.pl.o=function(a,b,c){a.appendChild(SF.lib.n({id:"SFusrpfklst",className:"SFlst",data:{editor:SF.bx.pl.l.o},childNodes:[c._st&&c._st._ro?null:{nodeName:"button",id:"SFusrpfknew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Link"}]}]}));if(c.pfk&&c.pfk.length)for(a=0;a<c.pfk.length;a++)SF.lib.i("SFusrpfklst",[SF.bx.pl.l.e(c.pfk[a])],"SFusrpfknew")};
SF.bx.pl.q=function(a,b){if(!b.pst||!b.preProcessUrl||!b.preProcessUrl.match(/^v2\/account/)||"undefined"==typeof b.pst.pfk)return!1;SF.lib.cn("SFusrpfklst");if(b.pst.pfk&&b.pst.pfk.length)for(i=0;i<b.pst.pfk.length;i++)SF.lib.i("SFusrpfklst",[SF.bx.pl.l.e(b.pst.pfk[i])],"SFusrpfknew");return!0};
SF.bx.pl.s=function(a){var b,c=[];if(a=a.querySelector('[role="form"]'))return SF.lib.alr("Please save or close this form first",{target:a,placement:"v"}),!1;for(a=SF.$("SFusrpfklst").firstChild;a;a=a.nextSibling)(b=SF.d.get(a))&&b.url&&c.push(b);return{pfk:c}};
SF.bx.pl.r=function(a,b,c){if(c.pfk)for(b=0;b<c.pfk.length;b++)c.pfk[b].url&&SF.lib.i(a,[{className:"SFbizpfk",childNodes:[c.pfk[b].lbl?{innerHTML:SF.lib.fr(c.pfk[b].lbl)}:null,{nodeName:"a",target:SF.get("SFctr","data-wgo")?"_blank":"",onclick:SF.get("SFctr","data-wgo")?null:SF.lib.re,href:SF.lib.fw(c.pfk[b].url),innerHTML:SF.lib.fr(c.pfk[b].url)}]}])};SF.bx.pl.l={};
SF.bx.pl.l.e=function(a){return SF.lib.n({nodeName:"button",draggable:!0,ondragstart:SF.lib.vd,ondragover:SF.lib.vd,ondragend:SF.lib.vd,onclick:SF.lib.e,childNodes:[a.lbl?{innerHTML:SF.lib.fr(a.lbl)}:null,{innerHTML:SF.lib.fr(a.url)}],data:SF.lib.c(a)})};
SF.bx.pl.l.o=function(a){var b=!SF.$("SFusrpfknew");a=SF.d.get(a.currentTarget);b=SF.lib.n({role:"form",className:"SFfrm",childNodes:[{formRows:[{label:"Description",childNodes:[{nodeName:"input",type:"text",name:"lbl"}]},{label:"URL",childNodes:[{nodeName:"input",type:"text",name:"url",required:!0,dataset:{rxp:"^((h|H)(t|T)(t|T)(p|P)(s|S)?://)?([a-zA-Z0-9\\-_/#!@%~&\\?\\$\\[\\]\\(\\)\\*\\+,;=]+\\.){1,}[a-zA-Z0-9\\-_/#!@%~&\\?\\$\\[\\]\\(\\)\\*\\+,;=]{2,}\\s*$",err:"Invalid url"}}]},{childNodes:[b?
null:{nodeName:"button",onclick:SF.bx.pl.l.s,innerHTML:"OK"},b||!a?null:{nodeName:"button",onclick:SF.bx.pl.l.d,innerHTML:"Remove"},{nodeName:"button",onclick:SF.lib.e,innerHTML:b?"Close":"Cancel"}]}]}]});a&&SF.lib.f(b,a);return b};SF.bx.pl.l.s=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(a)){var b=SF.lib.f(a);a=SF.lib.e(a,!1);b=SF.bx.pl.l.e(b);SF.d.get(a)?a.parentNode.replaceChild(b,a):SF.lib.i("SFusrpfklst",[b],a);SF.lib.fc(b)}};
SF.bx.pl.l.d=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');var b=SF.lib.e(a,!1);b.style.opacity=0;setTimeout(function(){var c=b.nextSibling;SF.lib.dn(b);SF.lib.fc(c)},500)};SF.bx.r("pfk",{open:SF.bx.pl.o,restore:SF.bx.pl.q,save:SF.bx.pl.s,render:SF.bx.pl.r});SF.bx.pv={};
SF.bx.pv.o=function(a,b,c){a.appendChild(SF.lib.n({id:"SFusrpfvlst",className:"SFlst",data:{editor:SF.bx.pv.v.o},childNodes:[c._st&&c._st._ro?null:{nodeName:"button",id:"SFusrpfvnew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Video"}]}]}));if(c.pfv&&c.pfv.length)for(a=0;a<c.pfv.length;a++)SF.lib.i("SFusrpfvlst",[SF.bx.pv.v.e(c.pfv[a])],"SFusrpfvnew")};
SF.bx.pv.q=function(a,b){if(!b.pst||!b.preProcessUrl||!b.preProcessUrl.match(/^v2\/account/)||"undefined"==typeof b.pst.pfv)return!1;SF.lib.cn("SFusrpfvlst");if(b.pst.pfv&&b.pst.pfv.length)for(i=0;i<b.pst.pfv.length;i++)SF.lib.i("SFusrpfvlst",[SF.bx.pl.l.e(b.pst.pfv[i])],"SFusrpfvnew");return!0};
SF.bx.pv.s=function(a){var b,c=[];if(a=a.querySelector('[role="form"]'))return SF.lib.alr("Please save or close this form first",{target:a,placement:"v"}),!1;for(a=SF.$("SFusrpfvlst").firstChild;a;a=a.nextSibling)(b=SF.d.get(a))&&b.url&&c.push(b);return{pfv:c}};
SF.bx.pv.r=function(a,b,c){var d=[];if(c.pfv)for(b=0;b<c.pfv.length;b++)if(c.pfv[b].typ&&c.pfv[b].url&&c.pfv[b].tok){switch(c.pfv[b].typ){case "you":var e="https://web.archive.org/web/20250818163513/https://www.youtube.com/embed/"+c.pfv[b].tok;break;case "vim":e="https://web.archive.org/web/20250818163513/https://player.vimeo.com/video/"+c.pfv[b].tok}d.push({className:"SFbizpfv",childNodes:[{nodeName:"iframe",allow:"fullscreen",src:e}]})}d.length&&SF.lib.i(a,[{className:"SFbizpfvlst",childNodes:d}])};SF.bx.pv.v={};
SF.bx.pv.v.e=function(a){return SF.lib.n({nodeName:"button",draggable:!0,ondragstart:SF.lib.vd,ondragover:SF.lib.vd,ondragend:SF.lib.vd,onclick:SF.lib.e,innerHTML:SF.lib.fr(a.url),data:a})};
SF.bx.pv.v.o=function(a){var b=!SF.$("SFusrpfvnew");a=SF.d.get(a.currentTarget);b=SF.lib.n({role:"form",className:"SFfrm",childNodes:[{formRows:[{label:"Video Host",childNodes:[{nodeName:"select",name:"typ",childNodes:[{nodeName:"option",value:"you",innerHTML:"YouTube"},{nodeName:"option",value:"vim",innerHTML:"Vimeo"}]}]},{label:"Video URL",childNodes:[{nodeName:"input",type:"text",name:"url",required:!0}]},{childNodes:[b?null:{nodeName:"button",onclick:SF.bx.pv.v.s,innerHTML:"OK"},b||!a?null:{nodeName:"button",
onclick:SF.bx.pv.v.d,innerHTML:"Remove"},{nodeName:"button",onclick:SF.lib.e,innerHTML:b?"Close":"Cancel"}]}]}]});a&&SF.lib.f(b,a);return b};
SF.bx.pv.v.s=function(a){var b;var c=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(c)){a=SF.lib.f(c);switch(a.typ){case "you":if(/^(http:\/\/|https:\/\/|\/\/)?(youtube.com|www.youtube.com|m.youtube.com|youtu.be|www.youtube-nocookie.com)/.test(a.url))if(b=/(\?|&|\/|%3F|%26)(v|vi|e|embed)(\/|=|%3D)([0-9A-z-_]{11,})(?:[%#?&]|$)/.exec(a.url))a.tok=b[4];else if(b=/(\.com\/|\.be\/)([0-9A-z-_]{11,})(?:[%#?&]|$)/.exec(a.url))a.tok=b[2];else if(b=/(\.com|\.be)\/user\/[^#]*#p(\/a)?\/u\/[0-9]*\/([0-9A-z-_]{11,})(?:[%#?&]|$)/.exec(a.url))a.tok=
b[3];break;case "vim":if(b=/^(http:\/\/|https:\/\/|\/\/)?(www\.|player\.)?vimeo\.com\/(channels\/[^\/]*\/|groups\/[^\/]*\/|album\/[^\/]*\/|ondemand\/[^\/]*\/)?(video\/|videos\/)?([0-9A-z-]+)(?:[%#?&]|$)/.exec(a.url))a.tok=b[5]}a.tok?(c=SF.lib.e(c,!1),a=SF.bx.pv.v.e(a),SF.d.get(c)?c.parentNode.replaceChild(a,c):SF.lib.i("SFusrpfvlst",[a],c),SF.lib.fc(a)):SF.lib.alr("Invalid URL",{target:c.querySelector('input[name="url"]'),placement:"v"})}};
SF.bx.pv.v.d=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');var b=SF.lib.e(a,!1);b.style.opacity=0;setTimeout(function(){var c=b.nextSibling;SF.lib.dn(b);SF.lib.fc(c)},500)};SF.bx.r("pfv",{open:SF.bx.pv.o,restore:SF.bx.pv.q,save:SF.bx.pv.s,render:SF.bx.pv.r});SF.bx.re={};SF.bx.re.o=function(a,b,c){SF.d.set(a,c);a.id="SFusrrec";if(c.rec)for(b=c.rec.length-1;0<=b;b--)SF.lib.i(a,[SF.bx.re.r.e(c.rec[b])])};
SF.bx.re.s=function(a,b,c){var d=!1;SF.d.set(a,c);a.id="SFbizrec";if(c.rec&&c.rec.length)for(SF.lib.i(a,[{nodeName:"h3",itemprop:"aggregateRating",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/http://schema.org/AggregateRating",childNodes:[{nodeName:"span",innerHTML:SF.lib.fr(c.nam)},{nodeName:"span",innerHTML:"is recommended by:"},{nodeName:"meta",itemprop:"ratingValue",content:"5"},{nodeName:"meta",itemprop:"reviewCount",content:c.rec.length}]}]),b=c.rec.length-1;0<=b;b--)c.rec[b].uid==SF._st.usr.uid&&(d=!0),SF.lib.i(a,
[{className:"SFbizrec",itemprop:"review",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/http://schema.org/Review",childNodes:[{nodeName:"img",onerror:function(){this.src=SF._is.cdn+"u/n_ico.jpg"},src:SF._is.cdn+"u/"+c.rec[b].uid+"_ico.jpg"},{nodeName:"span",itemprop:"reviewRating",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/http://schema.org/Rating",childNodes:[{nodeName:"meta",itemprop:"worstRating",content:"1"},{nodeName:"meta",itemprop:"bestRating",content:"5"},{nodeName:"meta",itemprop:"ratingValue",content:"5"}]},{className:"SFbizreccmt",
itemprop:"reviewBody",innerHTML:c.rec[b].cmt?SF.lib.fr(c.rec[b].cmt,{allowed:["br"]}):"Recommended!"},{className:"SFbizrecinf",childNodes:[{nodeName:"span",itemprop:"author",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/https://schema.org/Person",childNodes:[{nodeName:"span",itemprop:"name",innerHTML:SF.lib.fr(c.rec[b].nam)}]},{nodeName:"span",innerHTML:"on"},{nodeName:"span",itemprop:"datePublished",innerHTML:SF.lib.fd(c.rec[b]._dp)}]}]}]);d||c.uid==SF._st.usr.uid||SF.lib.i(a,[{id:"SFbizrecbtx",childNodes:[c.rec&&c.rec.length?
null:{innerHTML:"Do you know "+SF.lib.fr(c.nam)+"?  Be the first to:"},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.bx.re.q,innerHTML:"Recommend "+SF.lib.fr(c.nam)}]}]}])};
SF.bx.re.q=function(){var a=SF.d.get(SF.$("SFbizrec")),b;(new Promise(function(c){SF.lib.dn("SFbizrecbtx");SF._st.usr.uid?c():(SF.lib.i("SFbizrec",[{id:"SFbizrecfrm",className:"SFmt2",formRows:[{label:"Your name",childNodes:[{nodeName:"input",type:"text",name:"nam",required:!0,dataset:{rxp:"^.{3,}$"}}]},{label:"Your email",childNodes:[{nodeName:"input",type:"email",name:"eml",required:!0}]},{label:"Comment (optional)",childNodes:[{nodeName:"textarea",name:"cmt"}]},{childNodes:[{nodeName:"button",
onclick:function(){SF.v("SFbizrecfrm")&&c()},innerHTML:"Recommend!"}]}]}]),SF.lib.fc("SFbizrecfrm"))})).then(function(){SF._st.usr.uid?b={}:(b=SF.lib.f("SFbizrecfrm"),b.cmt||delete b.cmt);SF._st._do="Posting your recommendation";return SF.lib.xhr("POST","v2/account/"+a.uid+"/recommendation",b)}).then(function(c){return SF._st.usr.uid?(new Promise(function(d){SF.lib.i("SFbizrec",[{id:"SFbizrecfrm",className:"SFbizrec",childNodes:[{nodeName:"img",onerror:function(){this.src=SF._is.cdn+"u/n_ico.jpg"},
src:SF._is.cdn+"u/"+(SF._st.usr.uid?SF._st.usr.uid:"n")+"_ico.jpg"},{role:"form",childNodes:[{nodeName:"p",innerHTML:"Would you like to leave a comment?"},{nodeName:"textarea",name:"cmt","aria-label":"Comment",required:!0},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.v("SFbizrecfrm")&&d(!0)},innerHTML:"Add Comment"},{nodeName:"button",onclick:function(){d(!1)},innerHTML:"No Comment"}]}]}]}])})).then(function(d){if(!d)return c;b=SF.lib.f("SFbizrecfrm");return SF.lib.xhr("POST",
"v2/account/"+a.uid+"/recommendation",b)}):c}).then(function(c){SF.lib.ml(a,c);SF.lib.cn("SFbizrec");SF.bx.re.s(SF.$("SFbizrec"),{},a);SF.lib.dn("SFbizrecbtx")}).catch(function(c){SF.lib.dn("SFbizrecfrm");SF.lib.alr(c)})};SF.bx.re.r={};
SF.bx.re.r.e=function(a){return SF.lib.n({id:"SFusrrec"+a.uid,className:"SFbizrec",data:a,childNodes:[{nodeName:"img",onerror:function(){this.src=SF._is.cdn+"u/n_ico.jpg"},src:SF._is.cdn+"u/"+a.uid+"_ico.jpg"},{className:"SFbizreccmt",innerHTML:a.cmt?SF.lib.fr(a.cmt,{allowed:["br"]}):"Recommended!"},{className:"SFbizrecinf",childNodes:[{childNodes:[{nodeName:"span",innerHTML:"Posted by"},{nodeName:"span",innerHTML:SF.lib.fr(a.nam)},{nodeName:"span",innerHTML:"on"},{nodeName:"span",innerHTML:SF.lib.fd(a._dp)}]},
{childNodes:[{nodeName:"a",onclick:SF.bx.re.r.d,innerHTML:"Delete"},{nodeName:"a",onclick:SF.bx.re.r.o,innerHTML:"Edit"}]}]}]})};
SF.bx.re.r.o=function(a){var b=SF.lib.fp(a.currentTarget,".SFbizrec");a=SF.d.get(b);var c;SF.lib.s(b.childNodes[1],!1);SF.lib.s(b.childNodes[2],!1);SF.lib.i(b,[c=SF.lib.n({role:"form",childNodes:[{childNodes:[{nodeName:"textarea",name:"cmt","aria-label":"Comment",placeholder:"Recommended!"}]},{nodeName:"button",onclick:SF.bx.re.r.s,innerHTML:"Update"},{nodeName:"button",onclick:function(){SF.lib.s(b.childNodes[1],!0);SF.lib.s(b.childNodes[2],!0);SF.lib.dn(c);SF.lib.fc(b.querySelector("button:last-child"))},
innerHTML:"Cancel"}]})]);SF.lib.f(b,a);SF.lib.fc(b)};
SF.bx.re.r.s=function(a){var b=SF.lib.fp(a.currentTarget,".SFbizrec"),c=SF.d.get(b),d=SF.d.get(SF.$("SFusrrec"));a=SF.lib.f(b);SF.lib.xhr("PATCH","v2/account/"+d.uid+"/recommendation/"+c.uid,a,{admin:!0}).then(function(e){var f=!1,h;if(e.rec)for(h=e.rec.length-1;0<=h;h--)if(e.rec[h].uid==c.uid){f=e.rec[h];break}if(f){if(d.rec)for(h=d.rec.length-1;0<=h;h--)if(d.rec[h].uid==c.uid){d.rec[h]=f;break}e=SF.bx.re.r.e(f);b.parentNode.replaceChild(e,b);SF.lib.fc(e.querySelector("button:last-child"))}}).catch(SF.lib.alr)};
SF.bx.re.r.d=function(a){var b=SF.lib.fp(a.currentTarget,".SFbizrec"),c=SF.d.get(b),d=SF.d.get(SF.$("SFusrrec"));(new Promise(function(e){SF.lib.dg("SFusrrecdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){e(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){e(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(e){SF.lib.dg("SFusrrecdlg",!1);if(e)return SF.lib.xhr("DELETE","v2/account/"+d.uid+"/recommendation/"+c.uid,
{admin:!0}).then(function(f){if(d.rec)for(f=d.rec.length-1;0<=f;f--)if(d.rec[f].uid==c.uid){d.rec.splice(f,1);break}SF.lib.dn(b);SF.lib.fc("SFusrrec")})}).catch(SF.lib.alr)};SF.bx.r("rec",{open:SF.bx.re.o,refresh:SF.bx.re.refresh,render:SF.bx.re.s});SF.bx.sl={};
SF.bx.sl.r=function(a,b,c){b=SF._is.iframe()?"_top":"_blank";"object"==typeof c.pfu&&SF.lib.i(a,[c.pfu.lki?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.lki,{host:"https://web.archive.org/web/20250818163513/https://www.linkedin.com"}),title:"LinkedIn page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicolki",title:"LinkedIn"}]}:null,c.pfu.fbk?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.fbk,{host:"https://web.archive.org/web/20250818163513/https://www.facebook.com"}),title:"Facebook page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicofbk",
title:"Facebook"}]}:null,c.pfu.twt?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.twt,{host:"https://web.archive.org/web/20250818163513/https://twitter.com"}),title:"Twitter/X page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicotwt",title:"Twitter/X"}]}:null,c.pfu.bbb?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.bbb,{host:"https://web.archive.org/web/20250818163513/https://www.bbb.org"}),title:"BBB page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicobbb",title:"BBB"}]}:null,c.pfu.ylp?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.ylp,
{host:"https://web.archive.org/web/20250818163513/https://www.yelp.com"}),title:"Yelp page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicoylp",title:"Yelp"}]}:null,c.pfu.you?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.you,{host:"https://web.archive.org/web/20250818163513/https://www.youtube.com"}),title:"YouTube page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicoyou",title:"YouTube"}]}:null,c.pfu.pin?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.pin,{host:"https://web.archive.org/web/20250818163513/https://www.pinterest.com"}),title:"Pinterest page for "+c.nam,childNodes:[{nodeName:"i",
className:"SFicopin",title:"Pinterest"}]}:null,c.pfu.igm?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.igm,{host:"https://web.archive.org/web/20250818163513/https://instagram.com"}),title:"Instagram page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicoigm",title:"Instagram"}]}:null,c.pfu.vim?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.vim,{host:"https://web.archive.org/web/20250818163513/https://vimeo.com"}),title:"Vimeo page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicovmo",title:"Vimeo"}]}:null,c.pfu.bhn?{nodeName:"a",className:"SFbizpfu",
target:b,href:SF.lib.fw(c.pfu.bhn,{host:"https://web.archive.org/web/20250818163513/https://www.behance.net"}),title:"Behance page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicobhn",title:"Behance"}]}:null,c.pfu.ttk?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.ttk,{host:"https://web.archive.org/web/20250818163513/https://www.tiktok.com"}),title:"TikTok page for "+c.nam,childNodes:[{nodeName:"i",className:"SFicottk",title:"TikTok"}]}:null,c.pfu.tum?{nodeName:"a",className:"SFbizpfu",target:b,href:SF.lib.fw(c.pfu.tum,{host:"https://web.archive.org/web/20250818163513/https://www.tumblr.com"}),title:"Tumblr page for "+
c.nam,childNodes:[{nodeName:"i",className:"SFicotum",title:"Tumblr"}]}:null])};SF.bx.r("pfu",{render:SF.bx.sl.r});SF.ac={};
SF.ac.g=function(a,b){var c;(c=SF.$(b+a.uid))?SF.lib.cn(c):c=SF.lib.n({nodeName:"a",id:b+a.uid,className:"SFcrd",href:"#!biz/"+(a.log?encodeURIComponent(a.log):"id/"+a.uid)});"SFdek"==b&&SF._is.drag&&(c.draggable="true",c.ondragstart=SF.ac.s,c.ondragover=SF.ac.o,c.ondrop=SF.ac.d);SF.di&&SF.di._&&SF.di._.crd&&SF.di._.crd.dtl?(b=SF.di._.crd.dtl.replace(/\[(ico|lgo|lgx)\]/g,a.lgo?'<img class="SFcrd$1 SFldr" alt>':""),c.innerHTML=SF.co.p(b,a,"crd")):SF.lib.i(c,[a.lgo?{nodeName:"img",className:"SFcrdlgo SFldr",
alt:""}:null,{className:"SFcrdtxt",childNodes:[{className:"SFcrdnam",innerHTML:SF.lib.fr(a.nam||a.biz||a.ctc||"Member")},a.ctc&&(a.nam||a.biz)?{className:"SFcrdctc",innerHTML:SF.lib.fr(a.ctc)}:null,a.cnm?{className:"SFcrdcnm",innerHTML:SF.lib.fr(a.cnm)}:null]},"SFdek"==b?null:{className:"SFcrdrec",childNodes:[a.cpn?{nodeName:"i",className:"SFicotag_r",title:"Deal"}:null,a.ir5?{nodeName:"i",className:"SFicorec_r",title:"Recommended"}:null]},"SFdek"!=b?null:{className:"SFcrdact",childNodes:[{nodeName:"a",
data:{uid:a.uid},onclick:SF.aa.p,innerHTML:SF.fd._st&&SF.fd._st.did?"Move":"Add To"},{nodeName:"a",data:{uid:a.uid},onclick:SF.aa.q,innerHTML:"Delete"}]}]);if(a.lgo){var d=c.querySelectorAll("img.SFcrdico.SFldr,img.SFcrdlgo.SFldr,img.SFcrdlgx.SFldr");for(b=d.length-1;0<=b;b--)0<=d[b].className.indexOf("SFcrdico")?(d[b].onerror=SF.ac.t,d[b].src=a.lgo.i?a.lgo.i:SF._is.cdn+"u/"+a.uid+"_ico.jpg"):0<=d[b].className.indexOf("SFcrdlgx")?(d[b].onerror=function(){this.src=this.src.replace("_lgx.","_lgl.");
this.onerror=SF.ac.t},d[b].src=a.lgo.l?a.lgo.l:SF._is.cdn+"u/"+a.uid+"_lgx.jpg"):(d[b].onerror=SF.ac.t,d[b].onload=SF.ac.u,d[b].src=a.lgo.s?a.lgo.s:SF._is.cdn+"u/"+a.uid+"_lgl.jpg")}return c};SF.ac.u=function(a){var b=a.currentTarget.naturalHeight,c=a.currentTarget.naturalWidth;a.currentTarget.className=a.currentTarget.className.replace("SFldr",c&&b&&2>c/b?"SFcrdlgt":"SFcrdlgw")};SF.ac.t=function(a){SF.lib.dn(a.currentTarget)};
SF.ac.o=function(a){a.currentTarget.id&&a.dataTransfer.getData("Text")!=a.currentTarget.id&&(a.dataTransfer.dropEffect="move");a.preventDefault&&a.preventDefault()};SF.ac.s=function(a){a.dataTransfer.effectAllowed="move";a.dataTransfer.setData("Text",a.currentTarget.id)};SF.ac.d=function(a){a.currentTarget.id&&a.dataTransfer.getData("Text")!=a.currentTarget.id&&SF.aa.m(a.dataTransfer.getData("Text"),a.currentTarget.id);a.stopPropagation();a.preventDefault()};SF.am={};
SF.am.o=function(a,b){b=void 0===b?null:b;var c=a.split("/"),d=SF.$("SFusrpne"),e=!1,f,h=SF._st.hsh||SF.get("SFctr","data-ini"),g=SF.lib.gq("discount");1<c.length&&"account"==c[0]&&("join"==c[1]||"renew"==c[1]||"upgrade"==c[1]||"downgrade"==c[1])&&c.shift();(new Promise(function(k,m){if(d&&(f=SF.d.get(d))&&("join"!=c[0]&&f._st.acc||"join"==c[0]&&f._st.anm))k();else if(d&&(SF.lib.dn(d),f=d=null),"join"==c[0]||SF._st.usr.uid){var l=!SF._st.usr.uid||SF._st.usr.org&&parseInt(SF.get("SFctr","data-org"))==
SF._st.usr.org&&1E4!=SF._st.usr.org?"":SF._st.usr.uid;b&&b.data?(f=b.data,k()):(SF._st._do="Retrieving account",SF.lib.xhr("GET","v2/account"+(l?"":"/signup")+(g?"?dcc="+encodeURIComponent(g):""),{org:SF.get("SFctr","data-org")}).then(function(n){n._re&&!SF.u(n._re)?m(null):(f=n,"join"==c[0]&&l&&(f.pid||f.dek&&f.dek.reduce(function(q,t){return q+(t.bid?1:0)},0))?SF.lib.dg("SFusrdlg",{childNodes:[{nodeName:"h4",innerHTML:"You are currently signed in as "+SF.lib.fr(SF._st.usr.nam)},{childNodes:[{nodeName:"button",
onclick:function(){SF.lib.dg("SFusrdlg",!1);SF.lib.sh("myaccount",!0);c=["myaccount"];k()},innerHTML:"Go to my account"}]},{childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1);m(null);SF.ss.d().then(function(){SF.close();delete SF._st.hsh;SF.open(a)}).catch(SF.lib.alr)},innerHTML:"Sign up for a new account"}]},{childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1);m(null)},innerHTML:"Cancel"}]}]}):k())}).catch(m))}else SF.ss.o(),m(null)})).then(function(){if(!d)return SF.lib.i("SFpne",
[d=SF.lib.n({id:"SFusrpne",className:"SFpne",style:{display:"none"}})]),SF.am.i(f,c[0])}).then(function(){SF.lib.se(d);SF.lib.se("SFhdracc");"renew"!=c[0]||!h||b&&b.data||(f.zgo=h);if(1<c.length&&("join"==c[0]||"upgrade"==c[0]||"downgrade"==c[0]))return SF.bx.bi.t(c[1],!0);if("join"==c[0]||"renew"==c[0]||"upgrade"==c[0]||"downgrade"==c[0])return SF.bx.bi.t("");if(SF.$("SFusrmnu")&&1<c.length)for(e=SF.$("SFusrmnu").firstChild;e&&(!e.href||decodeURIComponent(e.href.split("#")[1])!=decodeURIComponent(a));e=
e.nextSibling);}).then(function(){var k,m=[],l;SF.lib.se(e?e:"SFusrpne0");if(b&&b.pst){var n=SF.lib.sd("#SFusrpne>.SFusrpne");for(k=n.firstChild;k;k=k.nextSibling)SF.lib.ma(k,".SFfpybtx")||(SF.get(k,"data-box")?(l=SF.bx.q(k,b))&&l instanceof Promise&&m.push(l):SF.lib.f(k,b.pst));return m.reduce(function(q,t){return q.then(function(){return t})},Promise.resolve()).then(function(){return SF.am.r(SF.lib.c(b.pst,{exclude:["dek"]}))}).then(function(){SF.lib.sv(n.querySelector("button.SFfpybtn"));SF.lib.sn({resumingPayment:!0});
return SF.am.p(b.pst)})}f.warn?(SF.lib.alr(f.warn),delete f.warn):SF._st.ini||(e?SF.lib.fc(SF.get(e,"aria-controls")):SF.lib.fc("SFusrmnu"))}).catch(SF.lib.alr)};SF.am.c=function(){var a;var b=document.querySelectorAll("#SFusrpne>div>div[data-box]");for(a=b.length-1;0<=a;a--)SF.bx.c(b[a]);SF.lib.dg("SFusrdlg",!1);SF.lib.dn("SFusrpne")};SF.r({url:/^(account|myaccount|join|renew|upgrade|downgrade)(\/|$)/,pageId:"SFusrpne",open:SF.am.o,close:SF.am.c,closeOnLeave:!0});
SF.am.i=function(a,b){b=void 0===b?"":b;var c=SF.$("SFusrpne"),d,e,f,h,g,k,m,l=[];a.pwd&&delete a.pwd;a._ts&&(SF._st._rt=a._ts-parseInt((new Date).getTime()/1E3));a._st||(a._st={});a._st._rc&&(SF._st._rc=a._st._rc);SF.d.set(c,a);SF.lib.i(c,[{nodeName:"nav",id:"SFusrmnu",role:"tablist",animated:""}]);var n=a._st.acc?a._st.acc:a._st.anm;for(f=0;f<n.length;f++)if(!f||"join"!=b&&"renew"!=b&&"upgrade"!=b&&"downgrade"!=b){var q=n[f];SF.lib.i(c,[d=SF.lib.n({id:"SFusrpne"+f,className:"SFusrpne",role:"tabpanel form",
style:{display:"none"},childNodes:[{className:"SFfpybtx",childNodes:[{nodeName:"button",className:"SFfpybtn SFbig",onclick:SF.am.s,innerHTML:"join"==b?"Sign Up":"upgrade"==b||"downgrade"==b?"Submit":"renew"==b?"Renew":"Save & Continue"},"join"==b||"renew"==b||"upgrade"==b||"downgrade"==b?null:{nodeName:"button",className:"SFbig",onclick:SF.am.n,innerHTML:"Skip"}]}]})]);if(q.box)for(h=0;h<q.box.length;h++){var t=q.box[h];SF.lib.i(d,[e=SF.lib.n({className:"SFbox"})],d.lastChild);t.dir&&e.setAttribute("data-dir",
"1");t.dsp&&e.setAttribute("data-dsp",t.dsp.join(" "));t.dsn&&e.setAttribute("data-dsn",t.dsn.join(" "));if("string"==typeof t.dat)(m=SF.bx.o(e,t,a))&&m instanceof Promise&&l.push(m);else{e.appendChild(SF.lib.tf(t.dat,a));if(a._st._dw)for(g=a._st._dw.length-1;0<=g;g--)if(k=e.querySelector('input[name="'+a._st._dw[g]+'"]'))k.onchange=function(){var u=this;SF.v(u)&&SF.lib.xhr("GET","v2/account/checkduplicate?"+u.name+"="+encodeURIComponent(SF.get(u)),{showSpinner:!1,handleErrors:!1}).then(function(v){v&&
v.exists&&SF.lib.dg("SFusrdlg",{childNodes:[{nodeName:"h4",innerHTML:"You have an existing account"},{nodeName:"p",innerHTML:"Do you want to sign in to your existing account?"},{nodeName:"button",onclick:function(){var x=SF.lib.f("SFusrpne0");SF.am.c();SF.open("myaccount");SF.lib.f("SFusrlog",x)},innerHTML:"Sign In"},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1)},innerHTML:"Create New account"}]},{target:u,placement:"v"})})};if(a._st._df)for(g=a._st._df.length-1;0<=g;g--)if(k=e.querySelector('input[name="'+
a._st._df[g]+'"]'))k.onchange=function(){var u=this;SF.v(u)&&SF.lib.xhr("GET","v2/account/checkduplicate?"+u.name+"="+encodeURIComponent(SF.get(u)),{showSpinner:!1,handleErrors:!1}).then(function(v){v&&v.exists&&SF.lib.dg("SFusrdlg",{childNodes:[{nodeName:"h4",innerHTML:"You have an existing account"},{nodeName:"p",innerHTML:"Please sign in to your existing account."+("eml"==u.name?"":" If you do not know the email address associated with the account please contact the administrator.")},{nodeName:"button",
onclick:function(){var x=SF.lib.f("SFusrpne0");SF.am.c();SF.open("myaccount");SF.lib.f("SFusrlog",x)},innerHTML:"Sign In"}]},{target:u,placement:"v"})})}}e.childNodes.length?(t.dtl&&SF.lib.i(e,[{className:"SFboxdtl",innerHTML:t.dtl}],e.firstChild),t.ttl&&SF.lib.i(e,[{nodeName:"h2",className:"SFboxttl",innerHTML:t.ttl}],e.firstChild)):SF.lib.dn(e)}if(!f&&a._st._tx&&a._st._tx.tax){if(k=d.querySelector('input[name="adr[ad2]"]'))k.required=!0,k.oninput=SF.v,k.onblur=function(u){SF.v(u)&&SF.lib.gg(u).then(function(v){if(v)return SF.am.r({adr:v})}).catch(SF.lib.alr)};
if(k=d.querySelector('[name="ntx"]'))k.onchange=function(){SF.am.r({ntx:SF.get(this)}).catch(SF.lib.alr)}}if(k=d.querySelector('[name="dir"]'))k.onchange=function(){SF.am.r({dir:SF.get(this)}).catch(SF.lib.alr)};a._st.anm&&!a.uid&&(k=c.querySelector('input[name="pwd"]'))&&(SF.lib.dn(k.previousSibling),SF.lib.s(k,!0),k.removeAttribute("readonly"));1<d.childNodes.length?(SF.lib.i("SFusrmnu",[t=SF.lib.n({nodeName:"a",id:"SFusrmnu"+f,role:"tab","aria-controls":"SFusrpne"+f,href:("undefined"!=typeof SF._st.hsh&&
0===SF._st.hsh.indexOf("account")?"#account/":"#myaccount/")+encodeURIComponent(SF.lib.ft(q.lbl)),innerHTML:q.lbl})]),f&&a.uid&&(t.setAttribute("data-href",t.href),t.removeAttribute("href"),t.setAttribute("aria-disabled","true")),q.dir&&t.setAttribute("data-dir","1"),q.dsp&&t.setAttribute("data-dsp",q.dsp.join(" ")),q.dsn&&t.setAttribute("data-dsn",q.dsn.join(" "))):SF.lib.dn(d)}if("join"==b){if(!SF.$("SFusrpne0"))return SF.lib.cn(c),c.innerHTML="No membership levels available for signup or payment gateway disabled.",
Promise.resolve();SF.lib.s("SFusrmnu",!1)}else"renew"==b||"upgrade"==b||"downgrade"==b?SF.lib.s("SFusrmnu",!1):(SF.lib.s("SFusrmnu",!0),SF.lib.i("SFusrmnu",[{nodeName:"a",role:"button",id:"SFusrmnulog",onclick:function(){SF.ss.c()},innerHTML:"Sign Out"}]));a.uid&&!a._zz&&(a._zz="");l.push(SF.am.r(a,"init"));return l.reduce(function(u,v){return u.then(function(){return v})},Promise.resolve())};
SF.am.n=function(){var a=SF.d.get(SF.$("SFusrpne"));(tabElement=SF.$("#SFusrmnu [aria-selected]"))||(tabElement=SF.$("SFusrmnu").childNodes[0]);for(tabElement=tabElement.nextSibling;tabElement&&!SF.lib.s(tabElement);tabElement=tabElement.nextSibling);tabElement&&tabElement.href?SF.open(tabElement.href.split("#")[1]):tabElement&&SF.get(tabElement,"data-href")?(tabElement.href=tabElement.getAttribute("data-href"),tabElement.removeAttribute("data-href"),tabElement.removeAttribute("aria-disabled"),SF.open(tabElement.href.split("#")[1])):
a.zgo?SF.open(a.zgo):"undefined"!=typeof a._zz?SF.get("SFctr","data-zzz")?SF.lib.re(SF.get("SFctr","data-zzz")):a._zz?SF.lib.re(a._zz):(SF.lib.s("SFpne",!0),SF.lib.alr("<h1>Welcome and Thank You!</h1><p>We are excited to have you onboard!<br>We will be sending you your membership welcome and receipt shortly.</p>"),delete a._zz):SF._st.admin?SF.lib.alr("Changes saved"):SF.$("SFdlgtxt")||SF.lib.dg("SFusrdlg",{className:"SFlst",childNodes:[{nodeName:"a",onclick:function(){window.open("/","_self")},childNodes:[{nodeName:"hgroup",
childNodes:[{nodeName:"h2",innerHTML:"Home Page"},{innerHTML:"Return to home page."}]}]},{nodeName:"a",onclick:function(){SF.lib.dg("SFusrdlg",!1)},childNodes:[{nodeName:"hgroup",childNodes:[{nodeName:"h2",innerHTML:"Edit Account"},{innerHTML:"Continue editing your account."}]}]}]})};
SF.am.s=function(){var a=SF.lib.sd("#SFusrpne>.SFusrpne"),b={};SF._st.processing||SF._st.geocoding||(SF._st.processing=!0,(new Promise(function(c,d){!SF._st.admin&&SF._st.usr.org&&parseInt(SF.get("SFctr","data-org"))==SF._st.usr.org?SF.lib.dg("SFusrdlg",{childNodes:[{nodeName:"p",innerHTML:"You are currently signed in as the administrator, continuing will sign you out as an administrator."},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1);SF.ss.d().then(c).catch(d)},innerHTML:"Continue"},
{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1);d(null)},innerHTML:"Cancel"}]}):SF._st.usr.uid&&!SF.lib.gs()?(SF.ss.o({msg:"Please sign in again"}),d(null)):c()})).then(function(){var c,d=!1,e=!1,f,h;for(c=a.firstChild;c;c=c.nextSibling)if(SF.lib.ma(c,".SFbox")&&SF.lib.s(c)){if(c.getAttribute("data-box")){var g=SF.bx.s(c);if(!1===g)return Promise.reject(null)}else{if(!SF.v(c))return Promise.reject(null);g=SF.lib.f(c)}SF.lib.ml(b,g,{exclude:["dek"]});if(g.dek)if(b.dek)for(f=0;f<g.dek.length;f++){for(h=
b.dek.length-1;0<=h;h--)if(b.dek[h].did==g.dek[f].did){if(b.dek[h]._do!=g.dek[f]._do)return Promise.reject("Mismatch in label/folder action");break}0>h&&b.dek.push(g.dek[f])}else b.dek=g.dek}if(!SF._st.usr.uid&&!b.dek)return Promise.reject("Please select a membership level");if("10000"==SF.get("SFctr","data-org")&&b.dek){for(g=0;g<b.dek.length;g++)"55df70cbec5a49356a607e67"==b.dek[g].did&&"del"==b.dek[g]._do&&(d=!0),"54a440539857ec76318b4568"==b.dek[g].did&&(e=!0);if(d&&!e&&SF.lib.s("SFusrpayaon"))return new Promise(function(k,
m){SF.lib.dg("SFusrdlg",{childNodes:[{nodeName:"p",innerHTML:"Removing Advanced MailChimp will reset your email list settings."},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1);k()},innerHTML:"Proceed"},{nodeName:"button",onclick:function(){SF.lib.dg("SFusrdlg",!1);m(null)},innerHTML:"Cancel"}]})})}g=!1;for(g in b)break;if(!g)return SF.am.n(),Promise.reject(null);SF._st._do=SF._st.usr.uid?"Updating account":"Creating account";SF.lib.sn(!0);return SF.lib.pa(b)}).then(function(){return SF.lib.pp(b)}).then(function(c){return SF.am.p(b,
c)}).catch(SF.lib.alr).then(function(){delete SF._st.processing}))};
SF.am.p=function(a,b){b=void 0===b?null:b;var c=SF.lib.sd("#SFusrpne>.SFusrpne");return(new Promise(function(d,e){b&&b.error?d(b):a.sum&&!a.crd||a.crd&&(!(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)||a.crd.error)?e(a.crd.error||"Payment method required"):(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),d(SF.lib.xhr(SF._st.usr.uid?"PATCH":"POST","v2/account",a,{org:SF.get("SFctr","data-org"),handleErrors:!1})))})).then(function(d){var e,f=parseInt((new Date).getTime()/
1E3)+SF._st._rt,h=SF._st.usr.end,g=[],k=!1,m=!1,l=!1;if(!d||a._pv)return Promise.reject(d?d.error||"Error":"No response from server");if(SF._st.usr.uid){SF.am.t(d);var n=SF.d.get(SF.$("SFusrpne"));!d.error&&"undefined"!=typeof a.pwd&&(e=c.querySelector('input[name="pwd"]'))&&(SF.set(e,""),SF.lib.s(e,!1),SF.lib.s(e.previousSibling,!0));h&&h<f&&(!SF._st.usr.end||SF._st.usr.end>f)&&SF.close({exclude:["SFusrpne"]});if(!d.error&&!SF.lib.s("SFusrmnu")&&n.zgo){SF.open(n.zgo);h&&h<f&&(!SF._st.usr.end||SF._st.usr.end>
f)&&setTimeout(function(){SF.lib.alr("Thank you, your membership has been renewed!")},2E3);return}if(!d.error){d._py&&d._py.sum&&g.push("Thank you! Your payment of "+SF.lib.fa(d._py.sum,d._py.cur)+" has been processed.");if(d.dek)for(e=d.dek.length-1;0<=e;e--)if(d.dek[e].cur&&d.dek[e].bid){k=d.dek[e];c.querySelector('[data-box="pay"]')&&(l=!0);break}if(k&&k.bid&&k.bil)for(e=k.bil.length-1;0<=e;e--)if(k.bil[e].bid==k.bid){m=k.bil[e];break}k&&l&&(!m&&k.end?g.push("Your membership expiration date is "+
SF.lib.fd(k.end)+"."):m&&(1==m.way&&k.end&&h&&86400>Math.abs(k.end-h)?g.push("Your billing preference has been updated"):1==m.way&&k.end?g.push("Your payment method will be charged automatically starting "+SF.lib.fd(k.end)+"."):2==m.way&&k.end?g.push("Your membership expiration date is "+SF.lib.fd(k.end)+"."):3==m.way&&k.end?g.push("Your billing preference has been updated."+(k.dso?"<br><br>"+k.dso:"")):g.push("Your billing preference has been updated.")))}if(d.crm)for(e=d.crm.length-1;0<=e;e--)if(24==
d.crm[e].typ&&!d.crm[e].pay&&d.crm[e].sub){SF.bx.hi.v(d.crm[e]);return}if(g.length){SF.lib.sv("SFctr");SF.lib.dg("SFusrdlg",{childNodes:[{innerHTML:g.join("<br>")},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:d._zx?function(){SF.lib.re(d._zx)}:function(){SF.lib.dg("SFusrdlg",!1);SF.am.n()},innerHTML:"OK"}]}]});return}}else if(d.uid&&d.SF)return"undefined"==typeof d._st&&(e=SF.d.get(SF.$("SFusrpne")))&&(d._st=e._st),d._st.anm&&!d._st.acc&&(d._st.acc=d._st.anm),SF.ss.i(d,a).then(function(){SF.close();
SF.lib.i("SFpne",[{id:"SFusrpne",className:"SFpne"}]);return SF.am.i(d)}).then(function(){SF.am.n()});if(d.error)return Promise.reject(d.error);d._zx?SF.lib.re(d._zx):SF.am.n()})};
SF.am.t=function(a){var b=SF.d.get(SF.$("SFusrpne")),c,d,e=[];SF.co.n(b,a);if("undefined"!=typeof a.dek)for(i=0;i<a.dek.length;i++)if(a.dek[i].bid){SF._st.usr.end=a.dek[i].end?a.dek[i].end:!1;break}"undefined"==typeof a.nam&&"undefined"==typeof a.biz&&"undefined"==typeof a.ctc||SF.ss.r({uid:SF._st.usr.uid,nam:SF._st.usr.nam=b.nam||b.biz||b.ctc||"Member"});SF.lib.ml(SF._st.usr,a,{only:["adr","eml","atg"]});var f=SF.$("SFusrpne").querySelectorAll(".SFusrpne>.SFbox");for(c=0;c<f.length;c++)f[c].hasAttribute("data-box")?
(d=SF.bx.p(f[c],a,b))&&d instanceof Promise&&e.push(d):SF.lib.f(f[c],a);e.push(SF.am.r(a,"update"));e.reduce(function(h,g){return h.then(function(){return g})},Promise.resolve()).catch(SF.lib.alr)};
SF.am.r=function(a,b){b=void 0===b?"":b;var c=SF.d.get(SF.$("SFusrpne")),d,e,f,h,g=!1,k,m,l;"init"==b?SF.e.set(SF.$("SFusrpne"),d={}):d=SF.e.get(SF.$("SFusrpne"));SF.lib.ml(d,a,{only:["adr","ntx","dir","lbl"]});if("undefined"!=typeof a.dek)for(d.lbl={},e=a.dek.length-1;0<=e;e--)if((!a.dek[e].cur||a.dek[e].bid)&&"undefined"==typeof a.dek[e].aon&&(d.lbl[a.dek[e].did]=1,a.dek[e].add))for(f=a.dek[e].add.length-1;0<=f;f--)d.lbl[a.dek[e].add[f]]=1;if(c.dek)for(e=c.dek.length-1;0<=e;e--)if(c.dek[e].bid){c.dek[e].dir&&
(g=!0);break}if("init"==b||"undefined"!=typeof a.dek||"undefined"!=typeof a.lbl||"undefined"!=typeof a.dir){for(e=SF.$("SFusrpne").firstChild;e;e=e.nextSibling)if(SF.lib.ma(e,".SFusrpne")){var n=SF.$('#SFusrmnu [aria-controls="'+e.id+'"]');var q=e.querySelector('[name="dir"]');var t=!1;for(f=e.firstChild;f;f=f.nextSibling)if(SF.lib.ma(f,".SFbox")){var u=f.querySelector('[name="dir"]');(h=!0,d.dir||g)&&f.hasAttribute("data-dir")&&(g||!u)&&(h=!1);h&&(d.dir||g)&&n.hasAttribute("data-dir")&&(g||q&&!u)&&
(h=!1);h&&f.hasAttribute("data-dsp")&&!f.getAttribute("data-dsp").split(" ").reduce(function(v,x){return v||d.lbl[x]},!1)&&(h=!1);h&&f.hasAttribute("data-dsn")&&!f.getAttribute("data-dsn").split(" ").reduce(function(v,x){return v&&!d.lbl[x]},!0)&&(h=!1);SF.lib.s(f,h);h&&(t=!0)}t&&(d.dir||g)&&n.hasAttribute("data-dir")&&(g||!q)&&(t=!1);t&&n.hasAttribute("data-dsp")&&!n.getAttribute("data-dsp").split(" ").reduce(function(v,x){return v||d.lbl[x]},!1)&&(t=!1);t&&n.hasAttribute("data-dsn")&&!n.getAttribute("data-dsn").split(" ").reduce(function(v,
x){return v&&!d.lbl[x]},!0)&&(t=!1);SF.lib.s(n,t);SF.lib.s(e)&&(m=e.querySelector('[data-box="crm"]'))&&SF.bx.hi.h({currentTarget:m})}SF.lib.s(".SFbizctcdir",!d.dir&&!g)}g=SF.$("SFctr").querySelectorAll("span[data-fld]");for(e=g.length-1;0<=e;e--)m=SF.co.g(SF.get(g[e],"data-fld"),a),null!=m&&SF.set(g[e],m);return!b&&("undefined"!=typeof a.ntx||"undefined"!=typeof a.adr)&&(k=SF.lib.sd("#SFusrpne>.SFusrpne").querySelector('[data-box="pay"]'))&&(l=SF.bx.bi.p(k,a,c))&&l instanceof Promise?l:Promise.resolve()};
SF.in={};
SF.in.o=function(a,b){b=void 0===b?null:b;var c=SF.$("SFinvman"),d;SF._st.usr.uid?(new Promise(function(e,f){c&&(d=SF.d.get(c))?(SF.lib.se(c),f(null)):b&&b.data?(d=b.data,e()):e(SF.lib.xhr("GET","v2/account/invoices",{org:SF.get("SFctr","data-org")}).then(function(h){h._re&&!SF.u(h._re)?f(null):d=h}))})).then(function(){var e,f=[];if(!c||d!=SF.d.get(c))if(c?SF.lib.cn(c):SF.lib.i("SFpne",[c=SF.lib.n({id:"SFinvman",className:"SFpne",style:{display:"none"}})]),SF.d.set(c,d),d._st||(d._st={}),d._st._rc&&
(SF._st._rc=d._st._rc),d.crm&&d.crm.length){SF.lib.i(c,[{className:"SFbox",dataset:{box:"crm"}},{className:"SFfpybtx",childNodes:[{nodeName:"button",className:"SFfpybtn",onclick:SF.in.s,innerHTML:"Submit Payment"}]}]);SF.bx.hi.o(c.firstChild,{crm:[24]},d);if(b&&b.pst)return SF.bx.hi.q(c.firstChild,b);if(d.crm)for(e=d.crm.length-1;0<=e;e--)24!=d.crm[e].typ||d.crm[e].pay||f.push(d.crm[e].cid);if(f.length)return SF.lib.f(c,{inv:f}),SF.bx.hi.h({currentTarget:c.firstChild});SF.lib.s(c.querySelector(".SFfpybtx"),
!1)}else SF.lib.i(c,[{innerHTML:"No invoices"}])}).then(function(){SF.lib.se(c);if(b&&b.pst)return SF.lib.f(c.querySelector('.SFfpy[data-typ="crd"]'),b.pst),SF.lib.sv(c.querySelector(".SFfpybtx")),SF.lib.sn({resumingPayment:!0}),SF.in.p(b.pst);d.warn&&(SF.lib.alr(d.warn),delete d.warn)}).catch(SF.lib.alr):SF.ss.o()};SF.in.c=function(){SF.lib.dn("SFinvman")};SF.r({url:/^invoices$/,pageId:"SFinvman",open:SF.in.o,close:SF.in.c,closeOnLeave:!0});
SF.in.s=function(a){var b=SF.$("SFinvman");SF.d.get(b);var c,d;if(SF.v(b)&&(c=SF.bx.hi.s(b.firstChild)))if(c.crm&&c.crm.length){for(a=b.childNodes[1];a;a=a.nextSibling)(d=SF.lib.f(a))&&SF.lib.ml(c,d);SF._st.processing||SF._st.geocoding||(SF._st.processing=!0,SF.lib.sn(!0),SF.lib.pa(c).then(function(){return SF.lib.pp(c)}).then(function(e){return SF.in.p(c,e)}).catch(SF.lib.alr).then(function(){delete SF._st.processing}))}else SF.lib.alr("Please select an invoice to pay",{target:a.currentTarget,placement:"v"})};
SF.in.p=function(a,b){b=void 0===b?null:b;var c=SF.$("SFinvman"),d=SF.d.get(c);return(new Promise(function(e,f){b&&b.error?e(b):a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&!a.crd.error?(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),SF._st._do="Submitting invoice payment",e(SF.lib.xhr("PATCH","v2/account",a,{handleErrors:!1}))):f({message:a.crd&&a.crd.error?a.crd.error:"Payment method required",cause:SF.$("#SFinvman .SFfpybtn")})})).then(function(e){var f,
h=[];if(!e||e.error||a._pv)return Promise.reject(e?e.error||"Error":"No response from server");SF.bx.hi.p(c.firstChild,e);SF.co.n(d,e);if(d.crm)for(f=d.crm.length-1;0<=f;f--)24!=d.crm[f].typ||d.crm[f].pay||h.push(d.crm[f].cid);SF.lib.s(c.querySelector(".SFfpybtx"),h.length);e._py&&SF.lib.alr("Thank you for your payment!")})};SF.im={};
SF.im.o=function(a,b){b=void 0===b?null:b;var c=a.split("/"),d,e=SF.$("SFinvpay");(new Promise(function(f){e&&(d=SF.d.get(e))&&d.cid==c[1]?f():b&&b.data?(d=b.data,f()):(SF._st._do="Retrieving invoice",f(SF.lib.xhr("GET","v2/timeline/"+c[1]+"/receipt?pwd="+c[2],{org:SF.get("SFctr","data-org")}).then(function(h){h._re&&!SF.u(h._re)?reject(null):d=h})))})).then(function(){if(!e||d!=SF.d.get(e)){e?SF.lib.cn(e):SF.lib.i("SFpne",[e=SF.lib.n({id:"SFinvpay",className:"SFpne",style:{display:"none"}})]);SF.d.set(e,
d);d._st||(d._st={});d._st._rc&&(SF._st._rc=d._st._rc);d.cid=c[1];var f=d.due&&d._st._px&&0<=d._st._px.spy;SF.lib.i(e,[f?{nodeName:"input",type:"hidden",name:"crm[0][cid]",value:c[1]}:null,f?{nodeName:"input",type:"hidden",name:"crm[0][pwo]",value:c[2]}:null,f?{nodeName:"input",type:"hidden",name:"crm[0][_do]",value:"pay"}:null,{className:"SFbox",innerHTML:d.dtl},f?null:{className:"SFbox",innerHTML:d.due?"No payment gateway":"Paid"},f?{id:"SFinvpaypay",className:"SFbox"}:null,f?{id:"SFinvpaybtx",
className:"SFfpybtx",childNodes:[{nodeName:"button",className:"SFfpybtn",onclick:SF.im.s,innerHTML:"Submit Payment"}]}:null]);if(f)return Promise.all([SF.lib.sw({pageElement:"SFinvpay",settings:d._st}),SF.lib.sy({pageElement:"SFinvpay",paymentElement:"SFinvpaypay",settings:d._st,getPaymentMethod:!0,allowEmailReceipt:!0,currency:d.cur,sum:d.due,preProcess:{act:"PATCH",url:"v2/account"}})])}}).then(function(){SF.lib.se(e);if(b&&b.pst)return SF.lib.f("SFinvpaypay",b.pst),SF.lib.sv("SFinvpaybtx"),SF.lib.sn({resumingPayment:!0}),
SF.im.p(b.pst);SF._st.ini||SF.lib.fc(e)}).catch(SF.lib.alr)};SF.im.c=function(){SF.lib.dn("SFinvpay")};SF.r({url:/^invoice\/[^\/]+\/[^\/]+$/,pageId:"SFinvpay",open:SF.im.o,close:SF.im.c,closeOnLeave:!0});SF.im.s=function(){if(SF.v("SFinvpay")){var a=SF.lib.f("SFinvpay");SF._st.processing||SF._st.geocoding||(SF._st.processing=!0,SF.lib.sn(!0),SF.lib.pa(a).then(function(){return SF.lib.pp(a)}).then(function(b){return SF.im.p(a,b)}).catch(SF.lib.alr).then(function(){delete SF._st.processing}))}};
SF.im.p=function(a,b){b=void 0===b?null:b;return(new Promise(function(c,d){b&&b.error?c(b):a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&!a.crd.error?(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),SF._st._do="Submitting invoice payment",c(SF.lib.xhr("PATCH","v2/account",a,{handleErrors:!1}))):d({message:a.crd&&a.crd.error?a.crd.error:"Payment method required",cause:SF.$("#SFinvpay .SFfpybtn")})})).then(function(c){if(!c||c.error||a._pv)return Promise.reject(c?
c.error||"Error":"No response from server");SF.lib.dn("SFinvpaypay");SF.lib.dn("SFinvpaybtx");c._py&&(SF.lib.i("SFinvpay",[{className:"SFbox",innerHTML:"Paid"}]),SF.lib.alr("Thank you for your payment!"))})};SF.bm={};
SF.bm.o=function(){var a=SF._st.hsh||SF.get("SFctr","data-ini");SF._st.usr.uid?(new Promise(function(b,c){SF.$("SFlbdman")?b():SF.lib.xhr("GET","v2/account/listings").then(function(d){var e;SF.lib.i("SFpne",[{id:"SFlbdman",className:"SFpne",style:{display:"none"}}]);if(d.end)(e=SF.$("#SF_le"))?SF.$("SFlbdman").innerHTML=e.innerHTML:SF.lib.i("SFlbdman",[{nodeName:"span",innerHTML:"Your account has expired."},{nodeName:"a",href:"#renew",innerHTML:"Please click here to renew."}]);else if(d.ltg&&d.ltg.length)for(e=
0;e<d.ltg.length;e++)SF.bm.i(d.ltg[e]);else SF.$("SFlbdman").innerHTML="No listings";b()}).catch(c)})).then(function(){var b;SF.lib.se("SFlbdman");SF._st.ini||(a&&(b=SF.$("SFltg"+a.split("/").pop()))?SF.lib.fc(b):SF.lib.fc("SFlbdman"))}).catch(SF.lib.alr):SF.ss.o()};SF.bm.close=function(){SF.lib.dn("SFlbdman")};SF.r({url:/^mylistings$/,pageId:"SFlbdman",open:SF.bm.o,close:SF.bm.close});
SF.bm.i=function(a){var b;if(b=SF.$("SFltg"+a._id)){SF.lib.cn(b);var c=SF.d.get(b);SF.lib.ml(c,a,{only:"_id lid _dp _na ttl cnv cnc cur sum due ds3".split(" ")})}else SF.lib.i("SFlbdman",[b=SF.lib.n({id:"SFltg"+a._id,className:"SFbox"})]),SF.d.set(b,c=a);SF.lib.i(b,[{nodeName:"h2",innerHTML:c.ttl},{childNodes:[{nodeName:"span",innerHTML:"Posted:"},{nodeName:"span",innerHTML:SF.lib.fd(c._dp)},{nodeName:"span",className:"SFsep"},{nodeName:"span",innerHTML:"Status:"},{nodeName:"span",className:c._na?
"SFemp":null,innerHTML:c._na?c._na:"active"},{nodeName:"span",className:"SFsep"},{nodeName:"span",innerHTML:"Views:"},{nodeName:"span",innerHTML:c.cnv?c.cnv:0},{nodeName:"span",className:"SFsep"},{nodeName:"span",innerHTML:"Clicks:"},{nodeName:"span",innerHTML:c.cnc?c.cnc:0}]},c.due?{className:"SFmt1",childNodes:[{childNodes:[{nodeName:"span",innerHTML:"Amount Due:"},{nodeName:"span",innerHTML:SF.lib.fa(c.sum,c.cur)}]},c.ds3?{innerHTML:c.ds3}:null]}:null,!c._na||"void"!=c._na&&"cancelled"!=c._na?
{className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.bm.p,innerHTML:"Manage"}]}:null]);for(a=SF.$("SFlbdman").firstChild;a;a=a.nextSibling)if(a!=b&&SF.d.get(a)._dp<c._dp){SF.lib.i(a.parentNode,[b],a);break}};
SF.bm.p=function(a){var b=a.currentTarget,c=SF.d.get(b.parentNode.parentNode);(new Promise(function(d,e){SF.lib.dg("SFlbdmandlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){e(null)},innerHTML:"Close"},{},{nodeName:"button",onclick:function(){d("void")},innerHTML:"Cancel listing"},{},{nodeName:"button",onclick:function(){d("edit")},innerHTML:"Edit listing"},"expired"==c._na&&c.rfa?{nodeName:"button",onclick:function(){d("renew")},innerHTML:"Renew listing"}:null,{},{nodeName:"button",
onclick:function(){d("preview")},innerHTML:"Preview"}]},{target:b,placement:"v"})})).then(function(d){SF.lib.dg("SFlbdmandlg",!1);if("void"==d)return(new Promise(function(e,f){SF.lib.dg("SFlbdmandlg",{childNodes:[{nodeName:"h4",innerHTML:"Are you sure you want to cancel the listing?"},{nodeName:"button",onclick:function(){e(!0)},innerHTML:"Yes"},{nodeName:"button",onclick:function(){f(null)},innerHTML:"No"}]},{target:b,placement:"v"})})).then(function(){SF.lib.dg("SFlbdmandlg",!1);SF._st._do="Cancelling listing";
return SF.lib.xhr("PATCH","v2/board/"+c.lid+"/listing/"+c._id,{_na:"cancelled"})});if("edit"==d)SF.open("!board/"+c.lid+"/edit/"+c._id);else{if("renew"==d)return SF._st._do="Renewing listing",SF.lib.xhr("PATCH","v2/board/"+c.lid+"/listing/"+c._id,{_dp:parseInt((new Date).getTime()/1E3)});if("preview"==d)return SF._st._do="Previewing listing",SF.lib.xhr("GET","v2/board/"+c.lid+"/listing/"+c._id+"/view").then(function(e){var f,h=[];e._na&&h.push({className:"SFltgemp",innerHTML:"Listing "+e._na});for(f=
0;f<e._st.inf.box.length;f++)e._st.inf.box[f].htm&&h.push({innerHTML:SF.co.p(e._st.inf.box[f].htm,e,"ltg")});h.push({className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFlbdmandlg",!1)},innerHTML:"Close"}]});SF.lib.dg("SFlbdmandlg",{childNodes:h},{width:"800px",height:"800px",dismiss:!0});e=SF.$("SFlbdmandlg").querySelectorAll("a[href]");for(f=0;f<e.length;f++)e[f].getAttribute("target")||e[f].setAttribute("target","_blank")})}}).then(function(d){d&&(d._id=c._id,SF.bm.i(d),
SF.lib.fc("SFltg"+c._id))}).catch(function(d){SF.lib.dg("SFlbdmandlg",!1);SF.lib.alr(d)})};SF.es={};
SF.es.i=function(){var a,b,c,d,e,f=!1;if(SF.$("SFevtlst"))var h="SFevtlst";else if(SF.$("SFevtcal"))h="SFevtcal";else return!1;if(c=SF.get("SFctr","data-evg"))for(c=c.split(","),a=0;a<c.length;a++)c[a]=parseInt(c[a]);var g=[{nodeName:"li",childNodes:[{nodeName:"a",id:h+"grp",className:"SFevtmnugrp",role:"button",tabIndex:0,onclick:SF.es.f,innerHTML:"Show All"}]}];var k=0;var m=Math.max(SF._st.evg.length,"undefined"==typeof SF._st.oeg?0:SF._st.oeg.length);var l=!1;for(e=d=0;k<m;k++)if(a="undefined"==
typeof SF._st.oeg||"undefined"==typeof SF._st.oeg[k]?k:SF._st.oeg[k],!(c&&0>c.indexOf(a))&&"undefined"!=typeof SF._st.evg[a]){if(SF._st.admin||SF._st.evg[a].cal&&SF._st.evg[a].opt&1&&!SF._st.evg[a].dsv){var n=[];if(!SF._st.admin&&SF._st.evg[a].opt&2)for(b=SF._is.cal.length-1;0<b;b--)SF._st.evg[a].cal&Math.pow(2,b-1)&&n.push({className:"SFevtcal"+b});n.push({nodeName:"span",innerHTML:SF.lib.fr(SF._st.evg[a].ttl)});g.push({nodeName:"li",childNodes:[{nodeName:"a",id:h+"grp"+a,className:"SFevtmnugrp",
role:"button",tabIndex:0,dataset:{id:a},onclick:SF.es.f,childNodes:n}]})}"undefined"!=typeof SF._st.evg[a].dir&&(l=!0);SF._st.evg[a].dsv&&e++;SF._st.evg[a].end&&(f=!0);d++}if(!(SF._st.admin||d&&d!=e))return d&&!SF._st.usr.uid?setTimeout(function(){SF.ss.o()},100):(SF.lib.cn(h),d?f?SF.lib.i(h,[{id:"SFevtnon",childNodes:[{nodeName:"span",innerHTML:"Your account has expired."},{nodeName:"a",href:"#renew",innerHTML:"Please click here to renew."}]}]):SF.lib.i(h,[{id:"SFevtnon",innerHTML:"You do not have access to this page."}]):
SF.lib.i(h,[{id:"SFevtnon",innerHTML:"Event category not found."}])),!1;1<g.length?(SF.lib.cn(h+"flt"),SF.lib.i(h+"flt",[{nodeName:"a",role:"presentation",tabIndex:-1,childNodes:[{nodeName:"span",innerHTML:"Show"},{nodeName:"i",className:"SFicoard"}]},{nodeName:"ul",role:"menu",childNodes:g}]),SF.lib.s(h+"flt",!0)):(SF.lib.cn(h+"flt"),SF.lib.s(h+"flt",!1));SF.lib.cn(h+"ics");SF.lib.i(h+"ics",[{nodeName:"a",role:"presentation",tabIndex:-1,childNodes:[{nodeName:"span",innerHTML:"Subscribe"},{nodeName:"i",
className:"SFicoard"}]},{nodeName:"ul",role:"menu",childNodes:[SF._is.android?null:{nodeName:"li",childNodes:[{nodeName:"a",id:h+"icsweb",innerHTML:"Add to your default device calendar"}]},{nodeName:"li",childNodes:[{nodeName:"a",id:h+"icsgoo",target:SF._is.iframe()?"_top":"_blank",innerHTML:"Add to your Google Calendar"}]},{nodeName:"li",childNodes:[{nodeName:"a",id:h+"icsclp",onclick:function(){SF.lib.cb(this.href);return!1},innerHTML:"Copy iCal feed/URL to your clipboard"}]},{nodeName:"li",childNodes:[{nodeName:"a",
id:h+"icsrss",onclick:function(){SF.lib.cb(this.href);return!1},innerHTML:"Copy RSS feed/URL to your clipboard"}]}]}]);(SF._st.admin||l)&&SF.lib.s(h+"new",!0);SF.es.f();return!0};
SF.es.f=function(a){if(SF.$("SFevtlst"))var b="SFevtlst";else if(SF.$("SFevtcal"))b="SFevtcal";else return;"undefined"==typeof a?a=SF.get(b,"data-grp")||"":(a=(a=SF.lib.ds(a.currentTarget))&&"undefined"!=typeof a.id?a.id.toString():"",SF.set(b,"data-grp",a));SF.$(b+"flt")&&SF.lib.fe(SF.$(b+"flt").querySelectorAll("[aria-selected]"),function(d){d.removeAttribute("aria-selected")});SF.$(b+"grp"+a)&&SF.$(b+"grp"+a).setAttribute("aria-selected",!0);"SFevtlst"==b?SF.es.l.g():SF.es.d.g();if(SF._st.admin)var c=
"";else if(a)c=SF._st.evg[a].opt&&SF._st.evg[a].opt&4?"api.membershipworks.com/v2/events?_op=ics&org="+SF._st.org+"&grp="+a:"";else if(SF.get("SFctr","data-evg")){c=SF.get("SFctr","data-evg").split(",");for(a=c.length-1;0<=a;a--)"undefined"!=typeof SF._st.evg[parseInt(c[a])]&&SF._st.evg[parseInt(c[a])].opt&&SF._st.evg[parseInt(c[a])].opt&4||c.splice(a,1);c=c.length?"api.membershipworks.com/v2/events?_op=ics&org="+SF._st.org+"&grp="+c.join(","):""}else for(c="",a=0;a<SF._st.evg.length;a++)if(SF._st.evg[a].opt&&
SF._st.evg[a].opt&4){c="api.membershipworks.com/v2/events?_op=ics&org="+SF._st.org;break}if(c){if(a=SF.$(b+"icsweb"))a.href="webcal://"+c;if(a=SF.$(b+"icsgoo"))a.href="https://web.archive.org/web/20250818163513/https://www.google.com/calendar/render?cid="+encodeURIComponent("webcal://"+c);if(a=SF.$(b+"icsclp"))a.href="http://"+c;if(a=SF.$(b+"icsrss"))a.href="http://"+c.replace("_op=ics","_op=rss");SF.lib.s(b+"ics",!0)}else SF.lib.s(b+"ics",!1)};SF.es.l={};
SF.es.l.o=function(a){var b=!1,c;SF.$("SFevtlst")?(a=!0,b=SF.lib.s("SFevtadm")&&(c=SF.d.get(SF.$("SFevtadm")))||SF.lib.s("SFevtpne")&&(c=SF.d.get(SF.$("SFevtpne")))?SF.$("SFevt"+c.eid):!1):(a=!1,SF.lib.dn("SFevtcal"),c=new Date,c=new Date(c.getFullYear(),c.getMonth(),c.getDate()),parseInt(c.getTime()/1E3),SF.lib.i("SFpne",[{id:"SFevtlst",className:"SFpne",style:{display:"none"}}]));SF.lib.se("SFevtlst");SF.lib.se("SFhdrevl");a&&b&&SF.lib.s(b)&&SF.lib.fc(b);a||SF.es.l.f("get")};SF.es.l.c=function(){SF.lib.dn("SFevtlst")};
SF.r({url:/^!event-list(\/|$)/,pageId:"SFevtlst",open:SF.es.l.o,close:SF.es.l.c});
SF.es.l.i=function(a){var b,c=!1,d;(b=SF.$("SFevt"+a.eid))&&SF.lib.dn(b);b=SF.lib.ds("SFevtlst");if(b.sdp&&Math.max(a.sdp,a.edp||0,a.srd||0,a.erd||0)<b.sdp||b.edp&&Math.min(a.sdp,a.srd||a.sdp)>b.edp)return null;b=new Date(1E3*a.sdp);a.edp&&(c=new Date(1E3*a.edp),a.ezp&&0<=a.ezp.indexOf(",")&&a.szp.split(",")[0]==a.ezp.split(",")[0]&&(a.ezp=a.ezp.split(",")[1].replace(/^\s*|\s*$/,"")));b=SF.lib.n({nodeName:"a",id:"SFevt"+a.eid,className:"SFevt "+(a.lgo?"SFevtlgo ":"")+(0===a.cap?"SFevtdel ":"")+"SFevtcal"+
a.cal+" SFevtgrp"+a.grp,href:SF._st.admin?"#event/admin/"+a.eid:"#!event/"+a.url,dataset:{sdp:a.sdp},childNodes:[{childNodes:[{className:"SFevt_dp",childNodes:[{className:"SFevt_dpmon",innerHTML:SF._is.mon[b.getMonth()]},{className:"SFevt_dpdte",innerHTML:b.getDate()},{className:"SFevt_dpyer",innerHTML:b.getFullYear()}]},!c||c.getDate()==b.getDate()&&c.getMonth()==b.getMonth()&&c.getYear()==b.getYear()?null:{className:"SFevt_dp",childNodes:[{className:"SFevt_dpmon",innerHTML:SF._is.mon[c.getMonth()]},
{className:"SFevt_dpdte",innerHTML:c.getDate()},{className:"SFevt_dpyer",innerHTML:c.getFullYear()}]},"undefined"==typeof a.cnt?null:{className:"SFevtcnt",innerHTML:a.cap?(100*a.cnt/a.cap).toFixed(0)+"<span>%</span>":"undefined"!=typeof a.cap&&0===a.cap?"Closed":a.cnt}]},{childNodes:[{nodeName:"h2",className:"SFevtttl",innerHTML:SF.lib.fr(a.ttl,{allowed:["br"]})},{className:"SFevtdtl",innerHTML:SF.lib.fr(a.szp)+(a.ezp?" - "+SF.lib.fr(a.ezp):"")},a.lgo?{nodeName:"img",className:"SFevtimg",src:a.lgo.s,
alt:"Image for "+SF.lib.fr(a.ttl),onerror:function(){SF.lib.dn(this)},onload:function(){this.style.opacity=1;SF.lib.rt("SFevtlst")},style:{opacity:"0"}}:null]}]});for(c=SF.$("SFevtlsttop").nextSibling;c&&(d=SF.lib.ds(c))&&d.sdp&&!(d.sdp>a.sdp);c=c.nextSibling);SF.lib.i("SFevtlst",[b],c);a.lgo&&!SF.lib.ma("SFevtlst",".SFevtlgo")&&(SF.$("SFevtlst").className="SFpne SFevtlgo");return b};
SF.es.l.f=function(a){var b=SF.$("get"==a?"SFevtlstmor":"SFevtlstold"),c=SF.lib.ds("SFevtlst"),d=0,e=0,f=!1,h=!1,g=!1,k;if(c.sdp||c.edp)if(b&&SF.lib.s(b)&&!SF.get("SFevtlst","data-act")&&("undefined"==typeof fn||b.getBoundingClientRect().top<SF._st.win.h))var m="get"==a?c.edp:c.sdp;else return;else m=new Date,m=new Date(m.getFullYear(),m.getMonth(),m.getDate()),m=parseInt(m.getTime()/1E3),c.sdp=c.edp=m,SF.lib.ds("SFevtlst",c,{only:["sdp","edp"]}),g=!0;var l=SF.$("SFevtlst").querySelectorAll(".SFevt");
d=l.length;for(k=0;k<l.length;k++)SF.lib.s(l[k])&&(e++,f||(f=l[k]),h=l[k]);SF.set("SFevtlst","data-act",a);SF.set(b,"Loading...");SF._st._do="Getting event list";SF.lib.xhr("GET","v2/events?"+("get"==a?"sdp="+m:"edp="+m)+(SF.get("SFctr","data-evg")?"&grp="+SF.get("SFctr","data-evg"):"")+("undefined"==typeof SF._st.evg?"&_st":""),{admin:SF._st.admin?!0:!1}).then(function(n){var q,t=0,u=0;if(SF.$("SFevtlst")){if(g&&("undefined"!=typeof n._st&&(SF._st.evg=n._st.evg?n._st.evg:[],n._st.oeg?SF._st.oeg=
n._st.oeg:delete SF._st.oeg,SF._st._fd="undefined"==typeof n._st._fd?0:n._st._fd),SF.lib.i("SFevtlst",[{id:"SFevtlsttop",className:"SFlsx",childNodes:[{nodeName:"ul",childNodes:[{nodeName:"li",childNodes:[{nodeName:"a",id:"SFevtlstold",role:"button",tabIndex:0,onclick:function(){SF.es.l.f("old")},innerHTML:"Load Older Events"}]},{nodeName:"li",id:"SFevtlstflt",style:{display:"none"}},{nodeName:"li",id:"SFevtlstics",style:{display:"none"}},{nodeName:"li",id:"SFevtlstnew",style:{display:"none"},childNodes:[{nodeName:"a",
href:"#event/new",innerHTML:"Add New Event"}]},SF._st.admin?{nodeName:"li",id:"SFevtlstevg",childNodes:[{nodeName:"a",role:"button",tabIndex:0,onclick:SF.ec.o,innerHTML:"Setup Event Categories"}]}:null]}]},{id:"SFevtlstbtm",className:"SFlsx",childNodes:[{nodeName:"a",id:"SFevtlstmor",role:"button",tabIndex:0,onclick:function(){SF.es.l.f("get")},innerHTML:"Load More Events"}]}]),!SF.es.i())){SF.es.l.c();return}SF.lib.dn("SFevtlstnon");if(n.evt&&n.evt.length){for(q=0;q<n.evt.length;q++)"get"!=a&&Math.max(n.evt[q].sdp,
n.evt[q].edp||0)<c.sdp&&(c.sdp=n.evt[q].sdp),"get"==a&&n.evt[q].sdp>c.edp&&(c.edp=n.evt[q].sdp);SF.lib.ds("SFevtlst",c,{only:["sdp","edp"]});if(n.evt)for(q=0;q<n.evt.length;q++)SF.$("SFevt"+n.evt[q].eid)||SF.es.l.i(n.evt[q]);SF.es.l.g();var v=SF.$("SFevtlst").querySelectorAll(".SFevt");t=v.length;for(q=0;q<v.length;q++)SF.lib.s(v[q])&&u++}else d||(SF.lib.i("SFevtlst",[{nodeName:"h2",id:"SFevtlstnon",innerHTML:"No "+("get"==a?"current ":"")+"events"}],"SFevtlstbtm"),"get"==a||SF.$("SFevtlstnew")||
SF.lib.s("SFevtlsttop",!1)),t=d,u=e;b=SF.$("get"==a?"SFevtlstmor":"SFevtlstold");20>n.evt.length||t==d?SF.lib.s(b,!1):SF.set(b,"get"==a?"Load More Events":"Load Older Events");SF.set("SFevtlst","data-act",null);if(e==u&&SF.lib.s(b)&&(!(q=SF.get("SFevtlst","num-itr"))||5>parseInt(q)))SF.set("SFevtlst","num-itr",q?parseInt(q)+1:1),SF.es.l.f(a);else if(SF.set("SFevtlst","num-itr",null),e!=u){if(!g&&"get"==a&&h)for(q=h.nextSibling;q;q=q.nextSibling)if(SF.lib.s(q)){SF.lib.fc(q);return}if(!g&&"old"==a&&
f)for(q=f.previousSibling;q;q=q.previousSibling)if(SF.lib.s(q)){SF.lib.fc(q);break}}}}).catch(SF.lib.alr)};SF.es.l.g=function(){var a=SF.get("SFevtlst","data-grp"),b=SF.$("SFevtlst").querySelectorAll(".SFevt"),c,d;a=a?a.split(","):!1;for(d=c=0;c<b.length;c++)!1===a||0<=b[c].className.split(" ").indexOf("SFevtgrp"+a)?(SF.lib.s(b[c],!0),d++):SF.lib.s(b[c],!1);!1===a||d||!SF.lib.s("SFevtlstmor")||SF.get("SFevtlst","data-act")||SF.es.l.f("get")};SF.es.d={};
SF.es.d.o=function(a){var b=a.split("/");a=!1;var c;SF.get("SFctr","data-ini")&&/^!calendar(\/[^\/]*)*\/r(\/|$)/.test(SF.get("SFctr","data-ini"))?SF.set("SFctr","data-evi",1):SF.set("SFctr","data-evi",1<=b.indexOf("r")?1:null);SF._is.robot||(SF.get("SFctr","data-ini")&&/^!calendar(\/[^\/]*)*\/monthly(\/|$)/.test(SF.get("SFctr","data-ini"))?SF.set("SFctr","data-evm",1):SF.set("SFctr","data-evm",1<=b.indexOf("monthly")?1:null));SF.$("SFevtcal")?(b=!0,a=SF.lib.s("SFevtadm")&&(c=SF.d.get(SF.$("SFevtadm")))||
SF.lib.s("SFevtpne")&&(c=SF.d.get(SF.$("SFevtpne")))?SF.$('#SFevtcal a[data-eid="'+c.eid+'"]'):!1):(b=!1,SF.lib.dn("SFevtlst"),SF.lib.i("SFpne",[{id:"SFevtcal",className:"SFpne",style:{display:"none"}}]));SF.lib.se("SFevtcal");SF.lib.se("SFhdrevc");SF.t=SF.get("SFctr","data-evm")?null:function(){var d=SF.$("SFevtcal");d&&SF.lib.s(d)&&d.childNodes.length&&SF.es.d.f("get",!0)};b?SF.get("SFctr","data-evm")?(SF.$("SFevtcalnav").classList.remove("SFfix"),SF.es.d.d()):SF.es.d.g():SF.es.d.f("get",!0);a&&
SF.lib.iv(a)&&SF.lib.fc(a)};SF.es.d.c=function(){SF.lib.dg("SFevtcaldlg",!1);SF.lib.dg("SFevttip",!1);SF.lib.dn("SFevtcal")};SF.r({url:/^!calendar(\/|$)/,pageId:"SFevtcal",open:SF.es.d.o,close:SF.es.d.c});
SF.es.d.i=function(a,b,c){var d,e,f=SF.$("SFevtcal");SF.get("SFctr","data-evm");"undefined"==typeof SF._st._fd&&(SF._st._fd=0);if(SF.get(f,"num-sdp")||SF.get(f,"num-edp")){var h=new Date(1E3*c.sdp);h=new Date(h.getFullYear(),h.getMonth(),h.getDate());h.setDate(h.getDate()-h.getDay()+SF._st._fd+(h.getDay()>SF._st._fd?7:0))}else{"undefined"!=typeof a._st&&(SF._st.evg=a._st.evg?a._st.evg:[],a._st.oeg?SF._st.oeg=a._st.oeg:delete SF._st.oeg,SF._st._fd="undefined"==typeof a._st._fd?0:a._st._fd);h=[];for(d=
0;7>d;d++)h.push({className:"SFevtcal SFevtcaltop SFevtday"+d,innerHTML:SF._is.day[(d+SF._st._fd)%7]});SF.lib.i(f,[{id:"SFevtcalnav",className:"SFlsx",childNodes:[{nodeName:"ul",childNodes:[{nodeName:"li",id:"SFevtcalmon"},{nodeName:"li",id:"SFevtcalmxt",childNodes:[{nodeName:"a","aria-label":"Previous month",onclick:function(){SF.es.d.f("old")},childNodes:[{nodeName:"i",className:"SFicoarl"}]},{nodeName:"a","aria-label":"Next month",onclick:function(){SF.es.d.f("get")},childNodes:[{nodeName:"i",
className:"SFicoarr"}]}]},{nodeName:"li",id:"SFevtcalflt",style:{display:"none"}},{nodeName:"li",id:"SFevtcalics",style:{display:"none"}},{nodeName:"li",id:"SFevtcalnew",style:{display:"none"},childNodes:[{nodeName:"a",href:"#event/new",innerHTML:"Add New Event"}]},SF._st.admin?{nodeName:"li",childNodes:[{nodeName:"a",tabIndex:0,onclick:SF.ec.o,innerHTML:"Setup Event Categories"}]}:null]}]},{childNodes:h},{nodeName:"a",id:"SFevtcalold",onclick:function(){SF.es.d.f("old")},innerHTML:"Load Older"},
{nodeName:"a",id:"SFevtcalmor",onclick:function(){SF.es.d.f("get")},innerHTML:"Load More"}]);h=new Date(1E3*c.sdp);h=new Date(h.getFullYear(),h.getMonth(),h.getDate());h.setDate(h.getDate()+(7-h.getDay()+SF._st._fd)%7);d=parseInt(h.getTime()/1E3);SF.set(f,"num-sdp",d);SF.set(f,"num-edp",d);if(!SF.es.i()){SF.es.d.c();return}}if(SF.$("SFevtcal")){var g="get"===b?SF.$("SFevtcalmor"):SF.$("SFevtcalold").nextSibling;var k=new Date;k=new Date(k.getFullYear(),k.getMonth(),k.getDate());parseInt(SF.get("SFevtcal",
"num-sdp"))>parseInt(h.getTime()/1E3)&&SF.set(f,"num-sdp",parseInt(h.getTime()/1E3));for(b=0;14>b;b++){d=new Date(h.getTime());d.setDate(d.getDate()+7);if(parseInt(d.getTime()/1E3)>c.edp)break;for(d=0;7>d;d++,h.setDate(h.getDate()+1))SF.$("SFevt"+h.getFullYear()+(10>h.getMonth()?"0":"")+h.getMonth()+(10>h.getDate()?"0":"")+h.getDate())||(SF.lib.i(f,[e=SF.lib.n({id:"SFevt"+h.getFullYear()+(10>h.getMonth()?"0":"")+h.getMonth()+(10>h.getDate()?"0":"")+h.getDate(),className:"SFevtcal SFevtday"+d+(h<k?
" SFevtold":h>k?"":" SFevtcaltod"),childNodes:[{nodeName:"h4",role:"presentation",childNodes:[{nodeName:"span",className:"SFevtcaldtm",innerHTML:SF._is.mon[h.getMonth()]},{nodeName:"span",className:"SFevtcaldtd",innerHTML:h.getDate()},h.getFullYear()==k.getFullYear()?null:{nodeName:"span",className:"SFevtcaldty",innerHTML:h.getFullYear()}]}]})],g),SF._st.admin&&SF._is.drag&&(e.ondragover=SF.es.d.m,e.ondragleave=SF.es.d.l,e.ondrop=SF.es.d.k))}parseInt(SF.get("SFevtcal","num-edp"))<parseInt(h.getTime()/
1E3)&&SF.set(f,"num-edp",parseInt(h.getTime()/1E3));if(a.evt)for(b=0;b<a.evt.length;b++)SF.es.d.j(a.evt[b])}};
SF.es.d.f=function(a,b){if(SF.$("SFevtcal")&&!SF.$("SFevtnon")){var c=!SF.get("SFevtcal","num-sdp")&&!SF.get("SFevtcal","num-edp"),d=SF.get("SFctr","data-evm"),e;if(!SF.get("SFevtcal","data-act")){if("get"===a&&b&&SF.$("SFevtcalnav")&&!d){var f=SF.$("SFevtcalnav").nextSibling.getBoundingClientRect();SF.$("SFevtcalnav").className="SFlsx"+(0>f.top?" SFfix":"")}if(d)if(c){var h=new Date;var g=new Date(h.getFullYear(),h.getMonth(),-5);var k=new Date(g.getFullYear(),g.getMonth()+4,7);g=parseInt(g.getTime()/
1E3);k=parseInt(k.getTime()/1E3)}else if("get"===a){h=new Date(parseInt(SF.get("SFevtcalmon","num-year")),parseInt(SF.get("SFevtcalmon","num-month"))+1);k=new Date(h.getFullYear(),h.getMonth()+1);k.setDate(k.getDate()+(7-k.getDay()+SF._st._fd)%7);k=parseInt(k.getTime()/1E3);if(k<=parseInt(SF.get("SFevtcal","num-edp"))){SF.es.d.d(h.getFullYear(),h.getMonth(),a);return}g=parseInt(SF.get("SFevtcal","num-edp"))}else{h=new Date(parseInt(SF.get("SFevtcalmon","num-year")),parseInt(SF.get("SFevtcalmon","num-month"))-
1);g=new Date(h.getFullYear(),h.getMonth());g.setDate(g.getDate()-(7+g.getDay()-SF._st._fd)%7);g=parseInt(g.getTime()/1E3);if(g>=parseInt(SF.get("SFevtcal","num-sdp"))){SF.es.d.d(h.getFullYear(),h.getMonth(),a);return}k=parseInt(SF.get("SFevtcal","num-sdp"))}else{var m=SF.$("get"===a?"SFevtcalmor":"SFevtcalold");if(c)g=new Date,g=new Date(g.getFullYear(),g.getMonth(),g.getDate()-6),g=parseInt(g.getTime()/1E3),k=new Date(1E3*g),k.setDate(k.getDate()+98),k=parseInt(k.getTime()/1E3);else{if(!m||!SF.lib.s(m)||
"undefined"!=typeof b&&(0>(e=m.getBoundingClientRect().top)||e>SF._st.win.h))return;"get"===a?(g=parseInt(SF.get("SFevtcal","num-edp")),k=new Date(1E3*g),k.setDate(k.getDate()+84),k=parseInt(k.getTime()/1E3)):(k=parseInt(SF.get("SFevtcal","num-sdp")),g=new Date(1E3*k),g.setDate(g.getDate()-28),g=parseInt(g.getTime()/1E3))}SF.set(m,"Loading...");"old"===a&&SF.lib.sp("SFevtcal")}SF.set("SFevtcal","data-act",a);SF._st._do="Getting events";SF.lib.xhr("GET","v2/events?sdp="+g+"&edp="+k+(SF.get("SFctr",
"data-evg")?"&grp="+SF.get("SFctr","data-evg"):"")+("undefined"==typeof SF._st.evg?"&_st":""),{admin:SF._st.admin?!0:!1}).then(function(l){var n;SF.es.d.i(l,a,{sdp:g,edp:k});if(SF.$("SFevtcal"))if(SF.set("SFevtcal","data-act",null),d)SF.es.d.d(h.getFullYear(),h.getMonth(),c?"":a);else{SF.set(m,"get"===a?"Load More":"Load Older");"old"===a&&SF.lib.rt("SFevtcal");if("get"==a&&c&&!SF._st.ini||"old"==a){var q=SF.$("SFevtcal").querySelectorAll("a.SFevt");for(n=0;n<q.length;n++)if(SF.lib.s(q[n])){SF.lib.fc(q[n]);
break}}if("get"==a&&!b)for(q=0;q<l.evt.length;q++)if((n=SF.$('#SFevtcal a[data-eid="'+l.evt[q].eid+'"]'))&&SF.lib.s(n)){SF.lib.fc(n);break}SF.es.d.g()}}).catch(SF.lib.alr)}}};
SF.es.d.g=function(){var a=SF.get("SFevtcal","data-grp"),b,c,d,e=0,f;a=a?a.split(","):!1;var h=SF.$("SFevtcal").childNodes[1];for(i=0;h;h=h.nextSibling)if(SF.lib.ma(h,".SFevtcal[id]")&&h.firstChild){e||(e=h.clientHeight-h.firstChild.offsetHeight);if(b=h.querySelector(".SFevtcaladd"))SF.lib.dn(b),h.removeAttribute("data-mor");b=h.childNodes[1];var g=!1;for(f=d=c=0;b;b=b.nextSibling)b.className=b.className.replace(/\sSFbtm/,""),!1===a||0<=a.indexOf(b.getAttribute("num-grp"))?(SF.lib.s(b,!0),f+=b.offsetHeight,
c++,1<c&&e&&f>e&&d++,g=b):SF.lib.s(b,!1);c?h.setAttribute("data-cnt",c):h.removeAttribute("data-cnt");g&&1==c&&(g.className+=" SFbtm");d&&(SF.lib.i(h,[{className:"SFevtcaladd",childNodes:[{nodeName:"i",className:"SFicoard"}]}]),h.setAttribute("data-mor",d))}};
SF.es.d.j=function(a){var b=SF.lib.ds("SFevtcal"),c,d;if(!(a.sdp<b.sdp&&("undefined"==typeof a.edp||a.edp<b.sdp)||a.sdp>=b.edp)){var e=new Date(1E3*Math.max(a.sdp,b.sdp));e=new Date(e.getFullYear(),e.getMonth(),e.getDate());for(b=new Date(1E3*Math.min("undefined"==typeof a.edp||a.edp<a.sdp?a.sdp:a.edp,b.edp));e<=b;e.setDate(e.getDate()+1))(c=SF.$("SFevt"+e.getFullYear()+(10>e.getMonth()?"0":"")+e.getMonth()+(10>e.getDate()?"0":"")+e.getDate()))&&!c.querySelector('a[data-eid="'+a.eid+'"]')&&(1==c.childNodes.length&&
(c.firstChild.className="SFevtcal"+a.cal),c.className=c.className.replace(/\sSFevtcal\d+/,"")+" SFevtcal"+a.cal,SF.lib.i(c,[d=SF.lib.n({nodeName:"a",className:"SFevt"+("undefined"!=typeof a.cap&&0===a.cap?" SFevtdel":"")+" SFevtcal"+a.cal,href:SF._st.admin?"#event/admin/"+a.eid:"#!event/"+a.url,innerHTML:SF.lib.fr(a.ttl.split("<")[0]),dataset:{eid:a.eid,ttl:a.ttl,grp:a.grp,cal:a.cal,sdp:a.sdp,edp:a.edp?a.edp:null,szp:a.szp,ezp:a.ezp?a.ezp:null,lgo:a.lgo?a.lgo.s:null}})]),SF._st.admin&&SF._is.drag?
(d.draggable=!0,d.ondragstart=SF.es.d.n,d.title=a.ttl.replace(/<br\s?\/?>/g,"\n")):SF._is.touch||(d.onmouseover=SF.es.d.p,d.onmouseout=SF.es.d.p))}};
SF.es.d.d=function(a,b,c){var d,e,f,h=[],g=c?"get"==c?"SFfadrtl":"SFfadltr":"";if(!a)if(SF.get("SFevtcalmon","num-year"))a=parseInt(SF.get("SFevtcalmon","num-year")),b=parseInt(SF.get("SFevtcalmon","num-month"));else{var k=new Date;a=k.getFullYear();b=k.getMonth()}c=new Date(a,b);c.setDate(c.getDate()-(7+c.getDay()-SF._st._fd)%7);var m=new Date(a,b+1,0);m.setDate(m.getDate()+(6-m.getDay()+SF._st._fd)%7);SF.$("SFevtcalmon").innerHTML=(new Date(a,b)).toLocaleDateString(void 0,{year:"numeric",month:"short"});
SF.lib.ds("SFevtcalmon",{year:a,month:b});c="SFevt"+c.getFullYear()+SF.lib.pl(c.getMonth().toString(),2,"0")+SF.lib.pl(c.getDate().toString(),2,"0");SF.$(c)||(SF.lib.ds("SFevtcalmon",{year:a,month:b+1}),SF.es.d.f("old"));m="SFevt"+m.getFullYear()+SF.lib.pl(m.getMonth().toString(),2,"0")+SF.lib.pl(m.getDate().toString(),2,"0");SF.$(m)||(SF.lib.ds("SFevtcalmon",{year:a,month:b-1}),SF.es.d.f("get"));k=0;for(f=SF.$("SFevtcal").children;k<f.length;k++)f[k].classList.contains("SFevtcal")&&(f[k].className=
f[k].className.replace(/\s(SFfadrtl|SFfadltr|SFevtcalout|SFevtcalmon)/g,""),e||!d&&f[k].id!=c||(d||(d=!0),f[k].id==m&&(e=!0),f[k].className+=" SFevtcalmon",g&&(f[k].style.opacity=0),0>f[k].id.indexOf("SFevt"+a+SF.lib.pl(b.toString(),2,"0"))&&(f[k].className+=" SFevtcalout"),h.push(f[k])));SF.es.d.g();g&&setTimeout(function(){h.forEach(function(l){l.className+=" "+g;l.style.opacity=1})})};
SF.es.d.p=function(a){if(a&&a.type&&"mouseover"==a.type&&1<SF._st.win.c){var b=SF.lib.ds(a.currentTarget);SF.lib.dg("SFevttip",[b.lgo?{nodeName:"img",src:b.lgo,onload:function(){this.style.opacity=1;this.parentNode&&(this.parentNode.style.height="auto")},onerror:function(){SF.lib.dn(this)},style:{opacity:"0"}}:null,{childNodes:[{nodeName:"h4",innerHTML:SF.lib.fr(b.ttl,{allowed:["br"]})},{innerHTML:b.szp+(b.ezp?" - "+b.ezp:"")}]}],{width:"252px",target:a.currentTarget,placement:"H",noBackdrop:!0,noScroll:!0})}else SF.lib.dg("SFevttip",
!1)};SF.es.d.n=function(a){a.dataTransfer.effectAllowed="copy";a.dataTransfer.setData("Text",SF.lib.ds(a.currentTarget).eid)};SF.es.d.m=function(a){/SFdnd/.test(a.currentTarget.className)?100>SF._st.win.h-a.clientY?(document.body.scrollTop+=20,document.body.parentNode.scrollTop+=20):150>a.clientY&&(document.body.scrollTop-=20,document.body.parentNode.scrollTop-=20):a.currentTarget.className+=" SFdnd";a.dataTransfer.dropEffect="copy";a.preventDefault&&a.preventDefault();return!1};
SF.es.d.l=function(a){/SFdnd/.test(a.currentTarget.className)&&(a.currentTarget.className=a.currentTarget.className.replace(/^SFdnd|\sSFdnd/,"").trim());return!1};
SF.es.d.k=function(a){var b=a.dataTransfer.getData("Text"),c=a.currentTarget.id.slice(5),d;/SFdnd/.test(a.currentTarget.className)&&(a.currentTarget.className=a.currentTarget.className.replace(/^SFdnd|\sSFdnd/,"").trim());a.stopPropagation();a.preventDefault();if(a.currentTarget.querySelector('a[data-eid="'+b+'"]')||!(d=SF.$('#SFevtcal a[data-eid="'+b+'"]')))return!1;var e=new Date(parseInt(c.slice(0,4)),parseInt(c.slice(4,6),10),parseInt(c.slice(6,8),10));c=SF.lib.ds(d);var f=new Date(1E3*c.sdp);
f=new Date(f.getFullYear(),f.getMonth(),f.getDate());if(c.edp){var h=new Date(1E3*c.edp);h=new Date(h.getFullYear(),h.getMonth(),h.getDate())}var g={ref:{eid:b},_tt:parseInt((e.getTime()-f.getTime())/1E3)};b=SF.lib.fg(c.sdp+g._tt);g.szp=SF.lib.fy(c.sdp+g._tt)+("12:00am"==b?"":", "+b+" "+SF.lib.fq(c.sdp+g._tt));c.edp&&(b=SF.lib.fg(c.edp+g._tt),g.ezp=SF.lib.fy(c.edp+g._tt)+("12:00am"==b?"":", "+b+" "+SF.lib.fq(c.edp+g._tt)));SF.lib.dg("SFevtcaldlg",{childNodes:[{nodeName:"p",innerHTML:"Copy "+d.innerHTML+
" to "+g.szp+"?"},{nodeName:"button",onclick:function(){SF._st._do="Duplicating event";SF.lib.xhr("POST","v2/event",g,{admin:!0}).then(function(k){SF.es.d.j(k);SF.es.d.g();SF.lib.dg("SFevtcaldlg",!1);SF.lib.fc(SF.$('#SFevtcal a[data-eid="'+k.eid+'"]'))}).catch(SF.lib.alr)},innerHTML:"Copy"},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtcaldlg",!1)},innerHTML:"Cancel"}]},{target:a.currentTarget.firstChild,placement:"v"});return!1};SF.ev={};
SF.ev.o=function(a,b){b=void 0===b?null:b;var c=a.split("/"),d,e,f,h,g;SF._st.usr.uid?((g=SF._st.hsh||SF.get("SFctr","data-ini")).match(/^(!event-list|!calendar)/)||(g=SF.$("SFevtlst")?"!event-list":"!calendar"),!c.length||2>c.length?SF.lib.se("SFevtadm"):("undefined"!=typeof SF.ep&&SF.ep.c(),"ec"==c[0]&&2==c.length?SF.ev.x.b(c[1]):(new Promise(function(k,m){SF._st.evg?k():SF.lib.xhr("GET","v2/events?_st").then(function(l){l._st&&l._st.evg||m(null);SF._st.evg=l._st.evg;l._st.oeg?SF._st.oeg=l._st.oeg:
delete SF._st.oeg;SF._st._fd="undefined"==typeof l._st._fd?0:l._st._fd;k()}).catch(m)})).then(function(){if("new"==c[1])if(SF.$("SFevtadm")&&!SF.d.get(SF.$("SFevtadm")).eid)SF.lib.se("SFevtadm");else{SF.ev.c();SF.lib.i("SFpne",[{id:"SFevtadm",className:"SFpne",data:{},style:{display:"none"}}]);SF.lib.se("SFevtadm");if(!SF._st.admin){for(h=0;h<SF._st.evg.length&&"undefined"==typeof SF._st.evg[h].dir;h++);if(!SF._st.evg[h]){SF.lib.i("SFevtadm",[{innerHTML:"You do not have access to add events"}]);return}}SF.lib.i("SFevtadm",
[{nodeName:"nav",id:"SFevtmnu",role:"tablist"}]);SF.$("SFevtlst")||"!event-list"==SF.get("SFctr","data-ini")?SF.lib.i("SFevtmnu",[{nodeName:"a",href:"#!event-list",innerHTML:"Event List"}]):(SF.$("SFevtcal")||0===SF.get("SFctr","data-ini").indexOf("!calendar"))&&SF.lib.i("SFevtmnu",[{nodeName:"a",href:SF.get("SFctr","data-evi")||"!calendar/r"==SF.get("SFctr","data-ini")?"#!calendar/r":"#!calendar",innerHTML:"Calendar"}]);SF.ev.b.i();SF.lib.se("SFevtdat")}else if("admin"==c[1]&&2<c.length){d=3==c.length?
c[2]:!1;e=3==c.length?!1:c.slice(2).join("/");if(!SF.$("SFevtadm")||!(f=SF.d.get(SF.$("SFevtadm")))||d&&d!=f.eid||e&&e!=f.url)return(new Promise(function(k){b&&b.data?(b.pst&&SF.lib.sn(!0),k(b.data)):(SF._st._do="Getting event",k(SF.lib.xhr("GET","v2/event"+(d?"/"+d:"?url="+e),{admin:!0})))})).then(function(k){f=k;f.tpl||(f.tpl={});SF.ev.c();SF.lib.i("SFpne",[{id:"SFevtadm",className:"SFpne",data:f,style:{display:"none"},childNodes:[{nodeName:"nav",id:"SFevtmnu",role:"tablist",childNodes:[{nodeName:"a",
href:"#"+g,innerHTML:g.match(/^(!event-list)/)?"Event List":"Calendar"}]}]}]);SF.lib.se("SFevtadm");SF._st.admin||"undefined"!=typeof k._ae&&!(k._ae&2)?(SF.ev.d.i(),SF.ev.r.i(),SF.ev.j.i(),SF.ev.m.i(),SF.ev.b.i(),SF.ev.w.i(),SF.ev.v.i(),SF.ev.u.i(),SF.ev.a.i(),SF.lib.se("SFevtdbd")):(SF.ev.b.i(),SF.lib.se("SFevtdat"))}).then(function(){var k=b.subdata?b.subdata:null;if(b&&b.pst)return SF.lib.dg("SFevtdlg",{childNodes:[k?{innerHTML:"Posted: "+SF.lib.fd(k._dp)+" "+SF.lib.fg(k._dp)}:null,{id:"SFevtpay",
style:{height:"auto"}}]},{width:"800px",height:"800px",dismiss:!0}),SF.er.i(f,k,b).then(function(){SF.lib.sv("SFevtpaybtx");SF.lib.sn({resumingPayment:!0});return SF.er.p(b.pst)})});SF.lib.se("SFevtadm");SF.$("#SFevtmnu [aria-selected]").onclick()}}).catch(function(k){SF.open(g);SF.lib.alr(k)}))):SF.ss.o()};SF.ev.c=function(){SF.$("SFevtqec")&&SF.ev.x.c();SF.lib.dg("SFevtdlg",!1);SF.lib.dn("SFevtadm")};
SF.r({url:/^(event\/admin|event\/new|ec|!event\/admin|!event\/new)(\/|$)/,pageId:"SFevtadm",open:SF.ev.o,close:SF.ev.c});SF.ev.d={};
SF.ev.d.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b,c=0,d=0,e=0,f={};SF.$("SFevtdbd")||(SF.lib.i("SFevtmnu",[{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevtdbd",onclick:SF.lib.se,innerHTML:"Dashboard"}]),SF.lib.i("SFevtadm",[{id:"SFevtdbd",className:"SFevtadm",style:{display:"none"},childNodes:[{className:"SFbox",style:{width:"100%"},childNodes:[{nodeName:"hgroup",childNodes:[{nodeName:"h1",id:"SFevtdbdttl"},{id:"SFevtdbdxzp"}]},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.ev.d.r,
innerHTML:"Refresh"},{nodeName:"button",id:"SFevtdbdnew",onclick:function(){SF.ev.p.o()},innerHTML:"Add Registration"},{nodeName:"button",onclick:SF.ev.x.o,innerHTML:"Scan QR Code"},{nodeName:"button",onclick:function(){SF.lib.s("SFevtdbdscl",null)},innerHTML:"Embed/Link"},{nodeName:"a",className:"SFbtn",href:"javascript:void(0)",onclick:SF.ev.d.f,innerHTML:"Export CSV"},SF._st.admin?{nodeName:"button",onclick:SF.ev.d.e,innerHTML:'Export <span data-fld="atg">'+SF._is.atg[SF._st.atg?SF._st.atg:"iif"]}:
null,{nodeName:"button",id:"SFevtdbddel",onclick:SF.ev.d.b,innerHTML:"Cancel Event"},SF._st.admin?{nodeName:"button",id:"SFevtdbdkil",onclick:SF.ev.d.d,style:{display:"none"},innerHTML:"Delete Event"}:null,SF._st.admin?{nodeName:"button",id:"SFevtdbddup",onclick:SF.ev.d.c,innerHTML:"Copy Event"}:null]},{id:"SFevtdbdscl",className:"SFmt2",style:{display:"none"}},{id:"SFevtdbdxcl",className:"SFemp SFmt2",style:{display:"none"},innerHTML:"Event closed"}]},{id:"SFevtdbdnon",className:"SFbox",style:{width:"100%"},
innerHTML:"No registrants yet"},{id:"SFevtdbdusr",className:"SFbox",style:{display:"none",width:"100%",overflowX:"auto"},childNodes:[{className:"SFmb1",childNodes:[{nodeName:"span",innerHTML:"Attendees:"},{nodeName:"span",id:"SFevtdbdcnt"},{nodeName:"span",id:"SFevtdbdcap"},{nodeName:"span",innerHTML:"Registrations:"},{nodeName:"span",id:"SFevtdbdcnu"}]},{className:"SFmb1",childNodes:[{nodeName:"input",id:"SFevtdbdfnd",type:"text",placeholder:"Search name",oninput:SF.ev.r.f},{nodeName:"a",id:"SFevtdbdord",
onclick:SF.ev.r.s,innerHTML:"Sort"},{nodeName:"a",id:"SFevtdbdhid",onclick:SF.ev.d.h,innerHTML:"Hide Voided"}]},{nodeName:"table",className:"SFtbl",childNodes:[{nodeName:"thead",childNodes:[{nodeName:"tr",id:"SFevtdbdhdr",childNodes:[{nodeName:"th",innerHTML:"Chk In"},{nodeName:"th",innerHTML:"Name"},{nodeName:"th"},{nodeName:"th"},{nodeName:"th",childNodes:[{innerHTML:"Total"},{id:"SFevtdbdsum",style:{fontWeight:"bold"}}]}]}]},{nodeName:"tbody",id:"SFevtusr"}]}]}]}]));SF.set("SFevtdbdttl",SF.lib.fr(a.ttl,
{allowed:["br"]}));SF.set("SFevtdbdxzp",SF.lib.fr(a.szp)+(a.ezp?" - "+SF.lib.fr(a.ezp):""));SF.lib.cn("SFevtdbdscl");SF.lib.i("SFevtdbdscl",[{className:"SFmb2",childNodes:[{innerHTML:"Direct link to event page:"},{nodeName:"a",href:(a.wee?a.wee:"event-url-not-setup")+"#!event/"+a.url,target:"_blank",innerHTML:(a.wee?a.wee:"event-url-not-setup")+"#!event/"+a.url}]},{className:"SFmb2",childNodes:[{innerHTML:"Embed registration form on WordPress:"},{className:"SFcbx",innerHTML:'[mw open="!event-register/'+
a.url+'"]'}]},{className:"SFmb2",childNodes:[{innerHTML:"Embed registration form on Wix:"},{className:"SFcbx",innerHTML:'&lt;div id="SFctr" class="SF" data-org="'+SF._st.org+'" data-ini="!event-register/'+a.url+'" data-scl="0"&gt;&lt;/div&gt;'}]},{className:"SFmb2",childNodes:[{innerHTML:"Embed registration form on all other sites:"},{className:"SFcbx",innerHTML:'&lt;div id="SFctr" class="SF" data-org="'+SF._st.org+'" data-ini="!event-register/'+a.url+'" data-scl="0" data-sfi="1"&gt;&lt;script src="https://web.archive.org/web/20250818163513/https://cdn.membershipworks.com/mfm.js"&gt;&lt;/script&gt;&lt;/div&gt;'}]}]);
var h=!SF._st.admin&&SF._st.evg[a.grp].dir&8;SF.lib.s("SFevtdbdnew",!h&&a.tkt);SF.lib.s("SFevtdbddel",!h&&0!==a.cap);SF.lib.s("SFevtdbdkil",!h&&0===a.cap);SF.lib.s("SFevtdbdxcl",0===a.cap);SF.set("SFevtdbdcap","undefined"==typeof a.cap||!1===a.cap?"":" / "+a.cap);if(a.usr)for(h=0;h<a.usr.length;h++){var g=0;if(a.usr[h].tkt)for(b=0;b<a.usr[h].tkt.length;b++)"undefined"==typeof f[b]&&(f[b]=0),f[b]+=a.usr[h].tkt[b],g+=a.usr[h].tkt[b],c+=a.usr[h].tkt[b]*("undefined"==typeof a.tkt[b].mux?1:a.tkt[b].mux);
g&&d++;a.usr[h].sum&&(e+=a.usr[h].sum)}SF.lib.s("SFevtdbdnon",a.usr&&a.usr.length?!1:!0);SF.lib.s("SFevtdbdusr",a.usr&&a.usr.length?!0:!1);SF.set("SFevtdbdcnu",d);SF.set("SFevtdbdcnt",c);SF.set("SFevtdbdsum",SF.lib.fa(e,a.cur));SF.set("SFevtdbddel","Cancel Event &amp; "+(e?"Refund":"Void")+" All");if(a.tkt)for(h=0;h<a.tkt.length;h++)b="undefined"==typeof a.ort||"undefined"==typeof a.ort[h]?h:a.ort[h],(g=SF.$("SFevtdbdtkt"+b))||SF.lib.i("SFevtdbdhdr",[g=SF.lib.n({nodeName:"th",id:"SFevtdbdtkt"+b,data:{id:b},
childNodes:[{},{style:{fontWeight:"bold"}}]})]),SF.set(g.childNodes[0],SF.lib.fr(a.tkt[b].lbl)),SF.set(g.childNodes[1],("undefined"==typeof f[b]?0:f[b])+("undefined"==typeof a.tkt[b].cap||!1===a.tkt[b].cap?"":" / "+a.tkt[b].cap))};SF.ev.d.r=function(){var a=SF.d.get(SF.$("SFevtadm"));SF.lib.xhr("GET","v2/event/"+a.eid,{admin:!0}).then(function(b){SF.d.set(SF.$("SFevtadm"),b);SF.ev.d.i();SF.ev.r.i();SF.ev.j.i();SF.ev.b.i();SF.ev.w.i();SF.ev.v.i();SF.ev.u.i();SF.ev.a.i();SF.lib.fc("SFevtdbd")}).catch(SF.lib.alr)};
SF.ev.d.h=function(a){var b="Show All"==SF.get("SFevtdbdhid");if(a)SF.set("SFevtdbdhid",b?"Hide Voided":"Show All"),SF.ev.r.f();else return b};
SF.ev.d.f=function(a){var b=SF.d.get(SF.$("SFevtadm")),c,d=[],e=!1,f=[];if(b.tkt)for(c=0;c<b.tkt.length;c++){var h="undefined"==typeof b.ort||"undefined"==typeof b.ort[c]?c:b.ort[c];var g=b.tkt[h];g.reg&&(e=!0);d.push({nodeName:"input",type:"checkbox",name:"tkt["+h+"]",checked:!0,innerHTML:SF.lib.fr(g.lbl)+("undefined"!=typeof g.cap&&0===g.cap?" (deleted)":"")})}if(d.length)if(!e&&2>d.length)a.currentTarget.href="https://web.archive.org/web/20250818163513/https://api.membershipworks.com/v1/csv?SF="+SF.lib.gs()+"&evt="+b.eid+(SF.ev.d.h()?"&hid=1":
"");else{a.currentTarget.href="javascript:void(0)";if(e&&b.ssn)for(c=0;c<b.ssn.length;c++)h="undefined"==typeof b.ors||"undefined"==typeof b.ors[c]?c:b.ors[c],g=b.ssn[h],f.push({nodeName:"input",type:"checkbox",name:"ssn["+h+"]",innerHTML:SF.lib.fr(g.lbl)+("undefined"!=typeof g.cap&&0===g.cap?" (deleted)":"")});SF.lib.dg("SFevtdlg",{role:"form",childNodes:[e?{nodeName:"h4",innerHTML:"Registration data to include"}:null,e?{className:"SFmb1",childNodes:[{nodeName:"input",type:"checkbox",name:"alt[]",
value:1,checked:!0,innerHTML:"Primary registration information"},{nodeName:"input",type:"checkbox",name:"alt[]",value:2,checked:!0,innerHTML:"Ticket registration questions"}]}:null,{nodeName:"h4",innerHTML:"Export only registrations with these tickets"},{className:"SFmb1",childNodes:d},f.length?{nodeName:"h4",innerHTML:"Export only registrations with these sessions"}:null,f.length?{className:"SFmb1",childNodes:f}:null,{className:"SFbtx",childNodes:[{nodeName:"a",className:"SFbtn",href:"javascript:void(0)",
onclick:function(){var k=SF.lib.f("SFevtdlg"),m=parseInt((new Date("1/1/2000")).getTime()/1E3);"undefined"!=typeof k.alt&&(k.alt=k.alt.reduce(function(l,n){return l+n},0));if("undefined"!=typeof k.alt&&!k.alt||k.tkt.every(function(l){return!l}))return!1;k.tkt.every(function(l){return l})&&delete k.tkt;k.ssn&&k.ssn.every(function(l){return l})&&delete k.ssn;this.href="https://web.archive.org/web/20250818163513/https://api.membershipworks.com/v1/csv?SF="+SF.lib.gs()+(m?"&_rt="+m:"")+"&evt="+b.eid+"&"+SF.lib.tq(k)+(SF.ev.d.h()?"&hid=1":"")+(SF.get("SFevtusr",
"data-ord")?"&ord="+SF.get("SFevtusr","data-ord"):"");setTimeout(function(){SF.lib.dg("SFevtdlg",!1)},500)},innerHTML:"Export"},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Cancel"}]}]},{target:a.currentTarget,placement:"v"});return!1}else a.currentTarget.href="javascript:void(0)"};
SF.ev.d.e=function(a){var b=SF.d.get(SF.$("SFevtadm"));"iif"==SF._st.atg?SF.lib.dg("SFevtdlg",{role:"form",childNodes:[{nodeName:"input",type:"checkbox",checked:!0,name:"iif[]",value:"inv",innerHTML:"Generate Invoices"},{nodeName:"input",type:"checkbox",checked:!0,name:"iif[]",value:"pay",innerHTML:"Export Payments"},{nodeName:"input",type:"checkbox",checked:!0,name:"iif[]",value:"fee",innerHTML:"Export Fees"},{className:"SFbtx",childNodes:[{nodeName:"a",className:"SFbtn",href:"javascript:void(0)",
onclick:function(){var c=SF.lib.f("SFevtdlg");if(!c.iif.length)return!1;this.href="https://web.archive.org/web/20250818163513/https://api.membershipworks.com/v1/csv?SF="+SF.lib.gs()+"&_rt="+parseInt((new Date("1/1/2000")).getTime()/1E3)+"&evt="+b.eid+"&iif="+c.iif.join(",");setTimeout(function(){SF.lib.dg("SFevtdlg",!1)},500)},innerHTML:"Export"},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Cancel"}]}]},{target:a.currentTarget,placement:"v"}):SF._st.admin&&SF.lib.xhr("GET","v1/csv?"+SF._st.atg+"&evt="+b.eid).then(SF.at.e).catch(SF.lib.alr)};
SF.ev.d.c=function(a){var b=a.currentTarget;(new Promise(function(c){SF.lib.dg("SFevtdlg",{childNodes:[{innerHTML:"Copy event to"},{nodeName:"input",type:"date",name:"sdp",required:!0,"aria-label":"Copy Event To Date",placeholder:"Date"},{className:"SFmt1",childNodes:[{nodeName:"button",onclick:function(){SF.v("SFevtdlg")&&c(!0)},innerHTML:"Copy"},{nodeName:"button",onclick:function(){c(!1)},innerHTML:"Cancel"}]}]},{target:b,placement:"v",overflow:"visible"})})).then(function(c){var d=SF.lib.f("SFevtdlg");
SF.lib.dg("SFevtdlg",!1);if(c){c=SF.d.get(SF.$("SFevtadm"));var e=new Date(1E3*c.sdp);e=new Date(e.getFullYear(),e.getMonth(),e.getDate());d._tt=d.sdp-parseInt(e.getTime()/1E3);delete d.sdp;e=SF.lib.fg(c.sdp+d._tt);d.szp=SF.lib.fy(c.sdp+d._tt)+("12:00am"==e?"":", "+e+" "+SF.lib.fq(c.sdp+d._tt));c.edp&&(e=SF.lib.fg(c.edp+d._tt),d.ezp=SF.lib.fy(c.edp+d._tt)+("12:00am"==e?"":", "+e+" "+SF.lib.fq(c.edp+d._tt)));d.ref={eid:c.eid};SF._st._do="Duplicating event";return SF.lib.xhr("POST","v2/event",d,{admin:!0}).then(function(f){SF.$("SFevtcal")&&
(SF.es.d.j(f),SF.es.d.g());SF.$("SFevtlst")&&(SF.es.l.i(f),SF.es.l.g());SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"p",childNodes:[{nodeName:"span",innerHTML:"Event copied!"},{nodeName:"a",href:"#event/admin/"+f.eid,innerHTML:"Click here to open new event"}]},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Close"}]},{target:b,placement:"v"})})}}).catch(SF.lib.alr)};
SF.ev.d.b=function(a){var b=SF.d.get(SF.$("SFevtadm")),c=[];(new Promise(function(d){SF.lib.s("SFevtdbdnon")?d(!0):SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h4",innerHTML:"Warning"},{innerHTML:"This will void all registrations and trigger refunds for all payments previously processed."},{innerHTML:'Please type "CONFIRM" below to continue.'},{nodeName:"input",type:"text",name:"val",required:!0,dataset:{rxp:"^CONFIRM$"},autocomplete:"off"},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.v("SFevtdlg")&&
d(!0)},innerHTML:"Continue"},{nodeName:"button",onclick:function(){d(!1)},innerHTML:"Cancel"}]}]},{target:a.currentTarget,placement:"v"})})).then(function(d){SF.lib.dg("SFevtdlg",!1);if(!d)return Promise.reject(null);SF._st._do="Closing event";return SF.lib.xhr("PATCH","v2/event/"+b.eid,{cap:0,lim:0},{admin:!0})}).then(function(d){SF.lib.ml(b,d);SF.set("SFevtdatcap",0);SF.set("SFevtdatlim",0);SF.lib.s("SFevtdbdxcl",!0);SF.lib.s("SFevtdbddel",!1);SF.lib.s("SFevtdbdkil",!0)}).then(function(){if(b.usr)return b.usr.reduce(function(d,
e,f){if(!e._id||!e.tkt||!e.tkt.reduce(function(h,g){return h+g},0))return d;SF.set(SF.$("SFevtusr_"+f).childNodes[3],'<i class="SFspn"></i>');return d.then(function(){return SF.lib.xhr("PATCH","v2/event/"+b.eid+"/registration/"+e._id,{itm:"null",sum:0,tax:0},{admin:!0,showSpinner:!1,handleErrors:!1})}).then(function(h){h&&!h.error?(SF.lib.sp("SFevtadm"),SF.lib.ml(b.usr[f],h,{only:"_id uid nam ctc biz eml tkt alt sum due chk sid nte".split(" ")}),SF.ev.r.j(f),SF.lib.rt("SFevtadm")):(c.push({innerHTML:b.usr[f].nam+
" - "+(h?h.error:"No response from server")}),SF.set(SF.$("SFevtusr_"+f).childNodes[3],"Error"));SF.$("SFevtusr_"+f).childNodes[3].setAttribute("aria-live","polite")})},Promise.resolve())}).then(function(){SF.ev.d.i();c.length?SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h4",innerHTML:"Errors"},{childNodes:c}]}):SF.lib.fc("SFevtdbdkil")}).catch(SF.lib.alr)};
SF.ev.d.d=function(a){var b=SF.d.get(SF.$("SFevtadm"));(new Promise(function(c){SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h4",innerHTML:"Warning"},{innerHTML:"This will delete the event and all associated registration, timeline &amp; financial data."},{innerHTML:'Please type "CONFIRM" below to continue.'},{nodeName:"input",type:"text",name:"val",required:!0,dataset:{rxp:"^CONFIRM$"},autocomplete:"off"},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.v("SFevtdlg")&&c(!0)},
innerHTML:"Delete"},{nodeName:"button",onclick:function(){c(!1)},innerHTML:"Cancel"}]}]},{target:a.currentTarget,placement:"v"})})).then(function(c){SF.lib.dg("SFevtdlg",!1);if(c)return SF._st._do="Deleting event",SF.lib.xhr("DELETE","v2/event/"+b.eid,{admin:!0}).then(function(d){d=SF.$("SFevtmnu").firstChild.href.split("#")[1];SF.ev.c();SF.$("SFevtcal")&&(SF.lib.fe('#SFevtcal [data-eid="'+b.eid+'"]',SF.lib.dn),SF.es.d.g());SF.$("SFevtlst")&&(SF.lib.dn("SFevt"+b.eid),SF.es.l.g());SF.open(d)})}).catch(SF.lib.alr)};
SF.ev.r={};SF.ev.r.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b;SF.lib.cn("SFevtusr");if(a.usr&&a.usr.length){for(b=0;b<a.usr.length;b++)SF.ev.r.j(b);SF.ev.r.s();SF.ev.r.f()}};
SF.ev.r.j=function(a){var b=SF.d.get(SF.$("SFevtadm")),c=SF.$("SFevtdbdhdr"),d,e;var f=b.usr[a];(d=SF.$("SFevtusr_"+a))?SF.lib.cn(d):SF.lib.i("SFevtusr",[d=SF.lib.n({nodeName:"tr",id:"SFevtusr_"+a,className:"SFevtusr"})]);SF.d.set(d,{idx:a,_id:f._id});var h=f.tkt.reduce(function(n,q){return n+q},0);var g=[{nodeName:"td",childNodes:[{nodeName:"input",type:"checkbox",title:"Check In",checked:f.chk,onchange:SF.ev.p.b}]},{nodeName:"td",style:{whiteSpace:"nowrap"},childNodes:[{nodeName:"a",href:f.eml?
"mailto:"+SF.lib.fr(f.eml):null,innerHTML:SF.lib.fr(f.ctc?f.ctc+" ("+f.nam+")":f.nam+(f.biz?" ("+f.biz+")":""))},f.uid?{nodeName:"a",href:"#!biz/id/"+f.uid,title:"View Account",childNodes:[{nodeName:"i",className:"SFicousr"}]}:SF._st.admin&&f._id?{nodeName:"a",title:"Create Account",onclick:SF.ev.p.c,childNodes:[{nodeName:"i",className:"SFicoadd"}]}:null]},{nodeName:"td",childNodes:[f._id&&SF.lib.s("SFevtdbdnew")?{nodeName:"a",title:"Notes",onclick:SF.ev.p.e,childNodes:[{nodeName:"i",className:"SFicoatc"+
(f.nte?" SFemp":"")}]}:null]},{nodeName:"td",childNodes:[f._id&&SF.lib.s("SFevtdbdnew")?h?{id:"SFevtusract"+f._id,nodeName:"a",onclick:SF.ev.p.p,innerHTML:"Manage"}:{nodeName:"span",innerHTML:"Voided"}:null]},{nodeName:"td",className:f.due?"SFemp":"",innerHTML:f.sum?SF.lib.fa(f.sum,b.cur):"-"}];var k=[];for(e=c.childNodes[5];e;e=e.nextSibling){var m=SF.d.get(e).id;g.push({nodeName:"td",className:"SF1ns",innerHTML:"undefined"!=typeof f.tkt[m]&&f.tkt[m]?f.tkt[m]:"\u00b7"});f.tkt[m]&&k.push(f.tkt[m]+
" X "+b.tkt[m].lbl)}g.push({nodeName:"td",className:"SF1ds",innerHTML:"Registration: "+k.join(", ")});SF.lib.i(d,g);var l=0;if(h&&f.alt&&(1<f.alt.length||f.alt[0].nam&&f.alt[0].nam!=f.nam))for(;l<f.alt.length;l++)if(f.alt[l].nam||f.alt[l].ctc||f.alt[l].biz){(d=SF.$("SFevtusr_"+a+"_"+l))?SF.lib.cn(d):SF.lib.i("SFevtusr",[d=SF.lib.n({nodeName:"tr",id:"SFevtusr_"+a+"_"+l,className:"SFevtalt"})]);SF.d.set(d,{idx:a,_id:f._id,alt:l});g=[{nodeName:"td",childNodes:[{nodeName:"input",type:"checkbox",checked:f.alt[l].chk,
title:"Check In (Secondary Registrant)",onchange:SF.ev.p.b}]},{nodeName:"td",style:{whiteSpace:"nowrap"},childNodes:[{nodeName:"a",href:f.alt[l].eml?"mailto:"+SF.lib.fr(f.alt[l].eml):null,innerHTML:SF.lib.fr(f.alt[l].ctc?f.alt[l].ctc+(f.alt[l].nam?" ("+f.alt[l].nam+")":""):f.alt[l].nam?f.alt[l].nam+(f.alt[l].biz?" ("+f.alt[l].biz+")":""):f.alt[l].biz)}]},{nodeName:"td"},{nodeName:"td"},{nodeName:"td"}];k=[];for(e=c.childNodes[5];e;e=e.nextSibling)m=SF.d.get(e).id,g.push({nodeName:"td",className:"SF1ns",
innerHTML:f.alt[l].tkt==m?"1":"\u00b7"}),f.tkt[m]&&k.push(f.tkt[m]+" X "+b.tkt[m].lbl);g.push({nodeName:"td",className:"SF1ds",innerHTML:"Associated Ticket: "+k.join(", ")});SF.lib.i(d,g)}for(;e=SF.$("SFevtusr_"+a+"_"+l);l++)SF.lib.dn(e)};
SF.ev.r.s=function(a){if(a){var b=SF.$("SFevtusr").querySelectorAll(".SFevtalt").length;(new Promise(function(n){SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){n("idx")},innerHTML:"Sort oldest to newest"},{nodeName:"button",onclick:function(){n("idy")},innerHTML:"Sort newest to oldest"},{nodeName:"button",onclick:function(){n("nam")},innerHTML:"Sort by name"+(b?" - primary":"")},{nodeName:"button",onclick:function(){n("lnm")},innerHTML:"Sort by last name"+
(b?" - primary":"")},b?{nodeName:"button",onclick:function(){n("naa")},innerHTML:"Sort by name - all"}:null,b?{nodeName:"button",onclick:function(){n("lna")},innerHTML:"Sort by last name - all"}:null]},{target:a.currentTarget,placement:"h"})})).then(function(n){SF.lib.dg("SFevtdlg",!1);SF.set("SFevtusr","data-ord",n);SF.ev.r.s()})}else{var c=SF.d.get(SF.$("SFevtadm")),d=SF.$("SFevtusr"),e=[],f=SF.get("SFevtusr","data-ord"),h,g,k,m,l;if(c.usr)for(h=0;h<c.usr.length;h++)if(e.push({idx:h,nam:c.usr[h].nam?
c.usr[h].nam:c.usr[h].biz?c.usr[h].biz:"",ctc:c.usr[h].ctc?c.usr[h].ctc:""}),("naa"==f||"lna"==f)&&c.usr[h].alt&&c.usr[h].tkt.reduce(function(n,q){return n+q},0))for(g=0;g<c.usr[h].alt.length;g++)(c.usr[h].alt[g].nam||c.usr[h].alt[g].ctc||c.usr[h].alt[g].biz)&&e.push({idx:h+"_"+g,nam:c.usr[h].alt[g].nam?c.usr[h].alt[g].nam:c.usr[h].alt[g].biz?c.usr[h].alt[g].biz:"",ctc:c.usr[h].alt[g].ctc?c.usr[h].alt[g].ctc:""});"nam"==f||"naa"==f?e.sort(function(n,q){return n.nam.toLowerCase()>q.nam.toLowerCase()?
1:n.nam.toLowerCase()<q.nam.toLowerCase()?-1:0}):"lnm"==f||"lna"==f?e.sort(function(n,q){n=SF.lib.en(n.ctc||n.nam||"").last.toLowerCase();q=SF.lib.en(q.ctc||q.nam||"").last.toLowerCase();return n>q?1:n<q?-1:0}):"idy"==f?e.sort(function(n,q){return q.idx-n.idx}):e.sort(function(n,q){return n.idx-q.idx});for(k=m=0;m<e.length;m++)if(h=e[m].idx,l=SF.$("SFevtusr_"+h))if(SF.lib.i(d,[l],d.childNodes[k++]),"naa"!=f&&"lna"!=f&&c.usr[h].alt&&c.usr[h].tkt.reduce(function(n,q){return n+q},0))for(g=0;g<c.usr[h].alt.length;g++)(l=
SF.$("SFevtusr_"+h+"_"+g))&&SF.lib.i(d,[l],d.childNodes[k++])}};
SF.ev.r.f=function(){var a=SF.d.get(SF.$("SFevtadm")),b=SF.ev.d.h(),c=SF.get("SFevtusr","data-ord"),d,e,f;if(d=SF.lib.ft(SF.get("SFevtdbdfnd")).toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,""))try{d=new RegExp("^"+d+"|\\s"+d)}catch(m){d=""}if(a.usr)for(e=0;e<a.usr.length;e++){var h=a.usr[e].tkt.reduce(function(m,l){return m+l},0);var g=b&&!h?!1:d?a.usr[e].nam&&a.usr[e].nam.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:
a.usr[e].ctc&&a.usr[e].ctc.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:a.usr[e].biz&&a.usr[e].biz.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:a.usr[e].sid&&a.usr[e].sid.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:!1:!0;SF.lib.s("SFevtusr_"+e,g);if(a.usr[e].alt&&a.usr[e].tkt.reduce(function(m,l){return m+l},0))for(f=0;f<a.usr[e].alt.length;f++){var k=
b&&!h?!1:d?g&&"naa"!=c&&"lna"!=c?!0:a.usr[e].alt[f].nam&&a.usr[e].alt[f].nam.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:a.usr[e].alt[f].ctc&&a.usr[e].alt[f].ctc.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:a.usr[e].alt[f].biz&&a.usr[e].alt[f].biz.toLowerCase().replace(/\s+/g," ").replace(/[\.\+\*\?\^\$\(\)\[\]\{\}\|\\\/]/g,"").match(d)?!0:!1:!0;SF.lib.s("SFevtusr_"+e+"_"+f,k);k&&"naa"!=c&&"lna"!=c&&
SF.lib.s("SFevtusr_"+e,!0)}}};SF.ev.p={};SF.ev.p.u=function(a,b){var c=SF.d.get(SF.$("SFevtadm")),d;var e=SF.lib.c(b,{only:"_id uid nam ctc biz eml tkt sum due chk sid".split(" ")});b.nte&&(e.nte=1);if(b.alt)for(e.alt=[],d=0;d<b.alt.length;d++)e.alt.push(SF.lib.c(b.alt[d],{only:"nam ctc biz eml tkt idx chk".split(" ")}));SF.lib.sp("SFevtadm");null===a?(c.usr?c.usr.push(e):c.usr=[e],a=c.usr.length-1):c.usr[a]=e;SF.ev.r.j(a);SF.ev.d.i();SF.lib.rt("SFevtadm")};
SF.ev.p.b=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.d.get(SF.lib.fp(a.currentTarget,"tr"));var d={};d["undefined"!=typeof c.alt?"alt["+c.alt+"][chk]":"chk"]=SF.get(a.currentTarget)?1:0;SF.lib.xhr("PATCH","v2/event/"+b.eid+"/registration/"+c._id,d,{admin:!0}).then(function(e){SF.ev.p.u(c.idx,e);SF.lib.fc(SF.$("SFevtusr_"+c.idx).childNodes[0])}).catch(SF.lib.alr)};
SF.ev.p.p=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,"tr");var d=SF.d.get(c).idx;b=b.usr[d];c=0<(b.sum?b.sum:0)-(b.due?b.due:0);SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){SF.ev.p.v(d,{itm:"null",sum:0,tax:0})},innerHTML:c?b.sid?"Void &amp; issue refund":"Void &amp; mark as refunded":"Void"},c?{nodeName:"button",onclick:function(){SF.ev.p.v(d,
{itm:"null"})},innerHTML:b.sid?"Void without refund":"Void &amp; keep payment record"}:null,{},SF._st.admin?{nodeName:"button",onclick:function(){SF.ev.p.l(d)},innerHTML:"Link registration to account"}:null,{nodeName:"button",onclick:function(){SF.ev.p.o(d)},innerHTML:"Edit registration"+(c?" / partial refund":"")},b.due?{}:null,b.due?{nodeName:"button",onclick:function(){SF.ev.p.r(d)},innerHTML:"Record payment received"}:null]},{target:a.currentTarget,placement:"v"})};
SF.ev.p.o=function(a){var b=SF.d.get(SF.$("SFevtadm"));b.tkt&&b.tkt.length?"undefined"==typeof a||b.usr[a]._id?(new Promise(function(c){c("undefined"==typeof a?null:SF.lib.xhr("GET","v2/event/"+b.eid+"/registration/"+b.usr[a]._id,{admin:!0}))})).then(function(c){SF.lib.dg("SFevtdlg",{childNodes:[c?{innerHTML:"Posted: "+SF.lib.fd(c._dp)+" "+SF.lib.fg(c._dp)}:null,{id:"SFevtpay",style:{height:"auto"}}]},{width:"800px",height:"800px",dismiss:!0});return SF.er.i(b,c)}).catch(SF.lib.alr):SF.lib.alr("This legacy record cannot be edited"):
SF.lib.alr("There are no tickets available")};
SF.ev.p.r=function(a){var b=SF.d.get(SF.$("SFevtadm"));(new Promise(function(c){SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h4",innerHTML:"Confirm payment received?"},{nodeName:"button",onclick:function(){c(!0)},innerHTML:"Confirm"},{nodeName:"button",onclick:function(){c(!1)},innerHTML:"Cancel"}]},{target:SF.$("SFevtusr_"+a).childNodes[3],placement:"v"})})).then(function(c){SF.lib.dg("SFevtdlg",!1);if(c)return SF._st._do="Recording payment",SF.lib.xhr("PATCH","v2/event/"+b.eid+"/registration/"+
b.usr[a]._id,{due:0,_er:1},{admin:!0}).then(function(d){SF.ev.p.u(a,d);SF.lib.fc(SF.$("SFevtusr_"+a).childNodes[3])})}).catch(SF.lib.alr)};
SF.ev.p.v=function(a,b){var c=SF.d.get(SF.$("SFevtadm"));var d=c.usr[a];var e=0<(d.sum?d.sum:0)-(d.due?d.due:0);(new Promise(function(f){SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h4",innerHTML:"Confirm void registration"+(e?"undefined"==typeof b.sum?" without refund":" and refund":"")+"?"},e?{className:"SFmb1",innerHTML:"undefined"==typeof b.sum?d.sid?"Payment made by registrant will not be refunded.":"Payment that was previously recorded will be retained.":d.sid?"Full refund will be processed through payment gateway.":
"Payment that was previously recorded will be marked as refunded."}:null,{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Confirm"},{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"}]},{target:SF.$("SFevtusr_"+a).childNodes[3],placement:"v"})})).then(function(f){SF.lib.dg("SFevtdlg",!1);if(f)return SF._st._do="Voiding registration",SF.lib.xhr("PATCH","v2/event/"+c.eid+"/registration/"+d._id,b,{admin:!0}).then(function(h){SF.ev.p.u(a,h);SF.lib.fc(SF.$("SFevtusr_"+a).childNodes[3])})}).catch(SF.lib.alr)};
SF.ev.p.l=function(a){var b=SF.d.get(SF.$("SFevtadm"));SF.lib.dg("SFevtdlg",!1);SF.co.f(SF.$("SFevtusr_"+a).childNodes[3]).then(function(c){if(c)return SF._st._do="Linking transaction",SF.lib.xhr("PATCH","v2/event/"+b.eid+"/registration/"+b.usr[a]._id,{uid:c.parent?c.parent.uid:c.uid},{admin:!0}).then(function(d){SF.ev.p.u(a,d);SF.lib.fc(SF.$("SFevtusr_"+a).childNodes[3])})}).catch(SF.lib.alr)};
SF.ev.p.c=function(a){var b=SF.d.get(SF.$("SFevtadm")),c,d;var e=SF.d.get(SF.lib.fp(a.currentTarget,"tr"));(new Promise(function(f){var h=[],g,k=!1;for(g=0;SF._st.dek[g];g++)h.push({nodeName:"option",value:SF._st.dek[g].did,selected:SF.fd._st&&SF.fd._st.lad&&SF.fd._st.lad==SF._st.dek[g].did?!0:!1,innerHTML:SF.lib.fr(SF._st.dek[g].lbl)});if(b.usr[e.idx].alt)for(g=0;g<b.usr[e.idx].alt.length;g++)if(b.usr[e.idx].alt[g].nam&&b.usr[e.idx].alt[g].nam!=b.usr[e.idx].nam||b.usr[e.idx].alt[g].ctc||b.usr[e.idx].alt[g].biz)k=
!0;SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h4",innerHTML:"Create account in folder"},{childNodes:[{nodeName:"select",name:"did",childNodes:h}]},k?{nodeName:"input",type:"checkbox",name:"alt",innerHTML:"Add secondary ticket registrants as contacts"}:null,{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Create"},{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"}]}]},{target:a.currentTarget,placement:"v"})})).then(function(f){c=SF.lib.f("SFevtdlg");
SF.lib.dg("SFevtdlg",!1);if(!f)return Promise.reject(null);SF.fd._st&&(SF.fd._st.lad=c.did);return SF.lib.xhr("GET","v2/event/"+b.eid+"/registration/"+e._id,{admin:!0})}).then(function(f){var h,g={};if(f.uid)return SF.ev.p.u(e.idx,f),Promise.reject("Account already linked");d=f;for(h=0;h<b._st.evt.length;h++)b._st.evt[h]._id&&"undefined"!=typeof f[b._st.evt[h]._id.slice(0,3)]&&(g[b._st.evt[h]._id.slice(0,3)]=f[b._st.evt[h]._id.slice(0,3)]);g.dek=[{did:c.did,_do:"add"}];return SF.lib.xhr("POST","v2/account",
g,{admin:!0})}).then(function(f){d.uid=f.uid;SF.ev.p.u(e.idx,d);if(c.alt)return d.reduce(function(h,g){if(!(g.nam||g.ctc||g.eml||g.phn||g.adr))return h;var k={tid:f.uid,crm:0};g.nam?k.nam=g.nam:g.ctc&&(k.nam=g.ctc);g.eml&&(k.eml=g.eml);g.phn&&(k.phn=g.phn);g.adr&&(k.adr=g.adr);return h.then(function(){return SF.lib.xhr("POST","v1/alt",k,{handleErrors:!1})})},Promise.resolve())}).then(function(){SF.lib.fc(SF.$("SFevtusr_"+e.idx).childNodes[1].lastChild)}).catch(SF.lib.alr)};
SF.ev.p.e=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.d.get(SF.lib.fp(a.currentTarget,"tr"));(new Promise(function(d){b.usr[c.idx].nte||d(null);SF._st._do="Retrieving note";d(SF.lib.xhr("GET","v2/event/"+b.eid+"/registration/"+c._id,{admin:!0}))})).then(function(d){return new Promise(function(e){SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"h3",innerHTML:"Note"},{nodeName:"textarea",name:"nte",style:{display:"block",width:"500px",height:"100px"}},{className:"SFbtx",childNodes:[{nodeName:"button",
onclick:function(){e(!0)},innerHTML:"Save"},{nodeName:"button",onclick:function(){e(!1)},innerHTML:"Cancel"}]}]},{target:a.currentTarget,placement:"v"});d&&SF.lib.f("SFevtdlg",d)})}).then(function(d){var e=SF.lib.f("SFevtdlg");SF.lib.dg("SFevtdlg",!1);if(d)return SF._st._do="Saving note",SF.lib.xhr("PATCH","v2/event/"+b.eid+"/registration/"+c._id,e,{admin:!0}).then(function(f){SF.ev.p.u(c.idx,f);SF.lib.fc(SF.$("SFevtusr_"+c.idx).childNodes[2])})}).catch(SF.lib.alr)};SF.ev.x={};
SF.ev.x.o=function(){SF.$("SFevtqecclz")||window.addEventListener("keydown",SF.ev.x.i);SF.lib.dg("SFevtdlg",{childNodes:[{id:"SFevtqec",data:{dat:""},childNodes:[{nodeName:"h3",innerHTML:"Awaiting Scan..."},{className:"SFbtx",childNodes:[{nodeName:"button",id:"SFevtqecclz",onclick:SF.ev.x.c,innerHTML:"Close"}]}]},{nodeName:"button",className:"SFclz",title:"Close",onclick:SF.ev.x.c}]},{dismiss:!1});SF.d.set(SF.$("SFevtqec"),{dat:""})};
SF.ev.x.c=function(){SF.$("SFevtqecclz")&&window.removeEventListener("keydown",SF.ev.x.i);SF.$("SFevtqec")&&SF.lib.dg("SFevtdlg",!1)};SF.ev.x.i=function(a){var b=SF.d.get(SF.$("SFevtqec")),c;1==a.key.length?(b.dat+=a.key,"https://web.archive.org/web/20250818163513/https://membershipworks.com/a/#ec/".match(b.dat.slice(0,33))||(b.dat="")):13==a.keyCode&&((c=b.dat.match(/https:\/\/web.archive.org\/web\/20250818163513\/https:\/\/membershipworks.com\/a\/#ec\/([a-z0-9]{20,})$/))&&SF.ev.x.b(c[1]),b.dat="")};
SF.ev.x.b=function(a,b){b=void 0===b?!0:b;var c=SF.$("SFevtadm")?SF.d.get(SF.$("SFevtadm")):!1,d,e,f={};if((d=SF.lib.pl(parseInt(a.slice(0,10),36).toString(16),12,"0")+SF.lib.pl(parseInt(a.slice(10,20),36).toString(16),12,"0"))&&24==d.length)if(c&&c.eid!=d)SF.lib.alr("Check-in code does not match current event");else if((e=SF.lib.pl(parseInt(a.slice(20,30),36).toString(16),12,"0")+SF.lib.pl(parseInt(a.slice(30,40),36).toString(16),12,"0"))&&24==e.length){var h=a.slice(40);f[h?"alt["+parseInt(h,36)+
"][chk]":"chk"]=b?1:0;SF.lib.xhr("PATCH","v2/event/"+d+"/registration/"+e+(c?"":"?_xd"),f,{admin:!0}).then(function(g){var k,m,l,n,q=!1,t=[];var u={};var v=[],x=[];if(c&&c.eid==d&&c.usr)for(k=0;k<c.usr.length;k++)if(c.usr[k]._id&&c.usr[k]._id==e){SF.ev.p.u(k,g);break}c||(c=g._xd,c.eid=d);if(g.alt)for(k=0;k<g.alt.length;k++)if(g.alt[k].nam||g.alt[k].ctc||g.alt[k].biz){q=!0;break}for(m=0;m<c.tkt.length;m++)if(k="undefined"==typeof c.ort||"undefined"==typeof c.ort[m]?m:c.ort[m],"undefined"!=typeof c.tkt[k]&&
g.tkt[k]){var w=c.tkt[k].amt||0;if(g.itm)for(l=0;l<g.itm.length;l++)"undefined"!=typeof g.itm[l].tkt&&g.itm[l].tkt==k&&(w=g.itm[l].amt);t.push({nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:SF.lib.fr(c.tkt[k].lbl)},{nodeName:"td",innerHTML:SF.lib.fa(g.sum?g.sum:0,c.cur)},{nodeName:"td",innerHTML:g.tkt[k]}]})}if(c.ssn&&g.alt)for(k=0;k<g.alt.length;k++)if("undefined"!=typeof g.alt[k].ssn)for(m=0;m<g.alt[k].ssn.length;m++)"undefined"!=typeof c.ssn[g.alt[k].ssn[m]]&&("undefined"==typeof u[g.alt[k].ssn[m]]&&
(u[g.alt[k].ssn[m]]=0),u[g.alt[k].ssn[m]]++);if(c.ssn)for(m=0;m<c.ssn.length;m++)if(k="undefined"==typeof c.ors||"undefined"==typeof c.ors[m]?m:c.ors[m],"undefined"!=typeof c.ssn[k]&&"undefined"!=typeof u[k]){w=c.ssn[k].amt||0;if(g.itm)for(l=0;l<g.itm.length;l++)"undefined"!=typeof g.itm[l].ssn&&g.itm[l].ssn==k&&(w=g.itm[l].amt);t.push({nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:SF.lib.fr(c.ssn[k].lbl)},{nodeName:"td",innerHTML:SF.lib.fa(w,c.cur)},{nodeName:"td",innerHTML:u[k]}]})}for(m=0;m<
c.tkt.length;m++)if(k="undefined"==typeof c.ort||"undefined"==typeof c.ort[m]?m:c.ort[m],"undefined"!=typeof c.tkt[k]&&"undefined"!=typeof c.tkt[k].reg&&g.tkt[k])for(l=0;l<g.tkt[k];l++){w=!1;if(g.alt)for(n=u=0;u<g.alt.length;u++)g.alt[u].tkt==k&&n++==l&&(w=u);if(!1!==w){v.push({nodeName:"tr",className:h&&w==parseInt(h,36)?"SFhlt":"",childNodes:[{nodeName:"td"},{nodeName:"td",innerHTML:"<strong>Ticket: "+SF.lib.fr(c.tkt[k].lbl)+" #"+(l+1)+"</strong>"}]});q&&(g.alt[w].nam||g.alt[w].ctc||g.alt[w].biz)&&
v.push({nodeName:"tr",className:h&&w==parseInt(h,36)?"SFhlt":"",childNodes:[{nodeName:"td"},{nodeName:"td",innerHTML:g.alt[w].chk?"Checked in at "+SF.lib.fd(g.alt[w].chk)+" "+SF.lib.fg(g.alt[w].chk):"Not checked in"}]});for(u=0;u<c.tkt[k].reg.length;u++){if("undefined"==typeof g.alt[w].reg||"undefined"==typeof g.alt[w].reg[u])n="";n="undefined"!=typeof c.tkt[k].reg[u].typ&&"s"==c.tkt[k].reg[u].typ?c.ssn&&"undefined"!=typeof c.ssn[g.alt[w].reg[u]]?c.ssn[g.alt[w].reg[u]].lbl:"":SF.lib.ff(g.alt[w].reg[u]);
v.push({nodeName:"tr",className:h&&w==parseInt(h,36)?"SFhlt":"",childNodes:[{nodeName:"td",innerHTML:c.tkt[k].reg[u].lbl||""},{nodeName:"td",innerHTML:n}]})}v.push({nodeName:"tr",className:"SFsep"})}}if(m=c.tpl&&c.tpl.evt||c._st&&c._st.evt)for(k=0;k<m.length;k++)m[k]._id&&x.push({nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:m[k].lbl?m[k].lbl:""},{nodeName:"td",innerHTML:"undefined"==typeof g[m[k]._id]?"":SF.lib.ff(g[m[k]._id])}]});if(c.reg)for(m=0;m<c.reg.length;m++)k="undefined"==typeof c.orr||
"undefined"==typeof c.orr[m]?m:c.orr[m],"undefined"!=typeof c.reg[k]&&x.push({nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:c.reg[k].lbl?c.reg[k].lbl:""},{nodeName:"td",innerHTML:"undefined"==typeof g.reg||"undefined"==typeof g.reg[k]?"":SF.lib.ff(g.reg[k])}]});k=h?g.alt[parseInt(h,36)]:g;SF.lib.dg("SFevtdlg",{childNodes:[{id:"SFevtqec",data:{dat:""},childNodes:[{className:"SFbox",childNodes:[SF.$("SFevtqecclz")?{nodeName:"hgroup",childNodes:[{nodeName:"h3",innerHTML:c.ttl},{innerHTML:c.szp}]}:
null,{innerHTML:SF.lib.fr(k.ctc?k.ctc:k.nam?k.nam:k.biz)+(q?h?" (secondary registrant)":" (primary registrant)":"")+(k.chk?" checked in at "+SF.lib.fd(k.chk)+" "+SF.lib.fg(k.chk):" not checked in")}]},{className:"SFbox",childNodes:[{nodeName:"table",className:"SFitn",childNodes:[{nodeName:"thead",childNodes:[{nodeName:"tr",childNodes:[{nodeName:"th"},{nodeName:"th",innerHTML:"Price"},{nodeName:"th",innerHTML:"Qty"}]}]},{nodeName:"tfoot",childNodes:[{nodeName:"tr",childNodes:[{nodeName:"td",className:"SFplh",
childNodes:[{innerHTML:"Registered on "+SF.lib.fd(g._dp)+" "+SF.lib.fg(g._dp)},g.sid?{innerHTML:"Payment ID: "+g.sid}:g.sum&&!g.due?{innerHTML:"Admin marked as paid"}:null]},{nodeName:"td",colspan:"2",childNodes:[g.tax?{childNodes:[{nodeName:"span",innerHTML:SF.lib.fa(g.tax,c.cur)},{nodeName:"span",className:"SFplh",innerHTML:"tax"}]}:null,{childNodes:[{nodeName:"span",innerHTML:SF.lib.fa(g.sum?g.sum:0,c.cur)},{nodeName:"span",className:"SFplh",innerHTML:"total"}]},g.due?{childNodes:[{nodeName:"span",
innerHTML:SF.lib.fa(g.due,c.cur)},{nodeName:"span",className:"SFplh",innerHTML:"amount due"}]}:null]}]}]},{nodeName:"tbody",childNodes:t}]}]},v.length?{className:"SFbox",childNodes:[{nodeName:"table",className:"SFfrm SFtxt",childNodes:[{nodeName:"tbody",childNodes:v}]}]}:null,x.length?{className:"SFbox",childNodes:[{nodeName:"table",className:"SFfrm SFtxt",childNodes:[{nodeName:"tbody",childNodes:x}]}]}:null,{className:"SFbtx",childNodes:[SF.$("SFevtqecclz")?{nodeName:"button",id:"SFevtqecclz",onclick:SF.ev.x.c,
innerHTML:"Close"}:{nodeName:"a",className:"SFbtn",href:"#event/admin/"+c.eid,innerHTML:"Go To Event Dashboard"},b?{nodeName:"button",onclick:function(){SF.ev.x.b(a,!1)},innerHTML:"Undo Check In"}:null]}]},SF.$("SFevtqecclz")?{nodeName:"button",className:"SFclz",title:"Close",onclick:SF.ev.x.c}:null]},{width:"800px",height:"800px",dismiss:!1});g.warn&&SF.lib.alr(g.warn)}).catch(SF.lib.alr)}else SF.lib.alr("Invalid check-in code");else SF.lib.alr("Invalid check-in code")};SF.ev.j={};
SF.ev.j.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b,c,d=[],e,f;SF.$("SFevtnte")||(SF.lib.i("SFevtmnu",[{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevtnte",onclick:SF.lib.se,innerHTML:"Notes"}]),SF.lib.i("SFevtadm",[{id:"SFevtnte",className:"SFevtadm",style:{display:"none"},childNodes:[{id:"SFevtntelst",className:"SFbox SFlst",data:{editor:SF.ev.n.o},childNodes:[{nodeName:"button",id:"SFevtntenew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Note"}]}]}]}]));
if(a.nte)for(b=0;b<a.nte.length;b++)d.push({ttl:a.nte[b].ttl?a.nte[b].ttl.toLowerCase():"",id:b});d.sort(function(k,m){return k.ttl>m.ttl?1:k.ttl<m.ttl?-1:0});var h=SF.$("SFevtntelst");for(b=c=0;b<d.length;b++){var g=a.nte[d[b].id];g.ttl&&((e=SF.$("SFevtnte"+d[b].id))?SF.lib.cn(e):e=SF.lib.n({nodeName:"button",id:"SFevtnte"+d[b].id,data:{id:d[b].id},onclick:SF.lib.e}),SF.lib.i(e,[{nodeName:"hgroup",childNodes:[{nodeName:"h3",innerHTML:SF.lib.fr(g.ttl)},{innerHTML:"Last modified "+SF.lib.fd(g._ts)}]}]),
(f=e.previousSibling)&&"form"==f.getAttribute("role")&&SF.lib.i(h,[f],h.childNodes[c++]),SF.lib.i(h,[e],h.childNodes[c++]))}if(e=SF.$("SFevtntenew"))(f=e.previousSibling)&&"form"==f.getAttribute("role")&&SF.lib.i(h,[f],h.childNodes[c++]),SF.lib.i(h,[e],h.childNodes[c++]);for(b=h.childNodes.length-1;b>=c;b--)SF.lib.dn(h.childNodes[b])};SF.ev.n={};
SF.ev.n.o=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.d.get(a.currentTarget)?b.nte[SF.d.get(a.currentTarget).id]:null;var d=SF.lib.n({role:"form",childNodes:[{className:"SFblc",formRows:[{label:"Title",childNodes:[{nodeName:"input",type:"text",name:"ttl",required:!0}]},{label:"Note",childNodes:[{nodeName:"textarea",name:"dtl",className:"SFhtm",style:{height:"20em"}}]},{childNodes:[{nodeName:"button",onclick:SF.ev.n.s,innerHTML:"Save"},c?{nodeName:"button",onclick:SF.ev.n.d,innerHTML:"Delete"}:
null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"}]}]}]});setTimeout(function(){SF.lib.it(".SFhtm",!0);c&&SF.lib.f(d,c);SF.lib.fc(d)},10);return d};
SF.ev.n.s=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(c)){var d=SF.lib.f(c);a=SF.lib.e(c,!0);var e=SF.d.get(a)?SF.d.get(a).id:null;SF._st._do="Saving event note";SF.lib.xhr("POST","v2/event/"+b.eid+"/note"+(null==e?"":"/"+e),d,{admin:!0}).then(function(f){SF.lib.ml(b,f);SF.lib.e(c,!1);SF.ev.j.i();SF.lib.fc("SFevtnte"+(e?e:f.nte.length-1))}).catch(SF.lib.alr)}};
SF.ev.n.d=function(a){var b=SF.d.get(SF.$("SFevtadm")),c,d;var e=SF.lib.fp(a.currentTarget,'[role="form"]');(new Promise(function(f){SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(f){SF.lib.dg("SFevtdlg",!1);if(f)return c=SF.lib.e(e,!0),d=SF.d.get(c)?SF.d.get(c).id:null,SF._st._do="Deleting event note",
SF.lib.xhr("POST","v2/event/"+b.eid+"/note/"+d,{ttl:"",dtl:""},{admin:!0}).then(function(h){SF.lib.ml(b,h);SF.lib.e(e,!1);c.style.opacity=0;setTimeout(function(){var g=c.nextSibling;SF.ev.j.i();SF.lib.fc(g)},500)})}).catch(SF.lib.alr)};SF.ev.m={};
SF.ev.m.o=function(){var a=SF.d.get(SF.$("SFevtadm")),b;SF.$("SFevtmsg")||(SF.lib.i("SFevtadm",[{id:"SFevtmsg",className:"SFevtadm",style:{display:"none"},childNodes:[{id:"SFevtmsgsub",className:"SFbox",role:"form"},{id:"SFevtmsgwal",style:{display:"none"}}]}]),SF._st._do="Getting previous messages",SF.lib.xhr("GET","v2/messages?eid="+a.eid,{admin:!0}).then(function(c){if(c.msg)for(b=c.msg.length-1;0<=b;b--)SF.ev.m.j(c.msg[b])}).catch(SF.lib.alr));SF.$("SFevtmsgsub").firstChild||(SF.lib.i("SFevtmsgsub",
[{nodeName:"h2",className:"SFboxttl",innerHTML:"Email registrants for this event"},{id:"SFevtmsgfrm",className:"SFmsgedt SFblc",formRows:[{id:"SFevtmsgalt",childNodes:[{nodeName:"input",type:"checkbox",checked:SF.get("SFevtdatema")?!0:!1,name:"alt",innerHTML:"Include secondary registrants"}]},{childNodes:[{nodeName:"input",type:"checkbox",name:"chk",innerHTML:"Email checked-in attendees only"}]},{label:"Subject",childNodes:[{nodeName:"input",type:"text",name:"ttl",maxLength:"80",placeholder:"Email subject",
required:!0}]},SF._is.upload()?{childNodes:[{className:"SFfbx SFmin",childNodes:[{className:"SFlnk SFfillst",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to add attachments"},{nodeName:"input",type:"file",name:"att","aria-label":"Upload attachments",multiple:!0,onchange:function(){SF.v(this,{alert:!0})}}]}]}:null,{label:"Message",childNodes:[{nodeName:"textarea",className:"SFhtm",name:"dtl",placeholder:"Email message",style:{height:"20em"},required:!0}]},{className:"SFhid",childNodes:[{nodeName:"input",
type:"hidden",name:"eid",value:a.eid},{nodeName:"input",type:"hidden",name:"_om",value:"1"}]}]},{className:"SFmsgpvw",style:{display:"none"}},{className:"SFbtx",childNodes:[{nodeName:"button",className:"SFmsgpvw",style:{display:"none"},onclick:SF.ev.m.s,innerHTML:"Send"},{nodeName:"button",className:"SFmsgpvw",style:{display:"none"},onclick:SF.co.m.p,innerHTML:"Edit"},{nodeName:"button",className:"SFmsgedt",onclick:SF.co.m.p,innerHTML:"Preview & Send"}]}]),SF.lib.it("#SFevtmsgsub .SFhtm",SF._st.admin?
"tag":!0,SF._st.admin?SF.mt.evt:!1),SF.lib.f("SFevtmsgsub",{ttl:"Event update: "+a.ttl}),SF.lib.s("SFevtmsgalt",SF.lib.s(".SFevtdatema")));SF.lib.se("SFevtmsg");SF.lib.fc("SFevtmsg")};SF.ev.m.i=function(){SF.$("SFevtmnumsg")||SF.lib.i("SFevtmnu",[{nodeName:"a",id:"SFevtmnumsg",tabIndex:0,role:"tab","aria-controls":"SFevtmsg",onclick:SF.ev.m.o,innerHTML:"Email"}])};
SF.ev.m.j=function(a){var b,c=SF.$("SFevtmsgwal");var d=[];if(a.usr&&a.usr.length)for(b=0;b<a.usr.length;b++)d.push(SF.lib.fr(a.usr[b].nam));SF.lib.i(c,[{className:"SFmsg",childNodes:[SF.lib.ui(a.edt[0].uid),{childNodes:[{className:"SFmsghdr",childNodes:[{innerHTML:SF.lib.fr(a.edt[0].uid==SF._st.usr.uid?"You":a.edt[0].nam)+(a.ref?" replied on ":" wrote on ")+SF.lib.fd(a.mid)},d.length?{className:"SFplh",innerHTML:"to "+d.join(", ")}:null,{nodeName:"strong",innerHTML:SF.lib.fr(a.ttl)}]},{className:"SFmsgdtl",
childNodes:SF.lib.fm(a)}]}]}],c.firstChild);SF.lib.s("SFevtmsgwal",!0)};SF.ev.m.s=function(){if(SF.v("SFevtmsgfrm")){var a=SF.lib.f("SFevtmsgfrm");a.dtl=SF.lib.fx(a.dtl,{allowed:["a","img"]});10>a.dtl.length?SF.lib.alr("Please enter a message"):(SF._st._do="Sending message",SF.lib.xhr("POST","v2/message",a,{admin:!0}).then(function(b){SF.ev.m.j(b);SF.lib.cn("SFevtmsgsub");SF.ev.m.o();SF.lib.alr("Message sent!"+(b.warn?"<br>Warning: "+b.warn:""))}).catch(SF.lib.alr))}};SF.ev.b={};
SF.ev.b.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b;if(!SF.$("SFevtdat")){SF.lib.i("SFevtmnu",[{nodeName:"a",id:"SFevtmnudat",tabIndex:0,role:"tab","aria-controls":"SFevtdat",onclick:SF.lib.se,innerHTML:"Event Setup"}]);var c=[];for(b=0;b<SF._is.cal.length;b++)c.push({id:"SFevtdatcal"+b,className:"SFhbx",role:"radio","aria-label":SF._is.calAria[b],tabIndex:0,onclick:SF.ev.b.e,onkeydown:function(d){13!=d.keyCode&&32!=d.keyCode||this.click();if(9!=d.keyCode)return!1},childNodes:[{style:{background:SF._is.cal[b]},
innerHTML:b?"&nbsp;":"Hidden"}]});SF.lib.i("SFevtadm",[{id:"SFevtdat",className:"SFevtadm",role:"form",style:{display:"none"},childNodes:[{className:"SFbox",childNodes:[{formRows:[{label:"Event category",childNodes:[{nodeName:"select",id:"SFevtdatgrp",name:"grp",onchange:function(){SF.ev.b.d(this.value)}},SF._st.admin?{nodeName:"a",onclick:SF.ec.o,innerHTML:"Add/Edit Categories"}:null,SF.hlp?{nodeName:"a",onclick:function(){SF.hlp.dlg(82)},title:"Help",childNodes:[{nodeName:"i",className:"SFicohlp"}]}:
null]},{label:"Display on calendar/list",id:"SFevtdatcal",className:"SFpad",role:"radiogroup",childNodes:c},{label:"Event title",className:"SFpad",childNodes:[{nodeName:"textarea",rows:2,name:"ttl",oninput:function(){SF.set("SFevtdatttl",SF.get(this))},required:!0}]},{label:"Start",childNodes:[{nodeName:"input",type:"date",id:"SFevtdatsdp",name:"sdp","aria-label":"Start date",placeholder:"Date",required:!0,onchange:function(){SF.ev.b.f("sdp")}},{nodeName:"input",type:"time","aria-label":"Start time",
placeholder:"Time (optional)",onchange:function(){SF.ev.b.f("sdp")}},{nodeName:"span",innerHTML:"display as"},{nodeName:"input",type:"text",id:"SFevtdatszp",name:"szp","aria-label":"Display text for start date/time",required:!0}]},{label:"End",childNodes:[{nodeName:"input",type:"date",id:"SFevtdatedp",name:"edp","aria-label":"End date",placeholder:"Date (optional)",onchange:function(){SF.ev.b.f("edp")}},{nodeName:"input",type:"time","aria-label":"End time",placeholder:"Time (optional)",onchange:function(){SF.ev.b.f("edp")}},
{nodeName:"span",innerHTML:"display as"},{nodeName:"input",type:"text",id:"SFevtdatezp",name:"ezp","aria-label":"Display text for end date/time",required:!0}]},{label:"Link to external event page",childNodes:[{nodeName:"input",type:"text",name:"erl",placeholder:"URL (optional)",dataset:{rxp:"^((h|H)(t|T)(t|T)(p|P)(s|S)?://)?([a-zA-Z0-9\\-_/#!@%~&\\?\\$\\[\\]\\(\\)\\*\\+,;=]+\\.){1,}[a-zA-Z0-9\\-_/#!@%~&\\?\\$\\[\\]\\(\\)\\*\\+,;=]{2,}\\s*$"}}]},{label:"Place/location",childNodes:[{nodeName:"input",
type:"text",name:"adn",placeholder:"Event location name (optional)"}]},{label:"Event address",childNodes:[{nodeName:"input",type:"text",name:"adr[ad1]",placeholder:"Street (optional)",onchange:SF.ev.b.c},{nodeName:"input",type:"text",name:"adr[ad2]",placeholder:"City, state/province, postal code (optional)",onchange:SF.ev.b.c},{className:"SFplh",id:"SFevtdatgeo"}]}]}]},{className:"SFbox",childNodes:[{id:"SFevtdatimgfrm",className:"SFfbx SFmb2",style:{width:"100%"},childNodes:[{id:"SFevtdatpvw",innerHTML:'<h1 id="SFevtdatttl" style="display:none"></h1>'},
SF._is.upload()?{nodeName:"input",type:"file",id:"SFevtdatimgfil",name:"lgo","aria-label":"Upload event image",onchange:SF.ev.i.u}:null]},{id:"SFevtdatcol",className:"SFmb2",style:{display:"none"},childNodes:[{nodeName:"span",innerHTML:"Title layout"},{nodeName:"select",name:"col","aria-label":"Title layout",onchange:SF.ev.b.g,childNodes:[{nodeName:"option",value:"3",innerHTML:"Show title below image"},{nodeName:"option",value:"1",innerHTML:"Overlay image w/ white text"},{nodeName:"option",value:"2",
innerHTML:"Overlay image w/ black text"},{nodeName:"option",value:"0",innerHTML:"Hide title"}]},{nodeName:"a",onclick:SF.ev.i.d,innerHTML:"click here to remove image"}]},{nodeName:"textarea",name:"dtl",className:"SFhtm","aria-label":"Event description",placeholder:"Click here to edit the description and details of your event",style:{height:"25em"}}]},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.ev.b.s,innerHTML:"Save &amp; Continue"}]}]}]);SF.lib.it("#SFevtdat .SFhtm",!0)}"string"==
typeof a.adr&&(b=a.adr.split(","),2==b.length||3==b.length?(a.adr={ad1:b.shift().replace(/^\s*|^\s*$/g,"")},a.adr.ad2=b.join(",").replace(/^\s*|^\s*$/g,"")):a.adr={ad1:a.adr},a.loc&&(a.adr.loc=a.loc));SF.lib.f("SFevtdat",a);SF.set("SFevtdatezp","required",a.edp?"":null);!SF._st.admin&&a.eid&&(SF.$("SFevtdatgrp").disabled=!0);SF.ev.b.d("undefined"!=typeof a.grp?a.grp.toString():"");"undefined"!=typeof a.cal&&SF.ev.b.e({currentTarget:SF.$("SFevtdatcal"+a.cal)});SF.set("SFevtdatttl",a.ttl?SF.lib.fr(a.ttl,
{allowed:["br"]}):"");"undefined"!=typeof a.col&&SF.ev.b.g();SF.ev.i.f(a)};
SF.ev.b.d=function(a){if(SF.$("SFevtdatgrp")){var b,c;if(!a||!SF.$("SFevtdatgrp").childNodes.length){for(a||(a=SF.get("SFevtdatgrp"));b=SF.$("SFevtdatgrp").firstChild;)SF.lib.dn(b);var d=0;for(c=Math.max(SF._st.evg.length,"undefined"==typeof SF._st.oeg?0:SF._st.oeg.length);d<c;d++)b="undefined"==typeof SF._st.oeg||"undefined"==typeof SF._st.oeg[d]?d:SF._st.oeg[d],"undefined"!=typeof SF._st.evg[b]&&(SF._st.admin||"undefined"!=typeof SF._st.evg[b].dir)&&SF.lib.i("SFevtdatgrp",[{nodeName:"option",value:b,
innerHTML:SF.lib.fr(SF._st.evg[b].ttl)}])}a&&SF.set("SFevtdatgrp",a);SF.get("SFevtdatgrp")||SF.set("SFevtdatgrp",SF.$("SFevtdatgrp").firstChild.value);c=(d=SF._st.evg[parseInt(SF.get("SFevtdatgrp"),10)])?d.cal:255;b=8;for(a=0;0<b;b--)c&Math.pow(2,b-1)?SF.$("SFevtdatcal"+(a=b)).style.display="inline-block":SF.$("SFevtdatcal"+b).style.display="none";SF.lib.s("SFevtdatcal",SF._st.admin||d&&"undefined"!=typeof d.dir&&!(d.dir&1));SF.lib.s(SF.$('#SFevtdatcal [aria-checked="true"]'))||SF.ev.b.e({currentTarget:SF.$("SFevtdatcal"+
a)})}};SF.ev.b.e=function(a){SF.lib.fe(a.currentTarget.parentNode.childNodes,function(b){b.setAttribute("aria-checked",b==a.currentTarget?"true":"false")})};SF.ev.b.g=function(){var a=SF.lib.f("SFevtdatcol");SF.$("SFevtdatttl").className="0"==a.col||"3"==a.col?"":"SFevtcol"+a.col;SF.lib.s("SFevtdatttl","0"==a.col||"3"==a.col?!1:!0)};
SF.ev.b.f=function(a){var b=!1;if(SF.v("SFevtdat"+a))if(b=SF.get("SFevtdat"+a)){var c=SF.lib.fy(b);var d=SF.lib.fg(b);var e=SF.lib.fq(b);SF.set("sdp"==a?"SFevtdatszp":"SFevtdatezp",c+("12:00am"==d?"":", "+d+" "+e))}else SF.set("sdp"==a?"SFevtdatszp":"SFevtdatezp","");else SF.set("sdp"==a?"SFevtdatszp":"SFevtdatezp","Invalid date");"edp"==a&&SF.set("SFevtdatezp","required",b?"":null)};
SF.ev.b.c=function(){var a=SF.lib.f("SFevtdat");SF._st._do="Encoding address";a.adr&&a.adr.ad2&&SF.lib.gg(a.adr).then(function(b){SF.set("SFevtdatgeo",b&&b.loc?"Map available: "+SF.lib.f1(b)+", "+SF.lib.f2(b):"Address not found, map disabled")})};
SF.ev.b.s=function(){var a=SF.d.get(SF.$("SFevtadm"));if(SF.v("SFevtdat")){var b=SF.lib.f("SFevtdat");delete b.lgo;b.edp&&b.edp<b.sdp?SF.lib.alr("End date earlier than start date",{target:"SFevtdatedp",placement:"h"}):(SF.lib.s("SFevtdatcal")&&(b.cal=parseInt(SF.$('#SFevtdatcal [aria-checked="true"]').id.slice(11))),SF._st.admin||(b.dtl=SF.lib.fx(b.dtl)),SF._st._do="Saving event",SF.lib.sn(!0),SF.lib.pa(b).then(function(){return SF.lib.xhr(a.eid?"PATCH":"POST","v2/event"+(a.eid?"/"+a.eid:""),b,{admin:!0})}).then(function(c){if(a.eid)SF.lib.ml(a,
c),SF.$("SFevtdbd")&&SF.ev.d.i();else if(SF.d.set(SF.$("SFevtadm"),a=c),SF.lib.sh("event/admin/"+c.eid),SF._st.admin||(SF.$("SFevtdatgrp").disabled=!0),SF.$("SFevtmnunew")||SF.lib.i("SFevtmnu",[{nodeName:"a",id:"SFevtmnunew",role:"button",tabIndex:0,href:"#event/new",innerHTML:"Add Another Event"}],"SFevtmnudat"),SF._st.admin||SF._st.evg[c.grp]&&"undefined"!=typeof SF._st.evg[c.grp].dir&&!(SF._st.evg[c.grp].dir&2))SF.ev.w.i(),SF.ev.v.i(),SF.ev.u.i(),SF.ev.d.i(),SF.ev.r.i(),SF.ev.j.i(),SF.ev.a.i(),
SF.ev.m.i();c._en&&SF.lib.alr("Emails have been sent to registrants notifying them of the changes to the time/location");SF.$("SFevttkt")?SF.lib.se("SFevttkt"):c.eid?(SF.lib.sv("SFctr"),setTimeout(function(){SF.lib.alr("<h1>Thank you!</h1>Your event "+(SF.lib.s("SFevtdatcal")?"has been added to the calendar.":"will be reviewed and added to the calendar as soon as possible."))},500)):c.rsp||SF.lib.alr("Event updated");SF.$("SFevtcal")&&(SF.lib.fe('#SFevtcal [data-eid="'+a.eid+'"]',SF.lib.dn),SF.es.d.j(a),
SF.es.d.g());SF.$("SFevtlst")&&(SF.es.l.i(a),SF.es.l.g())}).catch(SF.lib.alr))}};SF.ev.i={};SF.ev.i.u=function(a){var b=SF.d.get(SF.$("SFevtadm")),c=SF.lib.f("SFevtdatimgfrm");c.lgo&&(1E7<c.lgo.size?(a.currentTarget.value=null,SF.lib.alr("File too large (10MB max)")):(SF._st._do="Uploading event image",SF.lib.xhr("POST","v2/event"+(b.eid?"/"+b.eid:"")+"/image",c,{admin:!0}).then(function(d){a.currentTarget.value=null;SF.lib.ml(b,d);SF.ev.i.f(d);SF.set("SFevtdatimgfil","")}).catch(SF.lib.alr)))};
SF.ev.i.f=function(a){1<SF.$("SFevtdatpvw").childNodes.length&&SF.lib.dn(SF.$("SFevtdatpvw").firstChild);a&&a.lgo&&a.lgo.l?SF.lib.i("SFevtdatpvw",[{nodeName:"img",id:"SFevtdatimg",onerror:function(){SF.ev.i.f({lgo:null})},onload:function(){SF.lib.s("SFevtdatcol",!0);SF.$("SFevtdatttl").className&&SF.lib.s("SFevtdatttl",!0)},style:{borderStyle:"none"},src:a.lgo.l}],"SFevtdatttl"):(SF.lib.s("SFevtdatcol",!1),SF.lib.s("SFevtdatttl",!1),SF.lib.i("SFevtdatpvw",[{style:{width:"100%",height:"auto",textAlign:"center",
padding:"80px 0"},innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to upload image"}],"SFevtdatttl"))};SF.ev.i.d=function(){var a=SF.d.get(SF.$("SFevtadm"));SF._st._do="Deleting event image";SF.lib.xhr("DELETE","v2/event"+(a.eid?"/"+a.eid:"")+"/image?lgo",{admin:!0}).then(function(b){SF.lib.ml(a,b);SF.ev.i.f(b)}).catch(SF.lib.alr)};SF.ev.w={};
SF.ev.w.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b,c,d,e;SF.$("SFevttkt")||(SF.lib.i("SFevtmnu",[{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevttkt",onclick:SF.lib.se,innerHTML:"Ticketing"}]),SF.lib.i("SFevtadm",[{id:"SFevttkt",className:"SFevtadm",style:{display:"none"},childNodes:[{className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Ticket Settings"},{className:"SFboxdtl",innerHTML:"Tickets are required for registration. Use drag and drop to re-arrange tickets."},
{formRows:[{label:"Overall event capacity",childNodes:[{nodeName:"input",type:"count",id:"SFevtdatcap",min:0,onchange:SF.ev.w.g},{nodeName:"span",className:"SFplh",innerHTML:"(blank=no limit)"}]},{label:"Limit number of tickets per registrant/account",childNodes:[{nodeName:"input",type:"count",id:"SFevtdatlim",min:0,onchange:SF.ev.w.h},{nodeName:"span",className:"SFplh",innerHTML:"(blank=no limit)"}]},{className:"SFevtdatema",style:{display:"none"},childNodes:[{nodeName:"input",type:"checkbox",id:"SFevtdatema",
name:"ema",onchange:SF.ev.w.f,innerHTML:"Send confirmation email to all attendees"}]}]}]},{id:"SFevttktlst",className:"SFbox SFlst",data:{editor:SF.ev.t.o},childNodes:[{nodeName:"button",id:"SFevttktnew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Event Ticket"}]}]},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.lib.se("SFevtreg")},innerHTML:"Continue to Registration"}]}]}]));(a.eid||"undefined"!=typeof a.cap)&&SF.set("SFevtdatcap",
"undefined"==typeof a.cap||!1===a.cap?"":a.cap);(a.eid||"undefined"!=typeof a.lim)&&SF.set("SFevtdatlim","undefined"==typeof a.lim||!1===a.lim?"":a.lim);"undefined"!=typeof a.ema&&SF.set("SFevtdatema",a.ema);SF.lib.s(".SFevtdatema",!1);var f=SF.$("SFevttktlst");var h=0;if(a.tkt)for(b=0;b<a.tkt.length;b++){var g="undefined"==typeof a.ort||"undefined"==typeof a.ort[b]?b:a.ort[b];(e=SF.$("SFevttkt"+g.toString()))?SF.lib.cn(e):e=SF.lib.n({nodeName:"button",id:"SFevttkt"+g.toString(),data:{id:g},draggable:!0,
ondragstart:SF.lib.vd,ondragover:SF.lib.vd,ondragend:function(k){SF.lib.vd(k);SF.ev.w.r()},onclick:SF.lib.e});SF.lib.i(e,[{nodeName:"hgroup",childNodes:[{nodeName:"h3",className:"undefined"==typeof a.tkt[g].cap||a.tkt[g].cap?"":"SFdel",childNodes:[{nodeName:"span",innerHTML:SF.lib.fr(a.tkt[g].lbl)},{nodeName:"span",className:"SFplh",innerHTML:"undefined"==typeof a.tkt[g].amt?"":a.tkt[g].amt?SF.lib.fa(a.tkt[g].amt,a.cur):"Free"}]},{innerHTML:"undefined"==typeof a.tkt[g].cap?"Unlimited":a.tkt[g].cap?
a.tkt[g].cap+" max":"Deleted"}]}]);(d=e.previousSibling)&&"form"==d.getAttribute("role")&&SF.lib.i(f,[d],f.childNodes[h++]);SF.lib.i(f,[e],f.childNodes[h++]);if(a.tkt[g].reg)for(c=0;c<a.tkt[g].reg.length;c++)a.tkt[g].reg[c]._id&&"eml"==a.tkt[g].reg[c]._id&&SF.lib.s(".SFevtdatema",!0)}if(e=SF.$("SFevttktnew"))(d=e.previousSibling)&&"form"==d.getAttribute("role")&&SF.lib.i(f,[d],f.childNodes[h++]),SF.lib.i(f,[e],f.childNodes[h++]);for(g=f.childNodes.length-1;g>=h;g--)SF.lib.dn(f.childNodes[g])};
SF.ev.w.r=function(){var a=SF.d.get(SF.$("SFevtadm")),b=[],c,d;SF._st._do="Saving event ticket order";for(c=SF.$("SFevttktlst").firstChild;c;c=c.nextSibling)(d=SF.d.get(c))&&b.push(d.id);SF.lib.xhr("PATCH","v2/event/"+a.eid,{ort:b},{showSpinner:!1,admin:!0}).then(function(e){SF.lib.ml(a,e)}).catch(SF.lib.alr)};
SF.ev.w.g=function(){var a=SF.d.get(SF.$("SFevtadm"));if(SF.v("SFevtdatcap")){var b={cap:SF.get("SFevtdatcap")};SF._st._do="Saving event capacity";SF.lib.xhr("PATCH","v2/event/"+a.eid,b,{admin:!0}).then(function(c){SF.lib.ml(a,c);SF.ev.w.i();SF.ev.d.i();SF.$("SFevtlst")&&(SF.es.l.i(a),SF.es.l.g())}).catch(SF.lib.alr)}};
SF.ev.w.h=function(){var a=SF.d.get(SF.$("SFevtadm"));if(SF.v("SFevtdatlim")){var b={lim:SF.get("SFevtdatlim")};SF._st._do="Saving event limit";SF.lib.xhr("PATCH","v2/event/"+a.eid,b,{admin:!0}).then(function(c){SF.lib.ml(a,c)}).catch(SF.lib.alr)}};SF.ev.w.f=function(){var a=SF.d.get(SF.$("SFevtadm")),b={ema:SF.get("SFevtdatema")};SF._st._do="Saving event email setting";SF.lib.xhr("PATCH","v2/event/"+a.eid,b,{admin:!0}).then(function(c){SF.lib.ml(a,c)}).catch(SF.lib.alr)};SF.ev.t={};
SF.ev.t.o=function(a){var b=SF.d.get(SF.$("SFevtadm")),c;var d=SF.d.get(a.currentTarget)?SF.d.get(a.currentTarget).id:"";b=SF.d.get(a.currentTarget)?b.tkt[d]:null;a=SF.lib.n({className:"SFfrm",role:"form",childNodes:[{nodeName:"nav",role:"tablist",childNodes:[{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevttkt"+d+"dat","aria-selected":"true",onclick:SF.lib.se,innerHTML:"Ticket"},{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevttkt"+d+"reg",onclick:SF.lib.se,innerHTML:"Questions / Sessions / Add-Ons"},
{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevttkt"+d+"dcc",onclick:SF.lib.se,innerHTML:"Discounts"}]},{id:"SFevttkt"+d+"dat",className:"SFevttktfrm",childNodes:[{formRows:[{label:"Ticket name",childNodes:[{nodeName:"input",type:"text",name:"lbl",required:!0}]},{label:"Ticket price",childNodes:[{nodeName:"input",type:"price",name:"amt",min:0},{nodeName:"span",className:"SFplh",innerHTML:"(blank=not applicable, 0=free)"}]},{label:"Quantity available",noWrap:!0,childNodes:[{nodeName:"input",
type:"count",name:"cap",min:0},{nodeName:"span",className:"SFplh",innerHTML:"(blank=unlimited)"}]},{label:"Limit",childNodes:[{nodeName:"input",type:"count",name:"lim",min:0},{nodeName:"span",innerHTML:"of this ticket per registrant/account"},{nodeName:"span",className:"SFplh",innerHTML:"(blank=no limit)"}]},{label:"Count 1 ticket as",childNodes:[{nodeName:"input",type:"count",min:0,value:1,name:"mux"},{nodeName:"span",innerHTML:"towards event capacity"}]},{label:"Override tax rate",childNodes:[{nodeName:"input",
type:"number",name:"tax",min:0},{nodeName:"span",innerHTML:"%"},{nodeName:"span",className:"SFplh",innerHTML:"(blank=default)"}]},SF._st.admin?{label:"Restrict to",className:"SFpad",childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dsp&&b.dsp.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"users with these folders/labels"},{nodeName:"multiselectbuttongroup",name:"dsp",style:{display:b&&b.dsp&&b.dsp.length?"":"none"},childNodes:SF.dk.l(null,["dek","lbl",
"lvl","aon"])}]}:null,SF._st.admin?{label:"Exclude",childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dsn&&b.dsn.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"users with these folders/labels"},{nodeName:"multiselectbuttongroup",name:"dsn",style:{display:b&&b.dsn&&b.dsn.length?"":"none"},childNodes:SF.dk.l(null,["dek","lbl","lvl","aon"])}]}:null]}]},{id:"SFevttkt"+d+"reg",className:"SFevttktfrm",style:{display:"none"},childNodes:[{nodeName:"h3",innerHTML:"Additional questions to include for <u>each</u> of this ticket added to cart"},
{className:"SFevttktreglst SFlst",data:{editor:SF.ev.y.o},childNodes:[{nodeName:"button",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Question / Session / Add-on Per Ticket"}]}]}]},{id:"SFevttkt"+d+"dcc",className:"SFevttktfrm",style:{display:"none"},childNodes:[{className:"SFblc",formRows:[SF._st.admin?{childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dcc&&b.dcc.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},
innerHTML:"allow these discount codes"},{nodeName:"multiselectbuttongroup",name:"dcc",style:{display:b&&b.dcc&&b.dcc.length?"":"none"},childNodes:SF.ds.l(null)}]}:null,SF._st.admin?{childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dcl&&b.dcl.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"provide member discount"},{nodeName:"ul",className:"SFevttktdcllst SFlst",style:{display:b&&b.dcl&&b.dcl.length?"":"none"},childNodes:[{nodeName:"li",className:"SFlnk",
tabIndex:0,role:"button",onclick:function(){SF.lib.fc(SF.co.a(this.parentNode))},innerHTML:"Add Member Discount"}]}]}:null,{childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dcs&&b.dcs.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"enable early-bird discount"},{style:{display:b&&b.dcs&&b.dcs.length?"":"none"},childNodes:[{nodeName:"span",innerHTML:"Set ticket price as"},{nodeName:"input",type:"price",name:"dcs[0][amt]",min:0,required:!0},{nodeName:"span",
innerHTML:"if registering before"},{nodeName:"input",type:"date",name:"dcs[0][erd]",placeholder:"Date",required:!0},{nodeName:"input",type:"time",placeholder:"Time (optional)"}]}]},{childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dcq&&b.dcq.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"enable quantity discount"},{nodeName:"ul",className:"SFevttktdcqlst SFlst",style:{display:b&&b.dcq&&b.dcq.length?"":"none"},childNodes:[{nodeName:"li",className:"SFlnk",
tabIndex:0,role:"button",onclick:function(){SF.lib.fc(SF.co.c(this.parentNode))},innerHTML:"Add Quantity Discount"}]}]}]}]},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.ev.t.s,innerHTML:"Save"},b?{nodeName:"button",onclick:SF.ev.t.d,innerHTML:"Delete"}:null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"}]}]});if(b){var e=SF.lib.c(b);e.tax&&(e.tax=Math.round(e.tax/1E4)/100);if(e.dcl)for(b=0,c=a.querySelector(".SFevttktdcllst");b<e.dcl.length;b++)SF.co.a(c);if(e.dcq)for(b=0,
c=a.querySelector(".SFevttktdcqlst");b<e.dcq.length;b++)SF.co.c(c);SF.lib.f(a,e);if(e.reg)for(b=0,c=a.querySelector(".SFevttktreglst");b<e.reg.length;b++)SF.lib.i(c,[SF.ev.y.e(e.reg[b])],c.lastChild)}setTimeout(function(){SF.lib.se("SFevttkt"+d+"dat")},100);return a};
SF.ev.t.s=function(a){var b=SF.d.get(SF.$("SFevtadm")),c,d;var e=SF.lib.fp(a.currentTarget,'[role="form"]');a=SF.lib.e(e,!0);var f=SF.d.get(a)?SF.d.get(a).id:null;if(SF.v(e.childNodes[1]))if(e.childNodes[2].querySelector('[role="form"]'))SF.lib.se(e.childNodes[2]);else if(SF.v(e.childNodes[3])){a=SF.lib.me(SF.lib.f(e.childNodes[1]),SF.lib.f(e.childNodes[3]));a.lbl=a.lbl.trim();if(Array.isArray(b.tkt))for(c=0;c<b.tkt.length;c++)if(c!=f&&b.tkt[c].lbl.toLowerCase()==a.lbl.toLowerCase()){SF.lib.alr("There is another ticket with the same name");
return}a.tax&&(a.tax=Math.round(1E6*a.tax));a.dsp||(a.dsp="");a.dsn||(a.dsn="");SF._st.admin&&!a.dcc&&(a.dcc="");a.dcs||(a.dcs="");a.dcq||(a.dcq="");SF._st.admin&&!a.dcl&&(a.dcl="");for(c=e.querySelector(".SFevttktreglst").firstChild;c;c=c.nextSibling)(d=SF.d.get(c))&&"undefined"!=typeof d.typ&&(delete d.isNew,a.reg||(a.reg=[]),a.reg.push(d));SF._st._do="Saving ticket";SF.lib.xhr(null==f?"POST":"PATCH","v2/event/"+b.eid+"/ticket"+(null==f?"":"/"+f),a,{admin:!0}).then(function(h){SF.lib.e(e,!1);SF.lib.ml(b,
h);SF.ev.w.i();SF.ev.d.i();SF.lib.fc("SFevttkt"+(null==f?h.tkt.length-1:f));h.warn&&SF.lib.alr(h.warn)}).catch(SF.lib.alr)}else SF.lib.se(e.childNodes[3]);else SF.lib.se(e.childNodes[1])};
SF.ev.t.d=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');var d=SF.lib.e(c,!0);var e=SF.d.get(d)?SF.d.get(d).id:null;(new Promise(function(f){SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(f){SF.lib.dg("SFevtdlg",!1);if(f)return SF._st._do="Deleting ticket",
SF.lib.xhr("PATCH","v2/event/"+b.eid+"/ticket/"+e,{cap:0},{admin:!0}).then(function(h){SF.lib.ml(b,h);SF.lib.e(c,!1);SF.ev.w.i();SF.ev.d.i();SF.lib.fc(d)})}).catch(SF.lib.alr)};SF.ev.y={};SF.ev.y.e=function(a,b){(b=void 0===b?null:b)||(b=SF.lib.n({nodeName:"button",onclick:SF.lib.e}));b.innerHTML=a._id?a.lbl:"Custom: "+SF.lib.fr(a.lbl);SF.d.set(b,SF.lib.c(a));SF.lib.s(b,"number"==typeof a.typ&&0>a.typ?!1:!0);return b};
SF.ev.y.o=function(a){var b=SF.d.get(SF.$("SFevtadm")),c,d=[],e=[];var f=SF.d.get(a.currentTarget);for(a=a.currentTarget.parentNode.firstChild;a;a=a.nextSibling)!(c=SF.d.get(a))||!c._id||f&&f._id&&f._id==c._id||d.push(c._id);if(b._st.evt)for(a=0;a<b._st.evt.length;a++)0>d.indexOf(b._st.evt[a]._id)&&0<=["nam","ctc","biz"].indexOf(b._st.evt[a]._id)&&e.push({nodeName:"option",value:b._st.evt[a]._id,innerHTML:b._st.evt[a].lbl});else 0>d.indexOf("nam")&&e.push({nodeName:"option",value:"nam",innerHTML:"Name"});
e.push(0<=d.indexOf("eml")?null:{nodeName:"option",value:"eml",innerHTML:"Email"},0<=d.indexOf("phn")?null:{nodeName:"option",value:"phn",innerHTML:"Phone"},0<=d.indexOf("adr")?null:{nodeName:"option",value:"adr",innerHTML:"Address"},{nodeName:"option",value:"1",innerHTML:"Custom - Text Input"},{nodeName:"option",value:"3",innerHTML:"Custom - Simple Text Area"},{nodeName:"option",value:"9",innerHTML:"Custom - Select"});var h=SF.lib.n({className:"SFfrm",role:"form",childNodes:[{formRows:[{label:"Type",
childNodes:[{nodeName:"select",name:"typ",onchange:SF.ev.y.h,childNodes:[f&&"s"==f.typ?null:{nodeName:"optgroup",childNodes:e},f&&"s"!=f.typ?null:{nodeName:"optgroup",childNodes:[{nodeName:"option",value:"s",innerHTML:"Select a Session / Add-On"}]}]}]},{label:"Description",childNodes:[{nodeName:"input",type:"text",name:"lbl",required:!0}]},{className:"SFevttktregreq",label:"Required",childNodes:[{nodeName:"select",name:"req",childNodes:[{nodeName:"option",value:"",innerHTML:"No"},{nodeName:"option",
value:"1",innerHTML:"Yes"}]}]},{className:"SFevttktregsel",label:"Options",childNodes:[{nodeName:"button",className:"SFlnk",onclick:function(){SF.lib.fc(SF.co.b(this.parentNode))},innerHTML:"Add Option"}]},{className:"SFevttktregssn",label:"Choices",childNodes:[{className:"SFevtssn"},{nodeName:"button",className:"SFlnk",onclick:SF.ev.v.o,innerHTML:"Setup Sessions / Add-Ons"}]},{className:"SFpad",childNodes:[{nodeName:"button",onclick:SF.ev.y.s,innerHTML:"OK"},f?{nodeName:"button",onclick:SF.ev.y.d,
innerHTML:"Remove"}:null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"}]}]}]});setTimeout(function(){var g;SF.ev.v.i();if(f){if(f=SF.lib.c(f),f._id&&(f.typ=f._id),SF.lib.f(h,f),f.opt){var k=0;for(g=h.querySelector(".SFevttktregsel button").parentNode;k<f.opt.length;k++)SF.co.b(g,f.opt[k])}}else SF.lib.f(h,{typ:1});SF.ev.y.h({currentTarget:h})},10);return h};
SF.ev.y.h=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');var d=SF.lib.f(c);if(3==d.typ.length)for(a=0;a<b._st.evt.length;a++)b._st.evt[a]._id==d.typ&&SF.lib.f(c,{lbl:b._st.evt[a].lbl});else a.currentTarget!=c&&SF.lib.f(c,{lbl:""});SF.lib.s(c.querySelector(".SFevttktregreq"),"9"!=d.typ);SF.lib.s(c.querySelector(".SFevttktregsel"),"9"==d.typ);SF.lib.s(c.querySelector(".SFevttktregssn"),"s"==d.typ)};
SF.ev.y.s=function(a){var b=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(b)){a=SF.lib.f(b);if(3==a.typ.length)switch(a._id=a.typ,a.typ="adr"==a._id?7:1,a._id){case "eml":a.rxp="^\\s*[a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*$";break;case "phn":a.rxp="^[0-9x\\+\\-\\.\\(\\)\\s,]*$"}else"s"!=a.typ&&(a.typ=parseInt(a.typ));a.req?a.req=1:delete a.req;b=SF.lib.e(b,!1);var c=SF.d.get(b);if(!c||c.isNew)a.isNew=1;c?SF.ev.y.e(a,b):SF.lib.i(b.parentNode,[SF.ev.y.e(a)],
b)}};
SF.ev.y.d=function(a){var b,c;var d=SF.lib.fp(a.currentTarget,'[role="form"]');(new Promise(function(e){SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){e(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){e(!0)},innerHTML:"Confirm remove"}]},{target:a.currentTarget,placement:"v"})})).then(function(e){SF.lib.dg("SFevtdlg",!1);e&&(b=SF.lib.e(d,!1),c=SF.d.get(b),b.style.opacity=0,setTimeout(function(){var f;for(f=b.nextSibling;f&&!SF.lib.s(f);f=f.nextSibling);
c.isNew?SF.lib.dn(b):(delete c._id,c.typ=-1,SF.ev.y.e(c,b));SF.lib.fc(f)},500))}).catch(SF.lib.alr)};SF.ev.v={};
SF.ev.v.o=function(){SF.lib.dg("SFevtdlg",{childNodes:[{id:"SFevtssnlst",className:"SFlst",data:{editor:SF.ev.s.o},childNodes:[{nodeName:"button",id:"SFevtssnnew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Session / Add-On"}]}]},{className:"SFmt2 SFplh",innerHTML:"Drag and drop to re-arrange sessions."},{className:"SFbtx",childNodes:[{nodeName:"button",id:"SFevtssnbtn",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Close"},{nodeName:"button",
onclick:function(){SF.hlp.dlg(78)},innerHTML:"Help"}]}]},{width:"600px",height:"600px",dismiss:!0});SF.ev.v.i()};
SF.ev.v.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b,c,d,e=[],f;if(b=SF.$("SFevtssnlst")){var h=0;if(a.ssn)for(f=0;f<a.ssn.length;f++){var g="undefined"==typeof a.ors||"undefined"==typeof a.ors[f]?f:a.ors[f];(c=SF.$("SFevtssn"+g))?SF.lib.cn(c):c=SF.lib.n({nodeName:"button",id:"SFevtssn"+g,data:{id:g},draggable:!0,ondragstart:SF.lib.vd,ondragover:SF.lib.vd,ondragend:function(k){SF.lib.vd(k);SF.ev.v.r()},onclick:SF.lib.e});SF.lib.i(c,[{nodeName:"hgroup",childNodes:[{nodeName:"h3",innerHTML:SF.lib.fr(a.ssn[g].lbl)},
{innerHTML:"undefined"==typeof a.ssn[g].cap?"Unlimited":a.ssn[g].cap?a.ssn[g].cap+" max":"Deleted"}]}]);(d=c.previousSibling)&&"form"==d.getAttribute("role")&&SF.lib.i(b,[d],b.childNodes[h++]);SF.lib.i(b,[c],b.childNodes[h++])}if(c=SF.$("SFevtssnnew"))(d=c.previousSibling)&&"form"==d.getAttribute("role")&&SF.lib.i(b,[d],b.childNodes[h++]),SF.lib.i(b,[c],b.childNodes[h++]);for(g=b.childNodes.length-1;g>=h;g--)SF.lib.dn(b.childNodes[g])}if(a.ssn)for(f=0;f<a.ssn.length;f++)g="undefined"==typeof a.ors||
"undefined"==typeof a.ors[f]?f:a.ors[f],("undefined"==typeof a.ssn[g].cap||a.ssn[g].cap)&&e.push({nodeName:"input",type:"checkbox",name:"ssn[]",value:g,innerHTML:SF.lib.fr(a.ssn[g].lbl)});a=document.querySelectorAll("div.SFevtssn");for(g=a.length-1;0<=g;g--)b=SF.lib.f(a[g]),SF.lib.cn(a[g]),SF.lib.i(a[g],e),SF.lib.f(a[g],b)};
SF.ev.v.r=function(){var a=SF.d.get(SF.$("SFevtadm")),b=[],c,d;SF._st._do="Saving event session order";for(c=SF.$("SFevtssnlst").firstChild;c;c=c.nextSibling)(d=SF.d.get(c))&&b.push(d.id);SF.lib.xhr("PATCH","v2/event/"+a.eid,{ors:b},{showSpinner:!1,admin:!0}).then(function(e){SF.lib.ml(a,e);SF.ev.v.i()}).catch(SF.lib.alr)};SF.ev.s={};
SF.ev.s.o=function(a){var b=SF.d.get(SF.$("SFevtadm"));b=SF.d.get(a.currentTarget)?b.ssn[SF.d.get(a.currentTarget).id]:null;a=SF.lib.n({className:"SFfrm",role:"form",childNodes:[{formRows:[{label:"Session/add-on name",noWrap:!0,childNodes:[{nodeName:"input",type:"text",name:"lbl",required:!0}]},{label:"Quantity available",childNodes:[{nodeName:"input",type:"count",name:"cap",min:0},{nodeName:"span",className:"SFplh",innerHTML:"(blank=unlimited)"}]},{label:"Price",childNodes:[{nodeName:"input",type:"price",
name:"amt",min:0,onchange:SF.ev.s.h},{nodeName:"span",className:"SFplh",innerHTML:"(blank/0=no charge)"}]},{label:"Payment category",className:"SFevtssnfrmamt",childNodes:[{nodeName:"select",name:"typ",childNodes:[{nodeName:"option",value:"",innerHTML:"Event"},{nodeName:"option",value:"1",innerHTML:"Classify as donation"},{nodeName:"option",value:"3",innerHTML:"Classify as membership"},{nodeName:"option",value:"5",innerHTML:"Classify as cart"}]}]},{label:"Override tax rate",className:"SFevtssnfrmamt",
childNodes:[{nodeName:"input",type:"number",name:"tax",min:0},{nodeName:"span",innerHTML:"%"},{nodeName:"span",className:"SFplh",innerHTML:"(blank=default)"}]},SF.ds?{className:"SFevtssnfrmamt",childNodes:[{nodeName:"input",type:"checkbox",checked:b&&b.dcc&&b.dcc.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"allow discount codes"},{nodeName:"multiselectbuttongroup",name:"dcc",style:{display:b&&b.dcc&&b.dcc.length?"":"none"},childNodes:SF.ds.l(null)}]}:null,{className:"SFpad",
childNodes:[{nodeName:"button",onclick:SF.ev.s.s,innerHTML:"Save"},b?{nodeName:"button",onclick:SF.ev.s.d,innerHTML:"Delete"}:null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"}]}]}]});b&&(b=SF.lib.c(b),b.tax&&(b.tax=Math.round(b.tax/1E4)/100),SF.lib.f(a,b));SF.ev.s.h({currentTarget:a});return a};SF.ev.s.h=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');var b=SF.lib.f(a);SF.lib.s(a.querySelectorAll(".SFevtssnfrmamt"),b.amt)};
SF.ev.s.s=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(c)){var d=SF.lib.f(c);a=SF.lib.e(c,!0);var e=SF.d.get(a)?SF.d.get(a).id:null;d.tax&&(d.tax=Math.round(1E6*d.tax));d.typ||(d.typ="");d.dcc||(d.dcc="");SF._st._do="Saving session";SF.lib.xhr(null==e?"POST":"PATCH","v2/event/"+b.eid+"/session"+(null==e?"":"/"+e),d,{admin:!0}).then(function(f){SF.lib.ml(b,f);SF.lib.e(c,!1);SF.ev.v.i();SF.lib.fc("SFevtssn"+(null==e?f.ssn.length-1:e))}).catch(SF.lib.alr)}};
SF.ev.s.d=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');var d=SF.lib.e(c,!0);var e=SF.d.get(d)?SF.d.get(d).id:null;(new Promise(function(f){SF.lib.dg("SFevtssndlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(f){SF.lib.dg("SFevtssndlg",!1);if(f)return SF._st._do="Deleting session",
SF.lib.xhr("PATCH","v2/event/"+b.eid+"/session/"+e,{cap:0},{admin:!0}).then(function(h){SF.lib.ml(b,h);SF.lib.e(c,!1);SF.ev.v.i();SF.lib.fc(d)})}).catch(SF.lib.alr)};SF.ev.u={};
SF.ev.u.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b,c,d;SF.$("SFevtreg")||(SF.lib.i("SFevtmnu",[{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevtreg",onclick:SF.lib.se,innerHTML:"Registration"}]),SF.lib.i("SFevtadm",[{id:"SFevtreg",className:"SFevtadm",style:{display:"none"},childNodes:[{className:"SFbox",style:{overflow:"visible"},childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Registration Settings"},{className:"SFboxdtl",innerHTML:"Setup additional questions per registration (not per ticket). Use drag and drop to re-arrange questions."},
{formRows:[{label:"Registration start",childNodes:[{nodeName:"input",type:"date",id:"SFevtdatsrd",placeholder:"Date (optional)",onchange:function(){SF.ev.u.h("srd")}},{nodeName:"input",type:"time",placeholder:"Time (optional)",onchange:function(){SF.ev.u.h("srd")}}]},{label:"Registration end",childNodes:[{nodeName:"input",type:"date",id:"SFevtdaterd",placeholder:"Date (optional)",onchange:function(){SF.ev.u.h("erd")}},{nodeName:"input",type:"time",placeholder:"Time (optional)",onchange:function(){SF.ev.u.h("erd")}}]},
{childNodes:[{nodeName:"input",type:"checkbox",id:"SFevtdatrad1",onchange:SF.ev.u.g,innerHTML:"Do not require address for primary registrant"}]},{childNodes:[{nodeName:"input",type:"checkbox",id:"SFevtdatrad2",onchange:SF.ev.u.g,innerHTML:"Do not require phone number for primary registrant"}]}]}]},{id:"SFevtreglst",className:"SFbox SFlst",data:{editor:SF.ev.q.o},childNodes:[{nodeName:"button",id:"SFevtregnew",onclick:SF.lib.e,childNodes:[{nodeName:"i",className:"SFicoadd"},{nodeName:"span",innerHTML:"Add Registration Question"}]}]},
{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.lib.se("SFevtdbd")},innerHTML:"Continue to Dashboard"}]}]}]));SF.set("SFevtdatsrd",a.srd?a.srd:"");SF.set("SFevtdaterd",a.erd?a.erd:"");SF.set("SFevtdatrad1",a.rad&&a.rad&1?!0:!1);SF.set("SFevtdatrad2",a.rad&&a.rad&2?!0:!1);var e=SF.$("SFevtreglst");var f=0;if(a.reg)for(b=0;b<a.reg.length;b++){var h="undefined"==typeof a.orr||"undefined"==typeof a.orr[b]?b:a.orr[b];(c=SF.$("SFevtreg"+h.toString()))?SF.lib.cn(c):c=SF.lib.n({nodeName:"button",
id:"SFevtreg"+h.toString(),data:{id:h},draggable:!0,ondragstart:SF.lib.vd,ondragover:SF.lib.vd,ondragend:function(g){SF.lib.vd(g);SF.ev.u.r()},onclick:SF.lib.e});SF.lib.i(c,[{nodeName:"h3",className:-1==a.reg[h].typ?"SFdel":"",innerHTML:a.reg[h].lbl?SF.lib.fr(a.reg[h].lbl):"{text}"}]);(d=c.previousSibling)&&"form"==d.getAttribute("role")&&SF.lib.i(e,[d],e.childNodes[f++]);SF.lib.i(e,[c],e.childNodes[f++])}if(c=SF.$("SFevtregnew"))(d=c.previousSibling)&&"form"==d.getAttribute("role")&&SF.lib.i(e,[d],
e.childNodes[f++]),SF.lib.i(e,[c],e.childNodes[f++]);for(h=e.childNodes.length-1;h>=f;h--)SF.lib.dn(e.childNodes[h])};SF.ev.u.h=function(a){var b=SF.d.get(SF.$("SFevtadm")),c=SF.get("SFevtdat"+a),d={};d[a]=c;SF._st._do="Saving event registration start and end";SF.lib.xhr("PATCH","v2/event/"+b.eid,d,{showSpinner:!1,admin:!0}).then(function(e){SF.lib.ml(b,e)}).catch(SF.lib.alr)};
SF.ev.u.g=function(){var a=SF.d.get(SF.$("SFevtadm")),b={rad:(SF.get("SFevtdatrad1")?1:0)+(SF.get("SFevtdatrad2")?2:0)};SF._st._do="Saving event registration setting";SF.lib.xhr("PATCH","v2/event/"+a.eid,b,{showSpinner:!1,admin:!0}).then(function(c){SF.lib.ml(a,c)}).catch(SF.lib.alr)};
SF.ev.u.r=function(){var a=SF.d.get(SF.$("SFevtadm")),b=[],c,d;for(c=SF.$("SFevtreglst").firstChild;c;c=c.nextSibling)(d=SF.d.get(c))&&b.push(d.id);SF._st._do="Saving event registration order";SF.lib.xhr("PATCH","v2/event/"+a.eid,{orr:b},{showSpinner:!1,admin:!0}).then(function(e){SF.lib.ml(a,e)}).catch(SF.lib.alr)};SF.ev.q={};
SF.ev.q.o=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.d.get(a.currentTarget)?b.reg[SF.d.get(a.currentTarget).id]:null;var d=SF.lib.n({className:"SFfrm",role:"form",childNodes:[{formRows:[{label:"Type",childNodes:[{nodeName:"select",name:"typ",onchange:SF.ev.q.h,childNodes:[{nodeName:"option",value:"1",innerHTML:"Text Input"},{nodeName:"option",value:"3",innerHTML:"Simple Text Area"},{nodeName:"option",value:"9",innerHTML:"Select"},{nodeName:"option",value:"12",innerHTML:"Required waiver/terms"},
{nodeName:"option",value:"-2",innerHTML:"Text information"}]}]},{label:"Question",className:"SFevtreglbl",childNodes:[{nodeName:"input",type:"text",name:"lbl",required:!0}]},{label:"Required",className:"SFevtregreq",childNodes:[{nodeName:"select",name:"req",childNodes:[{nodeName:"option",value:"",innerHTML:"No"},{nodeName:"option",value:"1",innerHTML:"Yes"}]}]},{label:"Acknowledgement",className:"SFevtregwvr",childNodes:[{nodeName:"select",name:"req",childNodes:[{nodeName:"option",value:"",innerHTML:"Check Box"},
{nodeName:"option",value:"1",innerHTML:"Text Input"}]}]},{label:"Full text",className:"SFevtregdtl",childNodes:[{nodeName:"textarea",className:"SFhtm",name:"dtl",required:!0,style:{height:"13em"}}]},{label:"Options",className:"SFevtregsel",childNodes:[{nodeName:"button",className:"SFlnk",onclick:function(){SF.lib.fc(SF.co.b(this.parentNode))},innerHTML:"Add Option"}]},{className:"SFpad",childNodes:[{nodeName:"button",onclick:SF.ev.q.s,innerHTML:"Save"},c?{nodeName:"button",onclick:SF.ev.q.d,innerHTML:"Delete"}:
null,{nodeName:"button",onclick:SF.lib.e,innerHTML:"Cancel"}]}]}]});setTimeout(function(){var e;SF.lib.it("#SFevtreglst .SFhtm",!0);if(c){var f=SF.lib.c(c);f.typ||(f.typ=f.opt&&f.opt.length?9:3);SF.lib.f(d,f);if(f.opt){var h=0;for(e=d.querySelector(".SFevtregsel button").parentNode;h<f.opt.length;h++)SF.co.b(e,f.opt[h])}}SF.ev.q.h({currentTarget:d});SF.lib.fc(d)},10);return d};
SF.ev.q.h=function(a){a=SF.lib.fp(a.currentTarget,'[role="form"]');var b=SF.lib.f(a);SF.lib.s(a.querySelector(".SFevtreglbl"),"-2"!=b.typ);SF.lib.s(a.querySelector(".SFevtregreq"),"1"==b.typ||"3"==b.typ||"7"==b.typ);SF.lib.s(a.querySelector(".SFevtregsel"),"9"==b.typ);SF.lib.s(a.querySelector(".SFevtregwvr"),"12"==b.typ);SF.lib.s(a.querySelector(".SFevtregdtl"),"12"==b.typ||"-2"==b.typ)};
SF.ev.q.s=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');if(SF.v(c)){a=SF.lib.f(c);var d=SF.lib.e(c,!0);var e=SF.d.get(d)?SF.d.get(d).id:null;if(a.lbl&&b.reg)for(d=0;d<b.reg.length;d++)if(d!=e&&b.reg[d].lbl&&b.reg[d].lbl.toLowerCase()==a.lbl.toLowerCase()){SF.lib.alr("Duplicate question exists",{target:c.querySelector('[name="lbl"]'),placement:"h"});return}a.lbl||(a.lbl="");a.req||(a.req="");a.opt||(a.opt="");a.dtl||(a.dtl="");SF._st._do="Saving registration question";
SF.lib.xhr(null==e?"POST":"PATCH","v2/event/"+b.eid+"/question"+(null==e?"":"/"+e),a,{admin:!0}).then(function(f){SF.lib.ml(b,f);SF.lib.e(c,!1);SF.ev.u.i();SF.lib.fc("SFevtreg"+(null==e?f.reg.length-1:e))}).catch(SF.lib.alr)}};
SF.ev.q.d=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=SF.lib.fp(a.currentTarget,'[role="form"]');var d=SF.lib.e(c,!0);var e=SF.d.get(d)?SF.d.get(d).id:null;(new Promise(function(f){SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Confirm delete"}]},{target:a.currentTarget,placement:"v"})})).then(function(f){SF.lib.dg("SFevtdlg",!1);if(f)return SF._st._do="Deleting registration question",
SF.lib.xhr("PATCH","v2/event/"+b.eid+"/question/"+e,{typ:-1},{admin:!0}).then(function(h){SF.lib.ml(b,h);SF.lib.e(c,!1);SF.ev.u.i();SF.lib.fc(d)})}).catch(SF.lib.alr)};SF.ev.a={};
SF.ev.a.i=function(){var a=SF.d.get(SF.$("SFevtadm")),b=[],c;if(!SF.$("SFevtadv")){SF.lib.i("SFevtmnu",[{nodeName:"a",tabIndex:0,role:"tab","aria-controls":"SFevtadv",onclick:SF.lib.se,innerHTML:"Advanced"}]);for(c in SF._is.spc)b.push({nodeName:"option",value:c,innerHTML:c.toUpperCase()});SF.lib.i("SFevtadm",[{id:"SFevtadv",className:"SFevtadm",style:{display:"none"},childNodes:[{className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"External Event Page"},{className:"SFblc",
formRows:[{label:"Redirect to external event page",childNodes:[{nodeName:"input",type:"text",name:"zzx"}]},{className:"SFpad",childNodes:[{nodeName:"button",onclick:SF.ev.a.s,innerHTML:"Save"}]}]}]},{className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Advanced Registration Options"},{className:"SFblc",formRows:[{label:"Event registration notification email addresses (overrides default)",childNodes:[{nodeName:"input",type:"multiemail",name:"wev",placeholder:"blank = use default account settings"}]},
{label:"Event registration button text",childNodes:[{nodeName:"input",type:"text",name:"btn",placeholder:"Register!"}]},{label:"Redirect to URL after checkout",childNodes:[{nodeName:"input",type:"text",name:"zzz",placeholder:"blank = display confirmation message"}]},{label:"Allow members on automatic recurring billing to pay with their payment method on file",id:"SFevtadvds0",childNodes:[{nodeName:"select",name:"ds0",childNodes:[{nodeName:"option",value:"",innerHTML:"Do not allow"},{nodeName:"option",
value:"1",innerHTML:"Allow primary account user only"},{nodeName:"option",value:"3",innerHTML:"Allow all account contacts"}]}]},{childNodes:[{nodeName:"input",type:"checkbox",onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"Allow offline payment"},{id:"SFevtadvds3",style:{display:"none"},childNodes:[{innerHTML:"Payment instructions"},{nodeName:"textarea",name:"ds3",type:"text",required:!0,placeholder:"eg. Mail checks to: ..."}]}]},{className:"SFpad",childNodes:[{nodeName:"button",
onclick:SF.ev.a.s,innerHTML:"Save"}]}]}]},SF.dk?{className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Registration Actions"},{className:"SFblc",formRows:[{childNodes:[{nodeName:"input",type:"checkbox",checked:a.act&&a.act.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"if user has account, add user to these folders/labels"},{nodeName:"multiselectbuttongroup",name:"act",style:{display:a.act&&a.act.length?"":"none"},childNodes:SF.dk.l(null,
["dek","lbl"])}]},{childNodes:[{nodeName:"input",type:"checkbox",checked:a.acn&&a.acn.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"if user has account, remove these labels"},{nodeName:"multiselectbuttongroup",name:"acn",style:{display:a.acn&&a.acn.length?"":"none"},childNodes:SF.dk.l(null,["lbl"])}]},{childNodes:[{nodeName:"input",type:"checkbox",checked:a.acu&&a.acu.length?!0:!1,onchange:function(){SF.lib.s(this.nextSibling,SF.get(this))},innerHTML:"if user does not have account, add user to these labels/folders (at least 1 folder required)"},
{nodeName:"multiselectbuttongroup",name:"acu",style:{display:a.acu&&a.acu.length?"":"none"},childNodes:SF.dk.l(null,["dek","lbl"])}]},a.mcc?{childNodes:[{id:"SFevtadvmcc"}]}:null,{className:"SFpad",childNodes:[{nodeName:"button",onclick:SF.ev.a.s,innerHTML:"Save"}]}]}]}:null,{id:"SFevtadverg",className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Confirmation Email"},{className:"SFblc",formRows:[{label:"Subject line for confirmation email sent to event registrants",childNodes:[{nodeName:"input",
type:"text",name:"tpl[erg][ttl]"}]},{label:"Message for confirmation email sent to event registrants",childNodes:[{nodeName:"textarea",name:"tpl[erg][dtl]",className:"SFhtm",style:{height:"15em"}},{nodeName:"a",onclick:SF.ev.a.e,innerHTML:"Preview"}]},{childNodes:[{nodeName:"button",onclick:SF.ev.a.s,innerHTML:"Save"},{nodeName:"button",onclick:SF.ev.a.r,innerHTML:"Reset"}]}]}]},{id:"SFevtadvtxx",className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Tax Rules"},{id:"SFevtadvtxxlst",
className:"SFlst"},{id:"SFevtadvtxxbtx",className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.ev.a.s,innerHTML:"Save"},{nodeName:"button",onclick:SF.ev.a.r,innerHTML:"Reset"}]}]},{className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",innerHTML:"Payment Setup"},{formRows:[{label:"Currency",childNodes:[{nodeName:"select",name:"cur",childNodes:b}]},{label:"Payment gateway",noWrap:!0,childNodes:[{nodeName:"select",name:"pay[spy]",onchange:function(){SF.lib.s(".SFevtspy0","0"==this.value);
SF.lib.s(".SFevtspy1","1"==this.value);SF.lib.s(".SFevtspy3","3"==this.value)},childNodes:[{nodeName:"option",value:"",innerHTML:"Default"},{nodeName:"option",value:"0",innerHTML:"Stripe"},{nodeName:"option",value:"1",innerHTML:"Paypal Website Payments Pro"},{nodeName:"option",value:"3",innerHTML:"Authorize.net"}]}]},{className:"SFevtspy0",label:"Live restricted key",childNodes:[{nodeName:"input",type:"text",name:"pay[ssk]",required:!0},{nodeName:"a",title:"Help",onclick:function(){SF.hlp.dlg(51)},
childNodes:[{nodeName:"i",className:"SFicohlp"}]}]},{className:"SFevtspy0",label:"Live public key",childNodes:[{nodeName:"input",type:"text",name:"pay[spk]",required:!0}]},{className:"SFevtspy1",label:"API username",childNodes:[{nodeName:"input",type:"text",name:"pay[spu]",required:!0},{nodeName:"a",title:"Help",onclick:function(){SF.hlp.dlg(53)},childNodes:[{nodeName:"i",className:"SFicohlp"}]}]},{className:"SFevtspy1",label:"API password",childNodes:[{nodeName:"input",type:"text",name:"pay[spp]",
required:!0}]},{className:"SFevtspy1",label:"Signature",childNodes:[{nodeName:"input",type:"text",name:"pay[sps]",required:!0}]},{className:"SFevtspy1",childNodes:[{className:"SFemp",innerHTML:'Make sure to update your Paypal Instant Payment Notifications to "https://web.archive.org/web/20250818163513/https://api.membershipworks.com/fi/pay"'}]},{className:"SFevtspy3",label:"API login ID",childNodes:[{nodeName:"input",type:"text",name:"pay[spn]",required:!0},{nodeName:"a",title:"Help",onclick:function(){SF.hlp.dlg(54)},childNodes:[{nodeName:"i",
className:"SFicohlp"}]}]},{className:"SFevtspy3",label:"Transaction key",childNodes:[{nodeName:"input",type:"text",name:"pay[spt]",required:!0}]},{className:"SFevtspy3",label:"Public client key",childNodes:[{nodeName:"input",type:"text",name:"pay[spc]"}]},{className:"SFpad",childNodes:[{nodeName:"button",onclick:SF.ev.a.s,innerHTML:"Save"}]}]}]}]}]);SF.lib.it('#SFevtadv [name="tpl[erg][dtl]"]',SF._st.admin?"tag":!0,SF._st.admin?SF.mt.erg:!1)}SF.lib.f("SFevtadv",a,a.eid?!0:!1);(a.pay||!a._st._px||
"undefined"==typeof a._st._px.spy||0!==a._st._px.spy&&3!==a._st._px.spy)&&SF.lib.s("SFevtadvds0",!1);a.ds3&&(SF.set(SF.$("SFevtadvds3").previousSibling,!0),SF.lib.s("SFevtadvds3",!0));SF.lib.s(".SFevtspy0",a.pay&&0===a.pay.spy?!0:!1);SF.lib.s(".SFevtspy1",a.pay&&1===a.pay.spy?!0:!1);SF.lib.s(".SFevtspy3",a.pay&&3===a.pay.spy?!0:!1);SF.co.u.i("SFevtadvtxxlst",a.tax);a.mcc&&SF.co.l.i("SFevtadvmcc",a.mcc)};
SF.ev.a.s=function(a){var b=SF.d.get(SF.$("SFevtadm")),c,d;a=SF.lib.fp(c=a.currentTarget,".SFbox");if("SFevtadvtxx"==a.id)var e={tax:SF.co.u.g("SFevtadvtxxlst")};else{if(!SF.v(a))return;e=SF.lib.f(a);"undefined"==typeof e.ds3&&a.querySelector('[name="ds3"]')&&(e.ds3="");"undefined"!=typeof e.act&&e.act.length||!a.querySelector('[name="act"]')||(e.act="");"undefined"!=typeof e.acn&&e.acn.length||!a.querySelector('[name="acn"]')||(e.acn="");if(("undefined"==typeof e.acu||!e.acu.length)&&a.querySelector('[name="acu"]'))e.acu=
"";else if(e.acu&&e.acu.length){for(d=SF._st.dek.length-1;0<=d&&!(0<=e.acu.indexOf(SF._st.dek[d].did));d--);if(0>d){SF.lib.alr("Please specify 1 or more folders to place the created account.",{target:a.querySelector('[name="acu"]'),placement:"v"});return}}"undefined"!=typeof e.mcc&&e.mcc.lst&&e.mcc.lst.length&&e.mcc.lst[0]._id||!a.querySelector("#SFevtadvmcc")||(e.mcc="")}SF._st._do="Saving event settings";SF.lib.xhr("PATCH","v2/event/"+b.eid,e,{admin:!0}).then(function(f){SF.lib.ml(b,f);var h=SF.lib.c(f);
h.mcc&&h.mcc.lst&&h.mcc.lst[0].tag&&h.mcc.lst[0].tag.add&&(h.mcc.lst[0].tag=h.mcc.lst[0].tag.add.join(";"));SF.lib.f("SFevtadv",h);f._st&&f._st._px&&SF.lib.s("SFevtadvds0","undefined"==typeof f._st._px.spy||0!==f._st._px.spy&&3!==f._st._px.spy?!1:!0);c.className="SFput";setTimeout(function(){c.className=""},2E3)}).catch(SF.lib.alr)};
SF.ev.a.r=function(a){var b=SF.d.get(SF.$("SFevtadm"));var c=a.currentTarget;var d=SF.lib.fp(c,".SFbox");if("SFevtadvtxx"==d.id)var e={tax:""};else if("SFevtadverg"==d.id)e={tpl:{erg:""}};else return;(new Promise(function(f){SF.lib.dg("SFevtdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){f(!1)},innerHTML:"Cancel"},{},{nodeName:"button",onclick:function(){f(!0)},innerHTML:"Confirm reset"}]},{target:c,placement:"v"})})).then(function(f){SF.lib.dg("SFevtdlg",!1);if(f)return SF._st._do=
"Resetting settings",SF.lib.xhr("PATCH","v2/event/"+b.eid,e,{admin:!0}).then(function(h){SF.lib.ml(b,h);"SFevtadvtxx"==d.id?SF.co.u.i("SFevtadvtxxlst",h.tax):SF.lib.f("SFevtadv",h);c.className="SFput";setTimeout(function(){c.className=""},2E3)})}).catch(SF.lib.alr)};
SF.ev.a.e=function(a){var b=SF.d.get(SF.$("SFevtadm")),c=a.currentTarget;if(SF.v("SFevtadverg")){var d=SF.lib.f("SFevtadverg");(new Promise(function(e){SF.lib.dg("SFevtdlg",{childNodes:[{innerHTML:"Email preview to:"},{nodeName:"input",type:"text",name:"eml","aria-label":"Email preview to",required:!0},{className:"SFbtx",childNodes:[{nodeName:"button",onclick:function(){SF.v("SFevtdlg")&&e(!0)},innerHTML:"Send"},{nodeName:"button",onclick:function(){e(!1)},innerHTML:"Cancel"}]}]},{target:c,placement:"v"});
SF.lib.f("SFevtdlg",SF._st.usr)})).then(function(e){var f=SF.lib.f("SFevtdlg");SF.lib.dg("SFevtdlg",!1);if(e)return f.tpl="erg",f.msg=d.tpl.erg,f.eid=b.eid,SF._st._do="Preview template",SF.lib.xhr("POST","v1/tpl",f).then(function(h){SF.lib.dg("SFevtdlg",{childNodes:[{nodeName:"p",innerHTML:"Preview email sent!"},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Close"}]},{target:c,placement:"v"})})}).catch(SF.lib.alr)}};SF.ep={};
SF.ep.o=function(a,b){b=void 0===b?null:b;var c=!1,d=SF.lib.gq("discount");a=a.split("/");if("!event-register"===a[0]){var e=a.slice(1).join("/");var f=!0;var h=!1}else"register"==a[1]?(e=a.slice(2).join("/"),f=!0):(e=a.slice(1).join("/"),f=!1),h=!0;(new Promise(function(g){SF.$("SFevtpne")&&(c=SF.d.get(SF.$("SFevtpay")))&&c.url==e?g(c):(SF.ep.c(),b&&b.data?(b.pst&&SF.lib.sn(!0),g(b.data)):(SF._st._do="Getting event",g(SF.lib.xhr("GET","v2/event?url="+e+(d?"&dcc="+encodeURIComponent(d):""),{handleErrors:!1,
admin:!1}))))})).then(function(g){var k,m,l=!1,n=!1;if(!SF.$("SFevtpne")||!c||c!=g){if(g&&g.error&&g.dsv)return SF.ss.o(),Promise.reject(null);if(!g||g.error)return Promise.reject(g?g.error:"No response from server");if(g._zx&&h)return SF.lib.re(g._zx,!0),Promise.reject(null);c=g;c.url=e;SF.lib.i("SFpne",[{id:"SFevtpne",className:"SFpne",data:c,style:{display:"none"},childNodes:[h?{id:"SFevtinf",className:"SFevtpne",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/http://schema.org/Event"}:null,g.tkt?{id:"SFevtpay",className:"SFevtpne",
role:"form",style:{display:"none"}}:null]}]);if(h){g=SF.get("SFctr","data-ini").match(/^!event-list/)||SF.$("SFevtlst")?{nodeName:"a",href:"#!event-list",innerHTML:"Event List"}:SF.get("SFctr","data-ini").match(/^!calendar/)||SF.$("SFevtcal")?{nodeName:"a",href:"#"+(SF.$("SFevtcal")?"!calendar"+(SF.get("SFctr","data-evi")?"/r":""):SF.get("SFctr","data-ini")),innerHTML:"Calendar"}:null;if(SF.$("SFevtlst")){if(k=SF.$("SFevt"+c.eid))l=k.nextSibling&&k.nextSibling.href?{url:k.nextSibling.href.split("#")[1],
ttl:k.nextSibling.querySelector("h2").innerHTML.split("<")[0]}:!1,n=k.previousSibling&&k.previousSibling.href?{url:k.previousSibling.href.split("#")[1],ttl:k.previousSibling.querySelector("h2").innerHTML.split("<")[0]}:!1}else if(SF.$("SFevtcal"))for(k=0,m=SF.$("SFevtcal").querySelectorAll("a[data-eid]");k<m.length;k++)if(m[k].getAttribute("data-eid")==c.eid){m[k-1]&&(n={id:m[k-1].getAttribute("data-eid"),url:m[k-1].href.split("#")[1],ttl:m[k-1].innerHTML});for(k+=1;m[k]&&(m[k].getAttribute("data-eid")==
c.eid||n&&m[k].getAttribute("data-eid")==n.id);k++);m[k]&&(l={id:m[k].getAttribute("data-eid"),url:m[k].href.split("#")[1],ttl:m[k].innerHTML});break}"undefined"!=typeof c.loc&&("undefined"==typeof c.adr?c.adr={loc:c.loc}:"string"==typeof c.adr?c.adr={ad2:c.adr,loc:c.loc}:"undefined"==typeof c.adr.loc&&(c.adr.loc=c.loc));SF.lib.i("SFevtinf",[{nodeName:"meta",itemprop:"url",content:window.location.href.split("#")[0]+"#!event/"+c.url},{nodeName:"meta",itemprop:"startDate",content:(new Date(c.sdp)).toUTCString()},
c.edp?{nodeName:"meta",itemprop:"endDate",content:(new Date(c.edp)).toUTCString()}:null,{nodeName:"meta",itemprop:"eventStatus",content:"EventScheduled"},{id:"SFevtinfmnu",className:"SFlsx",childNodes:[g,"undefined"==typeof c._ae?null:{nodeName:"a",href:"#event/admin/"+c.eid,innerHTML:"Admin"},n?{nodeName:"a",href:"#"+n.url,childNodes:[{nodeName:"i",className:"SFicoarl"},{nodeName:"span",innerHTML:20<n.ttl.length?n.ttl.slice(0,20)+"...":n.ttl}]}:null,l?{nodeName:"a",href:"#"+l.url,childNodes:[{nodeName:"span",
innerHTML:20<l.ttl.length?l.ttl.slice(0,20)+"...":l.ttl},{nodeName:"i",className:"SFicoarr"}]}:null]},{id:"SFevtinftop",childNodes:[c.lgo?{nodeName:"img",id:"SFevtinfimg",itemprop:"image",src:c.lgo.l,alt:"Image for "+SF.lib.fr(c.ttl),onerror:function(){SF.lib.dn(this)},onload:function(){this.style.opacity=1},style:{opacity:0}}:null,{nodeName:"h1",id:"SFevtinfttl",itemprop:"name",className:"SFevtcol"+("undefined"==typeof c.col?1:c.col),innerHTML:SF.lib.fr(c.ttl,{allowed:["br"]})}]},SF.get("SFctr",
"data-scl")?null:{id:"SFevtinfscl"},{id:"SFevtinfdtl",itemprop:"description",innerHTML:SF.lib.fx(c.dtl,{allowed:["a","img"]})},c.adr&&c.adr.loc?{id:"SFevtinfmap",childNodes:[SF.lib.lm("embed",SF.lib.me(c.adr,SF.lib.c(c._st||{},{only:["_rc"]})))]}:null,{id:"SFevtinfbtm",childNodes:[{nodeName:"table",childNodes:[{nodeName:"tbody",itemprop:"location",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/http://schema.org/Place",childNodes:[c.erl?{nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:"Link"},{nodeName:"td",childNodes:[{nodeName:"a",
itemprop:"url",href:c.erl,target:SF.get("SFctr","data-wgo")?"_blank":null,onclick:SF.get("SFctr","data-wgo")?null:SF.lib.re,innerHTML:SF.lib.fr(c.erl)}]}]}:null,c.adn?{nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:"Venue"},{nodeName:"td",itemprop:"name",innerHTML:SF.lib.fr(c.adn)}]}:null,c.adr?{nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:"Address"},{nodeName:"td",itemprop:"address",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/https://schema.org/PostalAddress",innerHTML:SF.lib.fb(c.adr)}]}:null,c.adr&&c.adr.loc?
{nodeName:"tr",style:{display:"none"},childNodes:[{nodeName:"td",itemprop:"geo",itemscope:"",itemtype:"https://web.archive.org/web/20250818163513/http://schema.org/GeoCoordinates",childNodes:[{nodeName:"meta",itemprop:"longitude",content:c.adr.loc[0]},{nodeName:"meta",itemprop:"latitude",content:c.adr.loc[1]}]}]}:null,c.szp?{nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:"Starts"},{nodeName:"td",innerHTML:SF.lib.fr(c.szp)}]}:null,c.ezp?{nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:"Ends"},{nodeName:"td",innerHTML:SF.lib.fr(c.ezp)}]}:
null]}]},!c.tkt||b&&b.pst?null:{nodeName:"a",id:"SFevtpaybtn",className:"SFbtn SFbig",role:"button","aria-controls":"SFevtpay",href:"#!event/register/"+c.url,innerHTML:c.btn?SF.lib.fr(c.btn):"Register Now!"}]}]);SF.$("SFevtinfmnu").childNodes.length||SF.lib.dn("SFevtinfmnu");SF.lib.is("SFevtinfscl",window.location.href.split("#")[0]+"#!event/"+c.url,c.ttl)}if(c.tkt)return SF.er.i(c,null,b)}}).then(function(){SF.lib.s("SFevtpne")||SF.lib.se("SFevtpne");SF.lib.sm({url:window.location.href.split("#")[0]+
"#!event/"+c.url,title:c.ttl,description:c.dtl,image:c.lgo?c.lgo.l:""});if(b&&b.pst)return SF.lib.s("SFevtpay",!0),SF.lib.sv("SFevtpaybtx"),SF.lib.sn({resumingPayment:!0}),SF.er.p(b.pst);f?SF.er.o():SF._st.ini||SF.lib.fc("SFevtpne");c.warn&&(SF.lib.alr(c.warn),delete c.warn)}).catch(SF.lib.alr)};SF.ep.c=function(){SF.lib.dn("SFevtpne")};SF.r({url:/^!(event|event\/register|event-register)\/[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}\/[^\/]+$/,pageId:"SFevtpne",open:SF.ep.o,close:SF.ep.c});SF.er={};
SF.er.o=function(){var a=SF.d.get(SF.$("SFevtpay"));SF.$("SFevtsrd")?SF.lib.s("SFevtpay",!1):(SF.lib.dn("SFevtpaybtn"),SF.lib.s("SFevtpay",!0),SF.lib.sv("SFevtpay",null),SF._st.ini||SF.$("SFevtpay").setAttribute("aria-live","polite"));a&&("undefined"==typeof a.xec||!1!==a.xec)&&SF._st.usr.end&&SF._st.usr.end<parseInt((new Date).getTime()/1E3)+SF._st._rt-86400&&SF.lib.dg("SFevtdlg",{className:"SFlst",childNodes:[{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1);SF.open("renew")},childNodes:[{nodeName:"hgroup",
childNodes:[{nodeName:"h2",innerHTML:"Renew today!"},{innerHTML:"Your account is past due, click here to renew"}]}]},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtdlg",!1)},childNodes:[{nodeName:"hgroup",childNodes:[{nodeName:"h2",innerHTML:"Renew later"},{innerHTML:"Continue without renewing"}]}]}]})};
SF.er.i=function(a,b,c){b=void 0===b?null:b;c=void 0===c?null:c;var d,e=a.tpl?!0:!1,f=!1,h=!1,g=[],k=SF.lib.gq("discount");if(SF.$("SFevtpay")&&a.eid&&a.tkt&&a.tkt.length){SF.d.set(SF.$("SFevtpay"),a);a._st._rc&&(SF._st._rc=a._st._rc);b&&SF.e.set(SF.$("SFevtpay"),b);var m=0;for(d=!1;m<a.tkt.length;m++)"undefined"!=typeof a.tkt[m].mux&&0===a.tkt[m].mux&&(d=!0);var l=parseInt((new Date).getTime()/1E3);if(!e&&("undefined"!=typeof a.lim&&0===a.lim||"undefined"!=typeof a.cap&&0===a.cap&&!d||!a.erd&&l>
a.sdp||a.erd&&l>a.erd))SF.$("SFevtpaybtn")?SF.$("SFevtpaybtn").parentNode.replaceChild(SF.lib.n({nodeName:"h2",className:"SFemp",innerHTML:"Registration is closed."}),SF.$("SFevtpaybtn")):SF.lib.i("SFevtpne",[{id:"SFevtpay",innerHTML:"Registration is closed."}]);else{for(m=0;m<a.tkt.length;m++)if(!a.tkt[m].dsp){d=a.tkt[m].amt?a.tkt[m].amt:0;if(!1===f||f>d)f=d;if(!1===h||h<d)h=d}SF.lib.i("SFevtpay",[{id:"SFevtpaytkt",className:"SFbox",itemprop:!1===f?null:"offers",itemscope:!1===f?null:"",itemtype:!1===
f?null:"https://web.archive.org/web/20250818163513/https://schema.org/"+(f==h?"Offer":"AggregateOffer"),childNodes:[{nodeName:"table",className:"SFitn",childNodes:[{nodeName:"thead",childNodes:[{nodeName:"tr",childNodes:[{nodeName:"th"},{nodeName:"th",innerHTML:"Price"},{nodeName:"th",innerHTML:"Qty"}]}]},{nodeName:"tbody"},{nodeName:"tfoot",childNodes:[{nodeName:"tr",childNodes:[e?{nodeName:"td",childNodes:[{innerHTML:"Total"},b&&b.sum&&!b.due?{innerHTML:b.sid?"Payment ID: "+b.sid:"Admin marked as paid",className:"SFplh"}:null,b&&b.dcc?{innerHTML:"Discount "+
(b.dcc.lbl?'"'+SF.lib.fr(b.dcc.lbl)+'" ':"")+"applied",className:"SFplh"}:null]}:{nodeName:"td",innerHTML:"Total"},e?{nodeName:"td",colSpan:2,childNodes:[{childNodes:[{nodeName:"input",type:"price",min:0,required:!0,value:0,id:"SFevtpaytxr","aria-label":"Tax excluded",className:"SFemp",disabled:!0},{nodeName:"span",className:"SFplh",innerHTML:"tax excluded"}]},{childNodes:[{nodeName:"input",type:"price",name:"tax",min:0,required:!0,value:0,id:"SFevtpaytax","aria-label":"Tax",onchange:function(){SF.set(this,
"data-fix",1);SF.er.h().catch(SF.lib.alr)}},{nodeName:"span",className:"SFplh",innerHTML:"tax"+(b&&b.txx&&b.txx.txi||!b&&a._st._tx&&a._st._tx.txi?" included":"")}]},{childNodes:[{nodeName:"input",type:"price",name:"sum",min:0,required:!0,value:0,id:"SFevtpaysum","aria-label":"Total",className:"SFemp",disabled:!0},{nodeName:"span",className:"SFplh",innerHTML:"gross amount"}]},b&&"undefined"!=typeof b.due?{childNodes:[{nodeName:"input",type:"price",name:"due",min:0,required:!0,value:0,onchange:function(){SF.set(this,
"data-fix",1);SF.er.h().catch(SF.lib.alr)}},{nodeName:"span",className:"SFplh",innerHTML:"owed"}]}:null]}:{nodeName:"td",id:"SFevtpaysum",colSpan:2}]}]}]},!1===f?null:{nodeName:"meta",itemprop:"priceCurrency",content:a.cur.toUpperCase()},!1===f?null:{nodeName:"meta",itemprop:"lowPrice",content:SF.lib.fa(f).replace(/,/g,"")},!1===f||f==h?null:{nodeName:"meta",itemprop:"highPrice",content:SF.lib.fa(h).replace(/,/g,"")}]},e||!a.erd||b?null:{id:"SFevtpayerd",className:"SFbox"},{id:"SFevtpayalt",className:"SFbox",
childNodes:[{nodeName:"formtable"}]},{id:"SFevtpayreg",className:"SFbox"},e?{id:"SFevtpayopt",className:"SFbox",childNodes:[{formRows:[b?null:{label:"Payment",id:"SFevtpay_ep",childNodes:[{nodeName:"select",name:"_ep",onchange:function(){SF.er.d().catch(SF.lib.alr)},childNodes:[{nodeName:"option",value:"",innerHTML:"Mark as fully paid"},{nodeName:"option",value:"1",innerHTML:"Process payment"},{nodeName:"option",value:"2",innerHTML:"Mark as payment owed"},{nodeName:"option",value:"3",innerHTML:"Mark amounts as 0 (comp)"}]}]},
b&&"undefined"!=typeof b.due?{id:"SFevtpay_ep",childNodes:[{nodeName:"input",type:"checkbox",name:"_ep",onchange:function(){SF.er.d().catch(SF.lib.alr)},innerHTML:"Process payment for amount due"}]}:null,{childNodes:[{nodeName:"input",type:"checkbox",name:"_en",checked:b?!1:!0,innerHTML:(b?"Re-send":"Send")+" registration confirmation email"}]},b?{childNodes:[{nodeName:"input",type:"checkbox",name:"_er",innerHTML:"Re-send payment receipt/invoice"}]}:null]}]}:null,{id:"SFevtpaypay",className:"SFbox"},
{id:"SFevtpaybtx",className:"SFfpybtx",childNodes:[{nodeName:"button",className:"SFfpybtn SFbig",onclick:SF.er.s,innerHTML:e?b?"Update Registration":"Add Registration":a.btn?a.btn:"Register!"},e?{nodeName:"button",className:"SFbig",onclick:function(){SF.lib.dg("SFevtdlg",!1)},innerHTML:"Cancel"}:null]}]);if(a._st.evt){var n=[];for(m=0;m<a._st.evt.length;m++)n.push(a._st.evt[m])}else n=[{lbl:"Full name",_id:"nam",typ:1,req:1}],a.rad&&a.rad&1||n.push({lbl:"Address",_id:"adr",typ:7,req:e?0:1}),a.rad&&
a.rad&2||n.push({lbl:"Phone",_id:"phn",typ:1,rxp:"^[0-9x\\+\\-\\.\\(\\)\\s,]*$"}),n.push({lbl:"Email",_id:"eml",typ:1,req:e?0:1,rxp:"^\\s*[a-zA-Z0-9\\.!#\\$%&'*\\+\\-/=\\?\\^`_{\\|}~]+@[a-zA-Z0-9\\-\\._]+\\.[a-zA-Z]{2,}\\s*$"});if(a.reg)for(d=0;d<a.reg.length;d++)m="undefined"==typeof a.orr||"undefined"==typeof a.orr[d]?d:a.orr[d],"undefined"!=typeof a.reg[m]&&(a.reg[m]._id="reg["+m+"]",n.push(a.reg[m]));var q=SF.lib.tf(n,b||{},!1);SF.lib.i("SFevtpayreg",[q]);if(n=q.querySelector('input[name="phn"]'))n.onfocus=
SF.er.f;if(n=q.querySelector('input[name="adr[ad1]"]'))n.onfocus=SF.er.f;if(n=q.querySelector('input[name="adr[ad2]"]'))n.onfocus=SF.er.f;if((n=q.querySelectorAll('input[name="nam"],input[name="eml"]'))&&n.length){for(m=0;m<n.length;m++)n[m].onfocus=SF.er.f;if(SF._st.admin&&!b){for(m=0;m<n.length;m++)n[m].onchange=SF.er.c;SF.lib.i("SFevtpay",[{nodeName:"input",type:"hidden",name:"uid"},SF.$('#SFevtpay [name="ntx"]')?null:{nodeName:"input",type:"hidden",name:"ntx"}])}}if(n=q.querySelector('input[name="pwd"]'))e?
SF.lib.dn(SF.lib.fp(n,"TR")):(SF.lib.dn(n.previousSibling),SF.lib.s(n,!0),n.removeAttribute("readonly"));q=SF.$("#SFevtpaytkt tbody");for(d=0;d<a.tkt.length;d++)m="undefined"==typeof a.ort||"undefined"==typeof a.ort[d]?d:a.ort[d],SF.lib.i(q,[{nodeName:"tr",childNodes:[{nodeName:"td",childNodes:[{nodeName:"label","for":"SFevtpaytkt"+m,innerHTML:SF.lib.fr(a.tkt[m].lbl)+("undefined"!=typeof a.tkt[m].cap&&0===a.tkt[m].cap?" (deleted)":"")}]},{nodeName:"td",childNodes:[e?null:{nodeName:"label","for":"SFevtpaytkt"+
m,innerHTML:"undefined"==typeof a.tkt[m].amt?"-":SF.lib.fa(a.tkt[m].amt,a)},e?{nodeName:"input",type:"price",min:0,required:!0,id:"SFevtpaytka"+m,value:a.tkt[m].amt?a.tkt[m].amt:0,"aria-label":"Price for "+SF.lib.ft(a.tkt[m].lbl)+" ticket",onchange:function(){SF.set(this,"data-fix",1);SF.set("SFevtpaytax","data-fix",null);SF.er.h().catch(SF.lib.alr)}}:null]},{nodeName:"td",childNodes:[{nodeName:"select",id:"SFevtpaytkt"+m,onchange:SF.er.g,childNodes:[{nodeName:"option",value:"",innerHTML:""},{nodeName:"option",
value:"1",innerHTML:"1"},{nodeName:"option",value:"2",innerHTML:"2"},{nodeName:"option",value:"3",innerHTML:"3"},{nodeName:"option",value:"4",innerHTML:"4"},{nodeName:"option",value:"5",innerHTML:"5"},{nodeName:"option",value:"6",innerHTML:"6"},{nodeName:"option",value:"7",innerHTML:"7"},{nodeName:"option",value:"8",innerHTML:"8"},{nodeName:"option",value:"9",innerHTML:"9"},{nodeName:"option",value:"10",innerHTML:"10+"}]}]}]}]);e||g.push(SF.lib.sw({pageElement:"SFevtpay",settings:a._st}));g.push(SF.lib.sy({pageElement:"SFevtpay",
paymentElement:"SFevtpaypay",settings:a._st,getName:b&&b.crd&&b.crd.nam?!0:!1,getAddress:b&&b.crd&&(b.crd.con||b.crd.ad1||b.crd.ad2)?!0:!b&&a._st._tx&&a._st._tx.tax?"tax":!1,getPaymentMethod:e&&b&&"undefined"==typeof b.due?!1:!0,allowPaymentMethodId:a._st._px&&a._st._px.rid||e&&!b?!0:!1,allowOffline:!e&&a.ds3?a.ds3:!1,allowDiscountCode:e?!1:SF.er.e,currency:a.cur,preProcess:{act:b?"PATCH":"POST",url:"v2/event/"+a.eid+"/registration"+(b?"/"+b._id:""),opt:{admin:e?!0:!1}}}));return Promise.all(g).then(function(){a._st._tx&&
a._st._tx.tax&&(!b&&(n=SF.$('#SFevtpaypay [name="crd[ad2]"]'))&&(n.required=!0,n.oninput=SF.v,n.onblur=function(t){SF.v(t)&&SF.lib.gg(t).then(function(u){if(u)return SF.er.h()}).catch(SF.lib.alr)}),n=SF.$('#SFevtpayreg [name="ntx"]'))&&(n.onchange=function(){SF.er.h().catch(SF.lib.alr)});if(n=c&&c.pst?SF.lib.c(c.pst):b?SF.lib.c(b):null){if(n.reg)for(m=0,q=SF.$("SFevtpayreg");m<n.reg.length;m++)q.querySelector('[name="reg['+m+']"]')||SF.lib.i(q,[{nodeName:"input",type:"hidden",name:"reg["+m+"]",value:n.reg[m]}]);
for(m=0;m<n.tkt.length;m++)n.tkt[m]&&(9<n.tkt[m]&&(SF.set("SFevtpaytkt"+m,10),SF.er.g({currentTarget:SF.$("SFevtpaytkt"+m)})),SF.set("SFevtpaytkt"+m,n.tkt[m]));return SF.er.h().then(function(){if(n.alt)for(m=0,n.dat={};m<n.alt.length;m++)n.dat[n.alt[m].tkt+"_"+("undefined"==typeof n.alt[m].idx?m:n.alt[m].idx)]=n.alt[m].reg;e&&b&&!n.tax&&(n.tax=0);SF.lib.f("SFevtpay",n)}).then(SF.er.h).then(function(){if(e&&n.itm)for(m=0;m<n.itm.length;m++)"undefined"!=typeof n.itm[m].tkt?SF.set("SFevtpaytka"+n.itm[m].tkt.toString(),
n.itm[m].amt):"undefined"!=typeof n.itm[m].ssn&&SF.set("SFevtpayssa"+n.itm[m].ssn.toString(),n.itm[m].amt);SF.lib.f("SFevtpay",n);if(e)return SF.er.d().then(function(){SF.lib.f("SFevtpay",n)})}).catch(SF.lib.alr)}!e&&SF._st.usr.uid&&!SF._st.usr.org&&SF._st.usr.adr&&SF.lib.f("SFevtpay",{crd:{nam:SF._st.usr.nam||"",ad1:SF.lib.f1(SF._st.usr.adr),ad2:SF.lib.f2(SF._st.usr.adr)}});!e&&k&&SF.lib.f("SFevtpay",{dcc:k});1==(n=SF.$("SFevtpaytkt").querySelectorAll("select")).length&&SF.set(n[0],"1");e||(a.srd&&
l<a.srd?(SF.$("SFevtpaybtn")?SF.$("SFevtpaybtn").parentNode.replaceChild(SF.lib.n({id:"SFevtsrd"}),SF.$("SFevtpaybtn")):(SF.lib.i(SF.$("SFevtpay").parentNode,[{id:"SFevtsrd"}],SF.$("SFevtpay")),SF.lib.s("SFevtpay",!1)),SF.er.b()):a.erd&&SF.er.b());return SF.er.h().catch(SF.lib.no)})}}};
SF.er.b=function(){var a=SF.d.get(SF.$("SFevtpay")),b;var c=parseInt((new Date).getTime()/1E3);if(SF.$("SFevtsrd")){if(0<(b=a.srd-c)){a=Math.floor(b/86400);c=Math.floor(b%86400/3600);var d=Math.floor(b%3600/60);b=Math.floor(b%60);SF.set("SFevtsrd",'<div>Registration begins in</div><div class="SFbig">'+(1<a?a+" days + ":"")+(1==a?24+c:c)+":"+(10>d?"0":"")+d+":"+(10>b?"0":"")+b+"</div>");setTimeout(SF.er.b,1E3);return}SF.lib.dn("SFevtsrd");SF.er.o()}SF.$("SFevtpayerd")&&(0<(b=a.erd-c)?(a=Math.floor(b/
86400),c=Math.floor(b%86400/3600),d=Math.floor(b%3600/60),b=Math.floor(b%60),0<a?SF.lib.s("SFevtpayerd",!1):(SF.set("SFevtpayerd","Registrations close in "+c+":"+(10>d?"0":"")+d+":"+(10>b?"0":"")+b),SF.lib.s("SFevtpayerd",!0)),setTimeout(SF.er.b,1E3)):(SF.lib.cn("SFevtpay"),SF.lib.i("SFevtpay",[{nodeName:"h2",className:"SFemp",innerHTML:"Registration is closed"}])))};
SF.er.c=function(a){SF.v(a.currentTarget)&&SF.get(a.currentTarget)&&SF.co.f(a.currentTarget).then(function(b){return b?SF.lib.xhr("GET","v2/account/"+b.uid,{admin:!0}).then(function(c){var d=SF.d.get(SF.$("SFevtpay")),e,f="";if(b.parent&&b.parent.nam)for(e=0;e<d._st.evt.length;e++)if(d._st.evt[e]._id&&"ctc"==d._st.evt[e]._id){c.ctc=c.nam;c.nam=b.parent.nam;break}SF.lib.f("SFevtpay",SF.lib.me(c,{uid:c.pid||c.uid,ntx:c.ntx||""}));if(c.dek)for(e=0;e<c.dek.length;e++)"undefined"==typeof c.dek[e].spy||
0!=c.dek[e].spy&&3!=c.dek[e].spy||!c.dek[e].rid||(f=c.dek[e].rid);SF.lib.sy({pageElement:"SFevtpay",allowPaymentMethodId:f}).then(SF.er.h).catch(SF.lib.alr)}):Promise.reject(null)}).catch(function(b){SF.lib.f("SFevtpay",{uid:"",ntx:""});SF.lib.sy({pageElement:"SFevtpay",allowPaymentMethodId:""}).then(SF.er.h).catch(SF.lib.alr)})};
SF.er.f=function(a){var b=SF.d.get(SF.$("SFevtpay")),c,d;if(!a.currentTarget.value){var e=a.currentTarget.name;for(c=0;c<b.tkt.length;c++){var f="undefined"==typeof b.ort||"undefined"==typeof b.ort[c]?c:b.ort[c];if(b.tkt[f].reg&&parseInt(SF.get("SFevtpaytkt"+f)))for(d=0;d<b.tkt[f].reg.length;d++)if(b.tkt[f].reg[d]._id==e.slice(0,3)){(b=SF.$('#SFevtpayalt [name="dat['+f+"]["+d+"]"+(3<e.length?e.slice(3):"")+'"]'))&&b.value&&(a.currentTarget.value=b.value);return}}}};
SF.er.g=function(a){var b=parseInt(SF.get(a.currentTarget));if("SELECT"==a.currentTarget.nodeName&&10<=b){var c=a.currentTarget.id;var d=a.currentTarget.getAttribute("aria-label");a.currentTarget.parentNode.replaceChild(b=SF.lib.n({nodeName:"input",id:c,"aria-label":d,type:"count",min:0,value:b,onchange:SF.er.g}),a.currentTarget);a.type&&"change"==a.type&&SF.lib.fc(b)}a.type&&"change"==a.type&&(SF.set("SFevtpaytax","data-fix",null),SF.er.h().catch(SF.lib.alr))};
SF.er.e=function(){var a=SF.d.get(SF.$("SFevtpay")),b=SF.lib.f("SFevtpaypay");SF._st._do="Applying discount";SF.lib.xhr("GET","v2/event/"+a.eid+(b.dcc?"?dcc="+encodeURIComponent(b.dcc):"")).then(function(c){SF.d.set(SF.$("SFevtpay"),c);return SF.er.h()}).catch(SF.lib.alr)};
SF.er.d=function(a){a=SF.d.get(SF.$("SFevtpay"));var b=SF.lib.f("SFevtpay");return"3"===b._ep?(SF.set("SFevtpaysum",0),SF.set("SFevtpaytax",0),SF.set("SFevtpaytxr",0),SF.lib.sy({pageElement:"SFevtpay",sum:0,getAddress:!1,allowDiscountCode:!1})):0==b.sum&&0==b.tax?SF.er.h():b._ep&&"2"!==b._ep?SF.lib.sy({pageElement:"SFevtpay",sum:SF.get("SFevtpaysum"),getAddress:a._st._tx&&a._st._tx.tax&&!b.ntx?"tax":!1,allowDiscountCode:!1}):SF.lib.sy({pageElement:"SFevtpay",sum:0,getAddress:SF.get("SFevtpaysum")&&
a._st._tx&&a._st._tx.tax&&!b.ntx?!0:!1,allowDiscountCode:!1})};
SF.er.h=function(){var a=SF.lib.c(SF.d.get(SF.$("SFevtpay")),{only:"_st cur cap cnt lim tkt ort ssn ors".split(" ")}),b=SF.e.get(SF.$("SFevtpay")),c=SF.d.get(SF.$("SFevtpay")).usr?!0:!1,d=SF.$("SFevtpayalt").firstChild,e=SF.$("#SFevtpaytkt tbody"),f=!1,h=SF.lib.f("SFevtpay"),g,k,m,l,n,q,t,u,v,x,w,r=!1,p,y,A,C,B,D=0,z=0,G=0,J=0,F=0,L=0,E=0,I=0,P=0,H=0,M=0,R=0,K=[],N=[];return(new Promise(function(O){a._st._tx&&!h.crd&&(k=SF.$("#SFevtpay .SFfpyadr"))&&SF.lib.ml(h,SF.lib.f(k));b&&!h.ntx?(w=b.txx?SF.lib.c(b.txx):
{},O()):a._st._tx&&h.crd&&h.crd.ad2?SF.lib.gg(h.crd).then(function(Q){w=SF.py.x({adr:Q,ntx:h.ntx||""},a._st._tx);O()}).catch(function(){w=SF.py.x({ntx:h.ntx||""},a._st._tx||null);O()}):(w=SF.py.x({ntx:h.ntx||""},a._st._tx||null),O())})).then(function(){"undefined"==typeof w.tax&&(w.tax=0);"undefined"==typeof w.amt&&(w.amt=1);a.cap&&a.cnt&&(a.cap-=a.cnt);if(a.ssn)for(k=0;k<a.ssn.length;k++)a.ssn[k]._id=k.toString(),a.ssn[k].ttl=a.ssn[k].lbl,a.ssn[k].amd&&(f=!0),c&&(t=SF.$("SFevtpayssa"+k))&&(a.ssn[k].amt=
SF.get(t),delete a.ssn[k].amd,a.ssn[k].amt=SF.py.r(a,a.ssn[k].amt)),"undefined"!=typeof a.ssn[k].amt&&(a.ssn[k].lbl+="&nbsp;&nbsp;"+(0<a.ssn[k].amt?"+":"")+SF.lib.fa(a.ssn[k].amt,a.cur)),"undefined"==typeof a.ssn[k].cap||!1===a.ssn[k].cap||0<a.ssn[k].cap||(c&&0===a.ssn[k].cap?(delete a.ssn[k].cap,a.ssn[k].lbl+="&nbsp;&nbsp;(deleted)"):a.ssn[k].lbl+="&nbsp;&nbsp;(sold out)"),a.ssn[k].cnt=0;for(g=0;g<a.tkt.length;g++)if(k="undefined"==typeof a.ort||"undefined"==typeof a.ort[g]?g:a.ort[g],t=SF.$("SFevtpaytkt"+
k))if(p=a.tkt[k],x=t.parentNode,"hidden"==t.type)p.dsp&&H++,p.xec&&M++,SF.lib.fe(d.querySelectorAll("[id^=SFevtpaytkt"+k+"_]"),SF.lib.dn);else{p.amd&&(f=!0);A=t.value?parseFloat(t.value):0;C=c||"undefined"!=typeof p.mux&&0===p.mux?!1:"undefined"!=typeof a.cap&&!1!==a.cap?Math.floor(a.cap/("undefined"==typeof p.mux?1:p.mux)):!1;!c&&"undefined"!=typeof p.cap&&!1!==p.cap&&(!1===C||p.cap-(p.cnt?p.cnt:0)<C)&&(C=p.cap-(p.cnt?p.cnt:0));B=c||"undefined"==typeof p.lim||!1===p.lim?C:!1===C?p.lim:Math.min(C,
p.lim);c||"undefined"==typeof a.lim||!1===a.lim||(B=!1===B?a.lim:Math.min(B,a.lim));if(!c&&p.reg)for(l=0;l<p.reg.length;l++)if("undefined"!=p.reg[l].typ&&"s"==p.reg[l].typ&&p.reg[l].req){q=0;if(a.ssn&&"undefined"!=typeof p.reg[l].ssn)for(n=0;n<a.ssn.length;n++)0>p.reg[l].ssn.indexOf(n)||("undefined"==typeof a.ssn[n].cap||!1===a.ssn[n].cap?q=!1:!1!==q&&0<a.ssn[n].cap&&(q+=a.ssn[n].cap));!1!==q&&(!1===B||B>q)&&(B=q)}if(!c)if("undefined"!=typeof p.cap&&0===p.cap||"undefined"!=typeof p.lim&&0===p.lim)SF.lib.s(SF.lib.fp(t,
"tr"),!1),SF.lib.cn(x),SF.lib.i(x,[{nodeName:"input",type:"hidden",id:t.id}]),A=B=C=0;else if(p.dsp&&(!1===B||0<B||"undefined"!=typeof p.cap&&0===p.cap))SF.lib.cn(x),SF.lib.i(x,[{nodeName:"a",onclick:SF.ss.o,innerHTML:"Sign In"},{nodeName:"input",type:"hidden",id:t.id}]),H++,A=B=C=0;else if(p.xec&&(!1===B||0<B||"undefined"!=typeof p.cap&&0===p.cap))SF.lib.cn(x),SF.lib.i(x,[{nodeName:"a",href:"#renew",innerHTML:"Renew"},{nodeName:"input",type:"hidden",id:t.id}]),M++,A=B=C=0;else if(!1!==B)if(A>B&&
A&&(N.push(p.lbl+" - quantity available for ticket has changed"),SF.set(t,A=B)),0>=B)SF.lib.cn(x),SF.lib.i(x,[{nodeName:"span",innerHTML:0<C||!1===C?0>p.lim?"Registered":"Unavailable":"Sold Out"},{nodeName:"input",type:"hidden",id:t.id}]),A=0;else if(10>B){if(t.childNodes)for(m=11;m>B;m--)SF.lib.dn(t.childNodes[m]);t.nextSibling&&SF.lib.dn(t.nextSibling);C&&10>C&&SF.lib.i(x,[{nodeName:"span",className:"SFemp",style:{whiteSpace:"nowrap"},innerHTML:C+" left"}])}if(c&&SF.$("SFevtpaytka"+k)&&(b||SF.get("SFevtpaytka"+
k,"data-fix")))p.amt=SF.py.r(a,SF.get("SFevtpaytka"+k)),delete p.amd;else{if(A&&p.dcq){l=-1;for(m=p.dcq.length-1;0<=m;m--)"undefined"!=typeof p.dcq[m].qty&&A>=p.dcq[m].qty&&"undefined"!=typeof p.dcq[m].amt&&(0>l||p.dcq[m].qty>p.dcq[l].qty)&&(l=m);0<=l&&(l=Math.max(0,p.amt-p.dcq[l].amt),p.amd=(p.amd?p.amd:0)+p.amt-l,p.amt=l)}SF.$("SFevtpaytka"+k)?SF.set("SFevtpaytka"+k,p.amt?p.amt:0):(SF.lib.cn(x.previousSibling),p.dsp||SF.lib.i(x.previousSibling,[{nodeName:"label","for":t.id,innerHTML:"undefined"==
typeof p.amt?"-":SF.lib.fa(p.amt,a.cur)}]))}(!1===B||0<B)&&(!1===C||0<C)?E++:0>p.cap?I++:0>p.lim&&P++;p.amt&&("undefined"==typeof p.tax?(D+=A*SF.py.r(a,p.amt*w.amt),J+=A*(p.amt-SF.py.r(a,p.amt*w.amt)),G+=A*p.amt*w.tax):(v=SF.py.x(p.tax,w),D+=A*SF.py.r(a,p.amt),G+=SF.py.r(a,A*p.amt*v.tax)));z+=p.amd?A*p.amd:0;F+=A;L+=A*("undefined"==typeof p.mux?1:p.mux);A&&p.dcc&&(r=!0);if(p.reg&&p.reg.reduce(function(O,Q){return O+("undefined"!=typeof Q.typ&&-1==Q.typ?0:1)},0)){for(m=0;m<A;m++){if(m)K.push(K[K.length-
1]);else{l=0;for(u=[];l<p.reg.length;l++)p.reg[l]._id&&u.push(p.reg[l]._id);K.push(u)}if(!SF.$("SFevtpaytkt"+k+"_"+m)){y=SF.lib.c(p.reg);for(l=0;l<y.length;l++){if("undefined"!=typeof y[l].typ&&"s"==y[l].typ){y[l].typ=9;y[l].nul=!0;y[l].opt=[];if(a.ssn)for(n=0;n<a.ssn.length;n++)if(q="undefined"==typeof a.ors||"undefined"==typeof a.ors[n]?n:a.ors[n],c||"undefined"==typeof a.ssn[q].cap||0!==a.ssn[q].cap)"undefined"==typeof y[l].ssn||0>y[l].ssn.indexOf(q)||y[l].opt.push(a.ssn[q]);!y[l].opt.length&&
y[l].req&&N.push(p.lbl+" #"+(m+1)+" - "+y[l].lbl+" option no longer available, please remove ticket")}if(1==K.length&&y[l]._id)if(7==y[l].typ&&(n=SF.$('#SFevtpay input[name="'+y[l]._id+'[ad1]"]'))){if(y[l].def={ad1:SF.get(n)},n=SF.$('#SFevtpay input[name="'+y[l]._id+'[ad2]"]'))y[l].def.ad2=SF.get(n)}else if(n=SF.$('#SFevtpay input[name="'+y[l]._id+'"]'))y[l].def=SF.get(n);y[l]._id="dat["+k+"_"+m+"]["+l+"]"}for(n=d.firstChild;n&&!(l=parseInt(n.className.slice(11).split("_")[0]),a.ort&&a.ort.indexOf(l)>
a.ort.indexOf(k)||!a.ort&&l>k);n=n.nextSibling);l=SF.lib.n({formRows:[{childNodes:[{nodeName:"h4",innerHTML:p.lbl+" #"+(m+1)}]}]});SF.lib.tf(y,{},b?!0:!1,l.firstChild);l.firstChild.id="SFevtpaytkt"+k+"_"+m;SF.lib.i(d,[l.firstChild],n);0<=l.className.indexOf("SFblc")&&(d.className="SFfrm SFblc");for(l=0;l<p.reg.length;l++)"undefined"!=typeof p.reg[l].typ&&"s"==p.reg[l].typ&&(u=d.querySelector('select[name="dat['+k+"_"+m+"]["+l+']"]'))&&(u.setAttribute("data-ssn","1"),u.onchange=function(){SF.er.h()})}}for(;l=
SF.$("SFevtpaytkt"+k+"_"+m);m++)SF.lib.dn(l)}else R+=A}n=d.querySelectorAll("select[data-ssn]");for(k=0;k<n.length;k++){u=SF.get(n[k]);for(m=n[k].lastChild;m&&m.value;m=m.previousSibling)l=parseInt(m.value),c||"undefined"==typeof a.ssn[l].cap||"undefined"==typeof a.ssn[l].cnt||a.ssn[l].cnt<a.ssn[l].cap?m.removeAttribute("disabled"):(u&&u==l.toString()&&SF.set(n[k],u=""),m.setAttribute("disabled","disabled"));u&&a.ssn[parseInt(u)].cnt++}if(a.ssn)for(g=0;g<a.ssn.length;g++)k="undefined"==typeof a.ors||
"undefined"==typeof a.ors[g]?g:a.ors[g],u=SF.$("SFevtpayssn"+k),a.ssn[k].cnt&&"undefined"!=typeof a.ssn[k].amt?(u?(u=u.parentNode,c||(SF.lib.cn(u.childNodes[1]),SF.lib.i(u.childNodes[1],[{nodeName:"span",innerHTML:SF.lib.fa(a.ssn[k].amt,a.cur)}]))):(u=SF.lib.n({nodeName:"tr",childNodes:[{nodeName:"td",innerHTML:a.ssn[k].ttl},{nodeName:"td",childNodes:[c?{nodeName:"input",id:"SFevtpayssa"+k,type:"price",min:0,required:!0,value:a.ssn[k].amt,onchange:function(){SF.set("SFevtpaytax","data-fix",null);
SF.er.h()}}:{nodeName:"span",innerHTML:SF.lib.fa(a.ssn[k].amt,a.cur)}]},{nodeName:"td",id:"SFevtpayssn"+k}]}),SF.lib.i(e,[u])),u.lastChild.innerHTML=a.ssn[k].cnt,"undefined"==typeof a.ssn[k].tax?(D+=a.ssn[k].cnt*SF.py.r(a,a.ssn[k].amt*w.amt),J+=a.ssn[k].cnt*(a.ssn[k].amt-SF.py.r(a,a.ssn[k].amt*w.amt)),G+=a.ssn[k].cnt*a.ssn[k].amt*w.tax):(v=SF.py.x(a.ssn[k].tax,w),D+=a.ssn[k].cnt*SF.py.r(a,a.ssn[k].amt),G+=SF.py.r(a,a.ssn[k].cnt*a.ssn[k].amt*v.tax)),z+=a.ssn[k].amd?a.ssn[k].cnt*a.ssn[k].amd:0,a.ssn[k].dcc&&
(r=!0)):u&&SF.lib.dn(u.parentNode);G=SF.py.r(a,G);D=SF.py.r(a,D)+(w.txi?0:G);SF.lib.s("SFevtpayalt",d.childNodes.length);n={nam:"",ctc:"",biz:"",eml:"",phn:"",adr:""};for(k in n)if(t=SF.$('#SFevtpay input[name="'+k+'"]'))if(u=SF.lib.fp(t,'[role="row"]'),SF.lib.s(u,!R&&1==K.length&&0<=K[0].indexOf(k)?!1:!0),1<K.length)for(l=m=0;m<K.length;m++)0<=K[m].indexOf(k)&&l++;if(!E)return"undefined"!=typeof a.cap&&0>a.cap?(SF.lib.dn("SFevtpaybtn"),SF.lib.s("SFevtpay",!0),SF.lib.cn("SFevtpay"),SF.lib.i("SFevtpay",
[{nodeName:"h2",className:"SFemp",innerHTML:"Event sold out"}])):"undefined"!=typeof a.lim&&0>a.lim?(SF.lib.dn("SFevtpaybtn"),SF.lib.s("SFevtpay",!0),SF.lib.cn("SFevtpay"),SF.lib.i("SFevtpay",[{nodeName:"h2",className:"SFemp",innerHTML:"You have already registered for this event"}])):H||M||I||P?(SF.lib.s("#SFevtpaytkt tfoot",!1),SF.lib.dn("SFevtpayalt"),SF.lib.dn("SFevtpayreg"),SF.lib.dn("SFevtpaypay"),SF.lib.dn("SFevtpaybtx")):(SF.lib.cn("SFevtpay"),SF.lib.i("SFevtpay",[{nodeName:"h2",className:"SFemp",
innerHTML:"No tickets available"}])),0;!c&&"undefined"!=typeof a.cap&&!1!==a.cap&&L>Math.max(0,a.cap)&&N.push(a.cap&&0<a.cap?"Event is near capacity, only "+a.cap+" spot"+(1===a.cap?"":"s")+" available":"Event is sold out");!c&&"undefined"!=typeof a.lim&&!1!==a.lim&&F>a.lim&&N.push("Limit "+a.lim+" total ticket(s) per registration");if(SF.$("SFevtpaytax")){if(SF.get("SFevtpaytax","data-fix")&&(k=SF.get("SFevtpaytax"),isNaN(k)||(l=G,G=SF.py.r(a,k),w.txi||(D=D-l+G))),(n=SF.$('#SFevtpay input[name="due"]'))&&
!SF.get(n,"data-fix")&&SF.set(n,D-(b&&b.due?b.sum-b.due:0)),SF.set("SFevtpaysum",D),SF.set("SFevtpaytax",G),n=SF.$("SFevtpaytxr"))SF.set(n,J),SF.lib.s(n.parentNode,J?!0:!1)}else SF.set("SFevtpaysum",D?SF.lib.fa(D,a.cur)+(G?" w/tax":"")+(z?"<br>("+SF.lib.fa(z,a.cur)+" discount applied)":""):"0");if(!c){n=SF.$("SFevtpayreg").querySelectorAll('[role="row"]');for(k=n.length-1;0<=k&&!SF.lib.s(n[k]);k--);SF.lib.s("SFevtpayreg",0<=k)}c||SF.lib.s("#SFevtpaytkt tfoot")||!F||SF.lib.sv("SFevtpay");SF.lib.s("#SFevtpaytkt tfoot",
F);return c&&(n=SF.$("SFevtpay_ep"))?(SF.lib.s(n,D&&("undefined"==typeof h.due||0<h.due)),l=SF.lib.s(n)?SF.get(n.querySelector('[name="_ep"]')):"","3"===l?(SF.set("SFevtpaysum",0),SF.set("SFevtpaytax",0),SF.set("SFevtpaytxr",0),SF.lib.sy({pageElement:"SFevtpay",sum:0,getAddress:!1,allowDiscountCode:!1})):l&&"2"!==l?SF.lib.sy({pageElement:"SFevtpay",sum:D,getAddress:a._st._tx&&a._st._tx.tax&&!h.ntx?"tax":!1,allowDiscountCode:!1}):SF.lib.sy({pageElement:"SFevtpay",sum:0,getAddress:D&&a._st._tx&&a._st._tx.tax&&
!h.ntx?!0:!1,allowDiscountCode:!1})):c?SF.lib.sy({pageElement:"SFevtpay",sum:0,allowDiscountCode:!1}):SF.lib.sy({pageElement:"SFevtpay",sum:D,allowDiscountCode:r?SF.er.e:!1})}).then(function(){(t=SF.$("#SFevtpay .SFfpydccmsg"))&&SF.set(t,z?"Discount code applied":f?"Discount code not applicable for selection":SF.lib.f("SFevtpaypay").dcc?"Invalid discount code":"");return N.length?Promise.reject(N.join("<br>")):D})};
SF.er.s=function(){var a=SF.d.get(SF.$("SFevtpay")),b=SF.e.get(SF.$("SFevtpay")),c=a.tpl?!0:!1;if(SF.v("SFevtpay")){var d=SF.lib.f("SFevtpay");SF._st.processing||SF._st.geocoding||(SF._st.processing=!0,(new Promise(function(e){c&&"undefined"!=typeof d.sum?e():e(SF.er.h().then(function(f){if(!1===f)return Promise.reject(null);d.sum=f}))})).then(function(){var e,f;if(c&&b&&b.sid&&(e=Math.round(100*d.sum))!=(f=Math.round(100*b.sum)))return e>f?Promise.reject({message:"You cannot increase amount after payment has already been processed.",
cause:SF.$("SFevtpaysum")}):new Promise(function(h,g){SF.lib.dg("SFevtpaydlg",{childNodes:[{nodeName:"p",innerHTML:"You have changed the total, a partial refund will be issued for the difference of "+SF.lib.fa((f-e)/100,a.cur)+"."},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtpaydlg",!1);h()},innerHTML:"Continue"},{nodeName:"button",onclick:function(){SF.lib.dg("SFevtpaydlg",!1);g(null)},innerHTML:"Cancel"}]})})}).then(function(){var e;d.tkt=[];c&&(d.itm=[]);for(e=0;e<a.tkt.length;e++){var f=
SF.get("SFevtpaytkt"+e)?parseInt(SF.get("SFevtpaytkt"+e)):0;d.tkt.push(f);c&&f&&d.itm.push({tkt:e,qty:f,amt:d._ep&&"3"===d._ep?0:SF.get("SFevtpaytka"+e)})}if(!d.tkt.reduce(function(k,m){return k+m},0))return Promise.reject("No tickets selected");if(c){if(a.ssn)for(e=0;e<a.ssn.length;e++)(f=SF.get("SFevtpayssn"+e)?parseInt(SF.get("SFevtpayssn"+e)):0)&&d.itm.push({ssn:e,qty:f,amt:d._ep&&"3"===d._ep?0:SF.get("SFevtpayssa"+e)});d._ep?"2"===d._ep?(d.due=d.sum,delete d._ep):"3"===d._ep&&(d.sum=0,d.tax=
0,delete d.due,delete d._ep):delete d._ep}else d.sum&&d.due?d.due=d.sum:delete d.due;if(d.dat){d.alt=[];for(e in d.dat){var h=e.split("_");var g={tkt:parseInt(h[0]),reg:d.dat[e]};for(f=0;f<a.tkt[h[0]].reg.length;f++)a.tkt[h[0]].reg[f]._id&&"undefined"!=typeof g.reg[f]&&(g[a.tkt[h[0]].reg[f]._id]=g.reg[f],"undefined"==typeof d[a.tkt[h[0]].reg[f]._id]&&(d[a.tkt[h[0]].reg[f]._id]=g.reg[f]));d.alt.push(g)}delete d.dat}SF.lib.sn(!0);return SF.lib.pa(d)}).then(function(){return b||!d.sum||!a._st._tx||!a._st._tx.tax||
d.ntx||d.crd&&d.crd.con?SF.lib.pp(d):Promise.reject({message:"The address you entered does not appear to be correct - please check and update the address.",cause:SF.$('#SFevtpay [name="crd[ad2]"]')})}).then(function(e){return SF.er.p(d,e)}).catch(SF.lib.alr).then(function(){delete SF._st.processing}))}};
SF.er.p=function(a,b){b=void 0===b?null:b;var c=SF.d.get(SF.$("SFevtpay")),d=SF.e.get(SF.$("SFevtpay")),e=c.tpl?!0:!1;return(new Promise(function(f,h){b&&b.error?f(b):e&&!a._ep||!a.sum||a.due&&!(e&&d&&0<a.due)||a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&!a.crd.error?(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),SF._st._do="Registering for event",f(SF.lib.xhr(d?"PATCH":"POST","v2/event/"+c.eid+"/registration"+(d?"/"+d._id:""),a,{admin:e?!0:!1,handleErrors:!1}))):
h({message:a.crd&&a.crd.error?a.crd.error:"Payment method required",cause:SF.$("#SFevtpay .SFfpybtn")})})).then(function(f){var h;if(!f)return Promise.reject("No response from server");if(e){if(f.error||a._pv)return Promise.reject(f.error?f.error:"Error");SF.lib.dg("SFevtdlg",!1);if(c.usr)if(d)for(h=0;h<c.usr.length;h++)c.usr[h]._id==d._id&&(SF.ev.p.u(h,f),SF.lib.fc("SFevtusr_"+h));else SF.ev.p.u(null,f),SF.lib.fc("SFevtusr_"+c.usr.length-1);else SF.ev.d.r()}else{if((f.error||a._pv)&&"undefined"==
typeof f.tkt)return Promise.reject(f.error?f.error:"Error");if(f.error||a._pv){if("undefined"!=typeof f.cap&&0===f.cap)return SF.lib.cn("SFevtpay"),SF.lib.i("SFevtpay",[{nodeName:"h2",className:"SFemp",innerHTML:f.error},a.crd&&(a._pv||a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)?{nodeName:"p",innerHTML:"Your payment method has not been charged."}:null,{nodeName:"p",innerHTML:"Please contact us if you have any questions or concerns."}]),SF.lib.sv("SFevtpay"),SF.lib.fc("SFevtpay"),Promise.reject(null);
SF.lib.ml(c,f,{only:["tkt","ssn","cap","lim","cnt"]});return SF.er.h().then(function(){return Promise.reject(f.error+(a.crd&&(a._pv||a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)?"<br>Your payment method has not been charged.":""))})}return(new Promise(function(g,k){!SF._st.usr.uid&&f._st&&f._st.uid?(SF.close({exclude:["SFevtpne"]}),SF.ss.i(f._st,a).then(g).catch(g)):g()})).then(function(){f._zz?SF.lib.re(f._zz):(SF.lib.cn("SFevtpay"),SF.lib.i("SFevtpay",[f._rg&&f._rg.dtl?null:{nodeName:"h2",innerHTML:"Thank you!"},
{innerHTML:f._rg?f._rg.dtl:"Your registration has been recorded and a confirmation has been sent to your email address."}]),SF.lib.sv("SFevtpay"),SF.lib.fc("SFevtpay"))})}})};SF.fp={};
SF.fp.o=function(a,b){b=void 0===b?null:b;var c,d=SF.lib.gq("discount");a=a.split("/");var e=a[1];var f=2<a.length?a[2]:!1;(new Promise(function(h){SF.$("SFfrmpne")&&(c=SF.d.get(SF.$("SFfrmpay")))&&c.ttl==e?h():(SF.fp.c(),b&&b.data?(c=b.data,h()):(SF._st._do="Getting form",h(SF.lib.xhr("GET","v2/form?ttl="+e+(d?"&dcc="+encodeURIComponent(d):"")).then(function(g){if(!SF._st.usr.uid&&("undefined"!=typeof g.itm&&!g.itm||!g.tab&&!g.itm))return SF.ss.o(),Promise.reject(null);c=g}))))})).then(function(){if(!SF.$("SFfrmpne"))return SF.lib.i("SFpne",
[{id:"SFfrmpne",className:"SFpne",role:"form",style:{position:"relative",display:"none"},childNodes:[{id:"SFfrmpay"}]}]),SF.fc.i(c,null,b)}).then(function(){SF.lib.se("SFfrmpne");if(b&&b.pst)return SF.lib.sv("SFfrmpaybtx"),SF.lib.sn({resumingPayment:!0}),SF.fc.p(b.pst);f?SF.fc.o({_id:f,preview:!0}):SF.fc.c();c.warn&&(SF.lib.alr(c.warn),delete c.warn)}).catch(SF.lib.alr)};SF.fp.c=function(){SF.lib.dn("SFfrmpne")};SF.r({url:/^!form\/[^\/]+(\/[^\/]+)?$/,pageId:"SFfrmpne",open:SF.fp.o,close:SF.fp.c});
SF.fc={};
SF.fc.i=function(a,b,c){b=void 0===b?null:b;c=void 0===c?null:c;var d,e,f,h=[],g=SF.lib.gq("discount");a._st||(a._st={});SF.d.set(SF.$("SFfrmpay"),a);a._st._rc&&(SF._st._rc=a._st._rc);b&&SF.e.set(SF.$("SFfrmpay"),b);if(!SF._st.admin||a.itm&&a.itm.length||b&&b.sum)if(SF._st.admin){var k=!b||!b._ro;var m=[{nodeName:"option",value:"",innerHTML:"Add Item"}];if(a.itm)for(d=0;d<a.itm.length;d++)m.push({nodeName:"option",value:a.itm[d]._id,innerHTML:a.itm[d].lbl+("undefined"!=typeof a.itm[d].cap&&0===a.itm[d].cap?
" (deleted)":"")});SF.lib.i("SFfrmpay",[{id:"SFfrmpayitm",childNodes:[{nodeName:"table",className:"SFitn",childNodes:[a.itm&&a.itm.length?{nodeName:"thead",childNodes:[{nodeName:"tr",childNodes:[{nodeName:"th"},{nodeName:"th",innerHTML:"Price"},{nodeName:"th",innerHTML:"Qty"}]}]}:null,a.itm&&a.itm.length?{nodeName:"tbody",id:"SFfrmpaybag",childNodes:[m.length&&k?{nodeName:"tr",id:"SFfrmpayadd",childNodes:[{nodeName:"td",childNodes:[{nodeName:"select","aria-label":"Select item",childNodes:m},{nodeName:"button",
className:"SFml1",title:"Add",onclick:function(){this.previousSibling.value&&(SF.fc.o({_id:this.previousSibling.value}),this.previousSibling.value="")},innerHTML:"Add"}]}]}:null]}:null,{nodeName:"tfoot",childNodes:[{nodeName:"tr",childNodes:[{nodeName:"td",childNodes:[b&&b.sid?{className:"SFplh",innerHTML:"Payment ID: "+b.sid}:null,b&&b.dcc&&b.dcc.lbl?{className:"SFplh",innerHTML:"Discount code: "+b.dcc.lbl}:null]},{nodeName:"td",colspan:"2",childNodes:[{childNodes:[{nodeName:"input",id:"SFfrmpayamh",
name:"amh",type:"price",min:0,required:!0,value:0,"aria-label":"Handling",onchange:function(){SF.set(this,"data-fix",1);SF.fc.h().catch(SF.lib.alr)}},{nodeName:"span",className:"SFplh",innerHTML:"handling"}]},{childNodes:[{nodeName:"input",id:"SFfrmpaytax",name:"tax",type:"price",min:0,required:!0,value:0,"aria-label":"Tax",onchange:function(){SF.set(this,"data-fix",1);SF.fc.h().catch(SF.lib.alr)}},{nodeName:"span",className:"SFplh",innerHTML:"tax"}]},{childNodes:[{nodeName:"input",id:"SFfrmpaysum",
name:"sum",type:"price",min:0,required:!0,value:0,"aria-label":"Gross amount",className:"SFemp",disabled:!0},{nodeName:"span",className:"SFplh",innerHTML:"gross amount"}]},b&&b.due?{childNodes:[{nodeName:"input",id:"SFfrmpaydue",name:"due",type:"price",min:0,required:!0,value:0,"aria-label":"Payment due",onchange:function(){SF.set(this,"data-fix",1);SF.fc.h().catch(SF.lib.alr)},dataset:{fix:b.due==b.sum?"":"1"}},{nodeName:"span",className:"SFplh",innerHTML:"payment due"}]}:null]}]}]}]}]}])}else if("undefined"==
typeof a.itm)k=!0;else if(a.itm&&a.itm.length){k=!1;SF.lib.i("SFfrmpne",[{id:"SFfrmitm",className:1==a.itm.length?"SFbox":""}],"SFfrmpay");for(d=0;d<a.itm.length;d++){m=a.itm[d];if(1==a.itm.length){var l=[];if(m.img)for(e=0;e<m.img.length;e++)l.push({className:"SFfrmitmimgpvw",childNodes:[{nodeName:"img",style:{opacity:0},onerror:function(){var n=this.parentNode;if(n){var q=n.parentNode;SF.lib.dn(n);q.childNodes.length||SF.lib.dn(q)}},onload:function(){this.style.opacity=1},src:m.img[e].s,alt:"Image "+
(e+1)+" for "+m.lbl},{nodeName:"button",title:"Expand Image",childNodes:[{nodeName:"i",className:"SFicopvw"}],data:m.img[e],onclick:function(){SF.lib.vl(SF.d.get(this).l,this.previousSibling)}}]});SF.lib.i("SFfrmitm",[{id:"SFfrmitm"+m._id,childNodes:[{nodeName:"h2",className:"SFfrmitmttl",innerHTML:m.lbl},l.length?{className:"SFfrmitmimglst",childNodes:l}:null,m.dtl?{className:"SFfrmitmdtl",innerHTML:m.dtl}:null,f=SF.lib.n({})]}])}else SF.lib.i("SFfrmitm",[{nodeName:"a",id:"SFfrmitm"+m._id,className:"SFfrmitm",
href:"#!form/"+a.ttl+"/"+m._id,childNodes:[m.img&&m.img.length?{nodeName:"img",className:"SFfrmitmimg",alt:"Image for "+SF.lib.fr(m.lbl),onload:function(){this.style.opacity=1},onerror:function(){SF.lib.dn(this)},style:{opacity:0},src:m.img[0].s}:null,{className:"SFfrmitmtxt",childNodes:[SF.lib.n({nodeName:"h3",className:"SFfrmitmttl",innerHTML:m.lbl}),m.dtl?SF.lib.n({className:"SFfrmitmdtl",innerHTML:m.dtl}):null]},{className:"SFfrmitmovr"},f=SF.lib.n({className:"SFfrmitmadd"})]}]);m.dsp?SF.lib.i(f,
[{nodeName:"a",onclick:SF.ss.o,innerHTML:"Sign in to select"}]):m.xec?SF.lib.i(f,[{nodeName:"a",href:"#renew",innerHTML:"Renew"}]):"undefined"!=typeof m.cap&&0>=m.cap?SF.lib.i(f,[{nodeName:"span",innerHTML:"Sold out"}]):"undefined"!=typeof m.lim&&0>=m.lim||"undefined"!=typeof a.lim&&0>=a.lim?SF.lib.i(f,[{nodeName:"span",innerHTML:"Unavailable"}]):(SF.lib.i(f,[{nodeName:"button",id:"SFfrmitm"+m._id+"add",data:{_id:m._id},onclick:function(n){SF.fc.o(SF.d.get(this));n.stopPropagation();return!1},innerHTML:SF.lib.fr(m.btn?
m.btn:a.lim&&1===a.lim?"Select":"Add")}]),1<a.itm.length&&SF.lib.i(f,[{className:"SFfrmitmsel",onclick:function(){SF.lib.sv("SFfrmpayreg");return!1}}]),k=!0);m.amt&&SF.lib.i(f,[{nodeName:"span",className:"SFfrmitmamt",innerHTML:SF.lib.fa(m.amt,a.cur)}])}k&&SF.lib.i("SFfrmpay",[{id:"SFfrmpayitm",role:"status",style:{display:"none"},childNodes:[{nodeName:"table",className:"SFitn",childNodes:[{nodeName:"tbody",id:"SFfrmpaybag"},{nodeName:"tfoot",id:"SFfrmpaysum"}]}]}])}else k=!1;else k=!b||!b._ro;if("undefined"==
typeof a.tab||!a.tab)SF.lib.i("SFfrmpay",[{id:"SFfrmpayreg",innerHTML:"Not applicable"}]),k=!1;else if(!(SF._st.admin||"undefined"==typeof a.itm||a.itm&&a.itm.length))SF.lib.i("SFfrmpay",[{id:"SFfrmpayreg",innerHTML:"Not available"}]),k=!1;else if(SF._st.admin||k){SF.lib.i("SFfrmpay",[{id:"SFfrmpayreg"}]);for(d=0;d<a.tab.length;d++)if("undefined"!=typeof a.tab[d].box)for(e=0;e<a.tab[d].box.length;e++)SF.lib.i("SFfrmpayreg",[f=SF.lib.n({className:"SFbox"})]),"object"==typeof a.tab[d].box[e].dat&&(SF.lib.i(f,
[SF.lib.tf(a.tab[d].box[e].dat,b)]),!SF._st.admin&&f.childNodes.length&&(a.tab[d].box[e].dtl&&SF.lib.i(f,[{className:"SFboxdtl",innerHTML:a.tab[d].box[e].dtl}],f.firstChild),a.tab[d].box[e].ttl&&SF.lib.i(f,[{nodeName:"h2",className:"SFboxttl",innerHTML:a.tab[d].box[e].ttl}],f.firstChild))),f.childNodes.length||SF.lib.dn(f);!b&&(d=SF.$('#SFfrmpayreg input[name="pwd"]'))&&(SF.lib.dn(d.previousSibling),SF.lib.s(d,!0),d.removeAttribute("readonly"));l=!1;if(a._st._tx&&a._st._tx.tax)if(a._st._tx.txh&&a.amh)l=
!0;else if("undefined"!=typeof a.itm)for(d=0;d<a.itm.length;d++)if(a.itm[d].amt||a.itm[d].amh&&a._st._tx.txh){l=!0;break}l&&(!b&&(d=SF.$('#SFfrmpayreg [name="adr[ad2]"]'))&&(d.required=!0,d.oninput=SF.v,d.onblur=function(n){SF.v(n)&&SF.lib.gg(n).then(function(q){if(q)return SF.fc.h()}).catch(SF.lib.alr)}),d=SF.$('#SFfrmpayreg [name="ntx"]'))&&(d.onchange=function(){SF.fc.h().catch(SF.lib.alr)})}SF.lib.i("SFfrmpay",[{id:"SFfrmpaybtx",className:"SFfpybtx",childNodes:[k?{nodeName:"button",className:"SFfpybtn SFbig",
onclick:SF.fc.s,innerHTML:SF._st.admin?b?"Update":"Add":a.btn?SF.lib.fr(a.btn):"Checkout"}:null,SF._st.admin?{nodeName:"button",className:"SFfpybtn SFbig",onclick:function(){SF.lib.dg("SFfrmdlg",!1)},innerHTML:k?"Cancel":"Close"}:null]}]);!SF._st.admin&&k&&("undefined"==typeof a.itm&&a.amh&&SF.lib.i("SFfrmpay",[{className:"SFbox",childNodes:[{nodeName:"h2",className:"SFboxttl",id:"SFfrmpayamh"}]}],"SFfrmpaybtx"),SF._st.admin||h.push(SF.lib.sw({pageElement:"SFfrmpay",settings:a._st})),a.itm||a.amh)&&
(SF.lib.i("SFfrmpay",[{id:"SFfrmpaypay",className:"SFbox"}],"SFfrmpaybtx"),h.push(SF.lib.sy({pageElement:"SFfrmpay",paymentElement:"SFfrmpaypay",settings:a._st,getPaymentMethod:!0,allowPaymentMethodId:a._st&&a._st._px&&a._st._px.rid?!0:!1,allowOffline:a.ds3?a.ds3:!1,allowDiscountCode:SF.fc.f,currency:a.cur,preProcess:{act:b?"PATCH":"POST",url:"v2/form/"+a.fid+"/checkout"+(b?"/"+b._id:""),opt:{admin:SF._st.admin?!0:!1}}})));return Promise.all(h).then(function(){if(m=c&&c.pst?c.pst:b){if(SF.lib.f("SFfrmpay",
m),m.itm)for(d=0;d<m.itm.length;d++)SF.fc.a(m.itm[d])}else!SF._st.admin&&SF._st.usr.uid&&SF._st.usr.adr&&SF.lib.f("SFfrmpay",{crd:{nam:SF._st.usr.nam||"",ad1:SF.lib.f1(SF._st.usr.adr),ad2:SF.lib.f2(SF._st.usr.adr)}}),!SF._st.admin&&g&&SF.lib.f("SFfrmpay",{dcc:g});if(b&&b._ro)for(f=SF.$("SFfrmpay").querySelectorAll("input,select,textarea"),d=f.length-1;0<=d;d--)"TEXTAREA"==f[d].nodeName&&f[d].id&&"undefined"!=typeof tinymce&&(e=tinymce.get(f[d].id))?e.setMode("readonly"):f[d].disabled="disabled";else return SF.fc.h().then(function(){m&&
SF.lib.f("SFfrmpay",m)})})};
SF.fc.o=function(a){var b=SF.d.get(SF.$("SFfrmpay")),c=!1,d=[],e=[],f=[],h;if(!SF._st.processing){if(b.itm)for(h=b.itm.length-1;0<=h;h--)if(b.itm[h]._id==a._id){c=b.itm[h];break}if(c)if(a.preview||c.opt||c.reg||2==c.typ){if(a.preview&&c.img&&c.img.length)for(h=0;h<c.img.length;h++)d.push({className:"SFfrmitmimgpvw",childNodes:[{nodeName:"img",style:{opacity:0},onerror:function(){var g=this.parentNode;if(g){var k=g.parentNode;SF.lib.dn(g);k.childNodes.length||SF.lib.dn(k)}},onload:function(){this.style.opacity=
1},src:c.img[h].s,alt:"Image "+(h+1)+" for "+c.lbl},{nodeName:"button",title:"Expand Image",childNodes:[{nodeName:"i",className:"SFicopvw"}],data:c.img[h],onclick:function(){SF.lib.vl(SF.d.get(this).l,this.previousSibling)}}]});if(!SF._st.admin&&(c.dsp||c.xec||"undefined"!=typeof c.cap&&0>=c.cap))f=[],c.dsp?f.push({nodeName:"button",onclick:SF.ss.o,innerHTML:"Sign in to select"}):c.xec?f.push({nodeName:"a",className:"SFbtn",href:"#renew",innerHTML:"Renew"}):f.push({className:"SFemp",innerHTML:"Sold out"}),
f.push({nodeName:"a",className:"SFbtn",href:"#!form/"+b.ttl,onclick:SF.fc.c,innerHTML:"Close"});else{f=[b._ro?null:{nodeName:"button",onclick:function(g){if(SF.v("SFfrmitmdlg")){var k=SF.lib.f("SFfrmitmdlg");SF.lib.pa(k).then(function(){SF.fc.a(k)}).then(SF.fc.h).then(function(){SF.fc.c(g)}).catch(SF.lib.alr)}},innerHTML:"undefined"==typeof a.idx?c.btn?SF.lib.fr(c.btn):"Add":"Update"},{nodeName:"button",onclick:SF.fc.c,innerHTML:"undefined"==typeof a.idx?"Cancel":"Close"}];if(c.reg)for(h=0;h<c.reg.length;h++)b=
SF.lib.c(c.reg[h]),b._id="reg["+("undefined"==typeof b._id?h.toString():b._id)+"]",e.push(b);if(c.opt){b={_id:"opt",lbl:"Option",typ:9,opt:[]};for(h=0;h<c.opt.length;h++)b.opt.push(c.opt[h].lbl);e.push(b)}!c.typ||2!=c.typ||SF._st.admin&&"undefined"!=typeof a.idx||(b={_id:"amt",lbl:"Amount",typ:16,req:1,min:!SF._st.admin&&c.min?c.min:0},e.push(b))}a={childNodes:[{nodeName:"h2",innerHTML:c.lbl},{nodeName:"input",name:"_id",type:"hidden",value:c._id},"undefined"==typeof a.idx?null:{nodeName:"input",
name:"idx",type:"hidden",value:a.idx},d.length?{className:"SFfrmitmimglst",childNodes:d}:null,a.preview&&c.dtl?{className:"SFfrmitmdtl",innerHTML:c.dtl}:null,e.length?SF.lib.tf(e,a):null,{className:"SFbtx",childNodes:f}]};600>=SF._st.win.w||600>=SF._st.win.h?(SF.lib.i("SFpne",[{id:"SFfrmitmdlg",className:"SFpne",childNodes:[a]}]),SF.lib.se("SFfrmitmdlg")):(a.style={width:Math.min(SF._st.win.w,640)+"px"},SF.lib.dg("SFfrmitmdlg",a))}else SF.fc.a({_id:c._id,qty:1}),SF.fc.h().catch(SF.lib.alr)}};
SF.fc.c=function(a){var b=SF.$("SFfrmitmdlg"),c;b&&("SFpne"==b.className?SF.lib.dn(b):SF.lib.dg(b,!1),a&&!SF._st.admin&&(c=SF.d.get(SF.$("SFfrmpay")))&&SF.open("!form/"+c.ttl))};
SF.fc.a=function(a){var b=SF.d.get(SF.$("SFfrmpay")),c,d,e=!1;"undefined"!=typeof a.amt&&(a.amt=SF.py.r(b,a.amt));if(d=SF.$("SFfrmpayitm"+a._id)){var f=SF.lib.f(d);SF.lib.f(d,{qty:parseInt(f.qty?f.qty:0)+("undefined"==typeof a.qty?1:a.qty)});SF.lib.f(d).qty?SF.fc.g({currentTarget:d.lastChild.firstChild}):SF.lib.f(d,{qty:f.qty})}else{if(a._id)for(c=b.itm.length-1;0<=c;c--)if(b.itm[c]._id==a._id){e=b.itm[c];break}if(e&&(!SF._st.admin&&b.lim&&1==b.lim&&(SF.lib.cn("SFfrmpaybag"),delete a.idx),"undefined"==
typeof a.idx?(SF.lib.i("SFfrmpaybag",[d=SF.lib.n({nodeName:"tr",childNodes:[{nodeName:"td"},{nodeName:"td",childNodes:[SF._st.admin?{nodeName:"input",name:"amt",type:"price",min:0,required:!0,value:0,"aria-label":"Price per "+SF.lib.fr(e.lbl),onchange:function(){SF.set("SFfrmpaytax","data-fix",null);SF.fc.h().catch(SF.lib.alr)}}:null]},b._ro?{nodeName:"td",innerHTML:a.qty||1}:{nodeName:"td",childNodes:["undefined"!=typeof a.qty&&1!=a.qty||!(e.reg||e.typ&&2==e.typ)?{nodeName:"select",name:"qty","aria-label":"Quantity for "+
SF.lib.fr(e.lbl),onchange:SF.fc.g,childNodes:[{nodeName:"option",value:"0"},{nodeName:"option",value:"1",innerHTML:"1"},{nodeName:"option",value:"2",innerHTML:"2"},{nodeName:"option",value:"3",innerHTML:"3"},{nodeName:"option",value:"4",innerHTML:"4"},{nodeName:"option",value:"5",innerHTML:"5"},{nodeName:"option",value:"6",innerHTML:"6"},{nodeName:"option",value:"7",innerHTML:"7"},{nodeName:"option",value:"8",innerHTML:"8"},{nodeName:"option",value:"9",innerHTML:"9"},{nodeName:"option",value:"10",
innerHTML:"10+"}]}:{nodeName:"a","aria-label":"Remove "+SF.lib.fr(e.lbl),onclick:function(){SF.lib.fn(this);SF.lib.dn(this.parentNode.parentNode);SF.set("SFfrmpaytax","data-fix",null);SF.fc.h().catch(SF.lib.alr)},innerHTML:"Remove"}]}]})],"SFfrmpayadd"),SF.d.set(d,SF.lib.c(a,{exclude:SF._st.admin?["idx","amt","qty"]:["idx","qty"]})),SF._st.admin||e.reg||e.opt||2==e.typ||(d.id="SFfrmpayitm"+a._id)):(d=SF.$("SFfrmpaybag").childNodes[parseInt(a.idx)],f=SF.d.get(d),SF.lib.ml(f,a,{exclude:["idx"]}),SF.lib.cn(d.firstChild)),
SF.lib.i(d.firstChild,[{nodeName:"span",innerHTML:e.lbl+(a.opt?" ("+a.opt+")":"")},a.opt||a.reg||!SF._st.admin&&e.typ&&2==e.typ?{nodeName:"a",title:"View/Edit Item",onclick:function(){var h=this.parentNode.parentNode,g=SF.lib.c(SF.d.get(h)),k;for(k=h.parentNode.childNodes.length-1;0<=k;k--)if(h.parentNode.childNodes[k]==h){g.idx=k;break}SF.fc.o(g)},childNodes:[{nodeName:"i",className:"SFicopvw"}]}:null]),"undefined"==typeof a.idx)){f=SF.lib.c(a,{only:["qty","amt"]});if(SF._st.admin)if("undefined"==
typeof f.amt){if(f.amt=e.amt?e.amt:0,f.opt&&e.opt)for(c=0;c<e.opt.length;c++)if(f.opt==e.opt[c].lbl){f.amt+=e.opt[c].amt?e.opt[c].amt:0;break}}else e.typ&&2==e.typ&&b._st._tx&&!b._st._tx.txi&&f.tax&&(f.amt=SF.py.r(b,f.amt+f.tax/f.qty));"undefined"==typeof f.qty&&(f.qty=1);9<f.qty&&(SF.set(d.lastChild.firstChild,10),SF.fc.g({currentTarget:d.lastChild.firstChild}));SF.lib.f(d,f);!SF._st.admin&&(1==b.itm.length||b.lim&&1==b.lim||b.scr)&&(SF.lib.sv("SFfrmpaybag"),SF.lib.fc("SFfrmpayreg"))}}};
SF.fc.g=function(a){var b=parseInt(a.currentTarget.value);if(!b){var c=SF.lib.fp(a.currentTarget,"tr");SF.lib.fn(c);SF.lib.dn(c)}else if("SELECT"==a.currentTarget.nodeName&&9<b){var d=a.currentTarget.getAttribute("aria-label");c=a.currentTarget.parentNode;c.replaceChild(SF.lib.n({nodeName:"input",name:"qty","aria-label":d,type:"count",min:0,value:b,onchange:SF.fc.g}),a.currentTarget);a.type&&"change"==a.type&&SF.lib.fc(c)}a.type&&"change"==a.type&&(SF.set("SFfrmpaytax","data-fix",null),SF.fc.h().catch(SF.lib.alr))};
SF.fc.f=function(){var a=SF.d.get(SF.$("SFfrmpay")),b=SF.lib.f("SFfrmpaypay");SF._st._do="Applying discount";SF.lib.xhr("GET","v2/form/"+a.fid+(b.dcc?"?dcc="+encodeURIComponent(b.dcc):"")).then(function(c){SF.d.set(SF.$("SFfrmpay"),c);return SF.fc.h()}).catch(SF.lib.alr)};
SF.fc.h=function(){var a=SF.d.get(SF.$("SFfrmpay")),b=SF.e.get(SF.$("SFfrmpay")),c=!1,d=[],e={},f=0,h,g=0,k=0,m=0,l=!1,n=0,q,t=!1,u,v,x,w,r,p,y,A,C;var B=SF.lib.f("SFfrmpayreg");return(new Promise(function(D){b&&!B.ntx?(q=b.txx?SF.lib.c(b.txx):{},D()):a._st._tx&&B.adr&&B.adr.ad2?SF.lib.gg(B.adr).then(function(z){B.adr=z;q=SF.py.x({adr:B.adr,ntx:B.ntx||""},a._st._tx);D()}).catch(function(){q=SF.py.x({ntx:B.ntx||""},a._st._tx||null);D()}):(q=SF.py.x({ntx:B.ntx||""},a._st._tx||null),D())})).then(function(){"undefined"==
typeof q.tax&&(q.tax=0);"undefined"==typeof q.amt&&(q.amt=1);if(SF.$("SFfrmpaybag"))for(w=SF.$("SFfrmpaybag").firstChild;w;)if((x=SF.d.get(w))&&x._id){r=SF.lib.me(x,SF.lib.f(w));y=p=!1;for(u=a.itm.length-1;0<=u;u--)if(a.itm[u]._id==r._id){p=a.itm[u];break}if(p&&p.opt&&r.opt)for(u=0;u<p.opt.length;u++)if(p.opt[u].lbl==r.opt){y=SF.lib.c(p.opt[u]);y.idx=u;break}if(SF._st.admin){if(!p){w=w.nextSibling;continue}}else if(!p||p.xec||p.dsp){t=(p?p.lbl+" - item":"An item")+" is no longer available";x=w;w=
w.nextSibling;SF.lib.dn(x);p||SF.lib.dn("SFfrmitm"+r._id);continue}r.qty="undefined"==typeof r.qty?1:parseInt(r.qty);if(SF._st.admin||r.qty)if("undefined"==typeof e[r._id]&&(e[r._id]=0),y&&"undefined"==typeof e[r._id+"."+y.idx]&&(e[r._id+"."+y.idx]=0),A=null,SF._st.admin||"undefined"==typeof p.cap||(A=p.cap-e[r._id]),!SF._st.admin&&a.lim&&(A=null==A?a.lim:Math.min(a.lim,A)),r.opt&&!y?A=0:y&&"undefined"!=typeof y.cap&&(x=y.cap-e[r._id+"."+y.idx],A=null==A?x:Math.min(A,x)),!SF._st.admin&&null!=A&&0>=
A)t=p.lbl+(r.opt?" ("+r.opt+")":"")+" - item is no longer available",x=w,w=w.nextSibling,SF.lib.dn(x);else{!SF._st.admin&&null!=A&&A<r.qty&&(t=p.lbl+(r.opt?" ("+r.opt+")":"")+" - quantity available for item has changed",r.qty=A,SF.lib.f(w,{qty:r.qty}));if(!SF._st.admin&&null!=A&&(x=w.querySelector('select[name="qty"]'))&&x.childNodes.length!=Math.min(10,A)+1){SF.lib.cn(x);for(u=0;u<=Math.min(10,A);u++)SF.lib.i(x,[{nodeName:"option",value:u.toString(),innerHTML:10==u?"10+":u.toString()}]);SF.set(x,
r.qty)}e[r._id]+=r.qty;y&&(e[r._id+"."+y.idx]+=r.qty);f+=r.qty;SF._st.admin&&"undefined"!=typeof r.amt?h=SF.py.r(a,r.amt):p.typ&&2==p.typ?h=r.amt="undefined"==typeof r.amt?0:SF.py.r(a,r.amt):(p.dcc&&(l=!0),h=p.amt?SF.py.r(a,p.amt):0,p.amd&&(n+=r.qty*p.amd),y&&("undefined"!=typeof y.amt&&(h+=SF.py.r(a,y.amt)),"undefined"!=typeof y.amd&&(n+=r.qty*y.amd)));SF._st.admin&&SF.get("SFfrmpaytax","data-fix")&&!SF.get("SFfrmpaytax")?g+=r.qty*SF.py.r(a,h):p.typ&&2==p.typ?SF._st.admin?"undefined"==typeof p.tax?
(g+=r.qty*SF.py.r(a,SF.py.r(a,h)/(1+q.tax)),k+=r.qty*(SF.py.r(a,h)-SF.py.r(a,SF.py.r(a,h)/(1+q.tax)))):(x=SF.py.x(p.tax,q),g+=r.qty*SF.py.r(a,SF.py.r(a,h)/(1+x.tax)),k+=r.qty*(SF.py.r(a,h)-SF.py.r(a,SF.py.r(a,r.amt)/(1+x.tax)))):g+=r.qty*SF.py.r(a,h):h&&("undefined"==typeof p.tax?(g+=r.qty*SF.py.r(a,h*q.amt),k+=r.qty*h*q.tax):(x=SF.py.x(p.tax,q),g+=r.qty*SF.py.r(a,h*x.amt),k+=SF.py.r(a,r.qty*h*x.tax)));SF._st.admin||SF.set(w.childNodes[1],h?SF.lib.fa(h,a.cur):"");p.amh&&(m+=r.qty*SF.py.r(a,p.amh));
d.push(r);w=w.nextSibling}else x=w,w=w.nextSibling,SF.lib.dn(x)}else w=w.nextSibling;if(!SF._st.admin&&a.itm)for(u=0;u<a.itm.length;u++)if(w=SF.$("SFfrmitm"+a.itm[u]._id))if((x=SF.$("SFfrmitm"+a.itm[u]._id+"add"))&&(a.itm[u].dsp||a.itm[u].xec||"undefined"!=typeof a.itm[u].cap&&0>=a.itm[u].cap||"undefined"!=typeof a.itm[u].lim&&0>=a.itm[u].lim)&&SF.lib.dn(x),(x=w.querySelector(".SFfrmitmsel"))&&SF.set(x,"undefined"!=typeof e[a.itm[u]._id]&&e[a.itm[u]._id]?a.lim&&1==a.lim?"&#10004":e[a.itm[u]._id]:
""),(x=w.querySelector(".SFfrmitmamt"))&&SF.set(x,"undefined"==typeof a.itm[u].amt?"":SF.lib.fa(a.itm[u].amt,a.cur)),!c)if(a.itm[u].amd)c=!0;else if(a.itm[u].opt)for(v=0;v<a.itm[u].opt.length;v++)if(a.itm[u].opt[v].amd){c=!0;break}SF._st.admin&&(SF.get("SFfrmpayamh","data-fix")||b)?(m=SF.get("SFfrmpayamh"))&&q.txh&&(k+=m*q.tax/q.amt):(a.amh&&(m+=SF.py.r(a,a.amh)),m&&q.txh&&(k+=m*q.tax,m*=q.amt));SF._st.admin&&SF.get("SFfrmpaytax","data-fix")&&(k=SF.get("SFfrmpaytax"));m=SF.py.r(a,m);k=SF.py.r(a,k);
g=SF.py.r(a,g)+m+(q.txi?0:k);if(SF._st.admin)C={sum:g,amh:m,tax:k,itm:d},SF.get("SFfrmpaydue","data-fix")?C.due=SF.get("SFfrmpaydue"):b&&b.due&&(C.due=C.sum-b.sum+b.due),SF.lib.f("SFfrmpayitm",C);else return SF.$("SFfrmpaybag")?(SF.lib.cn("SFfrmpaysum"),g&&SF.lib.i("SFfrmpaysum",[{nodeName:"tr",childNodes:[{nodeName:"td",childNodes:[m?{innerHTML:"Handling"}:null,k?{innerHTML:"Tax"}:null,{innerHTML:"Total"}]},{nodeName:"td",colSpan:"2",childNodes:[m?{innerHTML:SF.lib.fa(m,a.cur)}:null,k?{innerHTML:SF.lib.fa(k,
a.cur)}:null,{innerHTML:SF.lib.fa(g,a.cur)}]}]}]),SF.lib.s(SF.lib.fp("SFfrmpaybag","div"),f),C={sum:g,itm:d}):((x=SF.$("SFfrmpayamh"))&&SF.set(x,SF.lib.fa(g,a.cur)),C={sum:g}),SF.lib.sy({pageElement:"SFfrmpay",sum:g,allowDiscountCode:l?SF.fc.f:!1})}).then(function(){(w=SF.$("#SFfrmpay .SFfpydccmsg"))&&SF.set(w,n?"Discount code applied":c?"Discount code not applicable for selection":SF.lib.f("SFfrmpaypay").dcc?"Invalid discount code":"");return t?Promise.reject(t):!SF._st.admin&&"undefined"!=typeof a.lim&&
f>a.lim?Promise.reject("Limit of "+a.lim+" items. Please remove "+(f-a.lim)+" item"+(f-a.lim-1?"s":"")+" from cart."):C})};
SF.fc.s=function(){var a=SF.d.get(SF.$("SFfrmpay")),b=SF.e.get(SF.$("SFfrmpay"));if(SF.v("SFfrmpay")){var c=SF.lib.me(SF.lib.f("SFfrmpayreg"),SF.lib.f("SFfrmpaypay"));SF._st.processing||SF._st.geocoding||(SF._st.processing=!0,SF.fc.h().then(function(d){if(!d)return Promise.reject(null);SF.lib.ml(c,d)}).then(function(){!SF._st.admin&&c.due&&(c.due=c.sum);if(a.itm&&a.itm.length&&(!c.itm||!c.itm.length))return Promise.reject("No items selected");if(c.sum&&0>c.sum)return Promise.reject("Total cannot be negative");
if(b&&b.sid){if(Math.round(100*parseFloat(c.sum))>Math.round(100*b.sum))return Promise.reject("The amount of the transaction cannot be increased because the payment has already been processed");if(Math.round(100*parseFloat(c.sum))<Math.round(100*b.sum))return new Promise(function(d,e){SF.lib.dg("SFfrmpaydlg",{childNodes:[{nodeName:"p",innerHTML:"You have changed the total, a partial refund will be issued for the difference of "+SF.lib.fa(b.sum-c.sum,a.cur)+"."},{nodeName:"button",onclick:function(){SF.lib.dg("SFfrmpaydlg",
!1);d()},innerHTML:"Continue"},{nodeName:"button",onclick:function(){SF.lib.dg("SFfrmpaydlg",!1);e(null)},innerHTML:"Cancel"}]})})}}).then(function(){SF.lib.sn(!0);return SF.lib.pa(c)}).then(function(){return!b&&c.sum&&a._st._tx&&a._st._tx.tax&&c.adr&&!c.adr.con?Promise.reject({message:"The address you entered does not appear to be correct - please check and update the address.",cause:SF.$('#SFfrmpay [name="adr[ad2]"]')}):SF.lib.pp(c)}).then(function(d){return SF.fc.p(c,d)}).catch(SF.lib.alr).then(function(){delete SF._st.processing}))}};
SF.fc.p=function(a,b){b=void 0===b?null:b;var c=SF.d.get(SF.$("SFfrmpay")),d=SF.e.get(SF.$("SFfrmpay"));return(new Promise(function(e,f){b&&b.error?e(b):d||!a.sum||a.due||a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&!a.crd.error?(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),SF._st._do="Processing checkout",e(SF.lib.xhr(d?"PATCH":"POST","v2/form/"+c.fid+"/checkout"+(d?"/"+d._id:""),a,{admin:SF._st.admin?!0:!1,handleErrors:!1}))):f({message:a.crd&&a.crd.error?
a.crd.error:"Payment method required",cause:SF.$("#SFfrmpay .SFfpybtn")})})).then(function(e){var f,h,g;if(SF._st.admin){if(!e||e.error||a._pv)return Promise.reject(e?e.error||"Error":"No response from server");SF.lib.dn("SFfrmdlg");if(c.usr)if(d)for(f=0;f<c.usr.length;f++)c.usr[f]._id==d._id&&(SF.fo.b.u(f,e),SF.lib.fc("SFfrmusr_"+f));else SF.fo.b.u(null,e),SF.lib.fc("SFfrmusr_"+c.usr.length-1);else SF.fo.d.r()}else{if(!e||e.error){if(e&&"undefined"!=typeof e.tab){if("undefined"==typeof e.itm||e.itm){SF.lib.ml(c,
e,{only:["itm","lim","cap","amh"]});if(e.itm)for(f=0;f<e.itm.length;f++)if(h=SF.$("SFfrmitm"+e.itm[f]._id))if((g=SF.$("SFfrmitm"+e.itm[f]._id+"add"))&&(e.itm[f].dsp||e.itm[f].xec||"undefined"!=typeof e.itm[f].cap&&0>=e.itm[f].cap||"undefined"!=typeof e.itm[f].lim&&0>=e.itm[f].lim)&&SF.lib.dn(g),g=h.querySelector(".SFfrmitmamt"))g.innerHTML="undefined"==typeof e.itm[f].amt?"":SF.lib.fa(e.itm[f].amt,c.cur);return SF.fc.h().then(function(){return Promise.reject(e.error+(a.crd&&(a._pv||a.crd.ccn||a.crd.tok||
a.crd.spi||a.crd.rid)?"<br>Your payment method has not been charged.":""))})}SF.lib.cn("SFfrmpne");SF._st.usr.uid?SF.lib.i("SFfrmpne",[{innerHTML:"No longer available"}]):SF.lib.i("SFfrmpne",[{nodeName:"a",onclick:SF.ss.o,innerHTML:"Sign in is required"}]);SF.lib.fc("SFfrmpayreg")}return Promise.reject(e?e.error:"No response from server")}g=SF.$("SFfrmpne").querySelectorAll("#SFfrmitm button,#SFfrmpaybag button");for(f=g.length-1;0<=f;f--)SF.lib.dn(g[f]);g=SF.$("SFfrmpne").querySelectorAll("#SFfrmitm>a");
for(f=g.length-1;0<=f;f--)g[f].href="javascript:void(0)";g=SF.$("SFfrmpne").querySelectorAll("#SFfrmpaybag input,#SFfrmpaybag select");for(f=g.length-1;0<=f;f--)g[f].disabled="disabled";return(new Promise(function(k,m){!SF._st.usr.uid&&e._st&&e._st.uid?(SF.close({exclude:["SFfrmpne"]}),SF.ss.i(e._st,a).then(k).catch(k)):k()})).then(function(){e._zz?SF.lib.re(e._zz):(SF.lib.dn("SFfrmpayreg"),SF.lib.dn("SFfrmpaypay"),SF.lib.dn("SFfrmpaybtx"),SF.lib.i("SFfrmpay",[{className:"SFbox",childNodes:[e._rg&&
e._rg.dtl?null:{nodeName:"h2",innerHTML:"Thank you!"},{innerHTML:e._rg?e._rg.dtl:"Your "+(e.sum?"order":"submission")+" will be processed."}]}]),SF.lib.sv("SFfrmpay"),SF.lib.fc("SFfrmpay"))})}})};SF.bq={};
SF.bq.o=function(a){var b=a.split("/"),c=SF._st.hsh||SF.get("SFctr","data-ini"),d,e;(new Promise(function(f){(d=SF.$("SFlbdlst"))&&(e=SF.d.get(d))&&b[1]==e.lid?f():(SF.bq.c(),f(SF.lib.xhr("GET","v2/board/"+b[1]+"/listings/view",{admin:!1}).then(function(h){var g=[],k=[],m;SF.lib.i("SFpne",[d=SF.lib.n({id:"SFlbdlst",className:"SFpne",data:{lid:b[1]},style:{display:"none"}})]);if(h&&h.ltg&&h.ltg.length){if(h._st.qry)for(m=0;m<h._st.qry.length;m++)g.push({nodeName:"button",className:"SFfndopt",childNodes:[{onclick:SF.bq.f.o,
data:h._st.qry[m],childNodes:[{nodeName:"span",innerHTML:h._st.qry[m].lbl},{nodeName:"i",className:"SFicoard"}]},{className:"SFfndtxt"}]}),k.push(h._st.qry[m]._id);g.length&&SF.lib.i(d,[{id:"SFlbdfnd",className:"SFfnd",childNodes:g},{id:"SFlbdqry",className:"SFfnd",style:{display:"none"}}]);0>k.indexOf("ttl")&&k.push("ttl");for(m=0;m<h.ltg.length;m++)h.ltg[m].url&&SF.lib.i(d,[{nodeName:"a",id:"SFltg"+h.ltg[m]._id,className:"SFltg"+(0>h._st.lst.dtl.indexOf("[ico]")?"":" SFltgico"),href:"#!board/"+
b[1]+"/listing/"+h.ltg[m].url,data:SF.lib.c(h.ltg[m],{only:k}),innerHTML:SF.co.p(h._st.lst.dtl,h.ltg[m],"ltg")}])}else if(h&&h.ltg)d.innerHTML="No current listings";else{if(h.dsv&&!SF._st.usr.uid)return SF.lib.dn(d),SF.ss.o(),Promise.reject(null);h.end&&(e=SF.$("#SF_le"))||h.dsv&&(e=SF.$("#SF_lf"))?d.innerHTML=e.innerHTML:h.end?SF.lib.i(d,[{nodeName:"span",innerHTML:"Your account has expired."},{nodeName:"a",href:"#renew",innerHTML:"Please click here to renew."}]):d.innerHTML="You do not have access to this page"}})))})).then(function(){SF.lib.se(d);
SF._st.ini||(c&&(e=d.querySelector('a[href$="'+c+'"]'))?SF.lib.fc(e):SF.lib.fc(d))}).catch(SF.lib.alr)};SF.bq.c=function(){SF.lib.dn("SFlbdlst")};SF.r({url:/^!board\/[^\/]+$/,pageId:"SFlbdlst",open:SF.bq.o,close:SF.bq.c});SF.bq.f={};
SF.bq.f.o=function(a){var b=a.currentTarget.parentNode;a=SF.$("SFlbdqry");var c,d=[];if(SF.lib.ma(b,".SFsel"))SF.bq.f.c();else{SF.lib.fe("#SFlbdfnd>*",function(h){h.className=h.className.replace(/\sSFsel/,"")+(h==b?" SFsel":"");h.childNodes[0].lastChild.className=h==b?"SFicoaru":"SFicoard"});var e=SF.d.get(b.childNodes[0]);var f=SF.d.get(b.childNodes[1]);SF.lib.cn(a);if(9==e.typ){if(e.opt)for(c=0;c<e.opt.length;c++)d.push({nodeName:"option",value:e.opt[c],innerHTML:SF.lib.fr(e.opt[c])});SF.lib.i(a,
[{nodeName:"select",name:e._id,"aria-label":e.lbl,childNodes:d}])}else if("undefined"==typeof e.typ&&"tag"==e._id){for(c=0;c<e.tag.length;c++)d.push({nodeName:"multiselectbutton",value:e.tag[c],innerHTML:e.tag[c]});SF.lib.i(a,[{nodeName:"multiselectbuttongroup",name:"tag",childNodes:d}])}SF.lib.i(a,[{childNodes:[{nodeName:"button",onclick:SF.bq.f.s,innerHTML:"Filter"},{nodeName:"button",onclick:SF.bq.f.d,innerHTML:"Clear"},{nodeName:"button",onclick:SF.bq.f.c,innerHTML:"Cancel"},{nodeName:"input",
type:"hidden",name:"_id",value:e._id}]}]);f&&SF.lib.f(a,f);SF.lib.s(a,!0);SF.lib.fc(a)}};SF.bq.f.s=function(){var a=SF.$("#SFlbdfnd .SFsel");var b=SF.lib.f("SFlbdqry");"object"!=typeof b[b._id]||b[b._id].length?(SF.set(a.childNodes[1],"object"==typeof b[b._id]?b[b._id].join(" | "):b[b._id]),delete b._id,SF.d.set(a.childNodes[1],b),SF.bq.f.c(),a.className="SFfndopt SFset",SF.bq.f.a()):SF.bq.f.d()};
SF.bq.f.d=function(){var a=SF.$("#SFlbdfnd .SFsel");SF.set(a.childNodes[1],"");SF.d.set(a.childNodes[1],null);SF.bq.f.c();a.className="SFfndopt";SF.bq.f.a()};SF.bq.f.c=function(){var a=SF.$("#SFlbdfnd .SFsel");SF.lib.cn("SFlbdqry");SF.lib.s("SFlbdqry",!1);a&&(a.className=a.className.replace(/\sSFsel/,""),a.childNodes[0].lastChild.className="SFicoard",SF.lib.fc(a))};
SF.bq.f.a=function(){var a,b={},c,d=[],e,f,h;for(a=SF.$("SFlbdfnd").firstChild;a;a=a.nextSibling){var g=SF.d.get(a.childNodes[0]);if(c=SF.d.get(a.childNodes[1]))b[g._id]=c[g._id],d.push(g._id)}for(h=SF.$("SFlbdqry").nextSibling;h;h=h.nextSibling){a=SF.d.get(h);g=!0;for(e=0;g&&e<d.length;e++)if(c=d[e],"undefined"==typeof a[c]||!a[c])g=!1;else if("string"==typeof b[c]&&b[c]!=a[c])g=!1;else if("object"==typeof b[c]&&"object"!=typeof a[c])g=!1;else if("object"==typeof b[c]){for(f=b[c].length-1;0<=f&&
!(0<=a[c].indexOf(b[c][f]));f--);0>f&&(g=!1)}SF.lib.s(h,g)}};SF.bp={};
SF.bp.open=function(a){var b=a.split("/"),c,d;4>b.length||(new Promise(function(e){(d=SF.$("SFlbdltg"))&&(c=SF.d.get(d))&&b[1]==c.lid&&b[3]==c.url?e():(SF.bp.c(),e(SF.lib.xhr("GET","v2/board/"+b[1]+"/listing/view?url="+encodeURIComponent(decodeURIComponent(b[3])),{admin:!1}).then(function(f){var h,g,k=!1,m=!1;if(f.dsv&&!SF._st.usr.uid)return SF.ss.o(),Promise.reject(null);SF.lib.i("SFpne",[d=SF.lib.n({id:"SFlbdltg",className:"SFpne",data:{lid:b[1],url:b[3],ttl:f.ttl?f.ttl:"",_id:f._id?f._id:""},style:{display:"none"}})]);
if(f._id){if(h=SF.$("SFltg"+f._id)){for(g=h.previousSibling;g;g=g.previousSibling)if(SF.lib.s(g)&&g.hasAttribute("href")){k={href:g.getAttribute("href"),ttl:SF.d.get(g).ttl};break}for(g=h.nextSibling;g;g=g.nextSibling)if(SF.lib.s(g)&&g.hasAttribute("href")){m={href:g.getAttribute("href"),ttl:SF.d.get(g).ttl};break}}h=[{className:"SFlsx",childNodes:[{nodeName:"a",href:"#!board/"+f.lid,innerHTML:"Close"},k?{nodeName:"a",href:k.href,childNodes:[{nodeName:"i",className:"SFicoarl"},{nodeName:"span",innerHTML:20<
k.ttl.length?k.ttl.slice(0,20)+"...":k.ttl}]}:null,m?{nodeName:"a",href:m.href,childNodes:[{nodeName:"span",innerHTML:20<m.ttl.length?m.ttl.slice(0,20)+"...":m.ttl},{nodeName:"i",className:"SFicoarr"}]}:null]},f._na?{className:"SFltgemp",innerHTML:"Listing "+f._na}:null,SF.get("SFctr","data-scl")?null:{id:"SFlbdltgscl",className:"SFmb2"}];for(g=0;g<f._st.inf.box.length;g++)f._st.inf.box[g].htm&&h.push({innerHTML:SF.co.p(f._st.inf.box[g].htm.replace(/\[_ms\]/,'<button class="SFltg_ms">Send Message</button>'),
f,"ltg")});SF.lib.i(d,h);h=d.querySelectorAll("button.SFltg_ms");for(g=h.length-1;0<=g;g--)SF.d.set(h[g],{lid:f.lid,_id:f._id,ttl:f.ttl}),h[g].onclick=SF.co.m.o;h=d.querySelectorAll("a[href]");for(g=h.length-1;0<=g;g--)"javascript:void(0)"==h[g].href||d.firstChild.contains(h[g])||(h[g].hasAttribute("target")||SF.get("SFctr","data-wgo")&&h[g].setAttribute("target","_blank"),h[g].onclick=SF.bp.h);SF.lib.is("SFlbdltgscl",window.location.href.split("#")[0]+"#!board/"+b[1]+"/listing/"+b[3],f.ttl);SF.lib.sm({url:window.location.href.split("#")[0]+
"#!board/"+b[1]+"/listing/"+b[3],title:f.ttl,description:f.dtl?f.dtl:"",image:f.lgo?f.lgo.l:""})}else f.end&&(h=SF.$("#SF_le"))||f.dsv&&(h=SF.$("#SF_lf"))?d.innerHTML=h.innerHTML:f.end?SF.lib.i(d,[{nodeName:"span",innerHTML:"Your account has expired."},{nodeName:"a",href:"#renew",innerHTML:"Please click here to renew."}]):d.innerHTML="You do not have access to this page."})))})).then(function(){SF.lib.se(d);SF._st.ini||SF.lib.fc(d)}).catch(SF.lib.alr)};SF.bp.c=function(){SF.lib.dn("SFlbdltg")};
SF.r({url:/^!board\/[^\/]+\/listing\/[^\/]+$/,pageId:"SFlbdltg",open:SF.bp.open,close:SF.bp.c});SF.bp.h=function(a){var b=a.currentTarget;a=SF.d.get(SF.$("SFlbdltg"));SF.lib.xhr("POST","v2/board/"+a.lid+"/listing/"+a._id+"/click",{}).then(function(){SF.lib.re(b)}).catch(SF.lib.alr);return!1};SF.bl={};
SF.bl.o=function(a,b){b=void 0===b?null:b;var c,d=SF.lib.gq("discount");var e=a.split("/");"post"!=e[2]&&"edit"!=e[2]||(new Promise(function(f,h){if("edit"==e[2]&&3<e.length&&!SF._st.usr.uid)SF.ss.o(),h(null);else if(SF.$("SFlbdpay")&&(c=SF.d.get(SF.$("SFlbdpay")))&&c.lid==e[1]){if("post"==e[2]&&!SF.e.get(SF.$("SFlbdpay"))||"edit"==e[2]&&SF.e.get(SF.$("SFlbdpay"))&&SF.e.get(SF.$("SFlbdpay"))._id==e[3])SF.lib.se("SFlbdpay"),h(null);f()}else b&&b.data?(c=b.data,f()):f(SF.lib.xhr("GET","v2/board/"+e[1]+
(d?"&dcc="+encodeURIComponent(d):""),{admin:!1}).then(function(g){c=g}))})).then(function(){return b&&b.subdata?b.subdata:c.tab&&"edit"==e[2]&&3<e.length?SF.lib.xhr("GET","v2/board/"+e[1]+"/listing/"+e[3],{admin:!1}):null}).then(function(f){if(c.dsp&&!SF._st.usr.uid)SF.ss.o();else if(SF.bl.c(),SF.lib.i("SFpne",[{id:"SFlbdpay",className:"SFpne",style:{display:"none"}}]),c.end&&SF.$("#SF_le"))SF.$("SFlbdpay").innerHTML=SF.$("#SF_le").innerHTML;else if(c.end)SF.lib.i("SFlbdpay",[{nodeName:"span",innerHTML:"Your account has expired."},
{nodeName:"a",href:"#renew",innerHTML:"Please click here to renew."}]);else if(!c.tab&&SF.$("#SF_lf"))SF.$("SFlbdpay").innerHTML=SF.$("#SF_lf").innerHTML;else if(c.tab)if(f&&f.error)SF.$("SFlbdpay").innerHTML=f.error;else return SF.bl.l(c,f?f:null,b);else SF.$("SFlbdpay").innerHTML="You do not have access to this page."}).then(function(){SF.lib.se("SFlbdpay");if(b&&b.pst)return SF.lib.sv("SFlbdpaybtx"),SF.lib.sn({resumingPayment:!0}),SF.bl.p(b.pst);SF._st.ini||SF.lib.fc("SFlbdpay")}).catch(SF.lib.alr)};
SF.bl.c=function(){SF.lib.dg("SFlbdpaydlg",!1);SF.lib.dn("SFlbdpay")};SF.r({url:/^!board\/[^\/]+\/(edit|post)/,pageId:"SFlbdpay",open:SF.bl.o,close:SF.bl.c});
SF.bl.l=function(a,b,c){b=void 0===b?null:b;c=void 0===c?null:c;var d=[],e,f,h,g,k=[],m=SF.lib.gq("discount");SF.d.set(SF.$("SFlbdpay"),a);a._st._rc&&(SF._st._rc=a._st._rc);b&&(b._dp&&d.push({className:"SFbox",childNodes:[{innerHTML:"Listing date: "+SF.lib.fd(b._dp)},{nodeName:"input",type:"hidden",name:"_id"}]}),SF.e.set(SF.$("SFlbdpay"),b));for(e=0;e<a.tab.length;e++)if("undefined"!=typeof a.tab[e].box)for(f=0;f<a.tab[e].box.length;f++){var l=SF.lib.n({className:"SFbox"});if("object"==typeof a.tab[e].box[f].dat)SF.lib.i(l,
[SF.lib.tf(a.tab[e].box[f].dat,b)]);else if("string"==typeof a.tab[e].box[f].dat&&"tag"==a.tab[e].box[f].dat&&a.tab[e].box[f].tag){var n=[];for(h=0;h<a.tab[e].box[f].tag.length;h++)n.push({nodeName:"input",type:"checkbox",name:"tag[]",value:a.tab[e].box[f].tag[h],innerHTML:a.tab[e].box[f].tag[h]});SF.lib.i(l,[{childNodes:n}])}l.childNodes.length&&(a.tab[e].box[f].dtl&&SF.lib.i(l,[{className:"SFboxdtl",innerHTML:a.tab[e].box[f].dtl}],l.firstChild),a.tab[e].box[f].ttl&&SF.lib.i(l,[{nodeName:"h2",className:"SFboxttl",
innerHTML:a.tab[e].box[f].ttl}],l.firstChild),d.push(l))}if(!b&&a.amt||SF._st.admin&&b&&(b.sum||b.tax||b.dcc||b.sid))SF._st.admin?d.push({className:"SFbox",childNodes:[{formRows:[b?null:{label:"Payment",id:"SFlbdpay_ep",childNodes:[{nodeName:"select",name:"_ep",onchange:function(){SF.bl.g().catch(SF.lib.alr)},childNodes:[{nodeName:"option",value:"",innerHTML:"Mark as fully paid"},{nodeName:"option",value:"1",innerHTML:"Process payment"},{nodeName:"option",value:"2",innerHTML:"Mark as payment owed"},
{nodeName:"option",value:"3",selected:!0,innerHTML:"Mark amounts as 0 (comp)"}]}]},{label:"Gross amount",className:"SFlbdpayamt",childNodes:[{nodeName:"input",type:"price",name:"sum",min:0,value:a.amt||0,required:!0,onchange:function(){SF.bl.g().catch(SF.lib.alr)}}]},b&&b.tax||a._st._tx&&a._st._tx.tax&&a._st._tx.tax.length?{label:"Tax",className:"SFlbdpayamt",childNodes:[{nodeName:"input",type:"price",name:"tax",min:0,value:0}]}:null,b&&"undefined"!=typeof b.due?{label:"Amount due",id:"SFlbdpaydue",
childNodes:[{nodeName:"input",type:"price",name:"due",min:0,value:0}]}:null,b&&b.due?{id:"SFlbdpay_ep",childNodes:[{nodeName:"input",type:"checkbox",name:"_ep",onchange:function(){SF.bl.g().catch(SF.lib.alr)},innerHTML:"Process payment for amount due"}]}:null,b&&b.dcc?{label:"Discount code",childNodes:[{nodeName:"span",className:"SFtxt",innerHTML:b.dcc.lbl?'"'+SF.lib.fr(b.dcc.lbl)+'" ':""}]}:null,b&&b.sid?{label:"Payment ID",childNodes:[{nodeName:"span",className:"SFtxt",innerHTML:b.sid}]}:null,!b||
!b.sum||b.due||b.sid?null:{childNodes:[{nodeName:"span",className:"SFtxt",innerHTML:"Admin marked as paid"}]}]}]}):d.push({className:"SFbox",childNodes:[{nodeName:"h2",id:"SFlbdpaysum",className:"SFboxttl"}]}),d.push({id:"SFlbdpaypay",className:"SFbox"});d.push({id:"SFlbdpaybtx",className:"SFfpybtx",childNodes:[{nodeName:"button",className:"SFfpybtn SFbig",onclick:SF.bl.s,innerHTML:b?"Update":SF._st.admin?"Add":"Submit"},SF._st.admin||b?{nodeName:"button",className:"SFbig",onclick:SF._st.admin?function(){SF.lib.dg("SFlbddlg",
!1)}:function(){SF.lib.dn("SFlbdpay");SF.open("mylistings")},innerHTML:"Cancel"}:null]});SF.lib.i("SFlbdpay",d);SF.lib.it("#SFlbdpay .SFhtm",!1);SF._st.admin||b||k.push(SF.lib.sw({pageElement:"SFlbdpay",settings:a._st}));SF.$("SFlbdpaypay")&&k.push(SF.lib.sy({pageElement:"SFlbdpay",paymentElement:"SFlbdpaypay",settings:a._st,getName:b&&b.crd&&b.crd.nam?!0:!1,getAddress:b&&b.crd&&(b.crd.con||b.crd.ad1||b.crd.ad2)?!0:!b&&a._st._tx&&a._st._tx.tax?"tax":!1,getPaymentMethod:!b||b.due?!0:!1,sum:b?0:a.amt||
0,allowPaymentMethodId:SF._st.admin||a._st._px&&a._st._px.rid?!0:!1,allowOffline:!SF._st.admin&&a.ds3?a.ds3:!1,allowDiscountCode:!SF._st.admin&&a.dcc?SF.bl.h:!1,currency:a.cur,preProcess:{act:b?"PATCH":"POST",url:"v2/board/"+a.lid+"/listing"+(b?"/"+b._id:""),opt:{admin:SF._st.admin?!0:!1}}}));return Promise.all(k).then(function(){if(SF.$("SFlbdpaypay")&&!b&&a._st._tx&&a._st._tx.tax){if(e=SF.$('#SFlbdpay [name="crd[ad2]"]'))e.oninput=SF.v,e.onblur=function(q){SF.v(q)&&SF.lib.gg(q).then(function(t){if(t)return SF.bl.i()}).catch(SF.lib.alr)};
if(e=SF.$('#SFlbdpay [name="ntx"]'))e.onchange=function(){SF.bl.i().catch(SF.lib.alr)}}if(SF._st.admin&&!b&&(h=SF.$("SFlbdpay").querySelectorAll('input[name="nam"],input[name="eml"]'),h.length))for(SF.lib.i("SFlbdpay",[{nodeName:"input",type:"hidden",name:"uid"}]),SF.$('#SFlbdpay [name="ntx"]')||SF.lib.i("SFlbdpay",[{nodeName:"input",type:"hidden",name:"ntx"}]),e=0;e<h.length;e++)h[e].onchange=SF.bl.f;(g=c&&c.pst?c.pst:b)?SF.lib.f("SFlbdpay",g):(!SF._st.admin&&SF._st.usr.uid&&SF._st.usr.adr&&SF.lib.f("SFlbdpay",
{crd:{nam:SF._st.usr.nam||"",ad1:SF.lib.f1(SF._st.usr.adr),ad2:SF.lib.f2(SF._st.usr.adr)}}),!SF._st.admin&&m&&SF.lib.f("SFlbdpay",{dcc:m}));return SF.bl.i()}).then(function(){if(SF.$('#SFlbdpay [name="_ep"]'))return SF.bl.g()}).then(function(){g&&SF.lib.f("SFlbdpay",g)})};
SF.bl.f=function(a){SF.v(a.currentTarget)&&SF.get(a.currentTarget)&&SF.co.f(a.currentTarget).then(function(b){return b?SF.lib.xhr("GET","v2/account/"+b.uid,{admin:!0}).then(function(c){var d=SF.d.get(SF.$("SFlbdpay")),e,f,h,g="";delete c.lgo;if(c.nam&&b.parent&&b.parent.nam)for(e=0;e<d.tab.length;e++)if(d.tab[e].box)for(f=0;f<d.tab[e].box.length;f++)if("object"==typeof d.tab[e].box[f].dat)for(h=0;h<d.tab[e].box[f].dat.length;h++)if(d.tab[e].box[f].dat[h]._id&&"ctc"==d.tab[e].box[f].dat[h]._id){c.ctc=
c.nam;c.nam=b.parent.nam;break}SF.lib.f("SFlbdpay",SF.lib.me(c,{uid:c.pid||c.uid,ntx:c.ntx||""}));if(c.dek)for(e=0;e<c.dek.length;e++)"undefined"==typeof c.dek[e].spy||0!=c.dek[e].spy&&3!=c.dek[e].spy||!c.dek[e].rid||(g=c.dek[e].rid);SF.lib.sy({pageElement:"SFlbdpay",allowPaymentMethodId:g});SF.bl.g().catch(SF.lib.alr)}):Promise.reject(null)}).catch(function(b){SF.lib.f("SFlbdpay",{uid:"",ntx:""});SF.lib.sy({pageElement:"SFlbdpay",allowPaymentMethodId:""});SF.bl.g().catch(SF.lib.alr)})};
SF.bl.g=function(){var a=SF.d.get(SF.$("SFlbdpay")),b=SF.e.get(SF.$("SFlbdpay")),c=SF.lib.f("SFlbdpay");SF.lib.s(".SFlbdpayamt",b||"3"!=c._ep?!0:!1);c=SF.lib.f("SFlbdpay");"undefined"!=typeof c.sum&&(c.sum||SF.lib.f("SFlbdpay",{tax:"0"}),b&&b.sum&&b.due&&Math.round(100*b.due)==Math.round(100*b.sum)&&Math.round(100*b.sum)!=Math.round(100*c.sum)&&SF.lib.f("SFlbdpay",{due:c.sum}));b&&SF.lib.s("SFlbdpaydue",c._ep?!1:!0);return"undefined"==typeof c._ep||"3"==c._ep?SF.lib.sy({pageElement:"SFlbdpay",sum:0}):
c._ep&&"2"!=c._ep?SF.lib.sy({pageElement:"SFlbdpay",sum:c.sum,getAddress:a._st._tx&&a._st._tx.tax&&!c.ntx?"tax":!1}):SF.lib.sy({pageElement:"SFlbdpay",sum:0,getAddress:c.sum&&a._st._tx&&a._st._tx.tax&&!c.ntx?!0:!1})};SF.bl.h=function(){var a=SF.d.get(SF.$("SFlbdpay")),b=SF.lib.f("SFlbdpaypay");SF._st._do="Applying discount";SF.lib.xhr("GET","v2/board/"+a.lid+(b.dcc?"?dcc="+encodeURIComponent(b.dcc):""),{admin:!1}).then(function(c){SF.d.set(SF.$("SFlbdpay"),c);return SF.bl.i()}).catch(SF.lib.alr)};
SF.bl.i=function(){var a=SF.d.get(SF.$("SFlbdpay")),b=SF.e.get(SF.$("SFlbdpay")),c=SF.lib.f("SFlbdpay"),d;return(new Promise(function(e){b&&"undefined"==typeof c.ntx?(d=b.txx?SF.lib.c(b.txx):{},e()):a._st._tx&&c.crd&&c.crd.ad2?SF.lib.gg(c.crd).then(function(f){d=SF.py.x({adr:f,ntx:c.ntx||""},a._st._tx);e()}).catch(function(){d=SF.py.x({ntx:c.ntx||""},a._st._tx||null);e()}):(d=SF.py.x({ntx:c.ntx||""},a._st._tx||null),e())})).then(function(){"undefined"==typeof d.tax&&(d.tax=0);"undefined"==typeof d.amt&&
(d.amt=1);if(SF._st.admin&&"undefined"!=typeof c.sum){var e=c.sum-(c.tax&&!d.txi?c.tax:0);isNaN(e)&&(e=a.amt)}else e=a.amt;var f=SF.py.r(a,e*d.tax);e=SF.py.r(a,e*d.amt)+(d.txi?0:f);if(SF._st.admin)return SF.lib.f("SFlbdpay",{sum:e,tax:f}),SF.bl.g();SF.set("SFlbdpaysum",SF.lib.fa(e,a.cur));return SF.lib.sy({pageElement:"SFlbdpay",sum:e,allowDiscountCode:a.dcc?SF.bl.h:!1})}).then(function(){var e;(e=SF.$("#SFlbdpaypay .SFfpydccmsg"))&&SF.set(e,a.amd?"Discount code applied":SF.lib.f("SFlbdpaypay").dcc?
"Invalid discount code":"")})};
SF.bl.s=function(a){a=void 0===a?null:a;var b=SF.d.get(SF.$("SFlbdpay")),c=SF.e.get(SF.$("SFlbdpay"));SF.v("SFlbdpay")&&(a=SF.lib.f("SFlbdpay"),SF._st.processing||SF._st.geocoding||(SF._st.processing=!0,(new Promise(function(d,e){var f,h;SF._st.admin&&c&&c.sid&&(f=Math.round(100*a.sum))!=(h=Math.round(100*c.sum))?f>h?e({message:"You cannot increase amount after payment has already been processed.",cause:SF.$("SFlbdpaysum")}):SF.lib.dg("SFlbdpaydlg",{childNodes:[{nodeName:"p",innerHTML:"You have changed the total, a partial refund will be issued for the difference of "+
SF.lib.fa((h-f)/100,b.cur)+"."},{nodeName:"button",onclick:function(){SF.lib.dg("SFlbdpaydlg",!1);d()},innerHTML:"Continue"},{nodeName:"button",onclick:function(){SF.lib.dg("SFlbdpaydlg",!1);e(null)},innerHTML:"Cancel"}]}):d()})).then(function(){SF._st.admin?a._ep?"2"===a._ep?(a.due=a.sum,delete a._ep):"3"===a._ep?(a.sum=0,a.tax=0,delete a.due,delete a._ep):c&&(a.due=0):delete a._ep:a.due||delete a.due;a.tag&&!a.tag.length&&(a.tag="");SF.lib.sn(!0);return SF.lib.pa(a)}).then(function(){return SF._st.admin||
c||!b.amt||a.due||!b._st._tx||!b._st._tx.tax||a.crd&&a.crd.con?SF.lib.pp(a):Promise.reject({message:"The address you entered does not appear to be correct - please check and update the address.",cause:SF.$('#SFlbdpay [name="crd[ad2]"]')})}).then(function(d){return SF.bl.p(a,d)}).catch(SF.lib.alr).then(function(){delete SF._st.processing})))};
SF.bl.p=function(a,b){b=void 0===b?null:b;var c=SF.d.get(SF.$("SFlbdpay")),d=SF.e.get(SF.$("SFlbdpay"));return(new Promise(function(e,f){b&&b.error?e(b):!(!SF._st.admin&&!d&&c.amt||SF._st.admin&&a._ep&&a.sum)||a.due&&!(SF._st.admin&&d&&0<a.due)||a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&!a.crd.error?(a.crd&&(a.crd.ccn||a.crd.tok||a.crd.spi||a.crd.rid)&&SF.lib.sn({processingPayment:!0}),SF._st._do="Submitting listing",e(SF.lib.xhr(d?"PATCH":"POST","v2/board/"+c.lid+"/listing"+(d?"/"+d._id:
""),a,{admin:SF._st.admin?!0:!1,handleErrors:!1}))):f({message:a.crd&&a.crd.error?a.crd.error:"Payment method required",cause:SF.$("#SFlbdpay .SFfpybtn")})})).then(function(e){if(!e||e.error||a._pv)return Promise.reject(e?e.error||"Error":"No response from server");if(SF._st.admin)SF.lib.dg("SFlbddlg",!1),d&&(e._id=d._id),SF.bo.l.u(e._id,e),SF.bo.m.s(),SF.lib.fc(SF.$("SFlbdusr"+e._id).childNodes[8]);else return(new Promise(function(f){!SF._st.usr.uid&&e._zr&&e._zr.usr&&e._zr.usr.uid?(SF.close({exclude:["SFlbdpay"]}),
SF.ss.i(e._zr.usr,a).then(f).catch(f)):f()})).then(function(){e._zz?SF.lib.re(e._zz):d?(SF.bl.c(),SF.$("SFlbdman")&&(e._id=d._id,SF.bm.i(e)),SF.open("mylistings"),SF.lib.alr("Your listing has been updated")):(SF.lib.cn("SFlbdpay"),SF.lib.i("SFlbdpay",[e._rg&&e._rg.dtl?null:{nodeName:"h2",innerHTML:"Thank you!"},{innerHTML:e._rg?e._rg.dtl:"Your listing will be processed."}]),SF.lib.sv("SFlbdpay"),SF.lib.fc("SFlbdpay"))})})};SF.di={};
SF.di.o=function(a){var b=SF._st.hsh||SF.get("SFctr","data-ini"),c=a.split("/"),d=!0,e=!1;SF.$("SFylppne")||(SF.di._={},SF.lib.i("SFpne",[{id:"SFylppne",className:"SFpne",style:{display:"none",right:"0px"},childNodes:[{id:"SFylpfnd",className:"SFfnd",style:{display:"none"},childNodes:[{className:"SFfndtag",childNodes:[{nodeName:"input",name:"tag",type:"text",onkeydown:function(f){13==f.keyCode&&SF.di.g.a()},ariaLabel:"Search keywords",placeholder:"Search for..."},{nodeName:"button",onclick:SF.di.g.a,
innerHTML:SF.get("SFctr","data-fnd")?SF.get("SFctr","data-fnd"):"Search"},SF.get("SFctr","data-rsp")?{nodeName:"button",id:"SFylpmsg",style:{display:"none"},onclick:SF.gm.o,innerHTML:SF.get("SFctr","data-rsp")}:null,{nodeName:"button",id:"SFylpclr",style:{display:"none"},onclick:SF.di.g.c,innerHTML:"Clear"}]}]},{id:"SFylpqry",style:{display:"none"}},{id:"SFylptxt",style:{display:"none"}},{id:"SFylpcrd",className:"SFcrdlst"},{nodeName:"button",id:"SFylpmor",onclick:function(){SF.di.n(!0)},style:{display:"none"},
innerHTML:"More"}]}]));(new Promise(function(f){var h,g;if(SF.di._.hsh&&decodeURIComponent(a)==decodeURIComponent(SF.di._.hsh))d=!1,f();else{SF.di._.hsh=a;var k=0;for(h={};k<c.length;k++){var m=c[k].split("=");if(!k)SF.di._.map="!map"==m[0]?2:!1;else if("map"==m[0])SF.di._.map=1;else if("ord"==m[0])SF.di._.ord=m[1];else if(m[1])if("lbl"==m[0]){var l=0;for(m=m[1].split("&");l<m.length;l++)m[l]=m[l].length?m[l].split(","):[];h.lbl=m}else h[m[0]]=decodeURIComponent(m[1])}if(SF.di._.qrx&&JSON.stringify(SF.di._.qrx)==
JSON.stringify(h))d=!1,f();else if(SF.lib.f("SFylpfnd",h,!0),SF.di._.qry=h,SF.di._.qrx=SF.lib.c(h),h.rad&&h.zip?g=SF.di._:!SF.di._.qry.rad&&SF.di._.qry.tag&&/^([A-Z0-9]{2,4}\s?[0-9][A-Z0-9]{2}|[A-Z][0-9][A-Z][\s\-]?[0-9][A-Z][0-9]|[0-9]{5}\-[0-9]{4}|[0-9]{5}\-[0-9]{3}|[0-9]{4}|[0-9]{5}|[0-9]{6})$/.test(SF.di._.qry.tag)&&(!SF.di._.ylp||SF.di._.ylp&&SF.di._.ylp.some(function(n){return"adr"==n.dat}))&&(e=g={qry:{rad:"030",zip:SF.di._.qry.tag}}),SF.di._.ylp&&g){h={ad2:g.qry.zip};for(k=SF.di._.ylp.length-
1;0<=k;k--)if(SF.di._.ylp[k].dat&&"adr"==SF.di._.ylp[k].dat&&SF.di._.ylp[k].con){h._rc=SF.di._.ylp[k].con;break}f(SF.lib.gg(h,{returnFormattedAddress:!0,returnBoundary:!0}).then(function(n){if(!n||!n.loc)return Promise.reject(null);g.adr=n;n.cit||"0"!=g.qry.rad?n.bnd?(g.qry.lon=n.bnd._ne[0]+","+n.bnd._sw[0],g.qry.lat=n.bnd._ne[1]+","+n.bnd._sw[1],"0"==g.qry.rad&&(g.qry.rad="010")):(g.qry.lon=n.loc[0],g.qry.lat=n.loc[1],"0"==g.qry.rad&&(g.qry.rad="030")):n.con&&"GB"==n.con&&n.cot?g.qry.rad=n.con+"_"+
(n.sta?n.sta:"")+"_"+n.cot:n.sta?g.qry.rad=n.con+"_"+n.sta:n.con&&(g.qry.rad=n.con)}).catch(function(){delete g.qry.rad;delete g.qry.zip;delete g.qry.adr}))}else f()}})).then(function(){var f,h=[];if(d){SF.set("SFylptxt","Loading...");SF.lib.s("SFylptxt",!0);SF.lib.dn("SFylpmap");SF.lib.cn("SFylpcrd");SF.lib.s("SFylpmor",!1);delete SF.di._.lst;SF.di.g.r();var g=SF.lib.c(SF.di._.qry);if(g.lbl){var k=[];for(f=0;f<g.lbl.length;f++)g.lbl[f].length&&k.push(g.lbl[f].join(","));g.dek=k.join(".")}delete g.lbl;
if(decodeURIComponent(SF.di._.hsh)==decodeURIComponent(SF.get("SFctr","data-hme"))||decodeURIComponent(SF.di._.hsh)==decodeURIComponent(SF.get("SFctr","data-ini")))var m=!1;else for(f in m=0,g)m++;SF.get("SFctr","data-lbl")&&(g.dek=SF.get("SFctr","data-lbl")+(g.dek?"."+g.dek:""));g._rf=SF.get("SFctr","data-dek")?decodeURIComponent(SF.get("SFctr","data-dek")):"Members";SF.di._.ylp||(g._st="");h.push(g);e&&h.push(SF.lib.me(e.qry,SF.lib.c(g,{exclude:["_st","tag"]})));h.forEach(function(l){l.rad&&(l.adr=
{rad:l.rad},"undefined"!=typeof l.lon&&"undefined"!=typeof l.lat?(l.adr.lon=l.lon,l.adr.lat=l.lat):l.zip&&(l.adr.ad2=l.zip));delete l.rad;delete l.zip;delete l.lon;delete l.lat});return Promise.all(h.map(function(l){return SF.lib.xhr("GET","v2/directory?"+SF.lib.tq(l),{handleErrors:!1})})).then(function(l){return l.reduce(function(n,q){n.usr=n.usr.concat(q.usr.filter(function(t){return!n.usr.some(function(u){return u.uid==t.uid})}));return n})}).then(function(l){l&&l._st&&(SF.lib.ml(SF.di._,l._st),
SF.di.g.i());SF.set("SFylpcrd","data-crd",SF.di._.crd&&SF.di._.crd.typ||0);SF.set("SFylpcrd","data-ord",SF.di._.ord||"");if(l&&!l.error&&l.usr&&l.usr.length)m&&"o"==l.typ&&SF.lib.s("SFylpcrd")?SF.set("SFylptxt","There are no exact matches for your search, closest matches shown..."):(SF.set("SFylptxt",""),SF.lib.s("SFylptxt",!1)),SF.lib.s("SFylpmsg",m),SF.lib.s("SFylpclr",m),SF.di._.lst=l.usr;else{if(l&&l.dsv)return SF.lib.dn("SFylppne"),SF.ss.o(),Promise.reject(null);l=l?l.error?l.error:m?"We're sorry, there are no matches for your search, please try a different query...":
"Directory is currently empty":"We're sorry, there was no response from our servers, please try again later...";m?(SF.set("SFylptxt",l),SF.lib.s("SFylpclr",!0),SF.lib.s("SFylpmsg",!1)):(SF.lib.cn("SFylppne"),SF.set("SFylppne",l))}})}}).then(function(){var f,h;if(SF.di._.lst&&!SF.di._.qry.tag&&("undefined"==typeof SF.di._.qry.adr||"undefined"==typeof SF.di._.qry.lon&&"undefined"==typeof SF.di._.qry.zip||"undefined"==typeof SF.di._.qry.rad||!SF.di._.qry.rad.match(/^[0-9]+$/)))if(d&&"rnd"==SF.di._.ord)for(f=
SF.di._.lst.length-1;0<=f;f--){var g=Math.floor(Math.random()*(f+1));var k=SF.di._.lst[g];SF.di._.lst[g]=SF.di._.lst[f];SF.di._.lst[f]=k}else"_id"==SF.di._.ord?SF.di._.lst.sort(function(m,l){return m.uid>l.uid?1:m.uid<l.uid?-1:0}):"uid"==SF.di._.ord?SF.di._.lst.sort(function(m,l){m="0x"+m.uid.slice(0,4);l="0x"+l.uid.slice(0,4);return m>l?1:m<l?-1:0}):"lnm"==SF.di._.ord?SF.di._.lst.sort(function(m,l){m=SF.lib.en(m.ctc||m.nam||"").last.toLowerCase();l=SF.lib.en(l.ctc||l.nam||"").last.toLowerCase();
return m>l?1:m<l?-1:0}):SF.di._.ord&&SF.di._.lst.sort(function(m,l){var n=SF.di._.ord;m="string"!=typeof m[n]&&"number"!=typeof m[n]||"0"==m[n]?"":m[n].toString();l="string"!=typeof l[n]&&"number"!=typeof l[n]||"0"==l[n]?"":l[n].toString();if(!m&&!l)return 0;if(!m)return 1;if(!l)return-1;/^[0-9]+$/.test(m)&&/^[0-9]+$/.test(l)?(m=parseInt(m),l=parseInt(l)):/\s[0-9]+$/.test(m)&&/\s[0-9]+$/.test(l)&&m.replace(/\s[0-9]+$/,"")==l.replace(/\s[0-9]+$/,"")?(m=parseInt(m.match(/\s([0-9]+)$/)[1]),l=parseInt(l.match(/\s([0-9]+)$/)[1])):
/^[0-9]+\s/.test(m)&&/^[0-9]+\s/.test(l)&&(m=parseInt(m.match(/^([0-9]+)\s/)[1]),l=parseInt(l.match(/^([0-9]+)\s/)[1]));return m>l?1:m<l?-1:0});SF.lib.se("SFylppne");SF.di._.map&&1!=SF.di._.map?(SF.lib.s("SFylpfnd",!1),SF.di.m.i(),SF.lib.s("SFylpcrd",!1),SF.lib.s("SFylpmor",!1),delete SF.t):(SF.lib.s("SFylpfnd",!0),SF.di._.map?SF.di.m.i():SF.lib.dn("SFylpmap"),SF.lib.s("SFylpcrd",!0),SF.di._.lst?(SF.lib.s("SFylpmor",!0),SF.di.n(),SF.t=SF.di.n):(SF.lib.s("SFylpmor",!1),delete SF.t));SF._st.ini||(b&&
(h=b.match(/!biz\/id\/[^\/]*|!biz\/[^\/]*/))&&(k=SF.$('#SFylppne a[href$="'+h[0]+'"]'))?SF.lib.fc(k):SF.lib.fc("SFylppne"))}).catch(SF.lib.alr)};SF.di.c=function(){SF.lib.s("SFylppne")&&delete SF.t;SF.lib.dn("SFylppne");delete SF.di._};SF.r({url:/^!(directory|map)(\/|$)/,pageId:"SFylppne",open:SF.di.o,close:SF.di.c});
SF.di.n=function(a){a=SF.$("SFylpcrd");var b;var c=0;var d,e,f=SF.$("SFylpmor");if(SF.di._.lst&&SF.lib.s("SFylppne")&&SF.lib.s("SFylpcrd")){if(SF._is.robot)c=SF.di._.lst.length;else if(SF._st.win){var h=315;c=180;var g=15;(b=a.firstChild)&&(d=b.getBoundingClientRect())&&d.width&&d.height&&(h=d.width,c=d.height,(b=a.childNodes[1])&&(e=b.getBoundingClientRect())&&(g=Math.max(10>Math.abs(d.top-b.top)?e.left-d.left-d.width:e.top-d.top-d.height,0)));b=SF.$("SFylpcrd").getBoundingClientRect();var k=Math.max(1,
Math.round((b.width+g)/(h+g)));h=Math.ceil((SF._st.win.h+g)/(c+g));c=Math.min(Math.max(Math.ceil((2*SF._st.win.h-b.top+g)/(c+g))*k,h*k),SF.di._.lst.length)}c||(c=Math.min(10,SF.di._.lst.length));c<SF.di._.lst.length?(SF.lib.s(f,!0),b=f.getBoundingClientRect(),0<=b.top&&b.top<SF._st.win.h&&(d=a.childNodes.length,c=Math.min(Math.max(d+h*k,d+10,c),SF.di._.lst.length),SF.lib.s(f,c<SF.di._.lst.length))):SF.lib.s(f,!1);for(d=0;d<c;d++)SF._is.robot&&10<d&&(delete SF.di._.lst[d].lgo,delete SF.di._.lst[d].lgx),
(b=SF.$("SFylp"+SF.di._.lst[d].uid))||SF.lib.i(a,[b=SF.ac.g(SF.di._.lst[d],"SFylp")]),SF.di._.lsm&&SF.gm.r(b)}};
SF.di.p=function(a,b){var c=SF.$("SFylppne");if(c&&(a=SF.$(a)))if(delete SF.t,a.offsetLeft){var d=SF.$("SFctr").getBoundingClientRect();var e=a.getBoundingClientRect();SF.lib.s("SFylpfnd",!1);SF.lib.s("SFylptxt",!1);SF.lib.s("SFylpmap",!1);c.style.position="fixed";c.style.overflow="auto";c.style.top=Math.max(0,d.top)+"px";c.style.bottom="0px";c.style.left=Math.max(0,d.left)+"px";c.style.right=SF._st.win.w-e.left+"px";c.style.borderRight="1px solid #aaa";a.id&&c.setAttribute("data-wnr",a.id);c.className=
"SFpne SFwnr";setTimeout(function(){if(c=SF.$("SFylppne"))c.style.borderRight=c.style.overflow="",b&&SF.$("SFylp"+b)&&SF.lib.sv("SFylp"+b,"SFylppne"),SF.lib.win({type:"resize"}),SF.lib.sv("SFctr"),c.onscroll=SF.di.n},500)}else SF.lib.s(c,!1)};
SF.di.q=function(){var a=SF.$("SFylppne"),b=SF.$("SFylpmap"),c=b?SF.d.get(b):!1;a&&("0px"!=a.style.right?(a.onscroll=null,a.style.borderRight="1px solid #aaa",a.style.right="0px",a.style.opacity=1,SF.lib.s("SFylpfnd",!0),SF.lib.s("SFylptxt",SF.$("SFylptxt").innerHTML?!0:!1),SF.lib.s("SFylpmap",!0),setTimeout(function(){if(a=SF.$("SFylppne"))a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.borderRight="",a.removeAttribute("data-wnr"),a.className="SFpne",SF.lib.s(a)&&(c&&c.map&&google.maps.event.trigger(c.map,
"resize"),SF.lib.rt(a),SF.t=SF.di.n,SF.di.n())},SF._is.IE||!SF.lib.s("SFylppne")?1:510)):(a.getAttribute("data-wnr")?c&&c.map&&google.maps.event.trigger(c.map,"resize"):(a.style.opacity=1,SF.lib.s(a,!0),c&&c.map&&google.maps.event.trigger(c.map,"resize"),SF.lib.rt(a),SF.t=SF.di.n),SF.di.n()))};SF.di.g={};
SF.di.g.i=function(a){if(SF.di._.ylp)for(a=1;a<SF.di._.ylp.length;a++)"undefined"!=typeof SF.di._.ylp[a].dat&&SF.lib.i("SFylpfnd",[{nodeName:"button",className:"SFfndopt",dataset:{idx:a},onclick:SF.di.f.o,childNodes:[{nodeName:"span",innerHTML:SF.di._.ylp[a].ttl},{nodeName:"i",className:"SFicoard"},{className:"SFfndtxt"}]}]);SF.di.g.r()};
SF.di.g.r=function(){var a,b,c,d,e=0;SF.lib.cn("SFylpqry");SF.lib.s("SFylpqry",!1);if(SF.di._.ylp)for(a=1;a<SF.di._.ylp.length;a++)if(c=SF.$('#SFylpfnd [num-idx="'+a+'"]')){c.className="SFfndopt";c.childNodes[1].className="SFicoard";var f=SF.di._.ylp[a];var h=!1;if(!SF.di._.qry)SF.set(c.lastChild,""),SF.lib.s(c.lastChild,!1);else if("lbl"===f.dat){var g=[];if(d=SF.di._.qry.lbl&&SF.di._.qry.lbl[e])for(b=0;b<f.dek.length;b++)0<=d.indexOf(f.dek[b].did)&&g.push(f.dek[b].lbl);SF.set(c.lastChild,g.length?
g.join(" | "):"");g.length&&(h=!0);e++}else if("adr"===f.dat)SF.di._.qry.rad?SF.di._.qry.rad.match(/^[0-9]+$/)&&"0"!=SF.di._.qry.rad&&SF.di._.qry.zip?SF.set(c.lastChild,"Within "+(f.rad&&"K"==f.rad?Math.round(1.61*parseInt(SF.di._.qry.rad,10))+" km":parseInt(SF.di._.qry.rad,10)+" miles")+" of "+SF.lib.fr(SF.di._.adr&&SF.di._.adr.ful?SF.di._.adr.ful:SF.di._.qry.zip)):SF.di._.adr&&SF.di._.adr.ful?SF.set(c.lastChild,SF.lib.fr(SF.di._.adr.ful)):SF.di._.qry.zip?SF.set(c.lastChild,SF.lib.fr(SF.di._.qry.zip)):
SF.set(c.lastChild,SF.lib.fr(SF.di._.qry.rad)):SF.set(c.lastChild,""),SF.di._.qry.rad&&(h=!0);else if("object"==typeof f.dat){g=[];for(b=0;b<f.dat.length;b++)f.dat[b]._id&&(d=SF.di._.qry[f.dat[b]._id])&&g.push(f.dat[b].lbl+"="+d);SF.set(c.lastChild,g.length?g.join(" &amp; "):"");g.length&&(h=!0)}c.className="SFfndopt"+(h?" SFset":"")}};
SF.di.g.a=function(){var a=[],b,c;var d=SF.lib.f("SFylpfnd");d.tag?SF.di._.qry.tag=d.tag:delete SF.di._.qry.tag;SF.di._.qry.rad&&SF.di._.qry.rad.match(/^[0-9]+$/)||delete SF.di._.qry.zip;SF.di._.qry.zip||(delete SF.di._.qry.lon,delete SF.di._.qry.lat);for(b in SF.di._.qry)if("lbl"==b){d=[];for(c=0;c<SF.di._.qry.lbl.length;c++)d.push(SF.di._.qry.lbl[c]?SF.di._.qry.lbl[c].join(","):"");d=d.join("&").replace(/&*$/g,"");d.length?a.push("lbl="+d):delete SF.di._.qry.lbl}else"lon"!=b&&"lat"!=b&&(SF.di._.qry[b]?
a.push(b+"="+encodeURIComponent(SF.di._.qry[b])):delete SF.di._.qry[b]);JSON.stringify(SF.lib.c(SF.di._.qrx,{exclude:["lon","lat"]}))==JSON.stringify(SF.lib.c(SF.di._.qry,{exclude:["lon","lat"]}))?SF.di.g.r():SF.open("!directory"+(SF.di._.map?"/map":"")+(SF.di._.ord?"/ord="+SF.di._.ord:"")+(a.length?"/"+a.join("/"):""))};
SF.di.g.c=function(){var a;delete SF.di._.hsh;(a=SF.get("SFctr","data-hme"))&&(0<=a.indexOf("!directory")||0<=a.indexOf("!map"))?SF.open(a):(a=SF.get("SFctr","data-ini"))&&(0<=a.indexOf("!directory")||0<=a.indexOf("!map"))?SF.open(a):2==SF.di._.map?SF.open("!map"):SF.open("!directory"+(SF.di._.map?"/map":"")+(SF.di._.ord?"/ord="+SF.di._.ord:""))};SF.di.f={};
SF.di.f.o=function(a){a=a.currentTarget;var b,c,d=!1;if(SF.lib.ma(a,".SFsel"))SF.di.g.r();else{SF.lib.cn("SFylpqry");if(c=SF.$("#SFylpfnd .SFfndopt.SFsel"))c.className=c.className.replace(/\sSFsel/,""),c.childNodes[1].className="SFicoard";var e=SF.di._.ylp[b=SF.lib.ds(a).idx];if("lbl"===e.dat){e.dek.sort(SF.lib.cm);var f=0;for(c=[];f<e.dek.length;f++)c.push({nodeName:"multiselectbutton",value:e.dek[f].did,innerHTML:e.dek[f].lbl});for(e=f=0;f<b;f++)SF.di._.ylp[f].dat&&"lbl"==SF.di._.ylp[f].dat&&e++;
d=SF.di._.qry&&SF.di._.qry.lbl&&SF.di._.qry.lbl.length>e;SF.lib.i("SFylpqry",[{nodeName:"multiselectbuttongroup",name:"lbl["+e+"]",childNodes:c}]);SF.lib.f("SFylpqry",SF.di._.qry)}else if("adr"===e.dat){c=e.rad&&"K"==e.rad?[{nodeName:"option",value:"006",innerHTML:"Within 10 km of"},{nodeName:"option",value:"015",innerHTML:"Within 24 km of"},{nodeName:"option",value:"031",innerHTML:"Within 50 km of"},{nodeName:"option",value:"062",innerHTML:"Within 100 km of"},{nodeName:"option",value:"124",innerHTML:"Within 200 km of"},
{nodeName:"option",value:"199",innerHTML:"Within 320 km of"}]:[{nodeName:"option",value:"005",innerHTML:"Within 5 miles of"},{nodeName:"option",value:"010",innerHTML:"Within 10 miles of"},{nodeName:"option",value:"030",innerHTML:"Within 30 miles of"},{nodeName:"option",value:"060",innerHTML:"Within 60 miles of"},{nodeName:"option",value:"120",innerHTML:"Within 120 miles of"},{nodeName:"option",value:"200",innerHTML:"Within 200 miles of"}];if(SF.di._.qry.rad&&SF.di._.qry.rad.match(/^[0-9]+$/)){e={nodeName:"option",
value:SF.di._.qry.rad,innerHTML:e.rad&&"K"==e.rad?"Within "+Math.round(1.61*parseInt(SF.di._.qry.rad))+" km of":"Within "+parseInt(SF.di._.qry.rad)+" miles of"};for(f=0;f<c.length;f++)if(!(parseInt(c[f].value)<parseInt(SF.di._.qry.rad))){parseInt(c[f].value)!=parseInt(SF.di._.qry.rad)&&c.splice(f,0,e);break}f>=c.length&&c.push(e)}d=SF.di._.qry.rad;SF.lib.i("SFylpqry",[{nodeName:"select",id:"SFylprad",name:"rad","aria-label":"Search radius",oninput:function(){SF.lib.s(this.nextSibling,this.value.match(/^[0-9]+$/)?
!0:!1)},childNodes:c.concat(SF.di._.qry.rad&&!SF.di._.qry.rad.match(/^[0-9]+$/)&&SF.di._.qry.rad!=SF.get("SFctr","data-rad")?{nodeName:"option",value:SF.di._.qry.rad,innerHTML:SF.di._.qry.zip?SF.di._.qry.zip:SF.di._.qry.rad}:null,SF.get("SFctr","data-rad")&&!SF.get("SFctr","data-rad").match(/^[0-9]+$/)?{nodeName:"option",value:SF.get("SFctr","data-rad"),innerHTML:SF.get("SFctr","data-rad")}:null,{nodeName:"option",value:"0",innerHTML:"by city/state/country"},{nodeName:"option",value:"",selected:!0,
innerHTML:"all areas"})},{nodeName:"input",type:"text",id:"SFylpzip",name:"zip","aria-label":"Location",onkeydown:function(h){13==h.keyCode&&SF.di.f.s()}}]);SF.lib.f("SFylpqry",SF.di._.qry);SF.lib.s("SFylpzip",SF.di._.qry.rad&&SF.di._.qry.rad.match(/^[0-9]+$/))}else if("object"==typeof e.dat){c=SF.lib.c(e.dat);for(f=0;f<c.length;f++){if(3==c[f].typ||4==c[f].typ)c[f].typ=1;delete c[f].req;SF.di._.qry[c[f]._id]&&(d=!0)}SF.lib.i("SFylpqry",[SF.lib.tf(c,{},!0)]);SF.lib.f("SFylpqry",SF.di._.qry)}else return;
SF.lib.i("SFylpqry",[{className:"SFbtx",childNodes:[{nodeName:"button",onclick:SF.di.f.s,innerHTML:"Search"},d?{nodeName:"button",onclick:SF.di.f.d,innerHTML:"Clear"}:null,{nodeName:"button",onclick:SF.di.g.r,innerHTML:"Cancel"}]}]);SF.lib.s("SFylpqry",!0);a.className=a.className.replace(/\sSFsel/,"")+" SFsel";a.childNodes[1].className="SFicoaru";SF.lib.fc("SFylpqry")}};
SF.di.f.d=function(){var a=SF.lib.f("SFylpqry"),b;if(a.lbl){if(SF.di._.qry.lbl)for(b in a.lbl)null!=a.lbl[b]&&(SF.di._.qry.lbl[b]=[])}else{for(b in a)a[b]=null;SF.lib.ml(SF.di._.qry,a)}SF.di.g.a()};SF.di.f.s=function(){var a=SF.lib.f("SFylpqry"),b;if(a.lbl){if(!SF.di._.qry.lbl)for(SF.di._.qry.lbl=[],b=0;b<SF.di._.ylp.length;b++)"lbl"==SF.di._.ylp[b].dat&&SF.di._.qry.lbl.push([]);for(b in a.lbl)null!=a.lbl[b]&&(SF.di._.qry.lbl[b]=a.lbl[b])}else SF.lib.ml(SF.di._.qry,a);SF.di.g.a()};SF.di.m={};
SF.di.m.i=function(){var a=SF.$("SFylpmap"),b;(new Promise(function(c){a&&(b=SF.d.get(a))?c():(a||SF.lib.i("SFylppne",[a=SF.lib.n({id:"SFylpmap"})],"SFylptxt"),c(SF.lib.lm("js",SF.lib.c(SF.di._,{only:["_rc"]})).then(function(){b={map:new google.maps.Map(a,{mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"SFm"]},zoom:15,minZoom:2,maxZoom:17,scrollwheel:!1})};SF.d.set(a,b);SF.set(a,"mapdata","");google.maps.event.addListener(b.map,"bounds_changed",function(){b.SFr||(b.SFr=1,setTimeout(SF.di.m.i,
1E3))});SF._is.touch&&google.maps.event.addListener(b.map,"click",SF.di.m.m)})))})).then(function(){var c,d,e,f;if(b.SFm){delete b.SFr;var h=b.map.getZoom();6>h?(b.SFk={url:SF._is.cdn+"mmk.png",size:new google.maps.Size(12,12),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(6,6)},b.SFo={url:SF._is.cdn+"mmo.png",size:new google.maps.Size(12,12),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(6,6)}):11>h?(b.SFk={url:SF._is.cdn+"msk.png",size:new google.maps.Size(12,20),
origin:new google.maps.Point(0,0),anchor:new google.maps.Point(6,21)},b.SFo={url:SF._is.cdn+"mso.png",size:new google.maps.Size(12,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(6,21)}):(b.SFk={url:"//maps.google.com/mapfiles/ms/icons/blue.png",size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,33)},b.SFo={url:"//maps.google.com/mapfiles/ms/icons/red.png",size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,
33)});var g=Math.pow(2,h-5);h=b.map.getBounds();b.SFb&&(h=h.extend(b.SFb.position));if(b.SFm)for(f in b.SFm)g==b.SFp&&h.contains(b.SFm[f].getPosition())?b.SFm[f].SFu=[]:(b.SFb&&b.SFb.getAnchor()==b.SFm[f]&&(b.SFb.close(),delete b.SFb),google.maps.event.clearInstanceListeners(b.SFm[f]),b.SFm[f].setMap(null),delete b.SFm[f]);b.SFp=g;if(SF.di._&&SF.di._.lst)for(d=0;d<SF.di._.lst.length;d++)if((f=SF.di._.lst[d]).loc)for(e=0;e<f.loc.length;e+=2)if(h.contains(c=new google.maps.LatLng(parseFloat(f.loc[e+
1]),parseFloat(f.loc[e])))){var k=parseInt(c.lat()*g)+","+parseInt(c.lng()*g);"undefined"==typeof b.SFm[k]&&(c=b.SFm[k]=new google.maps.Marker({icon:b.SFk,position:c,map:b.map}),c.SFi=k,c.SFu=[],SF._is.touch?google.maps.event.addListener(c,"click",SF.di.m.j):(google.maps.event.addListener(c,"mouseover",SF.di.m.l),google.maps.event.addListener(c,"mouseout",SF.di.m.k)));0>b.SFm[k].SFu.indexOf(f.uid)&&b.SFm[k].SFu.push(f.uid)}}else{h=!1;if(SF.di._&&SF.di._.lst)for(d=0;d<SF.di._.lst.length;d++)if((f=
SF.di._.lst[d]).loc)for(e=0;e<f.loc.length;e+=2)c=new google.maps.LatLng(parseFloat(f.loc[e+1]),parseFloat(f.loc[e])),h=h?h.extend(c):new google.maps.LatLngBounds(c,c);h?(SF.lib.s(a,!0),b.SFp=0,b.SFm={},b.map.fitBounds(h)):SF.lib.s(a,!1)}}).catch(function(c){SF.lib.alr(c);SF.lib.dn(a)})};
SF.di.m.p=function(a){var b=SF.d.get(SF.$("SFylpmap")),c=[],d;if(!1===a)SF.lib.dg("SFylpbbl",!1),b.SFc&&b.SFm[b.SFc].setIcon(b.SFk),delete b.SFc;else if(b.SFa&&b.SFa==a&&(a=b.SFm[b.SFa])&&(!b.SFb||b.SFb.getAnchor()!=a)){for(d=0;d<SF.di._.lst.length;d++)0<=a.SFu.indexOf(SF.di._.lst[d].uid)&&c.push({nodeName:"a",className:"SFylpbbl",href:"#!biz/id/"+SF.di._.lst[d].uid,childNodes:[SF.di._.lst[d].lgo&&SF.di._.lst[d].lgo.s?{nodeName:"img",src:SF.di._.lst[d].lgo.s,onload:function(){this.className=50<this.height?
"SFcrdlgt":"SFcrdlgw"}}:null,{nodeName:"hgroup",childNodes:[{nodeName:"h4",innerHTML:SF.lib.fr(SF.di._.lst[d].nam)},SF.di._.lst[d].cnm?{innerHTML:SF.lib.fr(SF.di._.lst[d].cnm,{allowed:["br"]})}:null]}]});1<c.length&&c.unshift({nodeName:"p",innerHTML:c.length+" results:"});SF._is.touch?SF.lib.dg("SFylpbbl",{childNodes:[{childNodes:c},{nodeName:"button",className:"SFmt2",onclick:function(){SF.di.m.p(!1)},innerHTML:"Close"}]},{width:"320px"}):(b.SFb||(b.SFb=new google.maps.InfoWindow({maxWidth:320}),
google.maps.event.addListener(b.SFb,"closeclick",function(e){SF.di.m.p(!1)})),b.SFb.setContent(SF.lib.n({childNodes:c})),b.SFb.open(b.map,a));b.SFc&&b.SFm[b.SFc]&&b.SFm[b.SFc].setIcon(b.SFk);b.SFc=b.SFa;a.setIcon(b.SFo)}};
SF.di.m.m=function(a){var b=SF.d.get(SF.$("SFylpmap")),c,d=!1;for(c in b.SFm){var e=Math.pow(Math.sin((b.SFm[c].getPosition().lat()-a.latLng.lat())*Math.PI/360),2)+Math.pow(Math.sin((b.SFm[c].getPosition().lng()-a.latLng.lng())*Math.PI/360),2)*Math.cos(b.SFm[c].position.lat()*Math.PI/180)*Math.cos(a.latLng.lat()*Math.PI/180);e=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));if(!d||e<d){d=e;var f=b.SFm[c]}}d<.05/b.SFp&&f&&f.SFi&&(b.SFa=f.SFi,SF.di.m.p(f.SFi))};
SF.di.m.j=function(){SF.d.get(SF.$("SFylpmap")).SFa=this.SFi;SF.di.m.p(this.SFi)};SF.di.m.l=function(){SF.d.get(SF.$("SFylpmap")).SFa=this.SFi;setTimeout(SF.di.m.p,500,this.SFi)};SF.di.m.k=function(){var a=SF.d.get(SF.$("SFylpmap"));a.SFa&&this.SFi==a.SFa&&delete a.SFa};SF.de={};
SF.de.o=function(a){var b=SF._st.hsh||SF.get("SFctr","data-ini"),c;(new Promise(function(d){(c=SF.$("SFcpnpne"))?d():(SF._st._do="Getting deals",d(SF.lib.xhr("GET","v2/deals?_rf="+(SF.get("SFctr","data-dek")?encodeURIComponent(decodeURIComponent(SF.get("SFctr","data-dek"))):"Members"),{handleErrors:!1}).then(function(e){var f;if(e&&e.dsv)return SF.ss.o(),Promise.reject(null);if(!e||e.error)return Promise.reject(e?e.error:"No response from server");if(e.usr&&e.usr.length)for(SF.lib.i("SFpne",[c=SF.lib.n({id:"SFcpnpne",
className:"SFpne",style:{display:"none"},childNodes:[{id:"SFcpnfnd",className:"SFfnd",style:10<e.usr.length?null:{display:"none"},childNodes:[{className:"SFfndtag",childNodes:[{nodeName:"input",id:"SFcpntag",type:"text","aria-label":"Search keywords",onkeydown:function(k){13==k.keyCode&&SF.de.f()},placeholder:"Search for ..."},{nodeName:"button",onclick:SF.de.f,innerHTML:SF.get("SFctr","data-fnd")?SF.get("SFctr","data-fnd"):"Search"},{nodeName:"button",id:"SFcpnclr",style:{display:"none"},onclick:SF.de.b,
innerHTML:"Clear"}]}]},{id:"SFcpnnon",className:"SFfndtxt",style:{display:"none"},innerHTML:"<h4>No results matching your search</h4>"},{id:"SFcpnlst"}]})]),SF.lib.ra(e.usr),f=0;f<e.usr.length;f++){var h=e.usr[f].cpn.cpt.replace("<br>"," ").replace("  "," ");40<h.length&&(h=h.slice(0,40).replace(/\s[^\s]*$/,"")+"...");var g=e.usr[f].cpn.cpd.replace("<br>"," ").replace("  "," ");80<g.length&&(g=g.slice(0,80).replace(/\s[^\s]*$/,"")+"...");SF.lib.i("SFcpnlst",[{nodeName:"a",id:"SFcpn"+e.usr[f].uid,
className:"SFcpn",href:"#!biz/"+(e.usr[f].log?e.usr[f].log:"id/"+e.usr[f].uid),childNodes:[e.usr[f].cpn.cpi?{nodeName:"img",className:"SFcpnimg",alt:"",src:e.usr[f].cpn.cpi,onload:function(){this.style.opacity=1},onerror:function(){SF.lib.dn(this)},style:{opacity:"0"}}:null,{className:"SFcpntxt",childNodes:[{nodeName:"h2",className:"SFcpnttl",innerHTML:SF.lib.fr(h,{allowed:["br"]})},{nodeName:"h3",className:"SFcpnnam",role:"presentation",innerHTML:SF.lib.fr(e.usr[f].nam)},{className:"SFcpndtl",innerHTML:SF.lib.fr(g,
{allowed:["br"]})}]}]}])}else SF.lib.i("SFpne",[c=SF.lib.n({id:"SFcpnpne",className:"SFpne",style:{display:"none"},childNodes:[{innerHTML:"There are no current listings"}]})])})))})).then(function(){var d,e;SF.lib.se(c);SF._st.ini||(b&&(d=b.match(/!biz\/id\/[^\/]*|!biz\/[^\/]*/))&&(e=c.querySelector('a[href$="'+d[0]+'"]'))?SF.lib.fc(e):SF.lib.fc(c))}).catch(SF.lib.alr)};SF.de.c=function(){SF.lib.dn("SFcpnpne")};SF.r({url:/^!deals$/,pageId:"SFcpnpne",open:SF.de.o,close:SF.de.c});
SF.de.f=function(){var a={cpn:1,tag:SF.get("SFcpntag")};a.tag?(a._rf=SF.get("SFctr","data-dek")?decodeURIComponent(SF.get("SFctr","data-dek")):"Members",SF.lib.fe("#SFcpnlst>*",function(b){SF.lib.s(b,!1)}),SF.lib.s("SFcpnclr",!0),SF._st._do="Getting deal results",SF.lib.xhr("GET","v2/directory?"+SF.lib.tq(a)).then(function(b){var c,d;for(c=0;c<b.usr.length;c++)(d=SF.$("SFcpn"+b.usr[c].uid))&&SF.lib.s(d,!0);SF.lib.s("SFcpnnon",c?!1:!0);SF.lib.fc(c?"SFcpnlst":"SFcpnnon")}).catch(SF.lib.alr)):SF.de.b()};
SF.de.b=function(){SF.set("SFcpntag","");SF.lib.fe("#SFcpnlst>*",function(a){SF.lib.s(a,!0)});SF.lib.s("SFcpnclr",!1);SF.lib.s("SFcpnnon",!1);SF.lib.fc("SFcpnpne")};SF.gm={};
SF.gm.o=function(a){var b,c;SF.lib.sp(SF._st.admin?"SFdekpne":"SFylppne");if(b=SF._st.admin?parseInt(SF.get("SFdekcnt")):SF.di._.lst.length){SF.lib.i("SFpne",[{id:"SFmsgpne",role:"form",className:1E3<b||800>SF._st.win.x?"SFpne":"SFcrdoff",dataset:{pne:SF._st.admin?"dek":"ylp"},style:{opacity:0},childNodes:[{nodeName:"button",className:"SFclz",onclick:SF.gm.c,title:"Close"},1E3<b?null:{className:"SFplh SFmb2",innerHTML:"Click on cards to add or remove recipients."},{id:"SFmsgrcp"},{id:"SFmsgcnt",className:"SFplh SFmb2"},
{id:"SFmsgfrm",className:"SFmsgedt SFblc",formRows:[SF._st.admin?{childNodes:[{nodeName:"input",type:"checkbox",id:"SFmsgalt",name:"alt",onchange:SF.gm.t,innerHTML:"Include all contacts under primary account"}]}:null,SF._st.admin?{childNodes:[{nodeName:"input",type:"checkbox",name:"_om",innerHTML:"Include members who have opted out of email list (transactional emails only)"}]}:null,SF._st.usr.uid?null:{label:"Your name",childNodes:[{nodeName:"input",type:"text",name:"nam",required:!0}]},SF._st.usr.uid?
null:{label:"Your email",childNodes:[{nodeName:"input",type:"email",name:"eml",required:!0}]},{label:"Subject",childNodes:[{nodeName:"input",type:"text",name:"ttl",required:!0}]},SF._is.upload()?{childNodes:[{className:"SFfbx SFmin",childNodes:[{className:"SFlnk SFfillst",innerHTML:"Click"+(SF._is.drop?" or drop file":"")+" here to add attachments"},{nodeName:"input",type:"file",name:"att","aria-label":"Upload attachments",multiple:!0,onchange:function(){SF.v(this,{alert:!0})}}]}]}:null,{label:"Message",
childNodes:[{nodeName:"textarea",name:"dtl",className:"SFhtm",placeholder:"Email message",style:{height:"20em"},required:!0}]}]},{id:"SFmsgpvw",className:"SFmsgpvw",style:{display:"none"}},SF._st.admin?null:{className:"SFmt2",innerHTML:'By clicking send you are indicating that the message you are sending is <strong class="SFemp">not spam or advertising</strong>'},{className:"SFbtx",childNodes:[{nodeName:"button",className:"SFmsgpvw",style:{display:"none"},onclick:SF.gm.s,innerHTML:"Send"},{nodeName:"button",
className:"SFmsgpvw",style:{display:"none"},onclick:SF.co.m.p,innerHTML:"Edit"},{nodeName:"button",className:"SFmsgedt",onclick:SF.co.m.p,innerHTML:"Preview & Send"},{nodeName:"button",onclick:SF.gm.c,innerHTML:"Cancel"}]}]}]);SF.lib.it("#SFmsgpne .SFhtm",SF._st.admin?"tag":"",SF._st.admin?SF.mt.msg:!1);SF.lib.fc("SFmsgpne");SF.gm.t();a=SF.$(SF._st.admin?"SFdekpne":"SFylppne").querySelectorAll(".SFcrd");for(b=0;b<a.length;b++)SF.gm.r(a[b]);SF._st.admin?(SF.fd.q("SFmsgpne"),setTimeout(function(){SF.fd.r({type:"scroll"})},
600)):((c=SF.lib.f("SFylpfnd"))&&c.tag&&SF.lib.f("SFmsgpne",{ttl:"Re: "+c.tag}),SF.di.p("SFmsgpne"),setTimeout(function(){SF.di.n({type:"scroll"})},600));setTimeout(function(){SF.$("SFmsgpne").style.opacity=1},200)}else SF.lib.alr("No accounts to email",SF._st.admin?{target:a.currentTarget,placement:"v"}:{})};
SF.gm.c=function(a){SF.$("SFmsgpne")&&(new Promise(function(b){var c=SF.lib.f("SFmsgfrm");a&&a.currentTarget&&(c.ttl||c.dtl)?SF.lib.dg("SFmsgdlg",{className:"SFmnu",childNodes:[{nodeName:"button",onclick:function(){b(!1)},innerHTML:"Go back"},{},{nodeName:"button",onclick:function(){b(!0)},innerHTML:"Confirm cancel &amp; discard"}]},{target:a.currentTarget,placement:"v"}):b(!0)})).then(function(b){var c;SF.lib.dg("SFmsgdlg",!1);if(b){SF.lib.dn("SFmsgpne");b=SF.$(SF._st.admin?"SFdekpne":"SFylppne").querySelectorAll(".SFcrd");
for(c=0;c<b.length;c++)b[c].onclick===SF.gm.t&&(SF.lib.dn(b[c].lastChild),SF.lib.s(b[c].querySelector(".SFcrdact"),!0),b[c].onclick=null,b[c].hasAttribute("draggable")&&b[c].setAttribute("draggable",!0));SF._st.admin?(delete SF.fd._st.lsm,SF.fd.p()):(delete SF.di._.lsm,SF.di.q())}}).catch(SF.lib.alr)};SF.r({pageId:"SFmsgpne",close:SF.gm.c,closeOnLeave:!0});
SF.gm.r=function(a){var b;a.onclick!==SF.gm.t&&((b=a.querySelector(".SFcrdact"))&&SF.lib.s(b,!1),b=SF._st.admin?SF.fd._st:SF.di._,SF.lib.i(a,[{nodeName:"i",className:"SFcrdchk"+(b.lsm&&0<=b.lsm.indexOf(a.id.slice(5))?" SFicochk":"")}]),a.onclick=SF.gm.t,a.hasAttribute("draggable")&&a.setAttribute("draggable","false"))};
SF.gm.t=function(a){var b,c=0,d=[],e=[];var f=SF._st.admin?SF.fd._st:SF.di._;if(a&&"A"==a.currentTarget.nodeName)if(a.preventDefault&&a.preventDefault(),0<=(b=f.lsm.indexOf(a.currentTarget.id.slice(5))))f.lsm.splice(b,1),a.currentTarget.lastChild.className="SFcrdchk";else{if(!SF._st.admin&&9<f.lsm.length){SF.lib.alr("10 recipients maximum");return}f.lsm.push(a.currentTarget.id.slice(5));a.currentTarget.lastChild.className="SFcrdchk SFicochk"}var h=SF.get("SFmsgalt");var g=f.lsy?f.lsy:f.lst;for(b=
0;b<g.length;b++)if(!f.lsx||0<=f.lsx.indexOf(g[b].uid)){if(f.lsm){if(0>f.lsm.indexOf(g[b].uid))continue}else if(!SF._st.admin&&4<e.length)break;if(!SF._st.admin&&!f.lsm&&4<e.length)break;d.push(g[b].uid);if(h||!g[b].alt){if(g[b].nam)var k=g[b].nam;else for(k="",a=SF.fd._st.lst.length-1;0<=a;a--)if(SF.fd._st.lst[a].uid==g[b].uid){k=SF.fd._st.lst[a].nam;break}k&&20>c++&&e.push(SF.lib.fr(k))}else if(!g[b]._xp&&20>c++&&e.push(SF.lib.fr(g[b].ctc||g[b].nam)),g[b].alt)for(a=0;a<g[b].alt.length;a++)g[b].alt[a].nam&&
20>c++&&e.push(SF.lib.fr(g[b].alt[a].nam))}SF.set("SFmsgrcp","To: "+e.join(", ")+(20<c?"...":""));SF.set("SFmsgcnt",c+" recipients"+(h?" + secondary contacts":""));f.lsm||(f.lsm=d)};
SF.gm.s=function(){var a,b;if(SF.v("SFmsgfrm")){var c=SF._st.admin?SF.fd._st:SF.di._;if(c.lsm&&c.lsm.length){var d=SF.lib.f("SFmsgfrm");d.dtl=SF.lib.fx(d.dtl,SF._st.admin?{allowed:["a","img"]}:null);if(10>d.dtl.length)SF.lib.alr("Please enter a message");else{SF._st.admin&&c.did&&(d.did=c.did);d.alt||delete d.alt;d.uid=[];var e=c.lsy?c.lsy:c.lst;for(a=0;a<e.length;a++)if((!c.lsx||0<=c.lsx.indexOf(e[a].uid))&&!(0>c.lsm.indexOf(e[a].uid)))if(d.alt||!e[a].alt)d.uid.push(e[a].uid);else if(e[a]._xp||d.uid.push(e[a].uid),
e[a].alt)for(b=0;b<e[a].alt.length;b++)d.uid.push(e[a].alt[b].uid);SF._st._do="Sending message";SF.lib.xhr("POST","v2/message",d,{admin:SF._st.admin?!0:!1}).then(function(f){SF.gm.c();SF._st.usr.uid?SF.lib.alr("Your message has been sent!"+(f.warn?"<br>Warning: "+f.warn:"")):SF.lib.alr('<p>A verification link has been emailed to you.<br>Click on the link in the email to finish sending the message.</p><p class="SFemp">If you do not click on this link within 72 hours you will be blocked from sending messages in the future.</p><p>Please check your spam folder if you do not receive this email within a few minutes.</p>')}).catch(SF.lib.alr)}}else SF.lib.alr("You have not selected any recipients, please add some recipients by clicking on their cards.")}};
SF.pr={};
SF.pr.o=function(a){var b=SF._st.hsh||SF.get("SFctr","data-ini");a=a.split("/");var c=!1,d=!1,e=SF.$("SFbizpne"),f,h,g;if("id"==a[1]){c=a[2];var k=3<a.length?decodeURIComponent(a[3]):""}else d=a[1],k=2<a.length?decodeURIComponent(a[2]):"";(new Promise(function(m){e&&(f=SF.d.get(e))&&(c&&c==f.uid||d&&d==f.log)?m():(e&&(e.style.opacity=0),m(SF.lib.xhr("GET","v2/account/"+(c?c+"/":"")+"profile"+(d?"?log="+d:""),{admin:!1,handleErrors:!1}).then(function(l){if(!l||l.error)return b&&SF.open(b),Promise.reject(l?
l.error:"No response from server");(e=SF.$("SFbizpne"))?SF.lib.cn(e):SF.lib.i("SFpne",[e=SF.lib.n({id:"SFbizpne",className:"SFpne",dataset:{hsh:b},style:{display:"none",opacity:0}})]);SF.d.set(e,f=l);SF.pr.i(l)})))})).then(function(){h=!1;if(k)for(h=SF.$("SFbizmnu").childNodes[1];h&&(!h.hasAttribute("aria-controls")||SF.lib.ft(h.innerHTML)!=k);h=h.nextSibling);h||0!==SF.lib.ds(e).hsh.indexOf("!deals")||(h=SF.$('#SFbizmnu [data-box~="cpn"]'));h||(h=SF.$("SFbizmnu").childNodes[1]);SF.lib.se(e);SF.lib.se(h);
e.style.opacity=1;SF.lib.sm({url:window.location.href.split("#")[0]+"#!biz/"+(f.log?f.log:"id/"+f.uid)+(h&&2<SF.$("SFbizmnu").childNodes.length?"/"+h.innerHTML:""),title:(f.nam||f.biz||f.ctc||"Member")+(h?" ("+h.innerHTML+")":""),description:(f.adr&&SF.lib.f2(f.adr)?(f.nam||f.biz||f.ctc||"Member")+" ("+SF.lib.f2(f.adr)+")"+(f.cnm?". ":""):"")+(f.cnm?f.cnm:""),image:(g=e.querySelector("img.SFbizlgo"))?g.src:f.pfz&&f.pfz.length?f.pfz[0].l:"",previousTab:h&&h.previousSibling&&h.previousSibling.hasAttribute("aria-controls")?
h.previousSibling.href:"",nextTab:h&&h.nextSibling&&h.nextSibling.hasAttribute("aria-controls")?h.nextSibling.href:""})}).catch(SF.lib.alr)};SF.pr.c=function(){SF.lib.dn("SFbizpne")};SF.r({url:/^!(biz|biz\/id)\/[^\/]+/,pageId:"SFbizpne",open:SF.pr.o,close:SF.pr.c,closeOnLeave:!0});
SF.pr.i=function(a){var b=SF.$("SFbizpne"),c,d,e,f,h;b.setAttribute("itemscope","");b.setAttribute("itemtype","https://schema.org/LocalBusiness");SF.lib.i(b,[a.nam||a.biz||a.ctc?{nodeName:"meta",itemprop:"name",content:SF.lib.fr(a.nam||a.biz||a.ctc)}:null,a.cnm?{nodeName:"meta",itemprop:"description",content:SF.lib.fr(a.cnm)}:null,c=SF.lib.n({nodeName:"nav",id:"SFbizmnu",role:"tablist",childNodes:[{nodeName:"a",href:"#"+SF.lib.ds(b).hsh,innerHTML:"Close"}]}),SF.get("SFctr","data-scl")?null:{id:"SFbizscl"}]);
if(a._st&&a._st.dir)for(f=0;f<a._st.dir.length;f++){var g=a._st.dir[f];b.appendChild(d=SF.lib.n({id:"SFbizpne"+f,className:"SFbizpne",role:"tabpanel",style:{display:"none"}}));var k=[];if(g.box)for(h=0;h<g.box.length;h++){var m=g.box[h];d.appendChild(e=SF.lib.n({className:"SFbizbox"}));"string"==typeof m.dat?SF.bx.t(e,m,a)&&k.push(m.dat):m.htm&&(e.innerHTML=m.htm);e.childNodes.length||SF.lib.dn(e)}d.childNodes.length?c.appendChild(SF.lib.n({nodeName:"a",role:"tab","aria-controls":"SFbizpne"+f,dataset:{box:k.join(",")},
href:"#!biz/"+(a.log?a.log:"id/"+a.uid)+"/"+encodeURIComponent(SF.lib.ft(g.lbl)),innerHTML:g.lbl})):SF.lib.dn(d)}c=SF.$("SFbizpne").querySelectorAll("a.SFbizweb,a.SFbizctcweb");for(f=c.length-1;0<=f;f--)c[f].hasAttribute("target")||(SF.get("SFctr","data-wgo")?c[f].setAttribute("target","_blank"):c[f].onclick=SF.lib.re);b.querySelectorAll(".SFbizpne").length||(b.appendChild(SF.lib.n({innerHTML:"You do not have access to view this profile"})),SF.lib.dn("SFbizscl"));SF.lib.is("SFbizscl",window.location.href.split("#")[0]+
"#!biz/"+(a.log?a.log:"id/"+a.uid),a.nam||a.biz||a.ctc)};
SF.mo=function(){var a=[],b,c,d,e;if(SF._is.iframe()&&location.href&&(location.href.match(/^https:\/\/[^\.]*\.squarespace\.com/)&&"sqs-site-frame"==window.frameElement.id||location.href.match(/^https:\/\/([^\.]*\.preview.editmysite.com|www.sitemodify.com|my.duda.co)/)))document.getElementById("SFctr").innerHTML="Administrator notice: member only snippet",document.body.style.visibility="";else if("undefined"==typeof document.querySelector||"undefined"==typeof XMLHttpRequest||"undefined"==typeof JSON)alert("We are sorry, but this browser version is not supported.");
else if(b=SF.$("SFctr"))if(/loaded|complete/.test(document.readyState)){var f=document.body.contains(b);!SF.$("SFpne")&&f&&(SF.lib.i("SFctr",[{id:"SFpne",style:{position:"relative"}}]),SF.lib.win({type:"resize"}));if(SF.get("SFctr","data-div")){if(c=document.querySelectorAll(SF.get("SFctr","data-div")))for(d=0;d<c.length;d++)c[d]==b||c[d].contains(b)||a.push(c[d])}else{var h=function(k){if(3==k.nodeType&&"string"==typeof k.textContent&&k.textContent.trim().length||"IMG"==k.nodeName||"VIDEO"==k.nodeName)return!0;
if(1!=k.nodeType||"SCRIPT"==k.nodeName||"IFRAME"==k.nodeName||!k.childNodes||!k.childNodes.length)return!1;for(k=k.firstChild;k;k=k.nextSibling)if(h(k))return!0;return!1};if(f)for(c=b;c&&c!=document.body;c=c.parentNode){var g=!1;for(d=c.nextSibling;d;d=d.nextSibling)if(d instanceof Element&&h(d)){g=!0;break}if(g){for(d=c.nextSibling;d;d=d.nextSibling)d instanceof Element&&a.push(d);break}}if(c=SF.$("wsite-content"))for(g=!1,d=c.firstChild;d;d=d.nextSibling)d instanceof Element&&((!f||g)&&0>a.indexOf(d)?
a.push(d):d.contains(b)&&(g=!0));else if((c=document.querySelectorAll("main section.wixui-column-strip"))&&c.length)for(g=!1,d=0;d<c.length;d++)(!f||g)&&0>a.indexOf(c[d])?a.push(c[d]):c[d].contains(b)&&(g=!0);else if((c=document.querySelectorAll("main .sqs-layout"))&&c.length||(c=document.querySelectorAll("main section.page-section"))&&c.length)for(g=!1,d=0;d<c.length;d++)if((!f||g)&&(e=SF.lib.fp(c[d],"SECTION")||c[d])&&0>a.indexOf(e))a.push(e);else{if(c[d].contains(b))for(e=c[d].firstChild;e;e=e.nextSibling)e.contains(b)?
g=!0:g&&0>a.indexOf(e)&&a.push(e)}else if((c=document.querySelectorAll("main .fluid-engine .fe-block"))&&c.length||(c=document.querySelectorAll(".fluid-engine .fe-block"))&&c.length){g=!1;if(f)for(d=0;d<c.length;d++)c[d].contains(b)&&(g=c[d].getBoundingClientRect());if(!f||g)for(d=0;d<c.length;d++)!f||"undefined"!=typeof c[d].style&&c[d].hasAttribute("data-display")?a.push(c[d]):(e=c[d].getBoundingClientRect(),e.y>g.y+g.height&&a.push(c[d]))}}for(d=0;d<a.length;d++)"undefined"!=typeof a[d].style&&
(a[d].hasAttribute("data-display")||a[d].setAttribute("data-display",a[d].style.display?a[d].style.display:""),a[d].style.display="none");SF.lib.gs()?(b={org:SF.get("SFctr","data-org"),lbl:SF.get("SFctr","data-mfl")},SF.$("SFctr").removeAttribute("data-mfl"),SF.lib.xhr("GET","v1/lbl?"+SF.lib.tq(b),{handleErrors:!1}).then(function(k){SF.lib.dn("SFmflpne");if(!k||k.error)f?(SF.lib.i("SFpne",[{id:"SFmflpne",style:{display:"none"},innerHTML:k?k.error:"No response from server"}]),SF.lib.se("SFmflpne")):
alert(k?k.error:"No response from server");else if(k.lbl&&k.lbl.length){for(d=0;d<a.length;d++)"undefined"!=typeof a[d].style&&a[d].hasAttribute("data-display")&&(a[d].style.display=a[d].getAttribute("data-display"));try{Event.prototype.initEvent?window.dispatchEvent(new Event("resize")):(d=window.document.createEvent("UIEvents"),d.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(d))}catch(m){}k.warn&&f&&setTimeout(function(){SF.lib.alr(k.warn)},700)}else if(k.end){if(d=SF.get("SFctr","data-rle")){SF.lib.re(d);
return}f?(SF.lib.i("SFpne",[{id:"SFmflpne",style:{display:"none"},innerHTML:(d=document.querySelector("#SF_le"))?d.innerHTML:"The following content is not accessible because your membership has expired"}]),SF.lib.se("SFmflpne")):alert("The following content is not accessible because your membership has expired.")}else{if(d=SF.get("SFctr","data-rlf")){SF.lib.re(d);return}f?(SF.lib.i("SFpne",[{id:"SFmflpne",style:{display:"none"},innerHTML:(d=document.querySelector("#SF_lf"))?d.innerHTML:"The following content is not accessible for your account"}]),
SF.lib.se("SFmflpne")):alert("The following content is not accessible for your account.")}document.body.style.visibility="visible"})):(d=SF.get("SFctr","data-rll"))?SF.lib.re(d):(f?SF.ss.o():alert("The following content is accessible for members only, please sign in."),document.body.style.visibility="visible")}else setTimeout(SF.mo,100)};
SF.open=function(a,b){var c,d,e="",f=!1;if(!SF.$("SFctr")||"undefined"==typeof SF._st.usr)return!1;if("undefined"==typeof a)e="";else if("string"==typeof a)e=a;else if(a instanceof Element&&a.href)e=a.href.slice(a.href.indexOf("#")+1);else if(a instanceof Event&&"hashchange"==a.type){if(e=window.location.href.slice(window.location.href.indexOf("#")+1),SF._st.hsh&&SF._st.hsh==e)return}else{if(a instanceof Event&&a.currentTarget&&a.currentTarget.getAttribute("aria-disabled"))return a.stopPropagation(),
a.preventDefault(),!1;if(a instanceof Event&&a.currentTarget&&a.currentTarget.href)a.stopPropagation(),a.preventDefault(),e=a.currentTarget.href.slice(a.currentTarget.href.indexOf("#")+1);else return!1}if(SF.get("SFctr","data-mfl"))"undefined"!=typeof SF.mo&&(SF._st.ini="m",SF.mo(),setTimeout(function(){delete SF._st.ini},1E4));else{if(!e&&0<=window.location.href.indexOf("?")){var h={};var g=window.location.search.slice(1).split("&");for(c=0;c<g.length;c++){var k=g[c].split("=");0>["response_type",
"client_id","redirect_uri","scope","state"].indexOf(k[0])||(h[k[0]]=decodeURIComponent(g[c].slice(k[0].length+1)))}if(h.client_id&&h.redirect_uri){SF._st.usr.uid?(h.org=SF._st.org,h.SF=SF.lib.gs(),window.open("https://api.membershipworks.com/v2/oauth2/authorize?"+SF.lib.tq(h),"_self")):SF.ss.o();return}}if(SF.get("SFctr","data-typ")&&(!SF._st.usr.uid||SF._st.usr.typ!=SF.get("SFctr","data-typ"))&&"account/manage"!=e&&"myaccount"!=e)return SF._st.usr.uid?SF.ss.d().catch(SF.lib.alr).then(function(){SF.ss.o()}):
SF.ss.o(),!1;if(k=SF.get("SFctr","data-zzz")){if(SF._st.usr.uid){0<=SF.$("SFctr").parentNode.className.indexOf("memberonly")&&(k+="?uid="+SF._st.usr.uid);SF.lib.re(k);return}if(SF.get("SFctr","data-ini")&&SF.get("SFctr","data-ini").match(/^(myaccount|account)/)){SF.ss.o();return}}if(!e)if((d=window.location.hash.slice(1))&&(SF._st.usr.uid||0===d.indexOf("!")||d.match(/^(account\/join|join|invoice)(\/|$)/)))e=d;else if(SF._st.hsh&&SF.get("SFctr","data-hme"))e=SF.get("SFctr","data-hme");else if(SF.get("SFctr",
"data-ini"))e=SF.get("SFctr","data-ini");else if(0<=window.location.pathname.indexOf("directory"))e="!directory";else if(0<=window.location.pathname.indexOf("calendar"))e="!calendar";else if(0<=window.location.pathname.indexOf("event"))e="!event-list";else if(0<=window.location.pathname.indexOf("membership")||0<=window.location.pathname.indexOf("join")||0<=window.location.pathname.indexOf("signup"))e="join";else if(0<=window.location.pathname.indexOf("account")||0<=window.location.pathname.indexOf("manage")||
0<=window.location.pathname.indexOf("signin")||0<=window.location.pathname.indexOf("login"))e="myaccount";for(c in SF._is.page)if(SF._is.page[c].url&&e.match(SF._is.page[c].url)){f=SF._is.page[c];break}if(!f||!f.open)return(c=SF.$("SFctr").firstChild)&&c.firstChild&&"Loading..."==c.firstChild.innerHTML&&SF.lib.dn(c.firstChild),!1;SF.$("SFpne")||SF.lib.i("SFctr",[{id:"SFpne",style:{position:"relative"}}]);SF.lib.fe("video",function(m){m.pause()});delete SF.t;delete SF.p;for(c in SF._is.page)SF._is.page[c].url&&
e.match(SF._is.page[c].url)||!SF._is.page[c].closeOnLeave||!SF._is.page[c].close||!SF.$(SF._is.page[c].pageId)||SF._is.page[c].close();SF.lib.dg(!1);"undefined"!=typeof b?SF._st.ini=!1:"undefined"==typeof SF._st.hsh?("undefined"==typeof SF._st.ini&&(SF._st.ini=e,setTimeout(function(){delete SF._st.ini},1E4)),SF._st.hsh=""):SF._st.ini&&e!=SF._st.ini&&(SF._st.ini=!1);SF._st.hsg=e;f.open(e,"undefined"==typeof b?!1:b);SF._st.hsh=SF._st.hsg;delete SF._st.hsg;(0>window.location.href.indexOf("#")||window.location.href.split("#")[1]!=
SF._st.hsh)&&SF.lib.sh(SF._st.hsh);SF.lib.sm(null);SF.lib.tr("pageview",{url:location.href.split("#")[0]+"#"+SF._st.hsh});setTimeout(function(){SF.lib.win({type:"resize"})},1E3);return a instanceof Event?(a.stopPropagation(),a.preventDefault(),!1):!0}};
SF.close=function(a){a=void 0===a?{}:a;if(!SF.$("SFctr")||!SF._st.init){SF.lib.dg(!1);if(SF._is.page)for(var b in SF._is.page)SF._is.page[b].close&&SF.$(b)&&(!a.exclude||0>a.exclude.indexOf(b))&&(!a.include||0<=a.include.indexOf(b))&&SF._is.page[b].close();(!a.exclude||0>a.exclude.indexOf("SFevtlst")&&0>a.exclude.indexOf("SFevtcal"))&&delete SF._st.evg}};
SF.lio=function(){try{var a=window.window.localStorage.getItem("SF_nam")}catch(b){a=""}SF.lib.fe(".SFnam",function(b){b.innerHTML=a});SF.lib.fe(".SF_li",function(b){SF.lib.s(b,a?!0:!1)});SF.lib.fe(".SF_lo",function(b){SF.lib.s(b,a?!1:!0)})};
"undefined"==typeof SF.init&&("undefined"!=typeof window.addEventListener?window.addEventListener("load",function(){"undefined"!=typeof jQuery&&jQuery(window).unbind("hashchange")}):"undefined"!=typeof window.attachEvent&&window.attachEvent("load",function(){"undefined"!=typeof jQuery&&jQuery(window).unbind("hashchange")}));
if("undefined"==typeof SF.init||"undefined"==typeof SF._st.usr)SF.init=function(a){SF._st.usr||(SF._st.usr={});"undefined"==typeof document.querySelector||"undefined"==typeof XMLHttpRequest||"object"!=typeof JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify||"undefined"==typeof FormData||"undefined"==typeof WeakMap||"undefined"==typeof File||"undefined"==typeof Promise||"undefined"==typeof window.addEventListener?(SF.$("SFctr").innerHTML="This browser version is no longer supported. Please upgrade to a newer browser version.",
SF.init=function(){}):(SF.lio(),(new Promise(function(b,c){var d=0,e;SF.$("SFctr")?b():e=setInterval(function(){if(SF.$("SFctr"))clearInterval(e),b();else if("complete"==document.readyState||20<d++)clearInterval(e),"complete"==document.readyState&&(document.body.style.visibility=""),c(null)},500)})).then(function(){return SF.lib.ip()}).then(function(b){var c=document.body.contains(SF.$("SFctr"));if("undefined"!=typeof a&&!1===a&&!SF.get("SFctr","data-sfi")&&!b||SF._st.init)return Promise.reject(null);
SF._st.init=!0;if(c){SF.init=function(d){null===d&&SF.$("SFctr")&&!SF._st.init&&(delete SF._st.hsh,delete SF._st.ini,delete SF._st.mta,delete SF._st.dlg,delete SF._st.sec,SF.lio(),SF.lib.win({type:"resize"}),SF.open())};!SF._is.robot&&0<=window.location.href.indexOf("?_escaped_fragment_=")&&history.replaceState(null,null,window.location.href.replace("?_escaped_fragment_=","#!"));"undefined"!=typeof a&&!0===a&&SF.lib.sv("SFctr");SF.c();SF.lib.win();window.addEventListener("load",SF.lib.win,!1);window.addEventListener("resize",
SF.lib.win,!1);window.addEventListener("scroll",SF.lib.win,!1);window.addEventListener("hashchange",SF.open);SF._is.touch&&(window.addEventListener("touchstart",SF.lib.th,!1),window.addEventListener("touchmove",SF.lib.th,!1),window.addEventListener("touchend",SF.lib.th,!1));document.addEventListener("focusin",function(d){d.target&&!SF.lib.fp(d.target,'[role="dialog"],[aria-modal="true"]')&&SF._st.dlg&&SF._st.dlg.length&&!SF._st.dlg[SF._st.dlg.length-1].dlg.contains(d.target)&&(d.stopPropagation(),
d.preventDefault(),SF.lib.fc(SF._st.dlg[SF._st.dlg.length-1].dlg))},!1);SF._st._pp=setInterval(function(){SF.$("SFctr")&&"function"==typeof SF.p&&SF.p()},9E5);!SF._is.robot&&SF.ss&&SF.ss.p&&(SF._st._sp=setInterval(SF.ss.p,864E5));if(b)return SF.lib.rp(b),Promise.reject(null);if(SF._is.robot&&SF.$("#SFctr .SFpne[id]"))return Promise.reject(null);if(!(SF.get("SFctr","data-mfl")&&"undefined"==typeof SF.co||SF._is.robot)&&SF.ss)return SF.ss.i()}}).then(function(){SF.open()}).catch(SF.lib.alr).then(function(){setTimeout(function(){delete SF._st.init},
500)}))};
SF.u=function(a){if(SF._is&&SF._is.robot||!SF._re||!a||parseInt(a)<=SF._re){if(/^SFRE=[^;]*|\sSFRE=[^;]*/.test(document.cookie))try{document.cookie="SFRE=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}catch(c){}return!0}var b=/^SFRE=[^;]*|\sSFRE=[^;]*/.test(document.cookie)?document.cookie.match(/^SFRE=[^;]*|\sSFRE=[^;]*/)[0].split("=")[1].replace(/\s|\+/,""):!1;if(!b||parseInt(b)!=SF._re){try{document.cookie="SFRE=;path=/;",document.cookie="SFRE="+SF._re+";path=/;",b=/^SFRE=[^;]*|\sSFRE=[^;]*/.test(document.cookie)?document.cookie.match(/^SFRE=[^;]*|\sSFRE=[^;]*/)[0].split("=")[1].replace(/\s|\+/,
""):!1}catch(c){b=!1}if(b&&parseInt(b)==SF._re)return window.location.reload(!0),!1}"undefined"!=typeof window.addEventListener?(window.removeEventListener("load",SF.lib.win),window.removeEventListener("resize",SF.lib.win),window.removeEventListener("scroll",SF.lib.win),window.removeEventListener("hashchange",SF.open),SF._is.touch&&(window.removeEventListener("touchstart",SF.lib.th,!1),window.removeEventListener("touchmove",SF.lib.th,!1),window.removeEventListener("touchend",SF.lib.th,!1))):"undefined"!=
typeof window.attachEvent&&(window.detachEvent("onload",SF.lib.win),window.detachEvent("onresize",SF.lib.win),window.detachEvent("onscroll",SF.lib.win),window.detachEvent("onhashchange",SF.open),SF._is.touch&&(window.detachEvent("touchstart",SF.lib.th),window.detachEvent("touchmove",SF.lib.th),window.detachEvent("touchend",SF.lib.th)));SF._st&&("undefined"!=typeof SF._st._pp&&clearInterval(SF._st._pp),"undefined"!=typeof SF._st._sp&&clearInterval(SF._st._sp));delete SF.p;SF.lib.cn("SFpne");SF.set("SFctr",
"data-sfi","");delete SF.init;SF.lib.lo("https://cdn.membershipworks.com/"+("undefined"!=typeof SF.dk?"all":"mfm")+".js?_re="+a).then(function(){var c="undefined"==typeof SF._st||"undefined"==typeof SF._st.hsh?window.location.hash.slice(1):SF._st.hsh;c&&SF.set("SFctr","data-ini",c);SF.set("SFctr","data-sfi","1");SF._st={usr:{}};SF._re=a;SF.init()}).catch(SF.lib.no);return!1};
SF.c=function(){"0"!=SF.get("SFctr","data-css")&&(new Promise(function(a){var b,c=0;var d=document.getElementsByTagName("link");for(b=0;b<d.length;b++)if(d[b].hasAttribute("rel")&&"stylesheet"==d[b].getAttribute("rel")&&d[b].hasAttribute("href")&&(0<=d[b].href.indexOf("sourcefound")||0<=d[b].href.indexOf("src.memberfind.me")||0<=d[b].href.indexOf("cdn.membershipworks.com"))){var e=d[b];break}e||(e=document.createElement("link"),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),
e.href="https://cdn.membershipworks.com/all.css"+(SF._re?"?_re="+SF._re:""),document.head.appendChild(e));var f=setInterval(function(){if("complete"==document.readyState||20<c++)clearInterval(f),a()},500)})).then(function(){SF.modCss()}).catch(SF.lib.no)};
SF.modCss=function(a){var b,c;function d(n){var q,t;var u=[{pattern:/^rgb\(([\d.]+), ([\d.]+), ([\d.]+)\)$/,convert:function(v){return{r:parseFloat(v[1],10),g:parseFloat(v[2],10),b:parseFloat(v[3],10),a:1}}},{pattern:/^rgba\(([\d.]+), ([\d.]+), ([\d.]+), ([\d.]+)\)$/,convert:function(v){return{r:parseFloat(v[1],10),g:parseFloat(v[2],10),b:parseFloat(v[3],10),a:parseFloat(v[4],10)}}},{pattern:/^color\(srgb ([\d.]+) ([\d.]+) ([\d.]+)\)$/,convert:function(v){return{r:Math.round(255*parseFloat(v[1],10)),
g:Math.round(255*parseFloat(v[2],10)),b:Math.round(255*parseFloat(v[3],10)),a:1}}},{pattern:/^color\(srgb ([\d.]+) ([\d.]+) ([\d.]+) \/ ([\d.]+)\)$/,convert:function(v){return{r:Math.round(255*parseFloat(v[1],10)),g:Math.round(255*parseFloat(v[2],10)),b:Math.round(255*parseFloat(v[3],10)),a:parseFloat(v[4],10)}}},{pattern:/^color\(srgb-linear ([\d.-]+) ([\d.-]+) ([\d.-]+)\)$/,convert:function(v){return{r:f(parseFloat(v[1],10)),g:f(parseFloat(v[2],10)),b:f(parseFloat(v[3],10)),a:1}}},{pattern:/^color\(srgb-linear ([\d.-]+) ([\d.-]+) ([\d.-]+) \/ ([\d.]+)\)$/,
convert:function(v){return{r:f(parseFloat(v[1],10)),g:f(parseFloat(v[2],10)),b:f(parseFloat(v[3],10)),a:parseFloat(v[4],10)}}}];for(q=0;q<u.length;q++)if(t=n.match(u[q].pattern))return u[q].convert(t)}function e(n){n/=255;return.04045>=n?n/12.92:Math.pow((n+.055)/1.055,2.4)}function f(n){n=Math.max(0,Math.min(1,n||0));return Math.round(255*(.0031308<n?1.055*Math.pow(n,1/2.4)-.055:12.92*n))}var h;if(!SF.modCss.initialized||a){a||(a={});a.site||(a.site={});a.text||(a.text={});a.links||(a.links={});
a.buttons||(a.buttons={});a.tabs||(a.tabs={});a.inputs||(a.inputs={});a.checkboxes||(a.checkboxes={});a.tags||(a.tags={});a.states||(a.states={});var g={};if(!SF.modCss.initialized||"backgroundColor"in a.site||"colorScheme"in a.site){CSS.supports("background-color",a.site.backgroundColor)||(a.site.backgroundColor="detect");"light"!=a.site.colorScheme&&"dark"!=a.site.colorScheme&&(a.site.colorScheme="detect");if("detect"!=a.site.backgroundColor){var k=document.createElement("div");k.style.setProperty("color",
a.site.backgroundColor,"important");k.style.display="none";SF.$("SFctr").appendChild(k);a.site.backgroundColor=d(window.getComputedStyle(k).color)||"detect";k.remove()}if("detect"==a.site.backgroundColor){k=function(n,q){var t={a:n.a+q.a*(1-n.a)};["r","g","b"].forEach(function(u){t[u]=Math.max(0,Math.min(255,(n[u]*n.a+q[u]*q.a*(1-n.a))/t.a||0))});return t};var m=[function(){return SF.lib.fp(SF.$("SFctr"),"section").querySelector(".section-background")},function(){return SF.$("SFctr")}];for(b=0;b<
m.length;b++)try{if(c=m[b]())break}catch(n){}for(b={r:0,g:0,b:0,a:0};c;){m=d(window.getComputedStyle(c).backgroundColor)||{r:255,g:255,b:255,a:1};var l=k(b,m);if(1==b.a||1==m.a)break;b=l;(c=c.parentElement||window.frameElement)||(l=k(b,{r:255,b:255,g:255,a:1}))}a.site.backgroundColor=l}"detect"==a.site.colorScheme&&(b=.2126*e(a.site.backgroundColor.r)+.7152*e(a.site.backgroundColor.g)+.0722*e(a.site.backgroundColor.b),a.site.colorScheme=1.05/(b+.05)>(b+.05)/.05?"dark":"light");"dark"==a.site.colorScheme?
(l=c=b=255,SF._is.dark=!0):(l=c=b=0,SF._is.dark=!1);g["--SF-background-r"]=a.site.backgroundColor.r;g["--SF-background-g"]=a.site.backgroundColor.g;g["--SF-background-b"]=a.site.backgroundColor.b;g["--SF-foreground-r"]=b;g["--SF-foreground-g"]=c;g["--SF-foreground-b"]=l;"dark"==a.site.colorScheme?(g["--SF-color-input-background"]="#000",g["--SF-color-input-text"]="#eee"):(g["--SF-color-input-background"]="#fff",g["--SF-color-input-text"]="#111")}if(!SF.modCss.initialized||"borderRadius"in a.site){CSS.supports("border-radius",
a.site.borderRadius)||(a.site.borderRadius="detect");if("detect"==a.site.borderRadius){c=0;l=[{nodeName:"button"},{nodeName:"input",type:"submit"},{nodeName:"input",type:"button"}];for(b=0;b<l.length;b++)k=SF.lib.n(l[b]),k.style.display="none",SF.$("SFctr").parentElement.appendChild(k),c=Math.max(c,parseFloat(window.getComputedStyle(k).borderRadius,10)),k.remove();a.site.borderRadius=Math.min(10,2*parseFloat(c,10))+"px"}g["--SF-border-radius-full"]=a.site.borderRadius}a.text.headingColor&&CSS.supports("color",
a.text.headingColor)&&(g["--SF-color-text-heading"]=a.text.headingColor);a.text.mainColor&&CSS.supports("color",a.text.mainColor)&&(g["--SF-color-text-main"]=a.text.mainColor);a.text.mutedColor&&CSS.supports("color",a.text.mutedColor)&&(g["--SF-color-text-muted"]=a.text.mutedColor);a.links.textColor&&CSS.supports("color",a.links.textColor)&&(g["--SF-color-link-text"]=a.links.textColor);a.buttons.backgroundColor&&CSS.supports("background-color",a.buttons.backgroundColor)&&(g["--SF-color-button-background"]=
a.buttons.backgroundColor);a.buttons.textColor&&CSS.supports("color",a.buttons.textColor)&&(g["--SF-color-button-text"]=a.buttons.textColor);a.tabs.inactiveBackgroundColor&&CSS.supports("background-color",a.tabs.inactiveBackgroundColor)&&(g["--SF-color-tab-background"]=a.tabs.inactiveBackgroundColor);a.tabs.inactiveTextColor&&CSS.supports("color",a.tabs.inactiveTextColor)&&(g["--SF-color-tab-text"]=a.tabs.inactiveTextColor);a.tabs.activeBackgroundColor&&CSS.supports("background-color",a.tabs.activeBackgroundColor)&&
(g["--SF-color-tab-selected-background"]=a.tabs.activeBackgroundColor);a.tabs.activeTextColor&&CSS.supports("color",a.tabs.activeTextColor)&&(g["--SF-color-tab-selected-text"]=a.tabs.activeTextColor);a.inputs.backgroundColor&&CSS.supports("background-color",a.inputs.backgroundColor)&&(g["--SF-color-input-background"]=a.inputs.backgroundColor);a.inputs.textColor&&CSS.supports("color",a.inputs.textColor)&&(g["--SF-color-input-text"]=a.inputs.textColor);a.checkboxes.backgroundColor&&CSS.supports("background-color",
a.checkboxes.backgroundColor)&&(g["--SF-color-checkbox-background"]=a.checkboxes.backgroundColor);a.checkboxes.checkColor&&CSS.supports("color",a.checkboxes.checkColor)&&(g["--SF-color-checkbox-check"]=a.checkboxes.checkColor);a.tags.backgroundColor&&CSS.supports("background-color",a.tags.backgroundColor)&&(g["--SF-color-tag-background"]=a.tags.backgroundColor);a.tags.textColor&&CSS.supports("color",a.tags.textColor)&&(g["--SF-color-tag-text"]=a.tags.textColor);a.states.errorColor&&CSS.supports("color",
a.states.errorColor)&&(g["--SF-color-error"]=a.states.errorColor);a.states.warnColor&&CSS.supports("color",a.states.warnColor)&&(g["--SF-color-warn"]=a.states.warnColor);a.states.highlightColor&&CSS.supports("color",a.states.highlightColor)&&(g["--SF-color-highlight"]=a.states.highlightColor);a.states.outlineColor&&CSS.supports("color",a.states.outlineColor)&&(g["--SF-color-outline"]=a.states.outlineColor);a.site.fontSize&&CSS.supports("font-size",a.site.fontSize)&&(SF.$("SFctr").style.fontSize=a.site.fontSize,
SF.$("SFhdr")&&(SF.$("SFhdr").style.fontSize=a.site.fontSize));for(h in g)document.body.style.setProperty(h,g[h]);SF.modCss.initialized=!0}};
SF._re=805;SF.init(false);

}
